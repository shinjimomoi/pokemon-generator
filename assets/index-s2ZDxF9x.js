(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function sD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oD={exports:{}},b_={},aD={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm=Symbol.for("react.element"),r6=Symbol.for("react.portal"),s6=Symbol.for("react.fragment"),o6=Symbol.for("react.strict_mode"),a6=Symbol.for("react.profiler"),l6=Symbol.for("react.provider"),u6=Symbol.for("react.context"),c6=Symbol.for("react.forward_ref"),d6=Symbol.for("react.suspense"),h6=Symbol.for("react.memo"),f6=Symbol.for("react.lazy"),sk=Symbol.iterator;function p6(t){return t===null||typeof t!="object"?null:(t=sk&&t[sk]||t["@@iterator"],typeof t=="function"?t:null)}var lD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uD=Object.assign,cD={};function Pd(t,e,n){this.props=t,this.context=e,this.refs=cD,this.updater=n||lD}Pd.prototype.isReactComponent={};Pd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dD(){}dD.prototype=Pd.prototype;function vT(t,e,n){this.props=t,this.context=e,this.refs=cD,this.updater=n||lD}var yT=vT.prototype=new dD;yT.constructor=vT;uD(yT,Pd.prototype);yT.isPureReactComponent=!0;var ok=Array.isArray,hD=Object.prototype.hasOwnProperty,_T={current:null},fD={key:!0,ref:!0,__self:!0,__source:!0};function pD(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)hD.call(e,i)&&!fD.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:fm,type:t,key:o,ref:a,props:r,_owner:_T.current}}function m6(t,e){return{$$typeof:fm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wT(t){return typeof t=="object"&&t!==null&&t.$$typeof===fm}function g6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ak=/\/+/g;function hE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g6(""+t.key):e.toString(36)}function jv(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case fm:case r6:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+hE(a,0):i,ok(r)?(n="",t!=null&&(n=t.replace(ak,"$&/")+"/"),jv(r,e,n,"",function(h){return h})):r!=null&&(wT(r)&&(r=m6(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(ak,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",ok(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+hE(o,u);a+=jv(o,e,n,c,r)}else if(c=p6(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+hE(o,u++),a+=jv(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function fv(t,e,n){if(t==null)return t;var i=[],r=0;return jv(t,i,"","",function(o){return e.call(n,o,r++)}),i}function v6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var li={current:null},zv={transition:null},y6={ReactCurrentDispatcher:li,ReactCurrentBatchConfig:zv,ReactCurrentOwner:_T};function mD(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:fv,forEach:function(t,e,n){fv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fv(t,function(){e++}),e},toArray:function(t){return fv(t,function(e){return e})||[]},only:function(t){if(!wT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=Pd;Ve.Fragment=s6;Ve.Profiler=a6;Ve.PureComponent=vT;Ve.StrictMode=o6;Ve.Suspense=d6;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y6;Ve.act=mD;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=uD({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=_T.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)hD.call(e,c)&&!fD.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:fm,type:t.type,key:r,ref:o,props:i,_owner:a}};Ve.createContext=function(t){return t={$$typeof:u6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:l6,_context:t},t.Consumer=t};Ve.createElement=pD;Ve.createFactory=function(t){var e=pD.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:c6,render:t}};Ve.isValidElement=wT;Ve.lazy=function(t){return{$$typeof:f6,_payload:{_status:-1,_result:t},_init:v6}};Ve.memo=function(t,e){return{$$typeof:h6,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=zv.transition;zv.transition={};try{t()}finally{zv.transition=e}};Ve.unstable_act=mD;Ve.useCallback=function(t,e){return li.current.useCallback(t,e)};Ve.useContext=function(t){return li.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return li.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return li.current.useEffect(t,e)};Ve.useId=function(){return li.current.useId()};Ve.useImperativeHandle=function(t,e,n){return li.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return li.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return li.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return li.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return li.current.useReducer(t,e,n)};Ve.useRef=function(t){return li.current.useRef(t)};Ve.useState=function(t){return li.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return li.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return li.current.useTransition()};Ve.version="18.3.1";aD.exports=Ve;var we=aD.exports;const nn=sD(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _6=we,w6=Symbol.for("react.element"),E6=Symbol.for("react.fragment"),I6=Object.prototype.hasOwnProperty,T6=_6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S6={key:!0,ref:!0,__self:!0,__source:!0};function gD(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)I6.call(e,i)&&!S6.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:w6,type:t,key:o,ref:a,props:r,_owner:T6.current}}b_.Fragment=E6;b_.jsx=gD;b_.jsxs=gD;oD.exports=b_;var te=oD.exports,gI={},vD={exports:{}},Gi={},yD={exports:{}},_D={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(se,ue){var he=se.length;se.push(ue);e:for(;0<he;){var Xe=he-1>>>1,Be=se[Xe];if(0<r(Be,ue))se[Xe]=ue,se[he]=Be,he=Xe;else break e}}function n(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var ue=se[0],he=se.pop();if(he!==ue){se[0]=he;e:for(var Xe=0,Be=se.length,ct=Be>>>1;Xe<ct;){var ar=2*(Xe+1)-1,lr=se[ar],ur=ar+1,Dt=se[ur];if(0>r(lr,he))ur<Be&&0>r(Dt,lr)?(se[Xe]=Dt,se[ur]=he,Xe=ur):(se[Xe]=lr,se[ar]=he,Xe=ar);else if(ur<Be&&0>r(Dt,he))se[Xe]=Dt,se[ur]=he,Xe=ur;else break e}}return ue}function r(se,ue){var he=se.sortIndex-ue.sortIndex;return he!==0?he:se.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],h=[],m=1,g=null,_=3,T=!1,P=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(se){for(var ue=n(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=se)i(h),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=n(h)}}function F(se){if(E=!1,k(se),!P)if(n(c)!==null)P=!0,_e(j);else{var ue=n(h);ue!==null&&rt(F,ue.startTime-se)}}function j(se,ue){P=!1,E&&(E=!1,S(C),C=-1),T=!0;var he=_;try{for(k(ue),g=n(c);g!==null&&(!(g.expirationTime>ue)||se&&!O());){var Xe=g.callback;if(typeof Xe=="function"){g.callback=null,_=g.priorityLevel;var Be=Xe(g.expirationTime<=ue);ue=t.unstable_now(),typeof Be=="function"?g.callback=Be:g===n(c)&&i(c),k(ue)}else i(c);g=n(c)}if(g!==null)var ct=!0;else{var ar=n(h);ar!==null&&rt(F,ar.startTime-ue),ct=!1}return ct}finally{g=null,_=he,T=!1}}var B=!1,N=null,C=-1,L=5,V=-1;function O(){return!(t.unstable_now()-V<L)}function U(){if(N!==null){var se=t.unstable_now();V=se;var ue=!0;try{ue=N(!0,se)}finally{ue?D():(B=!1,N=null)}}else B=!1}var D;if(typeof b=="function")D=function(){b(U)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,Re=Ge.port2;Ge.port1.onmessage=U,D=function(){Re.postMessage(null)}}else D=function(){R(U,0)};function _e(se){N=se,B||(B=!0,D())}function rt(se,ue){C=R(function(){se(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,_e(j))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(se){switch(_){case 1:case 2:case 3:var ue=3;break;default:ue=_}var he=_;_=ue;try{return se()}finally{_=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,ue){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var he=_;_=se;try{return ue()}finally{_=he}},t.unstable_scheduleCallback=function(se,ue,he){var Xe=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Xe+he:Xe):he=Xe,se){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=he+Be,se={id:m++,callback:ue,priorityLevel:se,startTime:he,expirationTime:Be,sortIndex:-1},he>Xe?(se.sortIndex=he,e(h,se),n(c)===null&&se===n(h)&&(E?(S(C),C=-1):E=!0,rt(F,he-Xe))):(se.sortIndex=Be,e(c,se),P||T||(P=!0,_e(j))),se},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(se){var ue=_;return function(){var he=_;_=ue;try{return se.apply(this,arguments)}finally{_=he}}}})(_D);yD.exports=_D;var b6=yD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C6=we,ji=b6;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wD=new Set,gp={};function Jl(t,e){ed(t,e),ed(t+"Capture",e)}function ed(t,e){for(gp[t]=e,t=0;t<e.length;t++)wD.add(e[t])}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vI=Object.prototype.hasOwnProperty,A6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lk={},uk={};function P6(t){return vI.call(uk,t)?!0:vI.call(lk,t)?!1:A6.test(t)?uk[t]=!0:(lk[t]=!0,!1)}function R6(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function k6(t,e,n,i){if(e===null||typeof e>"u"||R6(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ui(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Un[t]=new ui(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Un[e]=new ui(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Un[t]=new ui(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Un[t]=new ui(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Un[t]=new ui(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Un[t]=new ui(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Un[t]=new ui(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Un[t]=new ui(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Un[t]=new ui(t,5,!1,t.toLowerCase(),null,!1,!1)});var ET=/[\-:]([a-z])/g;function IT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ET,IT);Un[e]=new ui(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ET,IT);Un[e]=new ui(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ET,IT);Un[e]=new ui(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Un[t]=new ui(t,1,!1,t.toLowerCase(),null,!1,!1)});Un.xlinkHref=new ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Un[t]=new ui(t,1,!1,t.toLowerCase(),null,!0,!0)});function TT(t,e,n,i){var r=Un.hasOwnProperty(e)?Un[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(k6(e,n,r,i)&&(n=null),i||r===null?P6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var so=C6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pv=Symbol.for("react.element"),bc=Symbol.for("react.portal"),Cc=Symbol.for("react.fragment"),ST=Symbol.for("react.strict_mode"),yI=Symbol.for("react.profiler"),ED=Symbol.for("react.provider"),ID=Symbol.for("react.context"),bT=Symbol.for("react.forward_ref"),_I=Symbol.for("react.suspense"),wI=Symbol.for("react.suspense_list"),CT=Symbol.for("react.memo"),Bo=Symbol.for("react.lazy"),TD=Symbol.for("react.offscreen"),ck=Symbol.iterator;function df(t){return t===null||typeof t!="object"?null:(t=ck&&t[ck]||t["@@iterator"],typeof t=="function"?t:null)}var Nt=Object.assign,fE;function Nf(t){if(fE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fE=e&&e[1]||""}return`
`+fE+t}var pE=!1;function mE(t,e){if(!t||pE)return"";pE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{pE=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nf(t):""}function x6(t){switch(t.tag){case 5:return Nf(t.type);case 16:return Nf("Lazy");case 13:return Nf("Suspense");case 19:return Nf("SuspenseList");case 0:case 2:case 15:return t=mE(t.type,!1),t;case 11:return t=mE(t.type.render,!1),t;case 1:return t=mE(t.type,!0),t;default:return""}}function EI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cc:return"Fragment";case bc:return"Portal";case yI:return"Profiler";case ST:return"StrictMode";case _I:return"Suspense";case wI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ID:return(t.displayName||"Context")+".Consumer";case ED:return(t._context.displayName||"Context")+".Provider";case bT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case CT:return e=t.displayName||null,e!==null?e:EI(t.type)||"Memo";case Bo:e=t._payload,t=t._init;try{return EI(t(e))}catch{}}return null}function N6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return EI(e);case 8:return e===ST?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ca(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function D6(t){var e=SD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mv(t){t._valueTracker||(t._valueTracker=D6(t))}function bD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=SD(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function vy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function II(t,e){var n=e.checked;return Nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dk(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ca(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CD(t,e){e=e.checked,e!=null&&TT(t,"checked",e,!1)}function TI(t,e){CD(t,e);var n=ca(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?SI(t,e.type,n):e.hasOwnProperty("defaultValue")&&SI(t,e.type,ca(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function SI(t,e,n){(e!=="number"||vy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Df=Array.isArray;function Uc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ca(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function bI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Df(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ca(n)}}function AD(t,e){var n=ca(e.value),i=ca(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function pk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function CI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gv,RD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gv=gv||document.createElement("div"),gv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O6=["Webkit","ms","Moz","O"];Object.keys(qf).forEach(function(t){O6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qf[e]=qf[t]})});function kD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qf.hasOwnProperty(t)&&qf[t]?(""+e).trim():e+"px"}function xD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=kD(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var L6=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function AI(t,e){if(e){if(L6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function PI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RI=null;function AT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kI=null,Bc=null,jc=null;function mk(t){if(t=gm(t)){if(typeof kI!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=k_(e),kI(t.stateNode,t.type,e))}}function ND(t){Bc?jc?jc.push(t):jc=[t]:Bc=t}function DD(){if(Bc){var t=Bc,e=jc;if(jc=Bc=null,mk(t),e)for(t=0;t<e.length;t++)mk(e[t])}}function OD(t,e){return t(e)}function LD(){}var gE=!1;function MD(t,e,n){if(gE)return t(e,n);gE=!0;try{return OD(t,e,n)}finally{gE=!1,(Bc!==null||jc!==null)&&(LD(),DD())}}function yp(t,e){var n=t.stateNode;if(n===null)return null;var i=k_(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var xI=!1;if(Ys)try{var hf={};Object.defineProperty(hf,"passive",{get:function(){xI=!0}}),window.addEventListener("test",hf,hf),window.removeEventListener("test",hf,hf)}catch{xI=!1}function M6(t,e,n,i,r,o,a,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var $f=!1,yy=null,_y=!1,NI=null,V6={onError:function(t){$f=!0,yy=t}};function F6(t,e,n,i,r,o,a,u,c){$f=!1,yy=null,M6.apply(V6,arguments)}function U6(t,e,n,i,r,o,a,u,c){if(F6.apply(this,arguments),$f){if($f){var h=yy;$f=!1,yy=null}else throw Error(Z(198));_y||(_y=!0,NI=h)}}function Xl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gk(t){if(Xl(t)!==t)throw Error(Z(188))}function B6(t){var e=t.alternate;if(!e){if(e=Xl(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return gk(r),t;if(o===i)return gk(r),e;o=o.sibling}throw Error(Z(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(Z(189))}}if(n.alternate!==i)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function FD(t){return t=B6(t),t!==null?UD(t):null}function UD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UD(t);if(e!==null)return e;t=t.sibling}return null}var BD=ji.unstable_scheduleCallback,vk=ji.unstable_cancelCallback,j6=ji.unstable_shouldYield,z6=ji.unstable_requestPaint,Ht=ji.unstable_now,G6=ji.unstable_getCurrentPriorityLevel,PT=ji.unstable_ImmediatePriority,jD=ji.unstable_UserBlockingPriority,wy=ji.unstable_NormalPriority,q6=ji.unstable_LowPriority,zD=ji.unstable_IdlePriority,C_=null,ds=null;function $6(t){if(ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(C_,t,void 0,(t.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:K6,W6=Math.log,H6=Math.LN2;function K6(t){return t>>>=0,t===0?32:31-(W6(t)/H6|0)|0}var vv=64,yv=4194304;function Of(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ey(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Of(u):(o&=a,o!==0&&(i=Of(o)))}else a=n&~r,a!==0?i=Of(a):o!==0&&(i=Of(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-kr(e),r=1<<n,i|=t[n],e&=~r;return i}function Q6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y6(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-kr(o),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=Q6(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function DI(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function GD(){var t=vv;return vv<<=1,!(vv&4194240)&&(vv=64),t}function vE(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kr(e),t[e]=n}function J6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-kr(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function RT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-kr(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var tt=0;function qD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $D,kT,WD,HD,KD,OI=!1,_v=[],Xo=null,Zo=null,ea=null,_p=new Map,wp=new Map,zo=[],X6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yk(t,e){switch(t){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":_p.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wp.delete(e.pointerId)}}function ff(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=gm(e),e!==null&&kT(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Z6(t,e,n,i,r){switch(e){case"focusin":return Xo=ff(Xo,t,e,n,i,r),!0;case"dragenter":return Zo=ff(Zo,t,e,n,i,r),!0;case"mouseover":return ea=ff(ea,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return _p.set(o,ff(_p.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,wp.set(o,ff(wp.get(o)||null,t,e,n,i,r)),!0}return!1}function QD(t){var e=fl(t.target);if(e!==null){var n=Xl(e);if(n!==null){if(e=n.tag,e===13){if(e=VD(n),e!==null){t.blockedOn=e,KD(t.priority,function(){WD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=LI(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);RI=i,n.target.dispatchEvent(i),RI=null}else return e=gm(n),e!==null&&kT(e),t.blockedOn=n,!1;e.shift()}return!0}function _k(t,e,n){Gv(t)&&n.delete(e)}function e9(){OI=!1,Xo!==null&&Gv(Xo)&&(Xo=null),Zo!==null&&Gv(Zo)&&(Zo=null),ea!==null&&Gv(ea)&&(ea=null),_p.forEach(_k),wp.forEach(_k)}function pf(t,e){t.blockedOn===e&&(t.blockedOn=null,OI||(OI=!0,ji.unstable_scheduleCallback(ji.unstable_NormalPriority,e9)))}function Ep(t){function e(r){return pf(r,t)}if(0<_v.length){pf(_v[0],t);for(var n=1;n<_v.length;n++){var i=_v[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Xo!==null&&pf(Xo,t),Zo!==null&&pf(Zo,t),ea!==null&&pf(ea,t),_p.forEach(e),wp.forEach(e),n=0;n<zo.length;n++)i=zo[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<zo.length&&(n=zo[0],n.blockedOn===null);)QD(n),n.blockedOn===null&&zo.shift()}var zc=so.ReactCurrentBatchConfig,Iy=!0;function t9(t,e,n,i){var r=tt,o=zc.transition;zc.transition=null;try{tt=1,xT(t,e,n,i)}finally{tt=r,zc.transition=o}}function n9(t,e,n,i){var r=tt,o=zc.transition;zc.transition=null;try{tt=4,xT(t,e,n,i)}finally{tt=r,zc.transition=o}}function xT(t,e,n,i){if(Iy){var r=LI(t,e,n,i);if(r===null)AE(t,e,i,Ty,n),yk(t,i);else if(Z6(r,t,e,n,i))i.stopPropagation();else if(yk(t,i),e&4&&-1<X6.indexOf(t)){for(;r!==null;){var o=gm(r);if(o!==null&&$D(o),o=LI(t,e,n,i),o===null&&AE(t,e,i,Ty,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else AE(t,e,i,null,n)}}var Ty=null;function LI(t,e,n,i){if(Ty=null,t=AT(i),t=fl(t),t!==null)if(e=Xl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ty=t,null}function YD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G6()){case PT:return 1;case jD:return 4;case wy:case q6:return 16;case zD:return 536870912;default:return 16}default:return 16}}var Wo=null,NT=null,qv=null;function JD(){if(qv)return qv;var t,e=NT,n=e.length,i,r="value"in Wo?Wo.value:Wo.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return qv=r.slice(t,1<i?1-i:void 0)}function $v(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wv(){return!0}function wk(){return!1}function qi(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wv:wk,this.isPropagationStopped=wk,this}return Nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wv)},persist:function(){},isPersistent:wv}),e}var Rd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DT=qi(Rd),mm=Nt({},Rd,{view:0,detail:0}),i9=qi(mm),yE,_E,mf,A_=Nt({},mm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mf&&(mf&&t.type==="mousemove"?(yE=t.screenX-mf.screenX,_E=t.screenY-mf.screenY):_E=yE=0,mf=t),yE)},movementY:function(t){return"movementY"in t?t.movementY:_E}}),Ek=qi(A_),r9=Nt({},A_,{dataTransfer:0}),s9=qi(r9),o9=Nt({},mm,{relatedTarget:0}),wE=qi(o9),a9=Nt({},Rd,{animationName:0,elapsedTime:0,pseudoElement:0}),l9=qi(a9),u9=Nt({},Rd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),c9=qi(u9),d9=Nt({},Rd,{data:0}),Ik=qi(d9),h9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=p9[t])?!!e[t]:!1}function OT(){return m9}var g9=Nt({},mm,{key:function(t){if(t.key){var e=h9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$v(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?f9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OT,charCode:function(t){return t.type==="keypress"?$v(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$v(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),v9=qi(g9),y9=Nt({},A_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tk=qi(y9),_9=Nt({},mm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OT}),w9=qi(_9),E9=Nt({},Rd,{propertyName:0,elapsedTime:0,pseudoElement:0}),I9=qi(E9),T9=Nt({},A_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S9=qi(T9),b9=[9,13,27,32],LT=Ys&&"CompositionEvent"in window,Wf=null;Ys&&"documentMode"in document&&(Wf=document.documentMode);var C9=Ys&&"TextEvent"in window&&!Wf,XD=Ys&&(!LT||Wf&&8<Wf&&11>=Wf),Sk=" ",bk=!1;function ZD(t,e){switch(t){case"keyup":return b9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ac=!1;function A9(t,e){switch(t){case"compositionend":return eO(e);case"keypress":return e.which!==32?null:(bk=!0,Sk);case"textInput":return t=e.data,t===Sk&&bk?null:t;default:return null}}function P9(t,e){if(Ac)return t==="compositionend"||!LT&&ZD(t,e)?(t=JD(),qv=NT=Wo=null,Ac=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XD&&e.locale!=="ko"?null:e.data;default:return null}}var R9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ck(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!R9[t.type]:e==="textarea"}function tO(t,e,n,i){ND(i),e=Sy(e,"onChange"),0<e.length&&(n=new DT("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Hf=null,Ip=null;function k9(t){hO(t,0)}function P_(t){var e=kc(t);if(bD(e))return t}function x9(t,e){if(t==="change")return e}var nO=!1;if(Ys){var EE;if(Ys){var IE="oninput"in document;if(!IE){var Ak=document.createElement("div");Ak.setAttribute("oninput","return;"),IE=typeof Ak.oninput=="function"}EE=IE}else EE=!1;nO=EE&&(!document.documentMode||9<document.documentMode)}function Pk(){Hf&&(Hf.detachEvent("onpropertychange",iO),Ip=Hf=null)}function iO(t){if(t.propertyName==="value"&&P_(Ip)){var e=[];tO(e,Ip,t,AT(t)),MD(k9,e)}}function N9(t,e,n){t==="focusin"?(Pk(),Hf=e,Ip=n,Hf.attachEvent("onpropertychange",iO)):t==="focusout"&&Pk()}function D9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return P_(Ip)}function O9(t,e){if(t==="click")return P_(e)}function L9(t,e){if(t==="input"||t==="change")return P_(e)}function M9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Or=typeof Object.is=="function"?Object.is:M9;function Tp(t,e){if(Or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!vI.call(e,r)||!Or(t[r],e[r]))return!1}return!0}function Rk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kk(t,e){var n=Rk(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rk(n)}}function rO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sO(){for(var t=window,e=vy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vy(t.document)}return e}function MT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function V9(t){var e=sO(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rO(n.ownerDocument.documentElement,n)){if(i!==null&&MT(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=kk(n,o);var a=kk(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F9=Ys&&"documentMode"in document&&11>=document.documentMode,Pc=null,MI=null,Kf=null,VI=!1;function xk(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;VI||Pc==null||Pc!==vy(i)||(i=Pc,"selectionStart"in i&&MT(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Kf&&Tp(Kf,i)||(Kf=i,i=Sy(MI,"onSelect"),0<i.length&&(e=new DT("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Pc)))}function Ev(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rc={animationend:Ev("Animation","AnimationEnd"),animationiteration:Ev("Animation","AnimationIteration"),animationstart:Ev("Animation","AnimationStart"),transitionend:Ev("Transition","TransitionEnd")},TE={},oO={};Ys&&(oO=document.createElement("div").style,"AnimationEvent"in window||(delete Rc.animationend.animation,delete Rc.animationiteration.animation,delete Rc.animationstart.animation),"TransitionEvent"in window||delete Rc.transitionend.transition);function R_(t){if(TE[t])return TE[t];if(!Rc[t])return t;var e=Rc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oO)return TE[t]=e[n];return t}var aO=R_("animationend"),lO=R_("animationiteration"),uO=R_("animationstart"),cO=R_("transitionend"),dO=new Map,Nk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ba(t,e){dO.set(t,e),Jl(e,[t])}for(var SE=0;SE<Nk.length;SE++){var bE=Nk[SE],U9=bE.toLowerCase(),B9=bE[0].toUpperCase()+bE.slice(1);ba(U9,"on"+B9)}ba(aO,"onAnimationEnd");ba(lO,"onAnimationIteration");ba(uO,"onAnimationStart");ba("dblclick","onDoubleClick");ba("focusin","onFocus");ba("focusout","onBlur");ba(cO,"onTransitionEnd");ed("onMouseEnter",["mouseout","mouseover"]);ed("onMouseLeave",["mouseout","mouseover"]);ed("onPointerEnter",["pointerout","pointerover"]);ed("onPointerLeave",["pointerout","pointerover"]);Jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lf));function Dk(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,U6(i,e,void 0,t),t.currentTarget=null}function hO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;Dk(r,u,h),o=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,h=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;Dk(r,u,h),o=c}}}if(_y)throw t=NI,_y=!1,NI=null,t}function ft(t,e){var n=e[zI];n===void 0&&(n=e[zI]=new Set);var i=t+"__bubble";n.has(i)||(fO(e,t,2,!1),n.add(i))}function CE(t,e,n){var i=0;e&&(i|=4),fO(n,t,i,e)}var Iv="_reactListening"+Math.random().toString(36).slice(2);function Sp(t){if(!t[Iv]){t[Iv]=!0,wD.forEach(function(n){n!=="selectionchange"&&(j9.has(n)||CE(n,!1,t),CE(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Iv]||(e[Iv]=!0,CE("selectionchange",!1,e))}}function fO(t,e,n,i){switch(YD(e)){case 1:var r=t9;break;case 4:r=n9;break;default:r=xT}n=r.bind(null,e,n,t),r=void 0,!xI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function AE(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=fl(u),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}u=u.parentNode}}i=i.return}MD(function(){var h=o,m=AT(n),g=[];e:{var _=dO.get(t);if(_!==void 0){var T=DT,P=t;switch(t){case"keypress":if($v(n)===0)break e;case"keydown":case"keyup":T=v9;break;case"focusin":P="focus",T=wE;break;case"focusout":P="blur",T=wE;break;case"beforeblur":case"afterblur":T=wE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Ek;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=s9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=w9;break;case aO:case lO:case uO:T=l9;break;case cO:T=I9;break;case"scroll":T=i9;break;case"wheel":T=S9;break;case"copy":case"cut":case"paste":T=c9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Tk}var E=(e&4)!==0,R=!E&&t==="scroll",S=E?_!==null?_+"Capture":null:_;E=[];for(var b=h,k;b!==null;){k=b;var F=k.stateNode;if(k.tag===5&&F!==null&&(k=F,S!==null&&(F=yp(b,S),F!=null&&E.push(bp(b,F,k)))),R)break;b=b.return}0<E.length&&(_=new T(_,P,null,n,m),g.push({event:_,listeners:E}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&n!==RI&&(P=n.relatedTarget||n.fromElement)&&(fl(P)||P[Js]))break e;if((T||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=h,P=P?fl(P):null,P!==null&&(R=Xl(P),P!==R||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=h),T!==P)){if(E=Ek,F="onMouseLeave",S="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(E=Tk,F="onPointerLeave",S="onPointerEnter",b="pointer"),R=T==null?_:kc(T),k=P==null?_:kc(P),_=new E(F,b+"leave",T,n,m),_.target=R,_.relatedTarget=k,F=null,fl(m)===h&&(E=new E(S,b+"enter",P,n,m),E.target=k,E.relatedTarget=R,F=E),R=F,T&&P)t:{for(E=T,S=P,b=0,k=E;k;k=fc(k))b++;for(k=0,F=S;F;F=fc(F))k++;for(;0<b-k;)E=fc(E),b--;for(;0<k-b;)S=fc(S),k--;for(;b--;){if(E===S||S!==null&&E===S.alternate)break t;E=fc(E),S=fc(S)}E=null}else E=null;T!==null&&Ok(g,_,T,E,!1),P!==null&&R!==null&&Ok(g,R,P,E,!0)}}e:{if(_=h?kc(h):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var j=x9;else if(Ck(_))if(nO)j=L9;else{j=D9;var B=N9}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(j=O9);if(j&&(j=j(t,h))){tO(g,j,n,m);break e}B&&B(t,_,h),t==="focusout"&&(B=_._wrapperState)&&B.controlled&&_.type==="number"&&SI(_,"number",_.value)}switch(B=h?kc(h):window,t){case"focusin":(Ck(B)||B.contentEditable==="true")&&(Pc=B,MI=h,Kf=null);break;case"focusout":Kf=MI=Pc=null;break;case"mousedown":VI=!0;break;case"contextmenu":case"mouseup":case"dragend":VI=!1,xk(g,n,m);break;case"selectionchange":if(F9)break;case"keydown":case"keyup":xk(g,n,m)}var N;if(LT)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ac?ZD(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(XD&&n.locale!=="ko"&&(Ac||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ac&&(N=JD()):(Wo=m,NT="value"in Wo?Wo.value:Wo.textContent,Ac=!0)),B=Sy(h,C),0<B.length&&(C=new Ik(C,t,null,n,m),g.push({event:C,listeners:B}),N?C.data=N:(N=eO(n),N!==null&&(C.data=N)))),(N=C9?A9(t,n):P9(t,n))&&(h=Sy(h,"onBeforeInput"),0<h.length&&(m=new Ik("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:h}),m.data=N))}hO(g,e)})}function bp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sy(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=yp(t,n),o!=null&&i.unshift(bp(t,o,r)),o=yp(t,e),o!=null&&i.push(bp(t,o,r))),t=t.return}return i}function fc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ok(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&h!==null&&(u=h,r?(c=yp(n,o),c!=null&&a.unshift(bp(n,c,u))):r||(c=yp(n,o),c!=null&&a.push(bp(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var z9=/\r\n?/g,G9=/\u0000|\uFFFD/g;function Lk(t){return(typeof t=="string"?t:""+t).replace(z9,`
`).replace(G9,"")}function Tv(t,e,n){if(e=Lk(e),Lk(t)!==e&&n)throw Error(Z(425))}function by(){}var FI=null,UI=null;function BI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jI=typeof setTimeout=="function"?setTimeout:void 0,q9=typeof clearTimeout=="function"?clearTimeout:void 0,Mk=typeof Promise=="function"?Promise:void 0,$9=typeof queueMicrotask=="function"?queueMicrotask:typeof Mk<"u"?function(t){return Mk.resolve(null).then(t).catch(W9)}:jI;function W9(t){setTimeout(function(){throw t})}function PE(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ep(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ep(e)}function ta(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kd=Math.random().toString(36).slice(2),ns="__reactFiber$"+kd,Cp="__reactProps$"+kd,Js="__reactContainer$"+kd,zI="__reactEvents$"+kd,H9="__reactListeners$"+kd,K9="__reactHandles$"+kd;function fl(t){var e=t[ns];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Js]||n[ns]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vk(t);t!==null;){if(n=t[ns])return n;t=Vk(t)}return e}t=n,n=t.parentNode}return null}function gm(t){return t=t[ns]||t[Js],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function k_(t){return t[Cp]||null}var GI=[],xc=-1;function Ca(t){return{current:t}}function gt(t){0>xc||(t.current=GI[xc],GI[xc]=null,xc--)}function lt(t,e){xc++,GI[xc]=t.current,t.current=e}var da={},Kn=Ca(da),Ii=Ca(!1),Pl=da;function td(t,e){var n=t.type.contextTypes;if(!n)return da;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ti(t){return t=t.childContextTypes,t!=null}function Cy(){gt(Ii),gt(Kn)}function Fk(t,e,n){if(Kn.current!==da)throw Error(Z(168));lt(Kn,e),lt(Ii,n)}function pO(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Z(108,N6(t)||"Unknown",r));return Nt({},n,i)}function Ay(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||da,Pl=Kn.current,lt(Kn,t),lt(Ii,Ii.current),!0}function Uk(t,e,n){var i=t.stateNode;if(!i)throw Error(Z(169));n?(t=pO(t,e,Pl),i.__reactInternalMemoizedMergedChildContext=t,gt(Ii),gt(Kn),lt(Kn,t)):gt(Ii),lt(Ii,n)}var Us=null,x_=!1,RE=!1;function mO(t){Us===null?Us=[t]:Us.push(t)}function Q9(t){x_=!0,mO(t)}function Aa(){if(!RE&&Us!==null){RE=!0;var t=0,e=tt;try{var n=Us;for(tt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Us=null,x_=!1}catch(r){throw Us!==null&&(Us=Us.slice(t+1)),BD(PT,Aa),r}finally{tt=e,RE=!1}}return null}var Nc=[],Dc=0,Py=null,Ry=0,Ji=[],Xi=0,Rl=null,Bs=1,js="";function il(t,e){Nc[Dc++]=Ry,Nc[Dc++]=Py,Py=t,Ry=e}function gO(t,e,n){Ji[Xi++]=Bs,Ji[Xi++]=js,Ji[Xi++]=Rl,Rl=t;var i=Bs;t=js;var r=32-kr(i)-1;i&=~(1<<r),n+=1;var o=32-kr(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Bs=1<<32-kr(e)+r|n<<r|i,js=o+t}else Bs=1<<o|n<<r|i,js=t}function VT(t){t.return!==null&&(il(t,1),gO(t,1,0))}function FT(t){for(;t===Py;)Py=Nc[--Dc],Nc[Dc]=null,Ry=Nc[--Dc],Nc[Dc]=null;for(;t===Rl;)Rl=Ji[--Xi],Ji[Xi]=null,js=Ji[--Xi],Ji[Xi]=null,Bs=Ji[--Xi],Ji[Xi]=null}var Ui=null,Vi=null,wt=!1,Cr=null;function vO(t,e){var n=Zi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ui=t,Vi=ta(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ui=t,Vi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rl!==null?{id:Bs,overflow:js}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ui=t,Vi=null,!0):!1;default:return!1}}function qI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $I(t){if(wt){var e=Vi;if(e){var n=e;if(!Bk(t,e)){if(qI(t))throw Error(Z(418));e=ta(n.nextSibling);var i=Ui;e&&Bk(t,e)?vO(i,n):(t.flags=t.flags&-4097|2,wt=!1,Ui=t)}}else{if(qI(t))throw Error(Z(418));t.flags=t.flags&-4097|2,wt=!1,Ui=t}}}function jk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ui=t}function Sv(t){if(t!==Ui)return!1;if(!wt)return jk(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!BI(t.type,t.memoizedProps)),e&&(e=Vi)){if(qI(t))throw yO(),Error(Z(418));for(;e;)vO(t,e),e=ta(e.nextSibling)}if(jk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vi=ta(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vi=null}}else Vi=Ui?ta(t.stateNode.nextSibling):null;return!0}function yO(){for(var t=Vi;t;)t=ta(t.nextSibling)}function nd(){Vi=Ui=null,wt=!1}function UT(t){Cr===null?Cr=[t]:Cr.push(t)}var Y9=so.ReactCurrentBatchConfig;function gf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var i=n.stateNode}if(!i)throw Error(Z(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function bv(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zk(t){var e=t._init;return e(t._payload)}function _O(t){function e(S,b){if(t){var k=S.deletions;k===null?(S.deletions=[b],S.flags|=16):k.push(b)}}function n(S,b){if(!t)return null;for(;b!==null;)e(S,b),b=b.sibling;return null}function i(S,b){for(S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function r(S,b){return S=sa(S,b),S.index=0,S.sibling=null,S}function o(S,b,k){return S.index=k,t?(k=S.alternate,k!==null?(k=k.index,k<b?(S.flags|=2,b):k):(S.flags|=2,b)):(S.flags|=1048576,b)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,b,k,F){return b===null||b.tag!==6?(b=ME(k,S.mode,F),b.return=S,b):(b=r(b,k),b.return=S,b)}function c(S,b,k,F){var j=k.type;return j===Cc?m(S,b,k.props.children,F,k.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Bo&&zk(j)===b.type)?(F=r(b,k.props),F.ref=gf(S,b,k),F.return=S,F):(F=Xv(k.type,k.key,k.props,null,S.mode,F),F.ref=gf(S,b,k),F.return=S,F)}function h(S,b,k,F){return b===null||b.tag!==4||b.stateNode.containerInfo!==k.containerInfo||b.stateNode.implementation!==k.implementation?(b=VE(k,S.mode,F),b.return=S,b):(b=r(b,k.children||[]),b.return=S,b)}function m(S,b,k,F,j){return b===null||b.tag!==7?(b=Il(k,S.mode,F,j),b.return=S,b):(b=r(b,k),b.return=S,b)}function g(S,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ME(""+b,S.mode,k),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pv:return k=Xv(b.type,b.key,b.props,null,S.mode,k),k.ref=gf(S,null,b),k.return=S,k;case bc:return b=VE(b,S.mode,k),b.return=S,b;case Bo:var F=b._init;return g(S,F(b._payload),k)}if(Df(b)||df(b))return b=Il(b,S.mode,k,null),b.return=S,b;bv(S,b)}return null}function _(S,b,k,F){var j=b!==null?b.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return j!==null?null:u(S,b,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case pv:return k.key===j?c(S,b,k,F):null;case bc:return k.key===j?h(S,b,k,F):null;case Bo:return j=k._init,_(S,b,j(k._payload),F)}if(Df(k)||df(k))return j!==null?null:m(S,b,k,F,null);bv(S,k)}return null}function T(S,b,k,F,j){if(typeof F=="string"&&F!==""||typeof F=="number")return S=S.get(k)||null,u(b,S,""+F,j);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case pv:return S=S.get(F.key===null?k:F.key)||null,c(b,S,F,j);case bc:return S=S.get(F.key===null?k:F.key)||null,h(b,S,F,j);case Bo:var B=F._init;return T(S,b,k,B(F._payload),j)}if(Df(F)||df(F))return S=S.get(k)||null,m(b,S,F,j,null);bv(b,F)}return null}function P(S,b,k,F){for(var j=null,B=null,N=b,C=b=0,L=null;N!==null&&C<k.length;C++){N.index>C?(L=N,N=null):L=N.sibling;var V=_(S,N,k[C],F);if(V===null){N===null&&(N=L);break}t&&N&&V.alternate===null&&e(S,N),b=o(V,b,C),B===null?j=V:B.sibling=V,B=V,N=L}if(C===k.length)return n(S,N),wt&&il(S,C),j;if(N===null){for(;C<k.length;C++)N=g(S,k[C],F),N!==null&&(b=o(N,b,C),B===null?j=N:B.sibling=N,B=N);return wt&&il(S,C),j}for(N=i(S,N);C<k.length;C++)L=T(N,S,C,k[C],F),L!==null&&(t&&L.alternate!==null&&N.delete(L.key===null?C:L.key),b=o(L,b,C),B===null?j=L:B.sibling=L,B=L);return t&&N.forEach(function(O){return e(S,O)}),wt&&il(S,C),j}function E(S,b,k,F){var j=df(k);if(typeof j!="function")throw Error(Z(150));if(k=j.call(k),k==null)throw Error(Z(151));for(var B=j=null,N=b,C=b=0,L=null,V=k.next();N!==null&&!V.done;C++,V=k.next()){N.index>C?(L=N,N=null):L=N.sibling;var O=_(S,N,V.value,F);if(O===null){N===null&&(N=L);break}t&&N&&O.alternate===null&&e(S,N),b=o(O,b,C),B===null?j=O:B.sibling=O,B=O,N=L}if(V.done)return n(S,N),wt&&il(S,C),j;if(N===null){for(;!V.done;C++,V=k.next())V=g(S,V.value,F),V!==null&&(b=o(V,b,C),B===null?j=V:B.sibling=V,B=V);return wt&&il(S,C),j}for(N=i(S,N);!V.done;C++,V=k.next())V=T(N,S,C,V.value,F),V!==null&&(t&&V.alternate!==null&&N.delete(V.key===null?C:V.key),b=o(V,b,C),B===null?j=V:B.sibling=V,B=V);return t&&N.forEach(function(U){return e(S,U)}),wt&&il(S,C),j}function R(S,b,k,F){if(typeof k=="object"&&k!==null&&k.type===Cc&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case pv:e:{for(var j=k.key,B=b;B!==null;){if(B.key===j){if(j=k.type,j===Cc){if(B.tag===7){n(S,B.sibling),b=r(B,k.props.children),b.return=S,S=b;break e}}else if(B.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Bo&&zk(j)===B.type){n(S,B.sibling),b=r(B,k.props),b.ref=gf(S,B,k),b.return=S,S=b;break e}n(S,B);break}else e(S,B);B=B.sibling}k.type===Cc?(b=Il(k.props.children,S.mode,F,k.key),b.return=S,S=b):(F=Xv(k.type,k.key,k.props,null,S.mode,F),F.ref=gf(S,b,k),F.return=S,S=F)}return a(S);case bc:e:{for(B=k.key;b!==null;){if(b.key===B)if(b.tag===4&&b.stateNode.containerInfo===k.containerInfo&&b.stateNode.implementation===k.implementation){n(S,b.sibling),b=r(b,k.children||[]),b.return=S,S=b;break e}else{n(S,b);break}else e(S,b);b=b.sibling}b=VE(k,S.mode,F),b.return=S,S=b}return a(S);case Bo:return B=k._init,R(S,b,B(k._payload),F)}if(Df(k))return P(S,b,k,F);if(df(k))return E(S,b,k,F);bv(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,b!==null&&b.tag===6?(n(S,b.sibling),b=r(b,k),b.return=S,S=b):(n(S,b),b=ME(k,S.mode,F),b.return=S,S=b),a(S)):n(S,b)}return R}var id=_O(!0),wO=_O(!1),ky=Ca(null),xy=null,Oc=null,BT=null;function jT(){BT=Oc=xy=null}function zT(t){var e=ky.current;gt(ky),t._currentValue=e}function WI(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Gc(t,e){xy=t,BT=Oc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yi=!0),t.firstContext=null)}function rr(t){var e=t._currentValue;if(BT!==t)if(t={context:t,memoizedValue:e,next:null},Oc===null){if(xy===null)throw Error(Z(308));Oc=t,xy.dependencies={lanes:0,firstContext:t}}else Oc=Oc.next=t;return e}var pl=null;function GT(t){pl===null?pl=[t]:pl.push(t)}function EO(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,GT(e)):(n.next=r.next,r.next=n),e.interleaved=n,Xs(t,i)}function Xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jo=!1;function qT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function na(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,$e&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Xs(t,n)}return r=i.interleaved,r===null?(e.next=e,GT(i)):(e.next=r.next,r.next=e),i.interleaved=e,Xs(t,n)}function Wv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,RT(t,n)}}function Gk(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ny(t,e,n,i){var r=t.updateQueue;jo=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,h=c.next;c.next=null,a===null?o=h:a.next=h,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(o!==null){var g=r.baseState;a=0,m=h=c=null,u=o;do{var _=u.lane,T=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:T,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=t,E=u;switch(_=e,T=n,E.tag){case 1:if(P=E.payload,typeof P=="function"){g=P.call(T,g,_);break e}g=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=E.payload,_=typeof P=="function"?P.call(T,g,_):P,_==null)break e;g=Nt({},g,_);break e;case 2:jo=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else T={eventTime:T,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=T,c=g):m=m.next=T,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(c=g),r.baseState=c,r.firstBaseUpdate=h,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);xl|=a,t.lanes=a,t.memoizedState=g}}function qk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Z(191,r));r.call(i)}}}var vm={},hs=Ca(vm),Ap=Ca(vm),Pp=Ca(vm);function ml(t){if(t===vm)throw Error(Z(174));return t}function $T(t,e){switch(lt(Pp,e),lt(Ap,t),lt(hs,vm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:CI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=CI(e,t)}gt(hs),lt(hs,e)}function rd(){gt(hs),gt(Ap),gt(Pp)}function TO(t){ml(Pp.current);var e=ml(hs.current),n=CI(e,t.type);e!==n&&(lt(Ap,t),lt(hs,n))}function WT(t){Ap.current===t&&(gt(hs),gt(Ap))}var Pt=Ca(0);function Dy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kE=[];function HT(){for(var t=0;t<kE.length;t++)kE[t]._workInProgressVersionPrimary=null;kE.length=0}var Hv=so.ReactCurrentDispatcher,xE=so.ReactCurrentBatchConfig,kl=0,Rt=null,un=null,In=null,Oy=!1,Qf=!1,Rp=0,J9=0;function Gn(){throw Error(Z(321))}function KT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Or(t[n],e[n]))return!1;return!0}function QT(t,e,n,i,r,o){if(kl=o,Rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hv.current=t===null||t.memoizedState===null?tB:nB,t=n(i,r),Qf){o=0;do{if(Qf=!1,Rp=0,25<=o)throw Error(Z(301));o+=1,In=un=null,e.updateQueue=null,Hv.current=iB,t=n(i,r)}while(Qf)}if(Hv.current=Ly,e=un!==null&&un.next!==null,kl=0,In=un=Rt=null,Oy=!1,e)throw Error(Z(300));return t}function YT(){var t=Rp!==0;return Rp=0,t}function ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Rt.memoizedState=In=t:In=In.next=t,In}function sr(){if(un===null){var t=Rt.alternate;t=t!==null?t.memoizedState:null}else t=un.next;var e=In===null?Rt.memoizedState:In.next;if(e!==null)In=e,un=t;else{if(t===null)throw Error(Z(310));un=t,t={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},In===null?Rt.memoizedState=In=t:In=In.next=t}return In}function kp(t,e){return typeof e=="function"?e(t):e}function NE(t){var e=sr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var i=un,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,c=null,h=o;do{var m=h.lane;if((kl&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var g={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,Rt.lanes|=m,xl|=m}h=h.next}while(h!==null&&h!==o);c===null?a=i:c.next=u,Or(i,e.memoizedState)||(yi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Rt.lanes|=o,xl|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function DE(t){var e=sr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Or(o,e.memoizedState)||(yi=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function SO(){}function bO(t,e){var n=Rt,i=sr(),r=e(),o=!Or(i.memoizedState,r);if(o&&(i.memoizedState=r,yi=!0),i=i.queue,JT(PO.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||In!==null&&In.memoizedState.tag&1){if(n.flags|=2048,xp(9,AO.bind(null,n,i,r,e),void 0,null),bn===null)throw Error(Z(349));kl&30||CO(n,e,r)}return r}function CO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Rt.updateQueue,e===null?(e={lastEffect:null,stores:null},Rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AO(t,e,n,i){e.value=n,e.getSnapshot=i,RO(e)&&kO(t)}function PO(t,e,n){return n(function(){RO(e)&&kO(t)})}function RO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Or(t,n)}catch{return!0}}function kO(t){var e=Xs(t,1);e!==null&&xr(e,t,1,-1)}function $k(t){var e=ts();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kp,lastRenderedState:t},e.queue=t,t=t.dispatch=eB.bind(null,Rt,t),[e.memoizedState,t]}function xp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Rt.updateQueue,e===null?(e={lastEffect:null,stores:null},Rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function xO(){return sr().memoizedState}function Kv(t,e,n,i){var r=ts();Rt.flags|=t,r.memoizedState=xp(1|e,n,void 0,i===void 0?null:i)}function N_(t,e,n,i){var r=sr();i=i===void 0?null:i;var o=void 0;if(un!==null){var a=un.memoizedState;if(o=a.destroy,i!==null&&KT(i,a.deps)){r.memoizedState=xp(e,n,o,i);return}}Rt.flags|=t,r.memoizedState=xp(1|e,n,o,i)}function Wk(t,e){return Kv(8390656,8,t,e)}function JT(t,e){return N_(2048,8,t,e)}function NO(t,e){return N_(4,2,t,e)}function DO(t,e){return N_(4,4,t,e)}function OO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LO(t,e,n){return n=n!=null?n.concat([t]):null,N_(4,4,OO.bind(null,e,t),n)}function XT(){}function MO(t,e){var n=sr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&KT(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function VO(t,e){var n=sr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&KT(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function FO(t,e,n){return kl&21?(Or(n,e)||(n=GD(),Rt.lanes|=n,xl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yi=!0),t.memoizedState=n)}function X9(t,e){var n=tt;tt=n!==0&&4>n?n:4,t(!0);var i=xE.transition;xE.transition={};try{t(!1),e()}finally{tt=n,xE.transition=i}}function UO(){return sr().memoizedState}function Z9(t,e,n){var i=ra(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BO(t))jO(e,n);else if(n=EO(t,e,n,i),n!==null){var r=ii();xr(n,t,i,r),zO(n,e,i)}}function eB(t,e,n){var i=ra(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BO(t))jO(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,Or(u,a)){var c=e.interleaved;c===null?(r.next=r,GT(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=EO(t,e,r,i),n!==null&&(r=ii(),xr(n,t,i,r),zO(n,e,i))}}function BO(t){var e=t.alternate;return t===Rt||e!==null&&e===Rt}function jO(t,e){Qf=Oy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zO(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,RT(t,n)}}var Ly={readContext:rr,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},tB={readContext:rr,useCallback:function(t,e){return ts().memoizedState=[t,e===void 0?null:e],t},useContext:rr,useEffect:Wk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kv(4194308,4,OO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kv(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kv(4,2,t,e)},useMemo:function(t,e){var n=ts();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ts();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Z9.bind(null,Rt,t),[i.memoizedState,t]},useRef:function(t){var e=ts();return t={current:t},e.memoizedState=t},useState:$k,useDebugValue:XT,useDeferredValue:function(t){return ts().memoizedState=t},useTransition:function(){var t=$k(!1),e=t[0];return t=X9.bind(null,t[1]),ts().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Rt,r=ts();if(wt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),bn===null)throw Error(Z(349));kl&30||CO(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Wk(PO.bind(null,i,o,t),[t]),i.flags|=2048,xp(9,AO.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ts(),e=bn.identifierPrefix;if(wt){var n=js,i=Bs;n=(i&~(1<<32-kr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=J9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nB={readContext:rr,useCallback:MO,useContext:rr,useEffect:JT,useImperativeHandle:LO,useInsertionEffect:NO,useLayoutEffect:DO,useMemo:VO,useReducer:NE,useRef:xO,useState:function(){return NE(kp)},useDebugValue:XT,useDeferredValue:function(t){var e=sr();return FO(e,un.memoizedState,t)},useTransition:function(){var t=NE(kp)[0],e=sr().memoizedState;return[t,e]},useMutableSource:SO,useSyncExternalStore:bO,useId:UO,unstable_isNewReconciler:!1},iB={readContext:rr,useCallback:MO,useContext:rr,useEffect:JT,useImperativeHandle:LO,useInsertionEffect:NO,useLayoutEffect:DO,useMemo:VO,useReducer:DE,useRef:xO,useState:function(){return DE(kp)},useDebugValue:XT,useDeferredValue:function(t){var e=sr();return un===null?e.memoizedState=t:FO(e,un.memoizedState,t)},useTransition:function(){var t=DE(kp)[0],e=sr().memoizedState;return[t,e]},useMutableSource:SO,useSyncExternalStore:bO,useId:UO,unstable_isNewReconciler:!1};function Sr(t,e){if(t&&t.defaultProps){e=Nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function HI(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var D_={isMounted:function(t){return(t=t._reactInternals)?Xl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ii(),r=ra(t),o=Hs(i,r);o.payload=e,n!=null&&(o.callback=n),e=na(t,o,r),e!==null&&(xr(e,t,r,i),Wv(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ii(),r=ra(t),o=Hs(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=na(t,o,r),e!==null&&(xr(e,t,r,i),Wv(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ii(),i=ra(t),r=Hs(n,i);r.tag=2,e!=null&&(r.callback=e),e=na(t,r,i),e!==null&&(xr(e,t,i,n),Wv(e,t,i))}};function Hk(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Tp(n,i)||!Tp(r,o):!0}function GO(t,e,n){var i=!1,r=da,o=e.contextType;return typeof o=="object"&&o!==null?o=rr(o):(r=Ti(e)?Pl:Kn.current,i=e.contextTypes,o=(i=i!=null)?td(t,r):da),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=D_,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Kk(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&D_.enqueueReplaceState(e,e.state,null)}function KI(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},qT(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=rr(o):(o=Ti(e)?Pl:Kn.current,r.context=td(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(HI(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&D_.enqueueReplaceState(r,r.state,null),Ny(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function sd(t,e){try{var n="",i=e;do n+=x6(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function OE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function QI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rB=typeof WeakMap=="function"?WeakMap:Map;function qO(t,e,n){n=Hs(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Vy||(Vy=!0,s1=i),QI(t,e)},n}function $O(t,e,n){n=Hs(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){QI(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){QI(t,e),typeof i!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Qk(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new rB;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=yB.bind(null,t,e,n),e.then(t,t))}function Yk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jk(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hs(-1,1),e.tag=2,na(n,e,1))),n.lanes|=1),t)}var sB=so.ReactCurrentOwner,yi=!1;function Zn(t,e,n,i){e.child=t===null?wO(e,null,n,i):id(e,t.child,n,i)}function Xk(t,e,n,i,r){n=n.render;var o=e.ref;return Gc(e,r),i=QT(t,e,n,i,o,r),n=YT(),t!==null&&!yi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zs(t,e,r)):(wt&&n&&VT(e),e.flags|=1,Zn(t,e,i,r),e.child)}function Zk(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!oS(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,WO(t,e,o,i,r)):(t=Xv(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Tp,n(a,i)&&t.ref===e.ref)return Zs(t,e,r)}return e.flags|=1,t=sa(o,i),t.ref=e.ref,t.return=e,e.child=t}function WO(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Tp(o,i)&&t.ref===e.ref)if(yi=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(yi=!0);else return e.lanes=t.lanes,Zs(t,e,r)}return YI(t,e,n,i,r)}function HO(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Mc,Di),Di|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(Mc,Di),Di|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,lt(Mc,Di),Di|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,lt(Mc,Di),Di|=i;return Zn(t,e,r,n),e.child}function KO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function YI(t,e,n,i,r){var o=Ti(n)?Pl:Kn.current;return o=td(e,o),Gc(e,r),n=QT(t,e,n,i,o,r),i=YT(),t!==null&&!yi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zs(t,e,r)):(wt&&i&&VT(e),e.flags|=1,Zn(t,e,n,r),e.child)}function ex(t,e,n,i,r){if(Ti(n)){var o=!0;Ay(e)}else o=!1;if(Gc(e,r),e.stateNode===null)Qv(t,e),GO(e,n,i),KI(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=rr(h):(h=Ti(n)?Pl:Kn.current,h=td(e,h));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==h)&&Kk(e,a,i,h),jo=!1;var _=e.memoizedState;a.state=_,Ny(e,i,a,r),c=e.memoizedState,u!==i||_!==c||Ii.current||jo?(typeof m=="function"&&(HI(e,n,m,i),c=e.memoizedState),(u=jo||Hk(e,n,u,i,_,c,h))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=h,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,IO(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Sr(e.type,u),a.props=h,g=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=rr(c):(c=Ti(n)?Pl:Kn.current,c=td(e,c));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==c)&&Kk(e,a,i,c),jo=!1,_=e.memoizedState,a.state=_,Ny(e,i,a,r);var P=e.memoizedState;u!==g||_!==P||Ii.current||jo?(typeof T=="function"&&(HI(e,n,T,i),P=e.memoizedState),(h=jo||Hk(e,n,h,i,_,P,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,P,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,P,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=P),a.props=i,a.state=P,a.context=c,i=h):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return JI(t,e,n,i,o,r)}function JI(t,e,n,i,r,o){KO(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Uk(e,n,!1),Zs(t,e,o);i=e.stateNode,sB.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=id(e,t.child,null,o),e.child=id(e,null,u,o)):Zn(t,e,u,o),e.memoizedState=i.state,r&&Uk(e,n,!0),e.child}function QO(t){var e=t.stateNode;e.pendingContext?Fk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fk(t,e.context,!1),$T(t,e.containerInfo)}function tx(t,e,n,i,r){return nd(),UT(r),e.flags|=256,Zn(t,e,n,i),e.child}var XI={dehydrated:null,treeContext:null,retryLane:0};function ZI(t){return{baseLanes:t,cachePool:null,transitions:null}}function YO(t,e,n){var i=e.pendingProps,r=Pt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),lt(Pt,r&1),t===null)return $I(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=M_(a,i,0,null),t=Il(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ZI(n),e.memoizedState=XI,t):ZT(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return oB(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=sa(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=sa(u,o):(o=Il(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?ZI(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=XI,i}return o=t.child,t=o.sibling,i=sa(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function ZT(t,e){return e=M_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cv(t,e,n,i){return i!==null&&UT(i),id(e,t.child,null,n),t=ZT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oB(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=OE(Error(Z(422))),Cv(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=M_({mode:"visible",children:i.children},r,0,null),o=Il(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&id(e,t.child,null,a),e.child.memoizedState=ZI(a),e.memoizedState=XI,o);if(!(e.mode&1))return Cv(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(Z(419)),i=OE(o,i,void 0),Cv(t,e,a,i)}if(u=(a&t.childLanes)!==0,yi||u){if(i=bn,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Xs(t,r),xr(i,t,r,-1))}return sS(),i=OE(Error(Z(421))),Cv(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=_B.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Vi=ta(r.nextSibling),Ui=e,wt=!0,Cr=null,t!==null&&(Ji[Xi++]=Bs,Ji[Xi++]=js,Ji[Xi++]=Rl,Bs=t.id,js=t.overflow,Rl=e),e=ZT(e,i.children),e.flags|=4096,e)}function nx(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),WI(t.return,e,n)}function LE(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function JO(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Zn(t,e,i.children,n),i=Pt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nx(t,n,e);else if(t.tag===19)nx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(lt(Pt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Dy(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),LE(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Dy(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}LE(e,!0,n,null,o);break;case"together":LE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=sa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aB(t,e,n){switch(e.tag){case 3:QO(e),nd();break;case 5:TO(e);break;case 1:Ti(e.type)&&Ay(e);break;case 4:$T(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;lt(ky,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(lt(Pt,Pt.current&1),e.flags|=128,null):n&e.child.childLanes?YO(t,e,n):(lt(Pt,Pt.current&1),t=Zs(t,e,n),t!==null?t.sibling:null);lt(Pt,Pt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return JO(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(Pt,Pt.current),i)break;return null;case 22:case 23:return e.lanes=0,HO(t,e,n)}return Zs(t,e,n)}var XO,e1,ZO,eL;XO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};e1=function(){};ZO=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ml(hs.current);var o=null;switch(n){case"input":r=II(t,r),i=II(t,i),o=[];break;case"select":r=Nt({},r,{value:void 0}),i=Nt({},i,{value:void 0}),o=[];break;case"textarea":r=bI(t,r),i=bI(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=by)}AI(n,i);var a;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var u=r[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(gp.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var c=i[h];if(u=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(gp.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ft("scroll",t),o||u===c||(o=[])):(o=o||[]).push(h,c))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};eL=function(t,e,n,i){n!==i&&(e.flags|=4)};function vf(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function lB(t,e,n){var i=e.pendingProps;switch(FT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(e),null;case 1:return Ti(e.type)&&Cy(),qn(e),null;case 3:return i=e.stateNode,rd(),gt(Ii),gt(Kn),HT(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Sv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cr!==null&&(l1(Cr),Cr=null))),e1(t,e),qn(e),null;case 5:WT(e);var r=ml(Pp.current);if(n=e.type,t!==null&&e.stateNode!=null)ZO(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Z(166));return qn(e),null}if(t=ml(hs.current),Sv(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ns]=e,i[Cp]=o,t=(e.mode&1)!==0,n){case"dialog":ft("cancel",i),ft("close",i);break;case"iframe":case"object":case"embed":ft("load",i);break;case"video":case"audio":for(r=0;r<Lf.length;r++)ft(Lf[r],i);break;case"source":ft("error",i);break;case"img":case"image":case"link":ft("error",i),ft("load",i);break;case"details":ft("toggle",i);break;case"input":dk(i,o),ft("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ft("invalid",i);break;case"textarea":fk(i,o),ft("invalid",i)}AI(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&Tv(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Tv(i.textContent,u,t),r=["children",""+u]):gp.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&ft("scroll",i)}switch(n){case"input":mv(i),hk(i,o,!0);break;case"textarea":mv(i),pk(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=by)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ns]=e,t[Cp]=i,XO(t,e,!1,!1),e.stateNode=t;e:{switch(a=PI(n,i),n){case"dialog":ft("cancel",t),ft("close",t),r=i;break;case"iframe":case"object":case"embed":ft("load",t),r=i;break;case"video":case"audio":for(r=0;r<Lf.length;r++)ft(Lf[r],t);r=i;break;case"source":ft("error",t),r=i;break;case"img":case"image":case"link":ft("error",t),ft("load",t),r=i;break;case"details":ft("toggle",t),r=i;break;case"input":dk(t,i),r=II(t,i),ft("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Nt({},i,{value:void 0}),ft("invalid",t);break;case"textarea":fk(t,i),r=bI(t,i),ft("invalid",t);break;default:r=i}AI(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?xD(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&RD(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vp(t,c):typeof c=="number"&&vp(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(gp.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ft("scroll",t):c!=null&&TT(t,o,c,a))}switch(n){case"input":mv(t),hk(t,i,!1);break;case"textarea":mv(t),pk(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ca(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Uc(t,!!i.multiple,o,!1):i.defaultValue!=null&&Uc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=by)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qn(e),null;case 6:if(t&&e.stateNode!=null)eL(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Z(166));if(n=ml(Pp.current),ml(hs.current),Sv(e)){if(i=e.stateNode,n=e.memoizedProps,i[ns]=e,(o=i.nodeValue!==n)&&(t=Ui,t!==null))switch(t.tag){case 3:Tv(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tv(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ns]=e,e.stateNode=i}return qn(e),null;case 13:if(gt(Pt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&Vi!==null&&e.mode&1&&!(e.flags&128))yO(),nd(),e.flags|=98560,o=!1;else if(o=Sv(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[ns]=e}else nd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qn(e),o=!1}else Cr!==null&&(l1(Cr),Cr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Pt.current&1?hn===0&&(hn=3):sS())),e.updateQueue!==null&&(e.flags|=4),qn(e),null);case 4:return rd(),e1(t,e),t===null&&Sp(e.stateNode.containerInfo),qn(e),null;case 10:return zT(e.type._context),qn(e),null;case 17:return Ti(e.type)&&Cy(),qn(e),null;case 19:if(gt(Pt),o=e.memoizedState,o===null)return qn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)vf(o,!1);else{if(hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Dy(t),a!==null){for(e.flags|=128,vf(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(Pt,Pt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ht()>od&&(e.flags|=128,i=!0,vf(o,!1),e.lanes=4194304)}else{if(!i)if(t=Dy(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vf(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!wt)return qn(e),null}else 2*Ht()-o.renderingStartTime>od&&n!==1073741824&&(e.flags|=128,i=!0,vf(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ht(),e.sibling=null,n=Pt.current,lt(Pt,i?n&1|2:n&1),e):(qn(e),null);case 22:case 23:return rS(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Di&1073741824&&(qn(e),e.subtreeFlags&6&&(e.flags|=8192)):qn(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function uB(t,e){switch(FT(e),e.tag){case 1:return Ti(e.type)&&Cy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rd(),gt(Ii),gt(Kn),HT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return WT(e),null;case 13:if(gt(Pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));nd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(Pt),null;case 4:return rd(),null;case 10:return zT(e.type._context),null;case 22:case 23:return rS(),null;case 24:return null;default:return null}}var Av=!1,Wn=!1,cB=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Lc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Mt(t,e,i)}else n.current=null}function t1(t,e,n){try{n()}catch(i){Mt(t,e,i)}}var ix=!1;function dB(t,e){if(FI=Iy,t=sO(),MT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,h=0,m=0,g=t,_=null;t:for(;;){for(var T;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(T=g.firstChild)!==null;)_=g,g=T;for(;;){if(g===t)break t;if(_===n&&++h===r&&(u=a),_===o&&++m===i&&(c=a),(T=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=T}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(UI={focusedElem:t,selectionRange:n},Iy=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var E=P.memoizedProps,R=P.memoizedState,S=e.stateNode,b=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:Sr(e.type,E),R);S.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(F){Mt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return P=ix,ix=!1,P}function Yf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&t1(e,n,o)}r=r.next}while(r!==i)}}function O_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function n1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tL(t){var e=t.alternate;e!==null&&(t.alternate=null,tL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ns],delete e[Cp],delete e[zI],delete e[H9],delete e[K9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nL(t){return t.tag===5||t.tag===3||t.tag===4}function rx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function i1(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=by));else if(i!==4&&(t=t.child,t!==null))for(i1(t,e,n),t=t.sibling;t!==null;)i1(t,e,n),t=t.sibling}function r1(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(r1(t,e,n),t=t.sibling;t!==null;)r1(t,e,n),t=t.sibling}var Ln=null,br=!1;function Oo(t,e,n){for(n=n.child;n!==null;)iL(t,e,n),n=n.sibling}function iL(t,e,n){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(C_,n)}catch{}switch(n.tag){case 5:Wn||Lc(n,e);case 6:var i=Ln,r=br;Ln=null,Oo(t,e,n),Ln=i,br=r,Ln!==null&&(br?(t=Ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ln.removeChild(n.stateNode));break;case 18:Ln!==null&&(br?(t=Ln,n=n.stateNode,t.nodeType===8?PE(t.parentNode,n):t.nodeType===1&&PE(t,n),Ep(t)):PE(Ln,n.stateNode));break;case 4:i=Ln,r=br,Ln=n.stateNode.containerInfo,br=!0,Oo(t,e,n),Ln=i,br=r;break;case 0:case 11:case 14:case 15:if(!Wn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&t1(n,e,a),r=r.next}while(r!==i)}Oo(t,e,n);break;case 1:if(!Wn&&(Lc(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){Mt(n,e,u)}Oo(t,e,n);break;case 21:Oo(t,e,n);break;case 22:n.mode&1?(Wn=(i=Wn)||n.memoizedState!==null,Oo(t,e,n),Wn=i):Oo(t,e,n);break;default:Oo(t,e,n)}}function sx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cB),e.forEach(function(i){var r=wB.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Tr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ln=u.stateNode,br=!1;break e;case 3:Ln=u.stateNode.containerInfo,br=!0;break e;case 4:Ln=u.stateNode.containerInfo,br=!0;break e}u=u.return}if(Ln===null)throw Error(Z(160));iL(o,a,r),Ln=null,br=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(h){Mt(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rL(e,t),e=e.sibling}function rL(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tr(e,t),es(t),i&4){try{Yf(3,t,t.return),O_(3,t)}catch(E){Mt(t,t.return,E)}try{Yf(5,t,t.return)}catch(E){Mt(t,t.return,E)}}break;case 1:Tr(e,t),es(t),i&512&&n!==null&&Lc(n,n.return);break;case 5:if(Tr(e,t),es(t),i&512&&n!==null&&Lc(n,n.return),t.flags&32){var r=t.stateNode;try{vp(r,"")}catch(E){Mt(t,t.return,E)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&CD(r,o),PI(u,a);var h=PI(u,o);for(a=0;a<c.length;a+=2){var m=c[a],g=c[a+1];m==="style"?xD(r,g):m==="dangerouslySetInnerHTML"?RD(r,g):m==="children"?vp(r,g):TT(r,m,g,h)}switch(u){case"input":TI(r,o);break;case"textarea":AD(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Uc(r,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Uc(r,!!o.multiple,o.defaultValue,!0):Uc(r,!!o.multiple,o.multiple?[]:"",!1))}r[Cp]=o}catch(E){Mt(t,t.return,E)}}break;case 6:if(Tr(e,t),es(t),i&4){if(t.stateNode===null)throw Error(Z(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(E){Mt(t,t.return,E)}}break;case 3:if(Tr(e,t),es(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ep(e.containerInfo)}catch(E){Mt(t,t.return,E)}break;case 4:Tr(e,t),es(t);break;case 13:Tr(e,t),es(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(nS=Ht())),i&4&&sx(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Wn=(h=Wn)||m,Tr(e,t),Wn=h):Tr(e,t),es(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(ce=t,m=t.child;m!==null;){for(g=ce=m;ce!==null;){switch(_=ce,T=_.child,_.tag){case 0:case 11:case 14:case 15:Yf(4,_,_.return);break;case 1:Lc(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(E){Mt(i,n,E)}}break;case 5:Lc(_,_.return);break;case 22:if(_.memoizedState!==null){ax(g);continue}}T!==null?(T.return=_,ce=T):ax(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,h?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=kD("display",a))}catch(E){Mt(t,t.return,E)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(E){Mt(t,t.return,E)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Tr(e,t),es(t),i&4&&sx(t);break;case 21:break;default:Tr(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nL(n)){var i=n;break e}n=n.return}throw Error(Z(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(vp(r,""),i.flags&=-33);var o=rx(t);r1(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=rx(t);i1(t,u,a);break;default:throw Error(Z(161))}}catch(c){Mt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hB(t,e,n){ce=t,sL(t)}function sL(t,e,n){for(var i=(t.mode&1)!==0;ce!==null;){var r=ce,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Av;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Wn;u=Av;var h=Wn;if(Av=a,(Wn=c)&&!h)for(ce=r;ce!==null;)a=ce,c=a.child,a.tag===22&&a.memoizedState!==null?lx(r):c!==null?(c.return=a,ce=c):lx(r);for(;o!==null;)ce=o,sL(o),o=o.sibling;ce=r,Av=u,Wn=h}ox(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ce=o):ox(t)}}function ox(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wn||O_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Wn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Sr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&qk(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qk(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Ep(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Wn||e.flags&512&&n1(e)}catch(_){Mt(e,e.return,_)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function ax(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function lx(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{O_(4,e)}catch(c){Mt(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){Mt(e,r,c)}}var o=e.return;try{n1(e)}catch(c){Mt(e,o,c)}break;case 5:var a=e.return;try{n1(e)}catch(c){Mt(e,a,c)}}}catch(c){Mt(e,e.return,c)}if(e===t){ce=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ce=u;break}ce=e.return}}var fB=Math.ceil,My=so.ReactCurrentDispatcher,eS=so.ReactCurrentOwner,tr=so.ReactCurrentBatchConfig,$e=0,bn=null,sn=null,Fn=0,Di=0,Mc=Ca(0),hn=0,Np=null,xl=0,L_=0,tS=0,Jf=null,vi=null,nS=0,od=1/0,Fs=null,Vy=!1,s1=null,ia=null,Pv=!1,Ho=null,Fy=0,Xf=0,o1=null,Yv=-1,Jv=0;function ii(){return $e&6?Ht():Yv!==-1?Yv:Yv=Ht()}function ra(t){return t.mode&1?$e&2&&Fn!==0?Fn&-Fn:Y9.transition!==null?(Jv===0&&(Jv=GD()),Jv):(t=tt,t!==0||(t=window.event,t=t===void 0?16:YD(t.type)),t):1}function xr(t,e,n,i){if(50<Xf)throw Xf=0,o1=null,Error(Z(185));pm(t,n,i),(!($e&2)||t!==bn)&&(t===bn&&(!($e&2)&&(L_|=n),hn===4&&Go(t,Fn)),Si(t,i),n===1&&$e===0&&!(e.mode&1)&&(od=Ht()+500,x_&&Aa()))}function Si(t,e){var n=t.callbackNode;Y6(t,e);var i=Ey(t,t===bn?Fn:0);if(i===0)n!==null&&vk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&vk(n),e===1)t.tag===0?Q9(ux.bind(null,t)):mO(ux.bind(null,t)),$9(function(){!($e&6)&&Aa()}),n=null;else{switch(qD(i)){case 1:n=PT;break;case 4:n=jD;break;case 16:n=wy;break;case 536870912:n=zD;break;default:n=wy}n=fL(n,oL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oL(t,e){if(Yv=-1,Jv=0,$e&6)throw Error(Z(327));var n=t.callbackNode;if(qc()&&t.callbackNode!==n)return null;var i=Ey(t,t===bn?Fn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Uy(t,i);else{e=i;var r=$e;$e|=2;var o=lL();(bn!==t||Fn!==e)&&(Fs=null,od=Ht()+500,El(t,e));do try{gB();break}catch(u){aL(t,u)}while(!0);jT(),My.current=o,$e=r,sn!==null?e=0:(bn=null,Fn=0,e=hn)}if(e!==0){if(e===2&&(r=DI(t),r!==0&&(i=r,e=a1(t,r))),e===1)throw n=Np,El(t,0),Go(t,i),Si(t,Ht()),n;if(e===6)Go(t,i);else{if(r=t.current.alternate,!(i&30)&&!pB(r)&&(e=Uy(t,i),e===2&&(o=DI(t),o!==0&&(i=o,e=a1(t,o))),e===1))throw n=Np,El(t,0),Go(t,i),Si(t,Ht()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Z(345));case 2:rl(t,vi,Fs);break;case 3:if(Go(t,i),(i&130023424)===i&&(e=nS+500-Ht(),10<e)){if(Ey(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ii(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=jI(rl.bind(null,t,vi,Fs),e);break}rl(t,vi,Fs);break;case 4:if(Go(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-kr(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=Ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fB(i/1960))-i,10<i){t.timeoutHandle=jI(rl.bind(null,t,vi,Fs),i);break}rl(t,vi,Fs);break;case 5:rl(t,vi,Fs);break;default:throw Error(Z(329))}}}return Si(t,Ht()),t.callbackNode===n?oL.bind(null,t):null}function a1(t,e){var n=Jf;return t.current.memoizedState.isDehydrated&&(El(t,e).flags|=256),t=Uy(t,e),t!==2&&(e=vi,vi=n,e!==null&&l1(e)),t}function l1(t){vi===null?vi=t:vi.push.apply(vi,t)}function pB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Or(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Go(t,e){for(e&=~tS,e&=~L_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kr(e),i=1<<n;t[n]=-1,e&=~i}}function ux(t){if($e&6)throw Error(Z(327));qc();var e=Ey(t,0);if(!(e&1))return Si(t,Ht()),null;var n=Uy(t,e);if(t.tag!==0&&n===2){var i=DI(t);i!==0&&(e=i,n=a1(t,i))}if(n===1)throw n=Np,El(t,0),Go(t,e),Si(t,Ht()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rl(t,vi,Fs),Si(t,Ht()),null}function iS(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(od=Ht()+500,x_&&Aa())}}function Nl(t){Ho!==null&&Ho.tag===0&&!($e&6)&&qc();var e=$e;$e|=1;var n=tr.transition,i=tt;try{if(tr.transition=null,tt=1,t)return t()}finally{tt=i,tr.transition=n,$e=e,!($e&6)&&Aa()}}function rS(){Di=Mc.current,gt(Mc)}function El(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q9(n)),sn!==null)for(n=sn.return;n!==null;){var i=n;switch(FT(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Cy();break;case 3:rd(),gt(Ii),gt(Kn),HT();break;case 5:WT(i);break;case 4:rd();break;case 13:gt(Pt);break;case 19:gt(Pt);break;case 10:zT(i.type._context);break;case 22:case 23:rS()}n=n.return}if(bn=t,sn=t=sa(t.current,null),Fn=Di=e,hn=0,Np=null,tS=L_=xl=0,vi=Jf=null,pl!==null){for(e=0;e<pl.length;e++)if(n=pl[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}pl=null}return t}function aL(t,e){do{var n=sn;try{if(jT(),Hv.current=Ly,Oy){for(var i=Rt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Oy=!1}if(kl=0,In=un=Rt=null,Qf=!1,Rp=0,eS.current=null,n===null||n.return===null){hn=1,Np=e,sn=null;break}e:{var o=t,a=n.return,u=n,c=e;if(e=Fn,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=Yk(a);if(T!==null){T.flags&=-257,Jk(T,a,u,o,e),T.mode&1&&Qk(o,h,e),e=T,c=h;var P=e.updateQueue;if(P===null){var E=new Set;E.add(c),e.updateQueue=E}else P.add(c);break e}else{if(!(e&1)){Qk(o,h,e),sS();break e}c=Error(Z(426))}}else if(wt&&u.mode&1){var R=Yk(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Jk(R,a,u,o,e),UT(sd(c,u));break e}}o=c=sd(c,u),hn!==4&&(hn=2),Jf===null?Jf=[o]:Jf.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=qO(o,c,e);Gk(o,S);break e;case 1:u=c;var b=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(ia===null||!ia.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=$O(o,u,e);Gk(o,F);break e}}o=o.return}while(o!==null)}cL(n)}catch(j){e=j,sn===n&&n!==null&&(sn=n=n.return);continue}break}while(!0)}function lL(){var t=My.current;return My.current=Ly,t===null?Ly:t}function sS(){(hn===0||hn===3||hn===2)&&(hn=4),bn===null||!(xl&268435455)&&!(L_&268435455)||Go(bn,Fn)}function Uy(t,e){var n=$e;$e|=2;var i=lL();(bn!==t||Fn!==e)&&(Fs=null,El(t,e));do try{mB();break}catch(r){aL(t,r)}while(!0);if(jT(),$e=n,My.current=i,sn!==null)throw Error(Z(261));return bn=null,Fn=0,hn}function mB(){for(;sn!==null;)uL(sn)}function gB(){for(;sn!==null&&!j6();)uL(sn)}function uL(t){var e=hL(t.alternate,t,Di);t.memoizedProps=t.pendingProps,e===null?cL(t):sn=e,eS.current=null}function cL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uB(n,e),n!==null){n.flags&=32767,sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hn=6,sn=null;return}}else if(n=lB(n,e,Di),n!==null){sn=n;return}if(e=e.sibling,e!==null){sn=e;return}sn=e=t}while(e!==null);hn===0&&(hn=5)}function rl(t,e,n){var i=tt,r=tr.transition;try{tr.transition=null,tt=1,vB(t,e,n,i)}finally{tr.transition=r,tt=i}return null}function vB(t,e,n,i){do qc();while(Ho!==null);if($e&6)throw Error(Z(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(J6(t,o),t===bn&&(sn=bn=null,Fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pv||(Pv=!0,fL(wy,function(){return qc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=tr.transition,tr.transition=null;var a=tt;tt=1;var u=$e;$e|=4,eS.current=null,dB(t,n),rL(n,t),V9(UI),Iy=!!FI,UI=FI=null,t.current=n,hB(n),z6(),$e=u,tt=a,tr.transition=o}else t.current=n;if(Pv&&(Pv=!1,Ho=t,Fy=r),o=t.pendingLanes,o===0&&(ia=null),$6(n.stateNode),Si(t,Ht()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Vy)throw Vy=!1,t=s1,s1=null,t;return Fy&1&&t.tag!==0&&qc(),o=t.pendingLanes,o&1?t===o1?Xf++:(Xf=0,o1=t):Xf=0,Aa(),null}function qc(){if(Ho!==null){var t=qD(Fy),e=tr.transition,n=tt;try{if(tr.transition=null,tt=16>t?16:t,Ho===null)var i=!1;else{if(t=Ho,Ho=null,Fy=0,$e&6)throw Error(Z(331));var r=$e;for($e|=4,ce=t.current;ce!==null;){var o=ce,a=o.child;if(ce.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(ce=h;ce!==null;){var m=ce;switch(m.tag){case 0:case 11:case 15:Yf(8,m,o)}var g=m.child;if(g!==null)g.return=m,ce=g;else for(;ce!==null;){m=ce;var _=m.sibling,T=m.return;if(tL(m),m===h){ce=null;break}if(_!==null){_.return=T,ce=_;break}ce=T}}}var P=o.alternate;if(P!==null){var E=P.child;if(E!==null){P.child=null;do{var R=E.sibling;E.sibling=null,E=R}while(E!==null)}}ce=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ce=a;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Yf(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,ce=S;break e}ce=o.return}}var b=t.current;for(ce=b;ce!==null;){a=ce;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,ce=k;else e:for(a=b;ce!==null;){if(u=ce,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:O_(9,u)}}catch(j){Mt(u,u.return,j)}if(u===a){ce=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,ce=F;break e}ce=u.return}}if($e=r,Aa(),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(C_,t)}catch{}i=!0}return i}finally{tt=n,tr.transition=e}}return!1}function cx(t,e,n){e=sd(n,e),e=qO(t,e,1),t=na(t,e,1),e=ii(),t!==null&&(pm(t,1,e),Si(t,e))}function Mt(t,e,n){if(t.tag===3)cx(t,t,n);else for(;e!==null;){if(e.tag===3){cx(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ia===null||!ia.has(i))){t=sd(n,t),t=$O(e,t,1),e=na(e,t,1),t=ii(),e!==null&&(pm(e,1,t),Si(e,t));break}}e=e.return}}function yB(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ii(),t.pingedLanes|=t.suspendedLanes&n,bn===t&&(Fn&n)===n&&(hn===4||hn===3&&(Fn&130023424)===Fn&&500>Ht()-nS?El(t,0):tS|=n),Si(t,e)}function dL(t,e){e===0&&(t.mode&1?(e=yv,yv<<=1,!(yv&130023424)&&(yv=4194304)):e=1);var n=ii();t=Xs(t,e),t!==null&&(pm(t,e,n),Si(t,n))}function _B(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dL(t,n)}function wB(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Z(314))}i!==null&&i.delete(e),dL(t,n)}var hL;hL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ii.current)yi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yi=!1,aB(t,e,n);yi=!!(t.flags&131072)}else yi=!1,wt&&e.flags&1048576&&gO(e,Ry,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Qv(t,e),t=e.pendingProps;var r=td(e,Kn.current);Gc(e,n),r=QT(null,e,i,t,r,n);var o=YT();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ti(i)?(o=!0,Ay(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,qT(e),r.updater=D_,e.stateNode=r,r._reactInternals=e,KI(e,i,t,n),e=JI(null,e,i,!0,o,n)):(e.tag=0,wt&&o&&VT(e),Zn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Qv(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=IB(i),t=Sr(i,t),r){case 0:e=YI(null,e,i,t,n);break e;case 1:e=ex(null,e,i,t,n);break e;case 11:e=Xk(null,e,i,t,n);break e;case 14:e=Zk(null,e,i,Sr(i.type,t),n);break e}throw Error(Z(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Sr(i,r),YI(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Sr(i,r),ex(t,e,i,r,n);case 3:e:{if(QO(e),t===null)throw Error(Z(387));i=e.pendingProps,o=e.memoizedState,r=o.element,IO(t,e),Ny(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=sd(Error(Z(423)),e),e=tx(t,e,i,n,r);break e}else if(i!==r){r=sd(Error(Z(424)),e),e=tx(t,e,i,n,r);break e}else for(Vi=ta(e.stateNode.containerInfo.firstChild),Ui=e,wt=!0,Cr=null,n=wO(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(nd(),i===r){e=Zs(t,e,n);break e}Zn(t,e,i,n)}e=e.child}return e;case 5:return TO(e),t===null&&$I(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,BI(i,r)?a=null:o!==null&&BI(i,o)&&(e.flags|=32),KO(t,e),Zn(t,e,a,n),e.child;case 6:return t===null&&$I(e),null;case 13:return YO(t,e,n);case 4:return $T(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=id(e,null,i,n):Zn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Sr(i,r),Xk(t,e,i,r,n);case 7:return Zn(t,e,e.pendingProps,n),e.child;case 8:return Zn(t,e,e.pendingProps.children,n),e.child;case 12:return Zn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,lt(ky,i._currentValue),i._currentValue=a,o!==null)if(Or(o.value,a)){if(o.children===r.children&&!Ii.current){e=Zs(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=Hs(-1,n&-n),c.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),WI(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Z(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),WI(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Zn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Gc(e,n),r=rr(r),i=i(r),e.flags|=1,Zn(t,e,i,n),e.child;case 14:return i=e.type,r=Sr(i,e.pendingProps),r=Sr(i.type,r),Zk(t,e,i,r,n);case 15:return WO(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Sr(i,r),Qv(t,e),e.tag=1,Ti(i)?(t=!0,Ay(e)):t=!1,Gc(e,n),GO(e,i,r),KI(e,i,r,n),JI(null,e,i,!0,t,n);case 19:return JO(t,e,n);case 22:return HO(t,e,n)}throw Error(Z(156,e.tag))};function fL(t,e){return BD(t,e)}function EB(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(t,e,n,i){return new EB(t,e,n,i)}function oS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IB(t){if(typeof t=="function")return oS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bT)return 11;if(t===CT)return 14}return 2}function sa(t,e){var n=t.alternate;return n===null?(n=Zi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xv(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")oS(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Cc:return Il(n.children,r,o,e);case ST:a=8,r|=8;break;case yI:return t=Zi(12,n,e,r|2),t.elementType=yI,t.lanes=o,t;case _I:return t=Zi(13,n,e,r),t.elementType=_I,t.lanes=o,t;case wI:return t=Zi(19,n,e,r),t.elementType=wI,t.lanes=o,t;case TD:return M_(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ED:a=10;break e;case ID:a=9;break e;case bT:a=11;break e;case CT:a=14;break e;case Bo:a=16,i=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Zi(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Il(t,e,n,i){return t=Zi(7,t,i,e),t.lanes=n,t}function M_(t,e,n,i){return t=Zi(22,t,i,e),t.elementType=TD,t.lanes=n,t.stateNode={isHidden:!1},t}function ME(t,e,n){return t=Zi(6,t,null,e),t.lanes=n,t}function VE(t,e,n){return e=Zi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TB(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vE(0),this.expirationTimes=vE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vE(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function aS(t,e,n,i,r,o,a,u,c){return t=new TB(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Zi(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qT(o),t}function SB(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function pL(t){if(!t)return da;t=t._reactInternals;e:{if(Xl(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ti(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Ti(n))return pO(t,n,e)}return e}function mL(t,e,n,i,r,o,a,u,c){return t=aS(n,i,!0,t,r,o,a,u,c),t.context=pL(null),n=t.current,i=ii(),r=ra(n),o=Hs(i,r),o.callback=e??null,na(n,o,r),t.current.lanes=r,pm(t,r,i),Si(t,i),t}function V_(t,e,n,i){var r=e.current,o=ii(),a=ra(r);return n=pL(n),e.context===null?e.context=n:e.pendingContext=n,e=Hs(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=na(r,e,a),t!==null&&(xr(t,r,a,o),Wv(t,r,a)),a}function By(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lS(t,e){dx(t,e),(t=t.alternate)&&dx(t,e)}function bB(){return null}var gL=typeof reportError=="function"?reportError:function(t){console.error(t)};function uS(t){this._internalRoot=t}F_.prototype.render=uS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));V_(t,e,null,null)};F_.prototype.unmount=uS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nl(function(){V_(null,t,null,null)}),e[Js]=null}};function F_(t){this._internalRoot=t}F_.prototype.unstable_scheduleHydration=function(t){if(t){var e=HD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zo.length&&e!==0&&e<zo[n].priority;n++);zo.splice(n,0,t),n===0&&QD(t)}};function cS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function U_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hx(){}function CB(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var h=By(a);o.call(h)}}var a=mL(e,i,t,0,null,!1,!1,"",hx);return t._reactRootContainer=a,t[Js]=a.current,Sp(t.nodeType===8?t.parentNode:t),Nl(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var h=By(c);u.call(h)}}var c=aS(t,0,!1,null,null,!1,!1,"",hx);return t._reactRootContainer=c,t[Js]=c.current,Sp(t.nodeType===8?t.parentNode:t),Nl(function(){V_(e,c,n,i)}),c}function B_(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var c=By(a);u.call(c)}}V_(e,a,t,r)}else a=CB(n,e,t,r,i);return By(a)}$D=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Of(e.pendingLanes);n!==0&&(RT(e,n|1),Si(e,Ht()),!($e&6)&&(od=Ht()+500,Aa()))}break;case 13:Nl(function(){var i=Xs(t,1);if(i!==null){var r=ii();xr(i,t,1,r)}}),lS(t,1)}};kT=function(t){if(t.tag===13){var e=Xs(t,134217728);if(e!==null){var n=ii();xr(e,t,134217728,n)}lS(t,134217728)}};WD=function(t){if(t.tag===13){var e=ra(t),n=Xs(t,e);if(n!==null){var i=ii();xr(n,t,e,i)}lS(t,e)}};HD=function(){return tt};KD=function(t,e){var n=tt;try{return tt=t,e()}finally{tt=n}};kI=function(t,e,n){switch(e){case"input":if(TI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=k_(i);if(!r)throw Error(Z(90));bD(i),TI(i,r)}}}break;case"textarea":AD(t,n);break;case"select":e=n.value,e!=null&&Uc(t,!!n.multiple,e,!1)}};OD=iS;LD=Nl;var AB={usingClientEntryPoint:!1,Events:[gm,kc,k_,ND,DD,iS]},yf={findFiberByHostInstance:fl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PB={bundleType:yf.bundleType,version:yf.version,rendererPackageName:yf.rendererPackageName,rendererConfig:yf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:so.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FD(t),t===null?null:t.stateNode},findFiberByHostInstance:yf.findFiberByHostInstance||bB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rv.isDisabled&&Rv.supportsFiber)try{C_=Rv.inject(PB),ds=Rv}catch{}}Gi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AB;Gi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cS(e))throw Error(Z(200));return SB(t,e,null,n)};Gi.createRoot=function(t,e){if(!cS(t))throw Error(Z(299));var n=!1,i="",r=gL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=aS(t,1,!1,null,null,n,!1,i,r),t[Js]=e.current,Sp(t.nodeType===8?t.parentNode:t),new uS(e)};Gi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=FD(e),t=t===null?null:t.stateNode,t};Gi.flushSync=function(t){return Nl(t)};Gi.hydrate=function(t,e,n){if(!U_(e))throw Error(Z(200));return B_(null,t,e,!0,n)};Gi.hydrateRoot=function(t,e,n){if(!cS(t))throw Error(Z(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=gL;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=mL(e,null,t,1,n??null,r,!1,o,a),t[Js]=e.current,Sp(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new F_(e)};Gi.render=function(t,e,n){if(!U_(e))throw Error(Z(200));return B_(null,t,e,!1,n)};Gi.unmountComponentAtNode=function(t){if(!U_(t))throw Error(Z(40));return t._reactRootContainer?(Nl(function(){B_(null,null,t,!1,function(){t._reactRootContainer=null,t[Js]=null})}),!0):!1};Gi.unstable_batchedUpdates=iS;Gi.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!U_(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return B_(t,e,n,!1,i)};Gi.version="18.3.1-next-f1338f8080-20240426";function vL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vL)}catch(t){console.error(t)}}vL(),vD.exports=Gi;var RB=vD.exports,fx=RB;gI.createRoot=fx.createRoot,gI.hydrateRoot=fx.hydrateRoot;var px={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(t,e){if(!t)throw xd(e)},xd=function(t){return new Error("Firebase Database ("+yL.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kB=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},dS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|h>>6,T=h&63;c||(T=64,a||(_=64)),i.push(n[m],n[g],n[_],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_L(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||h==null||g==null)throw new xB;const _=o<<2|u>>4;if(i.push(_),h!==64){const T=u<<4&240|h>>2;if(i.push(T),g!==64){const P=h<<6&192|g;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wL=function(t){const e=_L(t);return dS.encodeByteArray(e,!0)},jy=function(t){return wL(t).replace(/\./g,"")},zy=function(t){try{return dS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(t){return Dp(void 0,t)}function Dp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!DB(n)||(t[n]=Dp(t[n],e[n]));return t}function DB(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB=()=>OB().__FIREBASE_DEFAULTS__,MB=()=>{if(typeof process>"u"||typeof px>"u")return;const t=px.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zy(t[1]);return e&&JSON.parse(e)},j_=()=>{try{return LB()||MB()||VB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FB=t=>{var e,n;return(n=(e=j_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},UB=t=>{const e=FB(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},EL=()=>{var t;return(t=j_())===null||t===void 0?void 0:t.config},BB=t=>{var e;return(e=j_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jy(JSON.stringify(n)),jy(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function fS(){var t;const e=(t=j_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TL(){return typeof self=="object"&&self.self===self}function SL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function G_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bL(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CL(){return yL.NODE_ADMIN===!0}function AL(){return!fS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Op(){try{return typeof indexedDB=="object"}catch{return!1}}function jB(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB="FirebaseError";class ri extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=zB,Object.setPrototypeOf(this,ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?GB(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new ri(r,u,i)}}function GB(t,e){return t.replace(qB,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const qB=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t){return JSON.parse(t)}function cn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=Lp(zy(o[0])||""),n=Lp(zy(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},$B=function(t){const e=PL(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},WB=function(t){const e=PL(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ad(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function u1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gy(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Mp(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(mx(o)&&mx(a)){if(!Mp(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function mx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Vc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Mf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)i[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)i[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const _=i[g-3]^i[g-8]^i[g-14]^i[g-16];i[g]=(_<<1|_>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],a=this.chain_[2],u=this.chain_[3],c=this.chain_[4],h,m;for(let g=0;g<80;g++){g<40?g<20?(h=u^o&(a^u),m=1518500249):(h=o^a^u,m=1859775393):g<60?(h=o&a|u&(o|a),m=2400959708):(h=o^a^u,m=3395469782);const _=(r<<5|r>>>27)+h+c+m+i[g]&4294967295;c=u,u=a,a=(o<<30|o>>>2)&4294967295,o=r,r=_}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let a=this.inbuf_;for(;r<n;){if(a===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(o),a=0;break}}else for(;r<n;)if(o[a]=e[r],++a,++r,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function RL(t,e){const n=new KB(t,e);return n.subscribe.bind(n)}class KB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");QB(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=FE),r.error===void 0&&(r.error=FE),r.complete===void 0&&(r.complete=FE);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function FE(){}function pS(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,ne(i<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(i)-56320;r=65536+(o<<10)+a}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},q_=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new z_;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZB(e))try{this.getOrInitializeService({instanceIdentifier:sl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=sl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sl){return this.instances.has(e)}getOptions(e=sl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:XB(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=sl){return this.component?this.component.multipleInstances?e:sl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XB(t){return t===sl?void 0:t}function ZB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=[];var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const xL={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},ej=xe.INFO,tj={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},nj=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=tj[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ym{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null,mS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}function ij(t){mS.forEach(e=>{e.setLogLevel(t)})}function rj(t,e){for(const n of mS){let i=null;e&&e.level&&(i=xL[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,o,...a)=>{const u=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");o>=(i??r.logLevel)&&t({level:xe[o].toLowerCase(),message:u,args:a,type:r.name})}}}const sj=(t,e)=>e.some(n=>t instanceof n);let gx,vx;function oj(){return gx||(gx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aj(){return vx||(vx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NL=new WeakMap,c1=new WeakMap,DL=new WeakMap,UE=new WeakMap,gS=new WeakMap;function lj(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(oa(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&NL.set(n,t)}).catch(()=>{}),gS.set(e,t),e}function uj(t){if(c1.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});c1.set(t,e)}let d1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return c1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cj(t){d1=t(d1)}function dj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(BE(this),e,...n);return DL.set(i,e.sort?e.sort():[e]),oa(i)}:aj().includes(t)?function(...e){return t.apply(BE(this),e),oa(NL.get(this))}:function(...e){return oa(t.apply(BE(this),e))}}function hj(t){return typeof t=="function"?dj(t):(t instanceof IDBTransaction&&uj(t),sj(t,oj())?new Proxy(t,d1):t)}function oa(t){if(t instanceof IDBRequest)return lj(t);if(UE.has(t))return UE.get(t);const e=hj(t);return e!==t&&(UE.set(t,e),gS.set(e,t)),e}const BE=t=>gS.get(t);function fj(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=oa(a);return i&&a.addEventListener("upgradeneeded",c=>{i(oa(a.result),c.oldVersion,c.newVersion,oa(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const pj=["get","getKey","getAll","getAllKeys","count"],mj=["put","add","delete","clear"],jE=new Map;function yx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jE.get(e))return jE.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=mj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||pj.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let h=c.store;return i&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),r&&c.done]))[0]};return jE.set(e,o),o}cj(t=>({...t,get:(e,n,i)=>yx(e,n)||t.get(e,n,i),has:(e,n)=>!!yx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function vj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qy="@firebase/app",h1="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new ym("@firebase/app"),yj="@firebase/app-compat",_j="@firebase/analytics-compat",wj="@firebase/analytics",Ej="@firebase/app-check-compat",Ij="@firebase/app-check",Tj="@firebase/auth",Sj="@firebase/auth-compat",bj="@firebase/database",Cj="@firebase/database-compat",Aj="@firebase/functions",Pj="@firebase/functions-compat",Rj="@firebase/installations",kj="@firebase/installations-compat",xj="@firebase/messaging",Nj="@firebase/messaging-compat",Dj="@firebase/performance",Oj="@firebase/performance-compat",Lj="@firebase/remote-config",Mj="@firebase/remote-config-compat",Vj="@firebase/storage",Fj="@firebase/storage-compat",Uj="@firebase/firestore",Bj="@firebase/vertexai-preview",jj="@firebase/firestore-compat",zj="firebase",Gj="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]",qj={[qy]:"fire-core",[yj]:"fire-core-compat",[wj]:"fire-analytics",[_j]:"fire-analytics-compat",[Ij]:"fire-app-check",[Ej]:"fire-app-check-compat",[Tj]:"fire-auth",[Sj]:"fire-auth-compat",[bj]:"fire-rtdb",[Cj]:"fire-rtdb-compat",[Aj]:"fire-fn",[Pj]:"fire-fn-compat",[Rj]:"fire-iid",[kj]:"fire-iid-compat",[xj]:"fire-fcm",[Nj]:"fire-fcm-compat",[Dj]:"fire-perf",[Oj]:"fire-perf-compat",[Lj]:"fire-rc",[Mj]:"fire-rc-compat",[Vj]:"fire-gcs",[Fj]:"fire-gcs-compat",[Uj]:"fire-fst",[jj]:"fire-fst-compat",[Bj]:"fire-vertex","fire-js":"fire-js",[zj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Map,ld=new Map,ud=new Map;function Vp(t,e){try{t.container.addComponent(e)}catch(n){Dl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function OL(t,e){t.container.addOrOverwriteComponent(e)}function eo(t){const e=t.name;if(ud.has(e))return Dl.debug(`There were multiple attempts to register component ${e}.`),!1;ud.set(e,t);for(const n of fa.values())Vp(n,t);for(const n of ld.values())Vp(n,t);return!0}function vS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $j(t,e,n=ha){vS(t,e).clearInstance(n)}function LL(t){return t.options!==void 0}function Ft(t){return t.settings!==void 0}function Wj(){ud.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new Zl("app","Firebase",Hj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ML=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj extends ML{constructor(e,n,i,r){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,a={name:i,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,a,r);else{const u=e;super(u.options,a,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},n),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Bi(qy,h1,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){_S(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=Gj;function yS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ha,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw nr.create("bad-app-name",{appName:String(r)});if(n||(n=EL()),!n)throw nr.create("no-options");const o=fa.get(r);if(o){if(Mp(n,o.options)&&Mp(i,o.config))return o;throw nr.create("duplicate-app",{appName:r})}const a=new kL(r);for(const c of ud.values())a.addComponent(c);const u=new ML(n,i,a);return fa.set(r,u),u}function Qj(t,e){if(TL())throw nr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;LL(t)?n=t.options:n=t;const i=Object.assign(Object.assign({},e),n);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const r=h=>[...h].reduce((m,g)=>Math.imul(31,m)+g.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw nr.create("finalization-registry-not-supported",{});const o=""+r(JSON.stringify(i)),a=ld.get(o);if(a)return a.incRefCount(e.releaseOnDeref),a;const u=new kL(o);for(const h of ud.values())u.addComponent(h);const c=new Kj(n,e,o,u);return ld.set(o,c),c}function VL(t=ha){const e=fa.get(t);if(!e&&t===ha&&EL())return yS();if(!e)throw nr.create("no-app",{appName:t});return e}function Yj(){return Array.from(fa.values())}async function _S(t){let e=!1;const n=t.name;fa.has(n)?(e=!0,fa.delete(n)):ld.has(n)&&t.decRefCount()<=0&&(ld.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function Bi(t,e,n){var i;let r=(i=qj[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dl.warn(u.join(" "));return}eo(new Mr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function FL(t,e){if(t!==null&&typeof t!="function")throw nr.create("invalid-log-argument");rj(t,e)}function UL(t){ij(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="firebase-heartbeat-database",Xj=1,Fp="firebase-heartbeat-store";let zE=null;function BL(){return zE||(zE=fj(Jj,Xj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fp)}catch(n){console.warn(n)}}}}).catch(t=>{throw nr.create("idb-open",{originalErrorMessage:t.message})})),zE}async function Zj(t){try{const n=(await BL()).transaction(Fp),i=await n.objectStore(Fp).get(jL(t));return await n.done,i}catch(e){if(e instanceof ri)Dl.warn(e.message);else{const n=nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dl.warn(n.message)}}}async function _x(t,e){try{const i=(await BL()).transaction(Fp,"readwrite");await i.objectStore(Fp).put(e,jL(t)),await i.done}catch(n){if(n instanceof ri)Dl.warn(n.message);else{const i=nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dl.warn(i.message)}}}function jL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=1024,tz=30*24*60*60*1e3;class nz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rz(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wx();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=tz}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wx(),{heartbeatsToSend:i,unsentEntries:r}=iz(this._heartbeatsCache.heartbeats),o=jy(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function wx(){return new Date().toISOString().substring(0,10)}function iz(t,e=ez){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Ex(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ex(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class rz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Op()?jB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return _x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return _x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ex(t){return jy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(t){eo(new Mr("platform-logger",e=>new gj(e),"PRIVATE")),eo(new Mr("heartbeat",e=>new nz(e),"PRIVATE")),Bi(qy,h1,t),Bi(qy,h1,"esm2017"),Bi("fire-js","")}sz("");const oz=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ri,SDK_VERSION:oo,_DEFAULT_ENTRY_NAME:ha,_addComponent:Vp,_addOrOverwriteComponent:OL,_apps:fa,_clearComponents:Wj,_components:ud,_getProvider:vS,_isFirebaseApp:LL,_isFirebaseServerApp:Ft,_registerComponent:eo,_removeServiceInstance:$j,_serverApps:ld,deleteApp:_S,getApp:VL,getApps:Yj,initializeApp:yS,initializeServerApp:Qj,onLog:FL,registerVersion:Bi,setLogLevel:UL},Symbol.toStringTag,{value:"Module"}));var Ix={};const Tx="@firebase/database",Sx="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zL="";function az(t){zL=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Lp(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new lz(e)}}catch{}return new uz},gl=GL("localStorage"),cz=GL("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new ym("@firebase/database"),dz=function(){let t=1;return function(){return t++}}(),qL=function(t){const e=YB(t),n=new HB;n.update(e);const i=n.digest();return dS.encodeByteArray(i)},_m=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=_m.apply(null,i):typeof i=="object"?e+=cn(i):e+=i,e+=" "}return e};let Zf=null,bx=!0;const hz=function(t,e){ne(!e,"Can't turn on custom loggers persistently."),$c.logLevel=xe.VERBOSE,Zf=$c.log.bind($c)},Hn=function(...t){if(bx===!0&&(bx=!1,Zf===null&&cz.get("logging_enabled")===!0&&hz()),Zf){const e=_m.apply(null,t);Zf(e)}},wm=function(t){return function(...e){Hn(t,...e)}},f1=function(...t){const e="FIREBASE INTERNAL ERROR: "+_m(...t);$c.error(e)},to=function(...t){const e=`FIREBASE FATAL ERROR: ${_m(...t)}`;throw $c.error(e),new Error(e)},bi=function(...t){const e="FIREBASE WARNING: "+_m(...t);$c.warn(e)},fz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$L=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},pz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},cd="[MIN_NAME]",Ol="[MAX_NAME]",Nd=function(t,e){if(t===e)return 0;if(t===cd||e===Ol)return-1;if(e===cd||t===Ol)return 1;{const n=Cx(t),i=Cx(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},mz=function(t,e){return t===e?0:t<e?-1:1},_f=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+cn(e))},wS=function(t){if(typeof t!="object"||t===null)return cn(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=cn(e[i]),n+=":",n+=wS(t[e[i]]);return n+="}",n},WL=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Ai(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const HL=function(t){ne(!$L(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,a,u,c;t===0?(o=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=u+i,a=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(o=0,a=Math.round(t/Math.pow(2,1-i-n))));const h=[];for(c=n;c;c-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)h.push(o%2?1:0),o=Math.floor(o/2);h.push(r?1:0),h.reverse();const m=h.join("");let g="";for(c=0;c<64;c+=8){let _=parseInt(m.substr(c,8),2).toString(16);_.length===1&&(_="0"+_),g=g+_}return g.toLowerCase()},gz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function yz(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const _z=new RegExp("^-?(0*)\\d{1,10}$"),wz=-2147483648,Ez=2147483647,Cx=function(t){if(_z.test(t)){const e=Number(t);if(e>=wz&&e<=Ez)return e}return null},Dd=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw bi("Exception was thrown by user callback.",n),e},Math.floor(0))}},Iz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ep=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){bi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bi(e)}}class Zv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Zv.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="5",KL="v",QL="s",YL="r",JL="f",XL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ZL="ls",eM="p",p1="ac",tM="websocket",nM="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n,i,r,o=!1,a="",u=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function bz(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function rM(t,e,n){ne(typeof e=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let i;if(e===tM)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===nM)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bz(t)&&(n.ns=t.namespace);const r=[];return Ai(n,(o,a)=>{r.push(o+"="+a)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(){this.counters_={}}incrementCounter(e,n=1){Lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return NB(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE={},qE={};function IS(t){const e=t.toString();return GE[e]||(GE[e]=new Cz),GE[e]}function Az(t,e){const n=t.toString();return qE[n]||(qE[n]=e()),qE[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Dd(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="start",Rz="close",kz="pLPCommand",xz="pRTLPCB",sM="id",oM="pw",aM="ser",Nz="cb",Dz="seg",Oz="ts",Lz="d",Mz="dframe",lM=1870,uM=30,Vz=lM-uM,Fz=25e3,Uz=3e4;class Fc{constructor(e,n,i,r,o,a,u){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=a,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wm(e),this.stats_=IS(n),this.urlFn=c=>(this.appCheckToken&&(c[p1]=this.appCheckToken),rM(n,nM,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Pz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Uz)),pz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new TS((...o)=>{const[a,u,c,h,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===Ax)this.id=u,this.password=c;else if(a===Rz)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{const[a,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[Ax]="t",i[aM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Nz]=this.scriptTagHolder.uniqueCallbackIdentifier),i[KL]=ES,this.transportSessionId&&(i[QL]=this.transportSessionId),this.lastSessionId&&(i[ZL]=this.lastSessionId),this.applicationId&&(i[eM]=this.applicationId),this.appCheckToken&&(i[p1]=this.appCheckToken),typeof location<"u"&&location.hostname&&XL.test(location.hostname)&&(i[YL]=JL);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fc.forceAllow_=!0}static forceDisallow(){Fc.forceDisallow_=!0}static isAvailable(){return Fc.forceAllow_?!0:!Fc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!gz()&&!vz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=cn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=wL(n),r=WL(i,Vz);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[Mz]="t",i[sM]=e,i[oM]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=cn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class TS{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=dz(),window[kz+this.uniqueCallbackIdentifier]=e,window[xz+this.uniqueCallbackIdentifier]=n,this.myIFrame=TS.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){Hn("frame writing exception"),u.stack&&Hn(u.stack),Hn(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Hn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[sM]=this.myID,e[oM]=this.myPW,e[aM]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uM+i.length<=lM;){const a=this.pendingSegs.shift();i=i+"&"+Dz+r+"="+a.seg+"&"+Oz+r+"="+a.ts+"&"+Lz+r+"="+a.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(Fz)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Hn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=16384,jz=45e3;let $y=null;typeof MozWebSocket<"u"?$y=MozWebSocket:typeof WebSocket<"u"&&($y=WebSocket);class Ar{constructor(e,n,i,r,o,a,u){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wm(this.connId),this.stats_=IS(n),this.connURL=Ar.connectionURL_(n,a,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const a={};return a[KL]=ES,typeof location<"u"&&location.hostname&&XL.test(location.hostname)&&(a[YL]=JL),n&&(a[QL]=n),i&&(a[ZL]=i),r&&(a[p1]=r),o&&(a[eM]=o),rM(e,tM,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gl.set("previous_websocket_failure",!0);try{let i;CL(),this.mySock=new $y(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Ar.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&$y!==null&&!Ar.forceDisallow_}static previouslyFailed(){return gl.isInMemoryStorage||gl.get("previous_websocket_failure")===!0}markConnectionHealthy(){gl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Lp(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=cn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=WL(n,Bz);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(jz))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ar.responsesRequiredToBeHealthy=2;Ar.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Fc,Ar]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ar&&Ar.isAvailable();let i=n&&!Ar.previouslyFailed();if(e.webSocketOnly&&(n||bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ar];else{const r=this.transports_=[];for(const o of Up.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);Up.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Up.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz=6e4,Gz=5e3,qz=10*1024,$z=100*1024,$E="t",Px="d",Wz="s",Rx="r",Hz="e",kx="o",xx="a",Nx="n",Dx="p",Kz="h";class Qz{constructor(e,n,i,r,o,a,u,c,h,m){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=a,this.onReady_=u,this.onDisconnect_=c,this.onKill_=h,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wm("c:"+this.id+":"),this.transportManager_=new Up(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ep(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$z?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if($E in e){const n=e[$E];n===xx?this.upgradeIfSecondaryHealthy_():n===Rx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===kx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=_f("t",e),i=_f("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Dx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Nx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=_f("t",e),i=_f("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=_f($E,e);if(Px in e){const i=e[Px];if(n===Kz){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Nx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Wz?this.onConnectionShutdown_(i):n===Rx?this.onReset_(i):n===Hz?f1("Server Error: "+i):n===kx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):f1("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ES!==i&&bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),ep(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ep(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Gz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Dx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy extends dM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!hS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Wy}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=32,Lx=768;class ot{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function He(){return new ot("")}function Ne(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pa(t){return t.pieces_.length-t.pieceNum_}function at(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ot(t.pieces_,e)}function hM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Yz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fM(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pM(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ot(e,0)}function dn(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ot)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ot(n,0)}function Me(t){return t.pieceNum_>=t.pieces_.length}function ni(t,e){const n=Ne(t),i=Ne(e);if(n===null)return e;if(n===i)return ni(at(t),at(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function SS(t,e){if(pa(t)!==pa(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Pr(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(pa(t)>pa(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class Jz{constructor(e,n){this.errorPrefix_=n,this.parts_=fM(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=q_(this.parts_[i]);mM(this)}}function Xz(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=q_(e),mM(t)}function Zz(t){const e=t.parts_.pop();t.byteLength_-=q_(e),t.parts_.length>0&&(t.byteLength_-=1)}function mM(t){if(t.byteLength_>Lx)throw new Error(t.errorPrefix_+"has a key path longer than "+Lx+" bytes ("+t.byteLength_+").");if(t.parts_.length>Ox)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ox+") or object contains a cycle "+ol(t))}function ol(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends dM{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new bS}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=1e3,e8=60*5*1e3,Mx=30*1e3,t8=1.3,n8=3e4,i8="server_kill",Vx=3;class Ks extends cM{constructor(e,n,i,r,o,a,u,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=Ks.nextPersistentConnectionId_++,this.log_=wm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wf,this.maxReconnectDelay_=e8,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!CL())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bS.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Wy.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(cn(o)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new z_,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const u=a.d;a.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},a="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,u=>{const c=u.d,h=u.s;Ks.warnOnListenWarnings_(c,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",u),h!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(h,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Lr(e,"w")){const i=ad(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||WB(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Mx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=$B(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,a=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},a="n";r&&(o.q=i,o.t=r),this.sendRequest(a,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const a={p:n,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+cn(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):f1("Unrecognized action received from server: "+cn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>n8&&(this.reconnectDelay_=wf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*t8)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ks.nextConnectionId_++,o=this.lastSessionId;let a=!1,u=null;const c=function(){u?u.close():(a=!0,i())},h=function(g){ne(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:c,sendRequest:h};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,_]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?Hn("getToken() completed but was canceled"):(Hn("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,u=new Qz(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,T=>{bi(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(i8)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&bi(g),c())}}}interrupt(e){Hn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],u1(this.interruptReasons_)&&(this.reconnectDelay_=wf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>wS(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new ot(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Hn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Vx&&(this.reconnectDelay_=Mx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Hn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Vx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+zL.replace(/\./g,"-")]=1,hS()?e["framework.cordova"]=1:G_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Wy.getInstance().currentlyOnline();return u1(this.interruptReasons_)&&e}}Ks.nextPersistentConnectionId_=0;Ks.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new De(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new De(cd,e),r=new De(cd,n);return this.compare(i,r)!==0}minPost(){return De.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kv;class gM extends $_{static get __EMPTY_NODE(){return kv}static set __EMPTY_NODE(e){kv=e}compare(e,n){return Nd(e.name,n.name)}isDefinedOn(e){throw xd("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return De.MIN}maxPost(){return new De(Ol,kv)}makePost(e,n){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new De(e,kv)}toString(){return".key"}}const Wc=new gM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xv=class{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?i(e.key,n):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Oi=class Vf{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Vf.RED,this.left=r??as.EMPTY_NODE,this.right=o??as.EMPTY_NODE}copy(e,n,i,r,o){return new Vf(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return as.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return as.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Vf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Vf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Oi.RED=!0;Oi.BLACK=!1;class r8{copy(e,n,i,r,o){return this}insert(e,n,i){return new Oi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let as=class ey{constructor(e,n=ey.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ey(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Oi.BLACK,null,null))}remove(e){return new ey(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oi.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new xv(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new xv(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new xv(this.root_,null,this.comparator_,!0,e)}};as.EMPTY_NODE=new r8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t,e){return Nd(t.name,e.name)}function CS(t,e){return Nd(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m1;function o8(t){m1=t}const vM=function(t){return typeof t=="number"?"number:"+HL(t):"string:"+t},yM=function(t){if(t.isLeafNode()){const e=t.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lr(e,".sv"),"Priority must be a string or number.")}else ne(t===m1||t.isEmpty(),"priority of unexpected type.");ne(t===m1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fx;class wn{constructor(e,n=wn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yM(this.priorityNode_)}static set __childrenNodeConstructor(e){Fx=e}static get __childrenNodeConstructor(){return Fx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new wn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:wn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Me(e)?this:Ne(e)===".priority"?this.priorityNode_:wn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:wn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ne(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(ne(i!==".priority"||pa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,wn.__childrenNodeConstructor.EMPTY_NODE.updateChild(at(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vM(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=HL(this.value_):e+=this.value_,this.lazyHash_=qL(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===wn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof wn.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=wn.VALUE_TYPE_ORDER.indexOf(n),o=wn.VALUE_TYPE_ORDER.indexOf(i);return ne(r>=0,"Unknown leaf type: "+n),ne(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}wn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _M,wM;function a8(t){_M=t}function l8(t){wM=t}class u8 extends $_{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Nd(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return De.MIN}maxPost(){return new De(Ol,new wn("[PRIORITY-POST]",wM))}makePost(e,n){const i=_M(e);return new De(n,new wn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ut=new u8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=Math.log(2);class d8{constructor(e){const n=o=>parseInt(Math.log(o)/c8,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Hy=function(t,e,n,i){t.sort(e);const r=function(c,h){const m=h-c;let g,_;if(m===0)return null;if(m===1)return g=t[c],_=n?n(g):g,new Oi(_,g.node,Oi.BLACK,null,null);{const T=parseInt(m/2,10)+c,P=r(c,T),E=r(T+1,h);return g=t[T],_=n?n(g):g,new Oi(_,g.node,Oi.BLACK,P,E)}},o=function(c){let h=null,m=null,g=t.length;const _=function(P,E){const R=g-P,S=g;g-=P;const b=r(R+1,S),k=t[R],F=n?n(k):k;T(new Oi(F,k.node,E,null,b))},T=function(P){h?(h.left=P,h=P):(m=P,h=P)};for(let P=0;P<c.count;++P){const E=c.nextBitIsOne(),R=Math.pow(2,c.count-(P+1));E?_(R,Oi.BLACK):(_(R,Oi.BLACK),_(R,Oi.RED))}return m},a=new d8(t.length),u=o(a);return new as(i||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WE;const pc={};class zs{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ne(pc&&Ut,"ChildrenNode.ts has not been loaded"),WE=WE||new zs({".priority":pc},{".priority":Ut}),WE}get(e){const n=ad(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof as?n:null}hasIndex(e){return Lr(this.indexSet_,e.toString())}addIndex(e,n){ne(e!==Wc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(De.Wrap);let a=o.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=o.getNext();let u;r?u=Hy(i,e.getCompare()):u=pc;const c=e.toString(),h=Object.assign({},this.indexSet_);h[c]=e;const m=Object.assign({},this.indexes_);return m[c]=u,new zs(m,h)}addToIndexes(e,n){const i=Gy(this.indexes_,(r,o)=>{const a=ad(this.indexSet_,o);if(ne(a,"Missing index implementation for "+o),r===pc)if(a.isDefinedOn(e.node)){const u=[],c=n.getIterator(De.Wrap);let h=c.getNext();for(;h;)h.name!==e.name&&u.push(h),h=c.getNext();return u.push(e),Hy(u,a.getCompare())}else return pc;else{const u=n.get(e.name);let c=r;return u&&(c=c.remove(new De(e.name,u))),c.insert(e,e.node)}});return new zs(i,this.indexSet_)}removeFromIndexes(e,n){const i=Gy(this.indexes_,r=>{if(r===pc)return r;{const o=n.get(e.name);return o?r.remove(new De(e.name,o)):r}});return new zs(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef;class Ie{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yM(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ef||(Ef=new Ie(new as(CS),null,zs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ef}updatePriority(e){return this.children_.isEmpty()?this:new Ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ef:n}}getChild(e){const n=Ne(e);return n===null?this:this.getImmediateChild(n).getChild(at(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new De(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const a=r.isEmpty()?Ef:this.priorityNode_;return new Ie(r,a,o)}}updateChild(e,n){const i=Ne(e);if(i===null)return n;{ne(Ne(e)!==".priority"||pa(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(at(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(Ut,(a,u)=>{n[a]=u.val(e),i++,o&&Ie.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!e&&o&&r<2*i){const a=[];for(const u in n)a[u]=n[u];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+vM(this.getPriority().val())+":"),this.forEachChild(Ut,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":qL(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new De(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new De(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new De(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,De.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,De.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Em?-1:0}withIndex(e){if(e===Wc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ie(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Wc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Ut),r=n.getIterator(Ut);let o=i.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Wc?null:this.indexMap_.get(e.toString())}}Ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class h8 extends Ie{constructor(){super(new as(CS),Ie.EMPTY_NODE,zs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ie.EMPTY_NODE}isEmpty(){return!1}}const Em=new h8;Object.defineProperties(De,{MIN:{value:new De(cd,Ie.EMPTY_NODE)},MAX:{value:new De(Ol,Em)}});gM.__EMPTY_NODE=Ie.EMPTY_NODE;wn.__childrenNodeConstructor=Ie;o8(Em);l8(Em);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=!0;function Sn(t,e=null){if(t===null)return Ie.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new wn(n,Sn(e))}if(!(t instanceof Array)&&f8){const n=[];let i=!1;if(Ai(t,(a,u)=>{if(a.substring(0,1)!=="."){const c=Sn(u);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new De(a,c)))}}),n.length===0)return Ie.EMPTY_NODE;const o=Hy(n,s8,a=>a.name,CS);if(i){const a=Hy(n,Ut.getCompare());return new Ie(o,Sn(e),new zs({".priority":a},{".priority":Ut}))}else return new Ie(o,Sn(e),zs.Default)}else{let n=Ie.EMPTY_NODE;return Ai(t,(i,r)=>{if(Lr(t,i)&&i.substring(0,1)!=="."){const o=Sn(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(Sn(e))}}a8(Sn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8 extends $_{constructor(e){super(),this.indexPath_=e,ne(!Me(e)&&Ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Nd(e.name,n.name):o}makePost(e,n){const i=Sn(e),r=Ie.EMPTY_NODE.updateChild(this.indexPath_,i);return new De(n,r)}maxPost(){const e=Ie.EMPTY_NODE.updateChild(this.indexPath_,Em);return new De(Ol,e)}toString(){return fM(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8 extends $_{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Nd(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return De.MIN}maxPost(){return De.MAX}makePost(e,n){const i=Sn(e);return new De(n,i)}toString(){return".value"}}const g8=new m8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t){return{type:"value",snapshotNode:t}}function dd(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Bp(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jp(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function v8(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.index_=e}updateChild(e,n,i,r,o,a){ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(n);return u.getChild(r).equals(i.getChild(r))&&u.isEmpty()===i.isEmpty()||(a!=null&&(i.isEmpty()?e.hasChild(n)?a.trackChildChange(Bp(n,u)):ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?a.trackChildChange(dd(n,i)):a.trackChildChange(jp(n,i,u))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ut,(r,o)=>{n.hasChild(r)||i.trackChildChange(Bp(r,o))}),n.isLeafNode()||n.forEachChild(Ut,(r,o)=>{if(e.hasChild(r)){const a=e.getImmediateChild(r);a.equals(o)||i.trackChildChange(jp(r,o,a))}else i.trackChildChange(dd(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ie.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.indexedFilter_=new AS(e.getIndex()),this.index_=e.getIndex(),this.startPost_=zp.getStartPost_(e),this.endPost_=zp.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,a){return this.matches(new De(n,i))||(i=Ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,a)}updateFullNode(e,n,i){n.isLeafNode()&&(n=Ie.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(Ie.EMPTY_NODE);const o=this;return n.forEachChild(Ut,(a,u)=>{o.matches(new De(a,u))||(r=r.updateImmediateChild(a,Ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new zp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,a){return this.rangedFilter_.matches(new De(n,i))||(i=Ie.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,a):this.fullLimitUpdateChild_(e,n,i,o,a)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=Ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=Ie.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;o.hasNext()&&a<this.limit_;){const u=o.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))r=r.updateImmediateChild(u.name,u.node),a++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(Ie.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let a=0;for(;o.hasNext();){const u=o.getNext();a<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?a++:r=r.updateImmediateChild(u.name,Ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let a;if(this.reverse_){const g=this.index_.getCompare();a=(_,T)=>g(T,_)}else a=this.index_.getCompare();const u=e;ne(u.numChildren()===this.limit_,"");const c=new De(n,i),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),m=this.rangedFilter_.matches(c);if(u.hasChild(n)){const g=u.getImmediateChild(n);let _=r.getChildAfterChild(this.index_,h,this.reverse_);for(;_!=null&&(_.name===n||u.hasChild(_.name));)_=r.getChildAfterChild(this.index_,_,this.reverse_);const T=_==null?1:a(_,c);if(m&&!i.isEmpty()&&T>=0)return o!=null&&o.trackChildChange(jp(n,i,g)),u.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(Bp(n,g));const E=u.updateImmediateChild(n,Ie.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(o!=null&&o.trackChildChange(dd(_.name,_.node)),E.updateImmediateChild(_.name,_.node)):E}}else return i.isEmpty()?e:m&&a(h,c)>=0?(o!=null&&(o.trackChildChange(Bp(h.name,h.node)),o.trackChildChange(dd(n,i))),u.updateImmediateChild(n,i).updateImmediateChild(h.name,Ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ut}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cd}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ol}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ut}copy(){const e=new PS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _8(t){return t.loadsAllData()?new AS(t.getIndex()):t.hasLimit()?new y8(t):new zp(t)}function Ux(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ut?n="$priority":t.index_===g8?n="$value":t.index_===Wc?n="$key":(ne(t.index_ instanceof p8,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=cn(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=cn(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+cn(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=cn(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+cn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Bx(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ut&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky extends cM{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=wm("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const a=Ky.getListenId_(e,i),u={};this.listens_[a]=u;const c=Ux(e._queryParams);this.restRequest_(o+".json",c,(h,m)=>{let g=m;if(h===404&&(g=null,h=null),h===null&&this.onDataUpdate_(o,g,!1,i),ad(this.listens_,a)===u){let _;h?h===401?_="permission_denied":_="rest_error:"+h:_="ok",r(_,null)}})}unlisten(e,n){const i=Ky.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Ux(e._queryParams),i=e._path.toString(),r=new z_;return this.restRequest_(i+".json",n,(o,a)=>{let u=a;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+eu(n);this.log_("Sending REST request for "+a);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);let c=null;if(u.status>=200&&u.status<300){try{c=Lp(u.responseText)}catch{bi("Failed to parse JSON response for "+a+": "+u.responseText)}i(null,c)}else u.status!==401&&u.status!==404&&bi("Got unsuccessful REST response for "+a+" Status: "+u.status),i(u.status);i=null}},u.open("GET",a,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.rootNode_=Ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(){return{value:null,children:new Map}}function IM(t,e,n){if(Me(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Ne(e);t.children.has(i)||t.children.set(i,Qy());const r=t.children.get(i);e=at(e),IM(r,e,n)}}function g1(t,e,n){t.value!==null?n(e,t.value):E8(t,(i,r)=>{const o=new ot(e.toString()+"/"+i);g1(r,o,n)})}function E8(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ai(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=10*1e3,T8=30*1e3,S8=5*60*1e3;class b8{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new I8(e);const i=jx+(T8-jx)*Math.random();ep(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Ai(e,(r,o)=>{o>0&&Lr(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),ep(this.reportStats_.bind(this),Math.floor(Math.random()*2*S8))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Rr||(Rr={}));function TM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function RS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function kS(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Rr.ACK_USER_WRITE,this.source=TM()}operationForChild(e){if(Me(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ot(e));return new Yy(He(),n,this.revert)}}else return ne(Ne(this.path)===e,"operationForChild called for unrelated child."),new Yy(at(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){this.source=e,this.path=n,this.type=Rr.LISTEN_COMPLETE}operationForChild(e){return Me(this.path)?new Gp(this.source,He()):new Gp(this.source,at(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Rr.OVERWRITE}operationForChild(e){return Me(this.path)?new Ll(this.source,He(),this.snap.getImmediateChild(e)):new Ll(this.source,at(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Rr.MERGE}operationForChild(e){if(Me(this.path)){const n=this.children.subtree(new ot(e));return n.isEmpty()?null:n.value?new Ll(this.source,He(),n.value):new qp(this.source,He(),n)}else return ne(Ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new qp(this.source,at(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Me(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function A8(t,e,n,i){const r=[],o=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(v8(a.childName,a.snapshotNode))}),If(t,r,"child_removed",e,i,n),If(t,r,"child_added",e,i,n),If(t,r,"child_moved",o,i,n),If(t,r,"child_changed",e,i,n),If(t,r,"value",e,i,n),r}function If(t,e,n,i,r,o){const a=i.filter(u=>u.type===n);a.sort((u,c)=>R8(t,u,c)),a.forEach(u=>{const c=P8(t,u,o);r.forEach(h=>{h.respondsTo(u.type)&&e.push(h.createEvent(c,t.query_))})})}function P8(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function R8(t,e,n){if(e.childName==null||n.childName==null)throw xd("Should only compare child_ events.");const i=new De(e.childName,e.snapshotNode),r=new De(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e){return{eventCache:t,serverCache:e}}function tp(t,e,n,i){return W_(new ma(e,n,i),t.serverCache)}function SM(t,e,n,i){return W_(t.eventCache,new ma(e,n,i))}function Jy(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ml(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HE;const k8=()=>(HE||(HE=new as(mz)),HE);class pt{constructor(e,n=k8()){this.value=e,this.children=n}static fromObject(e){let n=new pt(null);return Ai(e,(i,r)=>{n=n.set(new ot(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:He(),value:this.value};if(Me(e))return null;{const i=Ne(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(at(e),n);return o!=null?{path:dn(new ot(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Me(e))return this;{const n=Ne(e),i=this.children.get(n);return i!==null?i.subtree(at(e)):new pt(null)}}set(e,n){if(Me(e))return new pt(n,this.children);{const i=Ne(e),o=(this.children.get(i)||new pt(null)).set(at(e),n),a=this.children.insert(i,o);return new pt(this.value,a)}}remove(e){if(Me(e))return this.children.isEmpty()?new pt(null):new pt(null,this.children);{const n=Ne(e),i=this.children.get(n);if(i){const r=i.remove(at(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new pt(null):new pt(this.value,o)}else return this}}get(e){if(Me(e))return this.value;{const n=Ne(e),i=this.children.get(n);return i?i.get(at(e)):null}}setTree(e,n){if(Me(e))return n;{const i=Ne(e),o=(this.children.get(i)||new pt(null)).setTree(at(e),n);let a;return o.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,o),new pt(this.value,a)}}fold(e){return this.fold_(He(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(dn(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,He(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(Me(e))return null;{const o=Ne(e),a=this.children.get(o);return a?a.findOnPath_(at(e),dn(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,He(),n)}foreachOnPath_(e,n,i){if(Me(e))return this;{this.value&&i(n,this.value);const r=Ne(e),o=this.children.get(r);return o?o.foreachOnPath_(at(e),dn(n,r),i):new pt(null)}}foreach(e){this.foreach_(He(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(dn(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.writeTree_=e}static empty(){return new Nr(new pt(null))}}function np(t,e,n){if(Me(e))return new Nr(new pt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const a=ni(r,e);return o=o.updateChild(a,n),new Nr(t.writeTree_.set(r,o))}else{const r=new pt(n),o=t.writeTree_.setTree(e,r);return new Nr(o)}}}function zx(t,e,n){let i=t;return Ai(n,(r,o)=>{i=np(i,dn(e,r),o)}),i}function Gx(t,e){if(Me(e))return Nr.empty();{const n=t.writeTree_.setTree(e,new pt(null));return new Nr(n)}}function v1(t,e){return tu(t,e)!=null}function tu(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ni(n.path,e)):null}function qx(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ut,(i,r)=>{e.push(new De(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new De(i,r.value))}),e}function aa(t,e){if(Me(e))return t;{const n=tu(t,e);return n!=null?new Nr(new pt(n)):new Nr(t.writeTree_.subtree(e))}}function y1(t){return t.writeTree_.isEmpty()}function hd(t,e){return bM(He(),t.writeTree_,e)}function bM(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(ne(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=bM(dn(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(dn(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){return RM(e,t)}function x8(t,e,n,i,r){ne(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=np(t.visibleWrites,e,n)),t.lastWriteId=i}function N8(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function D8(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);ne(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const u=t.allWrites[a];u.visible&&(a>=n&&O8(u,i.path)?r=!1:Pr(i.path,u.path)&&(o=!0)),a--}if(r){if(o)return L8(t),!0;if(i.snap)t.visibleWrites=Gx(t.visibleWrites,i.path);else{const u=i.children;Ai(u,c=>{t.visibleWrites=Gx(t.visibleWrites,dn(i.path,c))})}return!0}else return!1}function O8(t,e){if(t.snap)return Pr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Pr(dn(t.path,n),e))return!0;return!1}function L8(t){t.visibleWrites=CM(t.allWrites,M8,He()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function M8(t){return t.visible}function CM(t,e,n){let i=Nr.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const a=o.path;let u;if(o.snap)Pr(n,a)?(u=ni(n,a),i=np(i,u,o.snap)):Pr(a,n)&&(u=ni(a,n),i=np(i,He(),o.snap.getChild(u)));else if(o.children){if(Pr(n,a))u=ni(n,a),i=zx(i,u,o.children);else if(Pr(a,n))if(u=ni(a,n),Me(u))i=zx(i,He(),o.children);else{const c=ad(o.children,Ne(u));if(c){const h=c.getChild(at(u));i=np(i,He(),h)}}}else throw xd("WriteRecord should have .snap or .children")}}return i}function AM(t,e,n,i,r){if(!i&&!r){const o=tu(t.visibleWrites,e);if(o!=null)return o;{const a=aa(t.visibleWrites,e);if(y1(a))return n;if(n==null&&!v1(a,He()))return null;{const u=n||Ie.EMPTY_NODE;return hd(a,u)}}}else{const o=aa(t.visibleWrites,e);if(!r&&y1(o))return n;if(!r&&n==null&&!v1(o,He()))return null;{const a=function(h){return(h.visible||r)&&(!i||!~i.indexOf(h.writeId))&&(Pr(h.path,e)||Pr(e,h.path))},u=CM(t.allWrites,a,e),c=n||Ie.EMPTY_NODE;return hd(u,c)}}}function V8(t,e,n){let i=Ie.EMPTY_NODE;const r=tu(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ut,(o,a)=>{i=i.updateImmediateChild(o,a)}),i;if(n){const o=aa(t.visibleWrites,e);return n.forEachChild(Ut,(a,u)=>{const c=hd(aa(o,new ot(a)),u);i=i.updateImmediateChild(a,c)}),qx(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const o=aa(t.visibleWrites,e);return qx(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function F8(t,e,n,i,r){ne(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=dn(e,n);if(v1(t.visibleWrites,o))return null;{const a=aa(t.visibleWrites,o);return y1(a)?r.getChild(n):hd(a,r.getChild(n))}}function U8(t,e,n,i){const r=dn(e,n),o=tu(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const a=aa(t.visibleWrites,r);return hd(a,i.getNode().getImmediateChild(n))}else return null}function B8(t,e){return tu(t.visibleWrites,e)}function j8(t,e,n,i,r,o,a){let u;const c=aa(t.visibleWrites,e),h=tu(c,He());if(h!=null)u=h;else if(n!=null)u=hd(c,n);else return[];if(u=u.withIndex(a),!u.isEmpty()&&!u.isLeafNode()){const m=[],g=a.getCompare(),_=o?u.getReverseIteratorFrom(i,a):u.getIteratorFrom(i,a);let T=_.getNext();for(;T&&m.length<r;)g(T,i)!==0&&m.push(T),T=_.getNext();return m}else return[]}function z8(){return{visibleWrites:Nr.empty(),allWrites:[],lastWriteId:-1}}function Xy(t,e,n,i){return AM(t.writeTree,t.treePath,e,n,i)}function xS(t,e){return V8(t.writeTree,t.treePath,e)}function $x(t,e,n,i){return F8(t.writeTree,t.treePath,e,n,i)}function Zy(t,e){return B8(t.writeTree,dn(t.treePath,e))}function G8(t,e,n,i,r,o){return j8(t.writeTree,t.treePath,e,n,i,r,o)}function NS(t,e,n){return U8(t.writeTree,t.treePath,e,n)}function PM(t,e){return RM(dn(t.treePath,e),t.writeTree)}function RM(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,jp(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Bp(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,dd(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,jp(i,e.snapshotNode,r.oldSnap));else throw xd("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const kM=new $8;class DS{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ma(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return NS(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ml(this.viewCache_),o=G8(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(t){return{filter:t}}function H8(t,e){ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function K8(t,e,n,i,r){const o=new q8;let a,u;if(n.type===Rr.OVERWRITE){const h=n;h.source.fromUser?a=_1(t,e,h.path,h.snap,i,r,o):(ne(h.source.fromServer,"Unknown source."),u=h.source.tagged||e.serverCache.isFiltered()&&!Me(h.path),a=e_(t,e,h.path,h.snap,i,r,u,o))}else if(n.type===Rr.MERGE){const h=n;h.source.fromUser?a=Y8(t,e,h.path,h.children,i,r,o):(ne(h.source.fromServer,"Unknown source."),u=h.source.tagged||e.serverCache.isFiltered(),a=w1(t,e,h.path,h.children,i,r,u,o))}else if(n.type===Rr.ACK_USER_WRITE){const h=n;h.revert?a=Z8(t,e,h.path,i,r,o):a=J8(t,e,h.path,h.affectedTree,i,r,o)}else if(n.type===Rr.LISTEN_COMPLETE)a=X8(t,e,n.path,i,o);else throw xd("Unknown operation type: "+n.type);const c=o.getChanges();return Q8(e,a,c),{viewCache:a,changes:c}}function Q8(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Jy(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(EM(Jy(e)))}}function xM(t,e,n,i,r,o){const a=e.eventCache;if(Zy(i,n)!=null)return e;{let u,c;if(Me(n))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=Ml(e),m=h instanceof Ie?h:Ie.EMPTY_NODE,g=xS(i,m);u=t.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{const h=Xy(i,Ml(e));u=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{const h=Ne(n);if(h===".priority"){ne(pa(n)===1,"Can't have a priority with additional path components");const m=a.getNode();c=e.serverCache.getNode();const g=$x(i,n,m,c);g!=null?u=t.filter.updatePriority(m,g):u=a.getNode()}else{const m=at(n);let g;if(a.isCompleteForChild(h)){c=e.serverCache.getNode();const _=$x(i,n,a.getNode(),c);_!=null?g=a.getNode().getImmediateChild(h).updateChild(m,_):g=a.getNode().getImmediateChild(h)}else g=NS(i,h,e.serverCache);g!=null?u=t.filter.updateChild(a.getNode(),h,g,m,r,o):u=a.getNode()}}return tp(e,u,a.isFullyInitialized()||Me(n),t.filter.filtersNodes())}}function e_(t,e,n,i,r,o,a,u){const c=e.serverCache;let h;const m=a?t.filter:t.filter.getIndexedFilter();if(Me(n))h=m.updateFullNode(c.getNode(),i,null);else if(m.filtersNodes()&&!c.isFiltered()){const T=c.getNode().updateChild(n,i);h=m.updateFullNode(c.getNode(),T,null)}else{const T=Ne(n);if(!c.isCompleteForPath(n)&&pa(n)>1)return e;const P=at(n),R=c.getNode().getImmediateChild(T).updateChild(P,i);T===".priority"?h=m.updatePriority(c.getNode(),R):h=m.updateChild(c.getNode(),T,R,P,kM,null)}const g=SM(e,h,c.isFullyInitialized()||Me(n),m.filtersNodes()),_=new DS(r,g,o);return xM(t,g,n,r,_,u)}function _1(t,e,n,i,r,o,a){const u=e.eventCache;let c,h;const m=new DS(r,e,o);if(Me(n))h=t.filter.updateFullNode(e.eventCache.getNode(),i,a),c=tp(e,h,!0,t.filter.filtersNodes());else{const g=Ne(n);if(g===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),i),c=tp(e,h,u.isFullyInitialized(),u.isFiltered());else{const _=at(n),T=u.getNode().getImmediateChild(g);let P;if(Me(_))P=i;else{const E=m.getCompleteChild(g);E!=null?hM(_)===".priority"&&E.getChild(pM(_)).isEmpty()?P=E:P=E.updateChild(_,i):P=Ie.EMPTY_NODE}if(T.equals(P))c=e;else{const E=t.filter.updateChild(u.getNode(),g,P,_,m,a);c=tp(e,E,u.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Wx(t,e){return t.eventCache.isCompleteForChild(e)}function Y8(t,e,n,i,r,o,a){let u=e;return i.foreach((c,h)=>{const m=dn(n,c);Wx(e,Ne(m))&&(u=_1(t,u,m,h,r,o,a))}),i.foreach((c,h)=>{const m=dn(n,c);Wx(e,Ne(m))||(u=_1(t,u,m,h,r,o,a))}),u}function Hx(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function w1(t,e,n,i,r,o,a,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,h;Me(n)?h=i:h=new pt(null).setTree(n,i);const m=e.serverCache.getNode();return h.children.inorderTraversal((g,_)=>{if(m.hasChild(g)){const T=e.serverCache.getNode().getImmediateChild(g),P=Hx(t,T,_);c=e_(t,c,new ot(g),P,r,o,a,u)}}),h.children.inorderTraversal((g,_)=>{const T=!e.serverCache.isCompleteForChild(g)&&_.value===null;if(!m.hasChild(g)&&!T){const P=e.serverCache.getNode().getImmediateChild(g),E=Hx(t,P,_);c=e_(t,c,new ot(g),E,r,o,a,u)}}),c}function J8(t,e,n,i,r,o,a){if(Zy(r,n)!=null)return e;const u=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(Me(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return e_(t,e,n,c.getNode().getChild(n),r,o,u,a);if(Me(n)){let h=new pt(null);return c.getNode().forEachChild(Wc,(m,g)=>{h=h.set(new ot(m),g)}),w1(t,e,n,h,r,o,u,a)}else return e}else{let h=new pt(null);return i.foreach((m,g)=>{const _=dn(n,m);c.isCompleteForPath(_)&&(h=h.set(m,c.getNode().getChild(_)))}),w1(t,e,n,h,r,o,u,a)}}function X8(t,e,n,i,r){const o=e.serverCache,a=SM(e,o.getNode(),o.isFullyInitialized()||Me(n),o.isFiltered());return xM(t,a,n,i,kM,r)}function Z8(t,e,n,i,r,o){let a;if(Zy(i,n)!=null)return e;{const u=new DS(i,e,r),c=e.eventCache.getNode();let h;if(Me(n)||Ne(n)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Xy(i,Ml(e));else{const g=e.serverCache.getNode();ne(g instanceof Ie,"serverChildren would be complete if leaf node"),m=xS(i,g)}m=m,h=t.filter.updateFullNode(c,m,o)}else{const m=Ne(n);let g=NS(i,m,e.serverCache);g==null&&e.serverCache.isCompleteForChild(m)&&(g=c.getImmediateChild(m)),g!=null?h=t.filter.updateChild(c,m,g,at(n),u,o):e.eventCache.getNode().hasChild(m)?h=t.filter.updateChild(c,m,Ie.EMPTY_NODE,at(n),u,o):h=c,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Xy(i,Ml(e)),a.isLeafNode()&&(h=t.filter.updateFullNode(h,a,o)))}return a=e.serverCache.isFullyInitialized()||Zy(i,He())!=null,tp(e,h,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new AS(i.getIndex()),o=_8(i);this.processor_=W8(o);const a=n.serverCache,u=n.eventCache,c=r.updateFullNode(Ie.EMPTY_NODE,a.getNode(),null),h=o.updateFullNode(Ie.EMPTY_NODE,u.getNode(),null),m=new ma(c,a.isFullyInitialized(),r.filtersNodes()),g=new ma(h,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=W_(g,m),this.eventGenerator_=new C8(this.query_)}get query(){return this.query_}}function t7(t){return t.viewCache_.serverCache.getNode()}function n7(t){return Jy(t.viewCache_)}function i7(t,e){const n=Ml(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Me(e)&&!n.getImmediateChild(Ne(e)).isEmpty())?n.getChild(e):null}function Kx(t){return t.eventRegistrations_.length===0}function r7(t,e){t.eventRegistrations_.push(e)}function Qx(t,e,n){const i=[];if(n){ne(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const a=o.createCancelEvent(n,r);a&&i.push(a)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const a=t.eventRegistrations_[o];if(!a.matches(e))r.push(a);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function Yx(t,e,n,i){e.type===Rr.MERGE&&e.source.queryId!==null&&(ne(Ml(t.viewCache_),"We should always have a full cache before handling merges"),ne(Jy(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=K8(t.processor_,r,e,n,i);return H8(t.processor_,o.viewCache),ne(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,NM(t,o.changes,o.viewCache.eventCache.getNode(),null)}function s7(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ut,(o,a)=>{i.push(dd(o,a))}),n.isFullyInitialized()&&i.push(EM(n.getNode())),NM(t,i,n.getNode(),e)}function NM(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return A8(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t_;class DM{constructor(){this.views=new Map}}function o7(t){ne(!t_,"__referenceConstructor has already been defined"),t_=t}function a7(){return ne(t_,"Reference.ts has not been loaded"),t_}function l7(t){return t.views.size===0}function OS(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return ne(o!=null,"SyncTree gave us an op for an invalid query."),Yx(o,e,n,i)}else{let o=[];for(const a of t.views.values())o=o.concat(Yx(a,e,n,i));return o}}function OM(t,e,n,i,r){const o=e._queryIdentifier,a=t.views.get(o);if(!a){let u=Xy(n,r?i:null),c=!1;u?c=!0:i instanceof Ie?(u=xS(n,i),c=!1):(u=Ie.EMPTY_NODE,c=!1);const h=W_(new ma(u,c,!1),new ma(i,r,!1));return new e7(e,h)}return a}function u7(t,e,n,i,r,o){const a=OM(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),r7(a,n),s7(a,n)}function c7(t,e,n,i){const r=e._queryIdentifier,o=[];let a=[];const u=ga(t);if(r==="default")for(const[c,h]of t.views.entries())a=a.concat(Qx(h,n,i)),Kx(h)&&(t.views.delete(c),h.query._queryParams.loadsAllData()||o.push(h.query));else{const c=t.views.get(r);c&&(a=a.concat(Qx(c,n,i)),Kx(c)&&(t.views.delete(r),c.query._queryParams.loadsAllData()||o.push(c.query)))}return u&&!ga(t)&&o.push(new(a7())(e._repo,e._path)),{removed:o,events:a}}function LM(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function la(t,e){let n=null;for(const i of t.views.values())n=n||i7(i,e);return n}function MM(t,e){if(e._queryParams.loadsAllData())return K_(t);{const i=e._queryIdentifier;return t.views.get(i)}}function VM(t,e){return MM(t,e)!=null}function ga(t){return K_(t)!=null}function K_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_;function d7(t){ne(!n_,"__referenceConstructor has already been defined"),n_=t}function h7(){return ne(n_,"Reference.ts has not been loaded"),n_}let f7=1;class Jx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pt(null),this.pendingWriteTree_=z8(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function FM(t,e,n,i,r){return x8(t.pendingWriteTree_,e,n,i,r),r?Tm(t,new Ll(TM(),e,n)):[]}function vl(t,e,n=!1){const i=N8(t.pendingWriteTree_,e);if(D8(t.pendingWriteTree_,e)){let o=new pt(null);return i.snap!=null?o=o.set(He(),!0):Ai(i.children,a=>{o=o.set(new ot(a),!0)}),Tm(t,new Yy(i.path,o,n))}else return[]}function Im(t,e,n){return Tm(t,new Ll(RS(),e,n))}function p7(t,e,n){const i=pt.fromObject(n);return Tm(t,new qp(RS(),e,i))}function m7(t,e){return Tm(t,new Gp(RS(),e))}function g7(t,e,n){const i=MS(t,n);if(i){const r=VS(i),o=r.path,a=r.queryId,u=ni(o,e),c=new Gp(kS(a),u);return FS(t,o,c)}else return[]}function i_(t,e,n,i,r=!1){const o=e._path,a=t.syncPointTree_.get(o);let u=[];if(a&&(e._queryIdentifier==="default"||VM(a,e))){const c=c7(a,e,n,i);l7(a)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const h=c.removed;if(u=c.events,!r){const m=h.findIndex(_=>_._queryParams.loadsAllData())!==-1,g=t.syncPointTree_.findOnPath(o,(_,T)=>ga(T));if(m&&!g){const _=t.syncPointTree_.subtree(o);if(!_.isEmpty()){const T=_7(_);for(let P=0;P<T.length;++P){const E=T[P],R=E.query,S=zM(t,E);t.listenProvider_.startListening(ip(R),$p(t,R),S.hashFn,S.onComplete)}}}!g&&h.length>0&&!i&&(m?t.listenProvider_.stopListening(ip(e),null):h.forEach(_=>{const T=t.queryToTagMap.get(Q_(_));t.listenProvider_.stopListening(ip(_),T)}))}w7(t,h)}return u}function UM(t,e,n,i){const r=MS(t,i);if(r!=null){const o=VS(r),a=o.path,u=o.queryId,c=ni(a,e),h=new Ll(kS(u),c,n);return FS(t,a,h)}else return[]}function v7(t,e,n,i){const r=MS(t,i);if(r){const o=VS(r),a=o.path,u=o.queryId,c=ni(a,e),h=pt.fromObject(n),m=new qp(kS(u),c,h);return FS(t,a,m)}else return[]}function E1(t,e,n,i=!1){const r=e._path;let o=null,a=!1;t.syncPointTree_.foreachOnPath(r,(_,T)=>{const P=ni(_,r);o=o||la(T,P),a=a||ga(T)});let u=t.syncPointTree_.get(r);u?(a=a||ga(u),o=o||la(u,He())):(u=new DM,t.syncPointTree_=t.syncPointTree_.set(r,u));let c;o!=null?c=!0:(c=!1,o=Ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((T,P)=>{const E=la(P,He());E&&(o=o.updateImmediateChild(T,E))}));const h=VM(u,e);if(!h&&!e._queryParams.loadsAllData()){const _=Q_(e);ne(!t.queryToTagMap.has(_),"View does not exist, but we have a tag");const T=E7();t.queryToTagMap.set(_,T),t.tagToQueryMap.set(T,_)}const m=H_(t.pendingWriteTree_,r);let g=u7(u,e,n,m,o,c);if(!h&&!a&&!i){const _=MM(u,e);g=g.concat(I7(t,e,_))}return g}function LS(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(a,u)=>{const c=ni(a,e),h=la(u,c);if(h)return h});return AM(r,e,o,n,!0)}function y7(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(h,m)=>{const g=ni(h,n);i=i||la(m,g)});let r=t.syncPointTree_.get(n);r?i=i||la(r,He()):(r=new DM,t.syncPointTree_=t.syncPointTree_.set(n,r));const o=i!=null,a=o?new ma(i,!0,!1):null,u=H_(t.pendingWriteTree_,e._path),c=OM(r,e,u,o?a.getNode():Ie.EMPTY_NODE,o);return n7(c)}function Tm(t,e){return BM(e,t.syncPointTree_,null,H_(t.pendingWriteTree_,He()))}function BM(t,e,n,i){if(Me(t.path))return jM(t,e,n,i);{const r=e.get(He());n==null&&r!=null&&(n=la(r,He()));let o=[];const a=Ne(t.path),u=t.operationForChild(a),c=e.children.get(a);if(c&&u){const h=n?n.getImmediateChild(a):null,m=PM(i,a);o=o.concat(BM(u,c,h,m))}return r&&(o=o.concat(OS(r,t,i,n))),o}}function jM(t,e,n,i){const r=e.get(He());n==null&&r!=null&&(n=la(r,He()));let o=[];return e.children.inorderTraversal((a,u)=>{const c=n?n.getImmediateChild(a):null,h=PM(i,a),m=t.operationForChild(a);m&&(o=o.concat(jM(m,u,c,h)))}),r&&(o=o.concat(OS(r,t,i,n))),o}function zM(t,e){const n=e.query,i=$p(t,n);return{hashFn:()=>(t7(e)||Ie.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?g7(t,n._path,i):m7(t,n._path);{const o=yz(r,n);return i_(t,n,null,o)}}}}function $p(t,e){const n=Q_(e);return t.queryToTagMap.get(n)}function Q_(t){return t._path.toString()+"$"+t._queryIdentifier}function MS(t,e){return t.tagToQueryMap.get(e)}function VS(t){const e=t.indexOf("$");return ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ot(t.substr(0,e))}}function FS(t,e,n){const i=t.syncPointTree_.get(e);ne(i,"Missing sync point for query tag that we're tracking");const r=H_(t.pendingWriteTree_,e);return OS(i,n,r,null)}function _7(t){return t.fold((e,n,i)=>{if(n&&ga(n))return[K_(n)];{let r=[];return n&&(r=LM(n)),Ai(i,(o,a)=>{r=r.concat(a)}),r}})}function ip(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(h7())(t._repo,t._path):t}function w7(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Q_(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function E7(){return f7++}function I7(t,e,n){const i=e._path,r=$p(t,e),o=zM(t,n),a=t.listenProvider_.startListening(ip(e),r,o.hashFn,o.onComplete),u=t.syncPointTree_.subtree(i);if(r)ne(!ga(u.value),"If we're adding a query, it shouldn't be shadowed");else{const c=u.fold((h,m,g)=>{if(!Me(h)&&m&&ga(m))return[K_(m).query];{let _=[];return m&&(_=_.concat(LM(m).map(T=>T.query))),Ai(g,(T,P)=>{_=_.concat(P)}),_}});for(let h=0;h<c.length;++h){const m=c[h];t.listenProvider_.stopListening(ip(m),$p(t,m))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new US(n)}node(){return this.node_}}class BS{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=dn(this.path_,e);return new BS(this.syncTree_,n)}node(){return LS(this.syncTree_,this.path_)}}const T7=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Xx=function(t,e,n){if(!t||typeof t!="object")return t;if(ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return S7(t[".sv"],e,n);if(typeof t[".sv"]=="object")return b7(t[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},S7=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+t)}},b7=function(t,e,n){t.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&ne(!1,"Unexpected increment value: "+i);const r=e.node();if(ne(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return typeof a!="number"?i:a+i},C7=function(t,e,n,i){return jS(e,new BS(n,t),i)},GM=function(t,e,n){return jS(t,new US(e),n)};function jS(t,e,n){const i=t.getPriority().val(),r=Xx(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const a=t,u=Xx(a.getValue(),e,n);return u!==a.getValue()||r!==a.getPriority().val()?new wn(u,Sn(r)):t}else{const a=t;return o=a,r!==a.getPriority().val()&&(o=o.updatePriority(new wn(r))),a.forEachChild(Ut,(u,c)=>{const h=jS(c,e.getImmediateChild(u),n);h!==c&&(o=o.updateImmediateChild(u,h))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function GS(t,e){let n=e instanceof ot?e:new ot(e),i=t,r=Ne(n);for(;r!==null;){const o=ad(i.node.children,r)||{children:{},childCount:0};i=new zS(r,i,o),n=at(n),r=Ne(n)}return i}function Od(t){return t.node.value}function qM(t,e){t.node.value=e,I1(t)}function $M(t){return t.node.childCount>0}function A7(t){return Od(t)===void 0&&!$M(t)}function Y_(t,e){Ai(t.node.children,(n,i)=>{e(new zS(n,t,i))})}function WM(t,e,n,i){n&&!i&&e(t),Y_(t,r=>{WM(r,e,!0,i)}),n&&i&&e(t)}function P7(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Sm(t){return new ot(t.parent===null?t.name:Sm(t.parent)+"/"+t.name)}function I1(t){t.parent!==null&&R7(t.parent,t.name,t)}function R7(t,e,n){const i=A7(n),r=Lr(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,I1(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,I1(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=/[\[\].#$\/\u0000-\u001F\u007F]/,x7=/[\[\].#$\u0000-\u001F\u007F]/,KE=10*1024*1024,HM=function(t){return typeof t=="string"&&t.length!==0&&!k7.test(t)},KM=function(t){return typeof t=="string"&&t.length!==0&&!x7.test(t)},N7=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),KM(t)},QM=function(t,e,n,i){i&&e===void 0||qS(pS(t,"value"),e,n)},qS=function(t,e,n){const i=n instanceof ot?new Jz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ol(i));if(typeof e=="function")throw new Error(t+"contains a function "+ol(i)+" with contents = "+e.toString());if($L(e))throw new Error(t+"contains "+e.toString()+" "+ol(i));if(typeof e=="string"&&e.length>KE/3&&q_(e)>KE)throw new Error(t+"contains a string greater than "+KE+" utf8 bytes "+ol(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(Ai(e,(a,u)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!HM(a)))throw new Error(t+" contains an invalid key ("+a+") "+ol(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xz(i,a),qS(t,u,i),Zz(i)}),r&&o)throw new Error(t+' contains ".value" child '+ol(i)+" in addition to actual children.")}},YM=function(t,e,n,i){if(!KM(n))throw new Error(pS(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},D7=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),YM(t,e,n)},JM=function(t,e){if(Ne(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},O7=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!HM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!N7(n))throw new Error(pS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $S(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!SS(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function XM(t,e,n){$S(t,n),ZM(t,i=>SS(i,e))}function ms(t,e,n){$S(t,n),ZM(t,i=>Pr(i,e)||Pr(e,i))}function ZM(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(M7(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function M7(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Zf&&Hn("event: "+n.toString()),Dd(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7="repo_interrupt",F7=25;class U7{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new L7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qy(),this.transactionQueueTree_=new zS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function B7(t,e,n){if(t.stats_=IS(t.repoInfo_),t.forceRestClient_||Iz())t.server_=new Ky(t.repoInfo_,(i,r,o,a)=>{Zx(t,i,r,o,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>e2(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cn(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Ks(t.repoInfo_,e,(i,r,o,a)=>{Zx(t,i,r,o,a)},i=>{e2(t,i)},i=>{j7(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Az(t.repoInfo_,()=>new b8(t.stats_,t.server_)),t.infoData_=new w8,t.infoSyncTree_=new Jx({startListening:(i,r,o,a)=>{let u=[];const c=t.infoData_.getNode(i._path);return c.isEmpty()||(u=Im(t.infoSyncTree_,i._path,c),setTimeout(()=>{a("ok")},0)),u},stopListening:()=>{}}),HS(t,"connected",!1),t.serverSyncTree_=new Jx({startListening:(i,r,o,a)=>(t.server_.listen(i,o,r,(u,c)=>{const h=a(u,c);ms(t.eventQueue_,i._path,h)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function eV(t){const n=t.infoData_.getNode(new ot(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function WS(t){return T7({timestamp:eV(t)})}function Zx(t,e,n,i,r){t.dataUpdateCount++;const o=new ot(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(i){const c=Gy(n,h=>Sn(h));a=v7(t.serverSyncTree_,o,c,r)}else{const c=Sn(n);a=UM(t.serverSyncTree_,o,c,r)}else if(i){const c=Gy(n,h=>Sn(h));a=p7(t.serverSyncTree_,o,c)}else{const c=Sn(n);a=Im(t.serverSyncTree_,o,c)}let u=o;a.length>0&&(u=X_(t,o)),ms(t.eventQueue_,u,a)}function e2(t,e){HS(t,"connected",e),e===!1&&q7(t)}function j7(t,e){Ai(e,(n,i)=>{HS(t,n,i)})}function HS(t,e,n){const i=new ot("/.info/"+e),r=Sn(n);t.infoData_.updateSnapshot(i,r);const o=Im(t.infoSyncTree_,i,r);ms(t.eventQueue_,i,o)}function tV(t){return t.nextWriteId_++}function z7(t,e,n){const i=y7(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(r=>{const o=Sn(r).withIndex(e._queryParams.getIndex());E1(t.serverSyncTree_,e,n,!0);let a;if(e._queryParams.loadsAllData())a=Im(t.serverSyncTree_,e._path,o);else{const u=$p(t.serverSyncTree_,e);a=UM(t.serverSyncTree_,e._path,o,u)}return ms(t.eventQueue_,e._path,a),i_(t.serverSyncTree_,e,n,null,!0),o},r=>(J_(t,"get for query "+cn(e)+" failed: "+r),Promise.reject(new Error(r))))}function G7(t,e,n,i,r){J_(t,"set",{path:e.toString(),value:n,priority:i});const o=WS(t),a=Sn(n,i),u=LS(t.serverSyncTree_,e),c=GM(a,u,o),h=tV(t),m=FM(t.serverSyncTree_,e,c,h,!0);$S(t.eventQueue_,m),t.server_.put(e.toString(),a.val(!0),(_,T)=>{const P=_==="ok";P||bi("set at "+e+" failed: "+_);const E=vl(t.serverSyncTree_,h,!P);ms(t.eventQueue_,e,E),H7(t,r,_,T)});const g=aV(t,e);X_(t,g),ms(t.eventQueue_,g,[])}function q7(t){J_(t,"onDisconnectEvents");const e=WS(t),n=Qy();g1(t.onDisconnect_,He(),(r,o)=>{const a=C7(r,o,t.serverSyncTree_,e);IM(n,r,a)});let i=[];g1(n,He(),(r,o)=>{i=i.concat(Im(t.serverSyncTree_,r,o));const a=aV(t,r);X_(t,a)}),t.onDisconnect_=Qy(),ms(t.eventQueue_,He(),i)}function $7(t,e,n){let i;Ne(e._path)===".info"?i=E1(t.infoSyncTree_,e,n):i=E1(t.serverSyncTree_,e,n),XM(t.eventQueue_,e._path,i)}function nV(t,e,n){let i;Ne(e._path)===".info"?i=i_(t.infoSyncTree_,e,n):i=i_(t.serverSyncTree_,e,n),XM(t.eventQueue_,e._path,i)}function W7(t){t.persistentConnection_&&t.persistentConnection_.interrupt(V7)}function J_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Hn(n,...e)}function H7(t,e,n,i){e&&Dd(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const a=new Error(o);a.code=r,e(a)}})}function iV(t,e,n){return LS(t.serverSyncTree_,e,n)||Ie.EMPTY_NODE}function KS(t,e=t.transactionQueueTree_){if(e||Z_(t,e),Od(e)){const n=sV(t,e);ne(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&K7(t,Sm(e),n)}else $M(e)&&Y_(e,n=>{KS(t,n)})}function K7(t,e,n){const i=n.map(h=>h.currentWriteId),r=iV(t,e,i);let o=r;const a=r.hash();for(let h=0;h<n.length;h++){const m=n[h];ne(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const g=ni(e,m.path);o=o.updateChild(g,m.currentOutputSnapshotRaw)}const u=o.val(!0),c=e;t.server_.put(c.toString(),u,h=>{J_(t,"transaction put response",{path:c.toString(),status:h});let m=[];if(h==="ok"){const g=[];for(let _=0;_<n.length;_++)n[_].status=2,m=m.concat(vl(t.serverSyncTree_,n[_].currentWriteId)),n[_].onComplete&&g.push(()=>n[_].onComplete(null,!0,n[_].currentOutputSnapshotResolved)),n[_].unwatcher();Z_(t,GS(t.transactionQueueTree_,e)),KS(t,t.transactionQueueTree_),ms(t.eventQueue_,e,m);for(let _=0;_<g.length;_++)Dd(g[_])}else{if(h==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{bi("transaction at "+c.toString()+" failed: "+h);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=h}X_(t,e)}},a)}function X_(t,e){const n=rV(t,e),i=Sm(n),r=sV(t,n);return Q7(t,r,i),i}function Q7(t,e,n){if(e.length===0)return;const i=[];let r=[];const a=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const c=e[u],h=ni(n,c.path);let m=!1,g;if(ne(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)m=!0,g=c.abortReason,r=r.concat(vl(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=F7)m=!0,g="maxretry",r=r.concat(vl(t.serverSyncTree_,c.currentWriteId,!0));else{const _=iV(t,c.path,a);c.currentInputSnapshot=_;const T=e[u].update(_.val());if(T!==void 0){qS("transaction failed: Data returned ",T,c.path);let P=Sn(T);typeof T=="object"&&T!=null&&Lr(T,".priority")||(P=P.updatePriority(_.getPriority()));const R=c.currentWriteId,S=WS(t),b=GM(P,_,S);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=b,c.currentWriteId=tV(t),a.splice(a.indexOf(R),1),r=r.concat(FM(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),r=r.concat(vl(t.serverSyncTree_,R,!0))}else m=!0,g="nodata",r=r.concat(vl(t.serverSyncTree_,c.currentWriteId,!0))}ms(t.eventQueue_,n,r),r=[],m&&(e[u].status=2,function(_){setTimeout(_,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(g==="nodata"?i.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):i.push(()=>e[u].onComplete(new Error(g),!1,null))))}Z_(t,t.transactionQueueTree_);for(let u=0;u<i.length;u++)Dd(i[u]);KS(t,t.transactionQueueTree_)}function rV(t,e){let n,i=t.transactionQueueTree_;for(n=Ne(e);n!==null&&Od(i)===void 0;)i=GS(i,n),e=at(e),n=Ne(e);return i}function sV(t,e){const n=[];return oV(t,e,n),n.sort((i,r)=>i.order-r.order),n}function oV(t,e,n){const i=Od(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Y_(e,r=>{oV(t,r,n)})}function Z_(t,e){const n=Od(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,qM(e,n.length>0?n:void 0)}Y_(e,i=>{Z_(t,i)})}function aV(t,e){const n=Sm(rV(t,e)),i=GS(t.transactionQueueTree_,e);return P7(i,r=>{QE(t,r)}),QE(t,i),WM(i,r=>{QE(t,r)}),n}function QE(t,e){const n=Od(e);if(n){const i=[];let r=[],o=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(ne(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(ne(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),r=r.concat(vl(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?qM(e,void 0):n.length=o+1,ms(t.eventQueue_,Sm(e),r);for(let a=0;a<i.length;a++)Dd(i[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function J7(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):bi(`Invalid query segment '${n}' in query '${t}'`)}return e}const t2=function(t,e){const n=X7(t),i=n.namespace;n.domain==="firebase.com"&&to(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&to("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||fz();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new iM(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new ot(n.pathString)}},X7=function(t){let e="",n="",i="",r="",o="",a=!0,u="https",c=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));let m=t.indexOf("/");m===-1&&(m=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(m,g)),m<g&&(r=Y7(t.substring(m,g)));const _=J7(t.substring(Math.min(t.length,g)));h=e.indexOf(":"),h>=0?(a=u==="https"||u==="wss",c=parseInt(e.substring(h+1),10)):h=e.length;const T=e.slice(0,h);if(T.toLowerCase()==="localhost")n="localhost";else if(T.split(".").length<=2)n=T;else{const P=e.indexOf(".");i=e.substring(0,P).toLowerCase(),n=e.substring(P+1),o=i}"ns"in _&&(o=_.ns)}return{host:e,port:c,domain:n,subdomain:i,secure:a,scheme:u,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Z7=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let r;const o=new Array(8);for(r=7;r>=0;r--)o[r]=n2.charAt(n%64),n=Math.floor(n/64);ne(n===0,"Cannot push at time == 0");let a=o.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)a+=n2.charAt(e[r]);return ne(a.length===20,"nextPushId: Length should be 20."),a}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+cn(this.snapshot.exportVal())}}class tG{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return Me(this._path)?null:hM(this._path)}get ref(){return new ao(this._repo,this._path)}get _queryIdentifier(){const e=Bx(this._queryParams),n=wS(e);return n==="{}"?"default":n}get _queryObject(){return Bx(this._queryParams)}isEqual(e){if(e=ge(e),!(e instanceof QS))return!1;const n=this._repo===e._repo,i=SS(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Yz(this._path)}}class ao extends QS{constructor(e,n){super(e,n,new PS,!1)}get parent(){const e=pM(this._path);return e===null?null:new ao(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Wp{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ot(e),i=Hp(this.ref,e);return new Wp(this._node.getChild(n),i,Ut)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Wp(r,Hp(this.ref,i),Ut)))}hasChild(e){const n=new ot(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Hc(t,e){return t=ge(t),t._checkNotDeleted("ref"),e!==void 0?Hp(t._root,e):t._root}function Hp(t,e){return t=ge(t),Ne(t._path)===null?D7("child","path",e):YM("child","path",e),new ao(t._repo,dn(t._path,e))}function nG(t,e){t=ge(t),JM("push",t._path),QM("push",e,t._path,!0);const n=eV(t._repo),i=Z7(n),r=Hp(t,i),o=Hp(t,i);let a;return e!=null?a=T1(o,e).then(()=>o):a=Promise.resolve(o),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function T1(t,e){t=ge(t),JM("set",t._path),QM("set",e,t._path,!1);const n=new z_;return G7(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function i2(t){t=ge(t);const e=new lV(()=>{}),n=new ew(e);return z7(t._repo,t,n).then(i=>new Wp(i,new ao(t._repo,t._path),t._queryParams.getIndex()))}class ew{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new eG("value",this,new Wp(e.snapshotNode,new ao(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new tG(this,e,n):null}matches(e){return e instanceof ew?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function iG(t,e,n,i,r){const o=new lV(n,void 0),a=new ew(o);return $7(t._repo,t,a),()=>nV(t._repo,t,a)}function uV(t,e,n,i){return iG(t,"value",e)}function rG(t,e,n){nV(t._repo,t,null)}o7(ao);d7(ao);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG="FIREBASE_DATABASE_EMULATOR_HOST",S1={};let oG=!1;function aG(t,e,n,i){t.repoInfo_=new iM(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function lG(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||to("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hn("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=t2(o,r),u=a.repoInfo,c;typeof process<"u"&&Ix&&(c=Ix[sG]),c?(o=`http://${c}?ns=${u.namespace}`,a=t2(o,r),u=a.repoInfo):a.repoInfo.secure;const h=new Sz(t.name,t.options,e);O7("Invalid Firebase Database URL",a),Me(a.path)||to("Database URL must point to the root of a Firebase Database (not including a child path).");const m=cG(u,t,h,new Tz(t.name,n));return new dG(m,t)}function uG(t,e){const n=S1[e];(!n||n[t.key]!==t)&&to(`Database ${e}(${t.repoInfo_}) has already been deleted.`),W7(t),delete n[t.key]}function cG(t,e,n,i){let r=S1[e.name];r||(r={},S1[e.name]=r);let o=r[t.toURLString()];return o&&to("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new U7(t,oG,n,i),r[t.toURLString()]=o,o}class dG{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(B7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ao(this._repo,He())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uG(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&to("Cannot call "+e+" on a deleted database.")}}function rp(t=VL(),e){const n=vS(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=UB("database");i&&hG(n,...i)}return n}function hG(t,e,n,i={}){t=ge(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&to("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&to('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Zv(Zv.OWNER);else if(i.mockUserToken){const a=typeof i.mockUserToken=="string"?i.mockUserToken:IL(i.mockUserToken,t.app.options.projectId);o=new Zv(a)}aG(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(t){az(oo),eo(new Mr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return lG(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Bi(Tx,Sx,t),Bi(Tx,Sx,"esm2017")}Ks.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ks.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};fG();function cV(t,e){return function(){return t.apply(e,arguments)}}const{toString:pG}=Object.prototype,{getPrototypeOf:YS}=Object,tw=(t=>e=>{const n=pG.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),e=>tw(e)===t),nw=t=>e=>typeof e===t,{isArray:Ld}=Array,Kp=nw("undefined");function mG(t){return t!==null&&!Kp(t)&&t.constructor!==null&&!Kp(t.constructor)&&ir(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dV=Ur("ArrayBuffer");function gG(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&dV(t.buffer),e}const vG=nw("string"),ir=nw("function"),hV=nw("number"),iw=t=>t!==null&&typeof t=="object",yG=t=>t===!0||t===!1,ty=t=>{if(tw(t)!=="object")return!1;const e=YS(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_G=Ur("Date"),wG=Ur("File"),EG=Ur("Blob"),IG=Ur("FileList"),TG=t=>iw(t)&&ir(t.pipe),SG=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ir(t.append)&&((e=tw(t))==="formdata"||e==="object"&&ir(t.toString)&&t.toString()==="[object FormData]"))},bG=Ur("URLSearchParams"),[CG,AG,PG,RG]=["ReadableStream","Request","Response","Headers"].map(Ur),kG=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),Ld(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let u;for(i=0;i<a;i++)u=o[i],e.call(null,t[u],u,t)}}function fV(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const pV=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mV=t=>!Kp(t)&&t!==pV;function b1(){const{caseless:t}=mV(this)&&this||{},e={},n=(i,r)=>{const o=t&&fV(e,r)||r;ty(e[o])&&ty(i)?e[o]=b1(e[o],i):ty(i)?e[o]=b1({},i):Ld(i)?e[o]=i.slice():e[o]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&bm(arguments[i],n);return e}const xG=(t,e,n,{allOwnKeys:i}={})=>(bm(e,(r,o)=>{n&&ir(r)?t[o]=cV(r,n):t[o]=r},{allOwnKeys:i}),t),NG=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),DG=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},OG=(t,e,n,i)=>{let r,o,a;const u={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)a=r[o],(!i||i(a,t,e))&&!u[a]&&(e[a]=t[a],u[a]=!0);t=n!==!1&&YS(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},LG=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},MG=t=>{if(!t)return null;if(Ld(t))return t;let e=t.length;if(!hV(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},VG=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&YS(Uint8Array)),FG=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const o=r.value;e.call(t,o[0],o[1])}},UG=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},BG=Ur("HTMLFormElement"),jG=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),r2=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),zG=Ur("RegExp"),gV=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};bm(n,(r,o)=>{let a;(a=e(r,o,t))!==!1&&(i[o]=a||r)}),Object.defineProperties(t,i)},GG=t=>{gV(t,(e,n)=>{if(ir(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(ir(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},qG=(t,e)=>{const n={},i=r=>{r.forEach(o=>{n[o]=!0})};return Ld(t)?i(t):i(String(t).split(e)),n},$G=()=>{},WG=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,YE="abcdefghijklmnopqrstuvwxyz",s2="0123456789",vV={DIGIT:s2,ALPHA:YE,ALPHA_DIGIT:YE+YE.toUpperCase()+s2},HG=(t=16,e=vV.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function KG(t){return!!(t&&ir(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const QG=t=>{const e=new Array(10),n=(i,r)=>{if(iw(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const o=Ld(i)?[]:{};return bm(i,(a,u)=>{const c=n(a,r+1);!Kp(c)&&(o[u]=c)}),e[r]=void 0,o}}return i};return n(t,0)},YG=Ur("AsyncFunction"),JG=t=>t&&(iw(t)||ir(t))&&ir(t.then)&&ir(t.catch),H={isArray:Ld,isArrayBuffer:dV,isBuffer:mG,isFormData:SG,isArrayBufferView:gG,isString:vG,isNumber:hV,isBoolean:yG,isObject:iw,isPlainObject:ty,isReadableStream:CG,isRequest:AG,isResponse:PG,isHeaders:RG,isUndefined:Kp,isDate:_G,isFile:wG,isBlob:EG,isRegExp:zG,isFunction:ir,isStream:TG,isURLSearchParams:bG,isTypedArray:VG,isFileList:IG,forEach:bm,merge:b1,extend:xG,trim:kG,stripBOM:NG,inherits:DG,toFlatObject:OG,kindOf:tw,kindOfTest:Ur,endsWith:LG,toArray:MG,forEachEntry:FG,matchAll:UG,isHTMLForm:BG,hasOwnProperty:r2,hasOwnProp:r2,reduceDescriptors:gV,freezeMethods:GG,toObjectSet:qG,toCamelCase:jG,noop:$G,toFiniteNumber:WG,findKey:fV,global:pV,isContextDefined:mV,ALPHABET:vV,generateString:HG,isSpecCompliantForm:KG,toJSONObject:QG,isAsyncFn:YG,isThenable:JG};function be(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}H.inherits(be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const yV=be.prototype,_V={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{_V[t]={value:t}});Object.defineProperties(be,_V);Object.defineProperty(yV,"isAxiosError",{value:!0});be.from=(t,e,n,i,r,o)=>{const a=Object.create(yV);return H.toFlatObject(t,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),be.call(a,t.message,e,n,i,r),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const XG=null;function C1(t){return H.isPlainObject(t)||H.isArray(t)}function wV(t){return H.endsWith(t,"[]")?t.slice(0,-2):t}function o2(t,e,n){return t?t.concat(e).map(function(r,o){return r=wV(r),!n&&o?"["+r+"]":r}).join(n?".":""):e}function ZG(t){return H.isArray(t)&&!t.some(C1)}const eq=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function rw(t,e,n){if(!H.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,R){return!H.isUndefined(R[E])});const i=n.metaTokens,r=n.visitor||m,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(r))throw new TypeError("visitor must be a function");function h(P){if(P===null)return"";if(H.isDate(P))return P.toISOString();if(!c&&H.isBlob(P))throw new be("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(P)||H.isTypedArray(P)?c&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function m(P,E,R){let S=P;if(P&&!R&&typeof P=="object"){if(H.endsWith(E,"{}"))E=i?E:E.slice(0,-2),P=JSON.stringify(P);else if(H.isArray(P)&&ZG(P)||(H.isFileList(P)||H.endsWith(E,"[]"))&&(S=H.toArray(P)))return E=wV(E),S.forEach(function(k,F){!(H.isUndefined(k)||k===null)&&e.append(a===!0?o2([E],F,o):a===null?E:E+"[]",h(k))}),!1}return C1(P)?!0:(e.append(o2(R,E,o),h(P)),!1)}const g=[],_=Object.assign(eq,{defaultVisitor:m,convertValue:h,isVisitable:C1});function T(P,E){if(!H.isUndefined(P)){if(g.indexOf(P)!==-1)throw Error("Circular reference detected in "+E.join("."));g.push(P),H.forEach(P,function(S,b){(!(H.isUndefined(S)||S===null)&&r.call(e,S,H.isString(b)?b.trim():b,E,_))===!0&&T(S,E?E.concat(b):[b])}),g.pop()}}if(!H.isObject(t))throw new TypeError("data must be an object");return T(t),e}function a2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function JS(t,e){this._pairs=[],t&&rw(t,this,e)}const EV=JS.prototype;EV.append=function(e,n){this._pairs.push([e,n])};EV.toString=function(e){const n=e?function(i){return e.call(this,i,a2)}:a2;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function tq(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function IV(t,e,n){if(!e)return t;const i=n&&n.encode||tq,r=n&&n.serialize;let o;if(r?o=r(e,n):o=H.isURLSearchParams(e)?e.toString():new JS(e,n).toString(i),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class l2{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(i){i!==null&&e(i)})}}const TV={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nq=typeof URLSearchParams<"u"?URLSearchParams:JS,iq=typeof FormData<"u"?FormData:null,rq=typeof Blob<"u"?Blob:null,sq={isBrowser:!0,classes:{URLSearchParams:nq,FormData:iq,Blob:rq},protocols:["http","https","file","blob","url","data"]},XS=typeof window<"u"&&typeof document<"u",oq=(t=>XS&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),aq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lq=XS&&window.location.href||"http://localhost",uq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:XS,hasStandardBrowserEnv:oq,hasStandardBrowserWebWorkerEnv:aq,origin:lq},Symbol.toStringTag,{value:"Module"})),Dr={...uq,...sq};function cq(t,e){return rw(t,new Dr.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,o){return Dr.isNode&&H.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function dq(t){return H.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hq(t){const e={},n=Object.keys(t);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],e[o]=t[o];return e}function SV(t){function e(n,i,r,o){let a=n[o++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),c=o>=n.length;return a=!a&&H.isArray(r)?r.length:a,c?(H.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!u):((!r[a]||!H.isObject(r[a]))&&(r[a]=[]),e(n,i,r[a],o)&&H.isArray(r[a])&&(r[a]=hq(r[a])),!u)}if(H.isFormData(t)&&H.isFunction(t.entries)){const n={};return H.forEachEntry(t,(i,r)=>{e(dq(i),r,n,0)}),n}return null}function fq(t,e,n){if(H.isString(t))try{return(e||JSON.parse)(t),H.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Cm={transitional:TV,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,o=H.isObject(e);if(o&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return r?JSON.stringify(SV(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return cq(e,this.formSerializer).toString();if((u=H.isFileList(e))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return rw(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),fq(e)):e}],transformResponse:[function(e){const n=this.transitional||Cm.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(i&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?be.from(u,be.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dr.classes.FormData,Blob:Dr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],t=>{Cm.headers[t]={}});const pq=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mq=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!n||e[n]&&pq[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},u2=Symbol("internals");function Tf(t){return t&&String(t).trim().toLowerCase()}function ny(t){return t===!1||t==null?t:H.isArray(t)?t.map(ny):String(t)}function gq(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const vq=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function JE(t,e,n,i,r){if(H.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!H.isString(e)){if(H.isString(i))return e.indexOf(i)!==-1;if(H.isRegExp(i))return i.test(e)}}function yq(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function _q(t,e){const n=H.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,o,a){return this[i].call(this,e,r,o,a)},configurable:!0})})}class Ci{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function o(u,c,h){const m=Tf(c);if(!m)throw new Error("header name must be a non-empty string");const g=H.findKey(r,m);(!g||r[g]===void 0||h===!0||h===void 0&&r[g]!==!1)&&(r[g||c]=ny(u))}const a=(u,c)=>H.forEach(u,(h,m)=>o(h,m,c));if(H.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(H.isString(e)&&(e=e.trim())&&!vq(e))a(mq(e),n);else if(H.isHeaders(e))for(const[u,c]of e.entries())o(c,u,i);else e!=null&&o(n,e,i);return this}get(e,n){if(e=Tf(e),e){const i=H.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return gq(r);if(H.isFunction(n))return n.call(this,r,i);if(H.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Tf(e),e){const i=H.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||JE(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function o(a){if(a=Tf(a),a){const u=H.findKey(i,a);u&&(!n||JE(i,i[u],u,n))&&(delete i[u],r=!0)}}return H.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const o=n[i];(!e||JE(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const n=this,i={};return H.forEach(this,(r,o)=>{const a=H.findKey(i,o);if(a){n[a]=ny(r),delete n[o];return}const u=e?yq(o):String(o).trim();u!==o&&delete n[o],n[u]=ny(r),i[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return H.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&H.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[u2]=this[u2]={accessors:{}}).accessors,r=this.prototype;function o(a){const u=Tf(a);i[u]||(_q(r,a),i[u]=!0)}return H.isArray(e)?e.forEach(o):o(e),this}}Ci.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(Ci.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});H.freezeMethods(Ci);function XE(t,e){const n=this||Cm,i=e||n,r=Ci.from(i.headers);let o=i.data;return H.forEach(t,function(u){o=u.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function bV(t){return!!(t&&t.__CANCEL__)}function Md(t,e,n){be.call(this,t??"canceled",be.ERR_CANCELED,e,n),this.name="CanceledError"}H.inherits(Md,be,{__CANCEL__:!0});function CV(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new be("Request failed with status code "+n.status,[be.ERR_BAD_REQUEST,be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function wq(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Eq(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),m=i[o];a||(a=h),n[r]=c,i[r]=h;let g=o,_=0;for(;g!==r;)_+=n[g++],g=g%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),h-a<e)return;const T=m&&h-m;return T?Math.round(_*1e3/T):void 0}}function Iq(t,e){let n=0;const i=1e3/e;let r=null;return function(){const a=this===!0,u=Date.now();if(a||u-n>i)return r&&(clearTimeout(r),r=null),n=u,t.apply(null,arguments);r||(r=setTimeout(()=>(r=null,n=Date.now(),t.apply(null,arguments)),i-(u-n)))}}const r_=(t,e,n=3)=>{let i=0;const r=Eq(50,250);return Iq(o=>{const a=o.loaded,u=o.lengthComputable?o.total:void 0,c=a-i,h=r(c),m=a<=u;i=a;const g={loaded:a,total:u,progress:u?a/u:void 0,bytes:c,rate:h||void 0,estimated:h&&u&&m?(u-a)/h:void 0,event:o,lengthComputable:u!=null};g[e?"download":"upload"]=!0,t(g)},n)},Tq=Dr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(o){let a=o;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(a){const u=H.isString(a)?r(a):a;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}(),Sq=Dr.hasStandardBrowserEnv?{write(t,e,n,i,r,o){const a=[t+"="+encodeURIComponent(e)];H.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),H.isString(i)&&a.push("path="+i),H.isString(r)&&a.push("domain="+r),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bq(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Cq(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function AV(t,e){return t&&!bq(e)?Cq(t,e):e}const c2=t=>t instanceof Ci?{...t}:t;function Vl(t,e){e=e||{};const n={};function i(h,m,g){return H.isPlainObject(h)&&H.isPlainObject(m)?H.merge.call({caseless:g},h,m):H.isPlainObject(m)?H.merge({},m):H.isArray(m)?m.slice():m}function r(h,m,g){if(H.isUndefined(m)){if(!H.isUndefined(h))return i(void 0,h,g)}else return i(h,m,g)}function o(h,m){if(!H.isUndefined(m))return i(void 0,m)}function a(h,m){if(H.isUndefined(m)){if(!H.isUndefined(h))return i(void 0,h)}else return i(void 0,m)}function u(h,m,g){if(g in e)return i(h,m);if(g in t)return i(void 0,h)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(h,m)=>r(c2(h),c2(m),!0)};return H.forEach(Object.keys(Object.assign({},t,e)),function(m){const g=c[m]||r,_=g(t[m],e[m],m);H.isUndefined(_)&&g!==u||(n[m]=_)}),n}const PV=t=>{const e=Vl({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:u}=e;e.headers=a=Ci.from(a),e.url=IV(AV(e.baseURL,e.url),t.params,t.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(H.isFormData(n)){if(Dr.hasStandardBrowserEnv||Dr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[h,...m]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...m].join("; "))}}if(Dr.hasStandardBrowserEnv&&(i&&H.isFunction(i)&&(i=i(e)),i||i!==!1&&Tq(e.url))){const h=r&&o&&Sq.read(o);h&&a.set(r,h)}return e},Aq=typeof XMLHttpRequest<"u",Pq=Aq&&function(t){return new Promise(function(n,i){const r=PV(t);let o=r.data;const a=Ci.from(r.headers).normalize();let{responseType:u}=r,c;function h(){r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout;function g(){if(!m)return;const T=Ci.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),E={data:!u||u==="text"||u==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:T,config:t,request:m};CV(function(S){n(S),h()},function(S){i(S),h()},E),m=null}"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(g)},m.onabort=function(){m&&(i(new be("Request aborted",be.ECONNABORTED,r,m)),m=null)},m.onerror=function(){i(new be("Network Error",be.ERR_NETWORK,r,m)),m=null},m.ontimeout=function(){let P=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const E=r.transitional||TV;r.timeoutErrorMessage&&(P=r.timeoutErrorMessage),i(new be(P,E.clarifyTimeoutError?be.ETIMEDOUT:be.ECONNABORTED,r,m)),m=null},o===void 0&&a.setContentType(null),"setRequestHeader"in m&&H.forEach(a.toJSON(),function(P,E){m.setRequestHeader(E,P)}),H.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),u&&u!=="json"&&(m.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&m.addEventListener("progress",r_(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",r_(r.onUploadProgress)),(r.cancelToken||r.signal)&&(c=T=>{m&&(i(!T||T.type?new Md(null,t,m):T),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const _=wq(r.url);if(_&&Dr.protocols.indexOf(_)===-1){i(new be("Unsupported protocol "+_+":",be.ERR_BAD_REQUEST,t));return}m.send(o||null)})},Rq=(t,e)=>{let n=new AbortController,i;const r=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;n.abort(h instanceof be?h:new Md(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{r(new be(`timeout ${e} of ms exceeded`,be.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",r):c.unsubscribe(r))}),t=null)};t.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",r));const{signal:u}=n;return u.unsubscribe=a,[u,()=>{o&&clearTimeout(o),o=null}]},kq=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},xq=async function*(t,e,n){for await(const i of t)yield*kq(ArrayBuffer.isView(i)?i:await n(String(i)),e)},d2=(t,e,n,i,r)=>{const o=xq(t,e,r);let a=0;return new ReadableStream({type:"bytes",async pull(u){const{done:c,value:h}=await o.next();if(c){u.close(),i();return}let m=h.byteLength;n&&n(a+=m),u.enqueue(new Uint8Array(h))},cancel(u){return i(u),o.return()}},{highWaterMark:2})},h2=(t,e)=>{const n=t!=null;return i=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:i}))},sw=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",RV=sw&&typeof ReadableStream=="function",A1=sw&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Nq=RV&&(()=>{let t=!1;const e=new Request(Dr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),f2=64*1024,P1=RV&&!!(()=>{try{return H.isReadableStream(new Response("").body)}catch{}})(),s_={stream:P1&&(t=>t.body)};sw&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!s_[e]&&(s_[e]=H.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new be(`Response type '${e}' is not supported`,be.ERR_NOT_SUPPORT,i)})})})(new Response);const Dq=async t=>{if(t==null)return 0;if(H.isBlob(t))return t.size;if(H.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(H.isArrayBufferView(t))return t.byteLength;if(H.isURLSearchParams(t)&&(t=t+""),H.isString(t))return(await A1(t)).byteLength},Oq=async(t,e)=>{const n=H.toFiniteNumber(t.getContentLength());return n??Dq(e)},Lq=sw&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:o,timeout:a,onDownloadProgress:u,onUploadProgress:c,responseType:h,headers:m,withCredentials:g="same-origin",fetchOptions:_}=PV(t);h=h?(h+"").toLowerCase():"text";let[T,P]=r||o||a?Rq([r,o],a):[],E,R;const S=()=>{!E&&setTimeout(()=>{T&&T.unsubscribe()}),E=!0};let b;try{if(c&&Nq&&n!=="get"&&n!=="head"&&(b=await Oq(m,i))!==0){let B=new Request(e,{method:"POST",body:i,duplex:"half"}),N;H.isFormData(i)&&(N=B.headers.get("content-type"))&&m.setContentType(N),B.body&&(i=d2(B.body,f2,h2(b,r_(c)),null,A1))}H.isString(g)||(g=g?"cors":"omit"),R=new Request(e,{..._,signal:T,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:i,duplex:"half",withCredentials:g});let k=await fetch(R);const F=P1&&(h==="stream"||h==="response");if(P1&&(u||F)){const B={};["status","statusText","headers"].forEach(C=>{B[C]=k[C]});const N=H.toFiniteNumber(k.headers.get("content-length"));k=new Response(d2(k.body,f2,u&&h2(N,r_(u,!0)),F&&S,A1),B)}h=h||"text";let j=await s_[H.findKey(s_,h)||"text"](k,t);return!F&&S(),P&&P(),await new Promise((B,N)=>{CV(B,N,{data:j,headers:Ci.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:R})})}catch(k){throw S(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new be("Network Error",be.ERR_NETWORK,t,R),{cause:k.cause||k}):be.from(k,k&&k.code,t,R)}}),R1={http:XG,xhr:Pq,fetch:Lq};H.forEach(R1,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const p2=t=>`- ${t}`,Mq=t=>H.isFunction(t)||t===null||t===!1,kV={getAdapter:t=>{t=H.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let o=0;o<e;o++){n=t[o];let a;if(i=n,!Mq(n)&&(i=R1[(a=String(n)).toLowerCase()],i===void 0))throw new be(`Unknown adapter '${a}'`);if(i)break;r[a||"#"+o]=i}if(!i){const o=Object.entries(r).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(p2).join(`
`):" "+p2(o[0]):"as no adapter specified";throw new be("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:R1};function ZE(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Md(null,t)}function m2(t){return ZE(t),t.headers=Ci.from(t.headers),t.data=XE.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),kV.getAdapter(t.adapter||Cm.adapter)(t).then(function(i){return ZE(t),i.data=XE.call(t,t.transformResponse,i),i.headers=Ci.from(i.headers),i},function(i){return bV(i)||(ZE(t),i&&i.response&&(i.response.data=XE.call(t,t.transformResponse,i.response),i.response.headers=Ci.from(i.response.headers))),Promise.reject(i)})}const xV="1.7.2",ZS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ZS[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const g2={};ZS.transitional=function(e,n,i){function r(o,a){return"[Axios v"+xV+"] Transitional option '"+o+"'"+a+(i?". "+i:"")}return(o,a,u)=>{if(e===!1)throw new be(r(a," has been removed"+(n?" in "+n:"")),be.ERR_DEPRECATED);return n&&!g2[a]&&(g2[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,u):!0}};function Vq(t,e,n){if(typeof t!="object")throw new be("options must be an object",be.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const o=i[r],a=e[o];if(a){const u=t[o],c=u===void 0||a(u,o,t);if(c!==!0)throw new be("option "+o+" must be "+c,be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new be("Unknown option "+o,be.ERR_BAD_OPTION)}}const k1={assertOptions:Vq,validators:ZS},Lo=k1.validators;class Tl{constructor(e){this.defaults=e,this.interceptors={request:new l2,response:new l2}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Vl(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:o}=n;i!==void 0&&k1.assertOptions(i,{silentJSONParsing:Lo.transitional(Lo.boolean),forcedJSONParsing:Lo.transitional(Lo.boolean),clarifyTimeoutError:Lo.transitional(Lo.boolean)},!1),r!=null&&(H.isFunction(r)?n.paramsSerializer={serialize:r}:k1.assertOptions(r,{encode:Lo.function,serialize:Lo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&H.merge(o.common,o[n.method]);o&&H.forEach(["delete","get","head","post","put","patch","common"],P=>{delete o[P]}),n.headers=Ci.concat(a,o);const u=[];let c=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(c=c&&E.synchronous,u.unshift(E.fulfilled,E.rejected))});const h=[];this.interceptors.response.forEach(function(E){h.push(E.fulfilled,E.rejected)});let m,g=0,_;if(!c){const P=[m2.bind(this),void 0];for(P.unshift.apply(P,u),P.push.apply(P,h),_=P.length,m=Promise.resolve(n);g<_;)m=m.then(P[g++],P[g++]);return m}_=u.length;let T=n;for(g=0;g<_;){const P=u[g++],E=u[g++];try{T=P(T)}catch(R){E.call(this,R);break}}try{m=m2.call(this,T)}catch(P){return Promise.reject(P)}for(g=0,_=h.length;g<_;)m=m.then(h[g++],h[g++]);return m}getUri(e){e=Vl(this.defaults,e);const n=AV(e.baseURL,e.url);return IV(n,e.params,e.paramsSerializer)}}H.forEach(["delete","get","head","options"],function(e){Tl.prototype[e]=function(n,i){return this.request(Vl(i||{},{method:e,url:n,data:(i||{}).data}))}});H.forEach(["post","put","patch"],function(e){function n(i){return function(o,a,u){return this.request(Vl(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Tl.prototype[e]=n(),Tl.prototype[e+"Form"]=n(!0)});class eb{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(r=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](r);i._listeners=null}),this.promise.then=r=>{let o;const a=new Promise(u=>{i.subscribe(u),o=u}).then(r);return a.cancel=function(){i.unsubscribe(o)},a},e(function(o,a,u){i.reason||(i.reason=new Md(o,a,u),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new eb(function(r){e=r}),cancel:e}}}function Fq(t){return function(n){return t.apply(null,n)}}function Uq(t){return H.isObject(t)&&t.isAxiosError===!0}const x1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(x1).forEach(([t,e])=>{x1[e]=t});function NV(t){const e=new Tl(t),n=cV(Tl.prototype.request,e);return H.extend(n,Tl.prototype,e,{allOwnKeys:!0}),H.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return NV(Vl(t,r))},n}const on=NV(Cm);on.Axios=Tl;on.CanceledError=Md;on.CancelToken=eb;on.isCancel=bV;on.VERSION=xV;on.toFormData=rw;on.AxiosError=be;on.Cancel=on.CanceledError;on.all=function(e){return Promise.all(e)};on.spread=Fq;on.isAxiosError=Uq;on.mergeConfig=Vl;on.AxiosHeaders=Ci;on.formToJSON=t=>SV(H.isHTMLForm(t)?new FormData(t):t);on.getAdapter=kV.getAdapter;on.HttpStatusCode=x1;on.default=on;const tb=async t=>{let e;return t?e=t:e=Math.floor(Math.random()*251)+1,(await on.get(`https://pokeapi.co/api/v2/pokemon/${e}`)).data},Bq=async t=>{const e=localStorage.getItem(`pokemon_${t}`);if(e)return JSON.parse(e);const n=await tb(t);try{localStorage.setItem(`pokemon_${t}`,JSON.stringify(n))}catch{}return n};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n){this._delegate=e,this.firebase=n,Vp(e,new Mr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),_S(this._delegate)))}_getService(e,n=ha){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=ha){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Vp(this._delegate,e)}_addOrOverwriteComponent(e){OL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},v2=new Zl("app-compat","Firebase",zq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gq(t){const e={},n={__esModule:!0,initializeApp:o,app:r,registerVersion:Bi,setLogLevel:UL,onLog:FL,apps:null,SDK_VERSION:oo,INTERNAL:{registerComponent:u,removeApp:i,useAsService:c,modularAPIs:oz}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(h){delete e[h]}function r(h){if(h=h||ha,!Lr(e,h))throw v2.create("no-app",{appName:h});return e[h]}r.App=t;function o(h,m={}){const g=yS(h,m);if(Lr(e,g.name))return e[g.name];const _=new t(g,n);return e[g.name]=_,_}function a(){return Object.keys(e).map(h=>e[h])}function u(h){const m=h.name,g=m.replace("-compat","");if(eo(h)&&h.type==="PUBLIC"){const _=(T=r())=>{if(typeof T[g]!="function")throw v2.create("invalid-app-argument",{appName:m});return T[g]()};h.serviceProps!==void 0&&Dp(_,h.serviceProps),n[g]=_,t.prototype[g]=function(...T){return this._getService.bind(this,m).apply(this,h.multipleInstances?T:[])}}return h.type==="PUBLIC"?n[g]:null}function c(h,m){return m==="serverAuth"?null:m}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(){const t=Gq(jq);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:DV,extendNamespace:e,createSubscribe:RL,ErrorFactory:Zl,deepExtend:Dp});function e(n){Dp(t,n)}return t}const qq=DV();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new ym("@firebase/app-compat"),$q="@firebase/app-compat",Wq="0.2.35";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(t){Bi($q,Wq,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(TL()&&self.firebase!==void 0){y2.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&y2.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const pe=qq;Hq();var Kq="firebase",Qq="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pe.registerVersion(Kq,Qq,"app-compat");function nb(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}const Sf={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},mc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function OV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jq=Yq,Xq=OV,LV=new Zl("auth","Firebase",OV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new ym("@firebase/auth");function Zq(t,...e){o_.logLevel<=xe.WARN&&o_.warn(`Auth (${oo}): ${t}`,...e)}function iy(t,...e){o_.logLevel<=xe.ERROR&&o_.error(`Auth (${oo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw rb(t,...e)}function fn(t,...e){return rb(t,...e)}function ib(t,e,n){const i=Object.assign(Object.assign({},Xq()),{[e]:n});return new Zl("auth","Firebase",i).create(e,{appName:t.name})}function Cn(t){return ib(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vd(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Bn(t,"argument-error"),ib(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rb(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return LV.create(t,...e)}function ee(t,e,...n){if(!t)throw rb(e,...n)}function ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iy(e),new Error(e)}function Vr(t,e){t||ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sb(){return _2()==="http:"||_2()==="https:"}function _2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sb()||SL()||"connection"in navigator)?navigator.onLine:!0}function t$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vr(n>e,"Short delay should be less than long delay!"),this.isMobile=hS()||G_()}get(){return e$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t,e){Vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=new Am(3e4,6e4);function zt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gt(t,e,n,i,r={}){return VV(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=eu(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),MV.fetch()(FV(t,t.config.apiHost,n,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},o))})}async function VV(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},n$),e);try{const r=new s$(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Ff(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ff(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Ff(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Ff(t,"user-disabled",a);const m=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ib(t,m,h);Bn(t,m)}}catch(r){if(r instanceof ri)throw r;Bn(t,"network-request-failed",{message:String(r)})}}async function lo(t,e,n,i,r={}){const o=await Gt(t,e,n,i,r);return"mfaPendingCredential"in o&&Bn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function FV(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?ob(t.config,r):`${t.config.apiScheme}://${r}`}function r$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class s${constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(fn(this.auth,"network-request-failed")),i$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ff(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=fn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t){return t!==void 0&&t.getResponse!==void 0}function E2(t){return t!==void 0&&t.enterprise!==void 0}class o${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return r$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(t){return(await Gt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function l$(t,e){return Gt(t,"GET","/v2/recaptchaConfig",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u$(t,e){return Gt(t,"POST","/v1/accounts:delete",e)}async function c$(t,e){return Gt(t,"POST","/v1/accounts:update",e)}async function UV(t,e){return Gt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d$(t,e=!1){const n=ge(t),i=await n.getIdToken(e),r=ow(i);ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:sp(eI(r.auth_time)),issuedAtTime:sp(eI(r.iat)),expirationTime:sp(eI(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function eI(t){return Number(t)*1e3}function ow(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return iy("JWT malformed, contained fewer than 3 sections"),null;try{const r=zy(n);return r?JSON.parse(r):(iy("Failed to decode base64 JWT payload"),null)}catch(r){return iy("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function I2(t){const e=ow(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ri&&h$(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function h$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sp(this.lastLoginAt),this.creationTime=sp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await no(t,UV(n,{idToken:i}));ee(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?BV(o.providerUserInfo):[],u=m$(t.providerData,a),c=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),m=c?h:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new N1(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function p$(t){const e=ge(t);await Yp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m$(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function BV(t){return t.map(e=>{var{providerId:n}=e,i=nb(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g$(t,e){const n=await VV(t,{},async()=>{const i=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=FV(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",MV.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function v$(t,e){return Gt(t,"POST","/v2/accounts:revokeToken",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=I2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await g$(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Kc;return i&&(ee(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ee(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ee(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kc,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gs{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=nb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new f$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new N1(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await no(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return d$(this,e)}reload(){return p$(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Yp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(Cn(this.auth));const e=await this.getIdToken();return await no(this,u$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,u,c,h,m;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(r=n.email)!==null&&r!==void 0?r:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,P=(a=n.photoURL)!==null&&a!==void 0?a:void 0,E=(u=n.tenantId)!==null&&u!==void 0?u:void 0,R=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(h=n.createdAt)!==null&&h!==void 0?h:void 0,b=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:k,emailVerified:F,isAnonymous:j,providerData:B,stsTokenManager:N}=n;ee(k&&N,e,"internal-error");const C=Kc.fromJSON(this.name,N);ee(typeof k=="string",e,"internal-error"),Mo(g,e.name),Mo(_,e.name),ee(typeof F=="boolean",e,"internal-error"),ee(typeof j=="boolean",e,"internal-error"),Mo(T,e.name),Mo(P,e.name),Mo(E,e.name),Mo(R,e.name),Mo(S,e.name),Mo(b,e.name);const L=new Gs({uid:k,auth:e,email:_,emailVerified:F,displayName:g,isAnonymous:j,photoURL:P,phoneNumber:T,tenantId:E,stsTokenManager:C,createdAt:S,lastLoginAt:b});return B&&Array.isArray(B)&&(L.providerData=B.map(V=>Object.assign({},V))),R&&(L._redirectEventId=R),L}static async _fromIdTokenResponse(e,n,i=!1){const r=new Kc;r.updateFromServerResponse(n);const o=new Gs({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Yp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ee(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?BV(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Kc;u.updateFromIdToken(i);const c=new Gs({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new N1(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new Map;function Fi(t){Vr(t instanceof Function,"Expected a class definition");let e=T2.get(t);return e?(Vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jV.type="NONE";const fd=jV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t,e,n){return`firebase:${t}:${e}:${n}`}class Qc{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Sl(this.userKey,r.apiKey,o),this.fullPersistenceKey=Sl("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Qc(Fi(fd),e,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=r[0]||Fi(fd);const a=Sl(i,e.config.apiKey,e.name);let u=null;for(const h of n)try{const m=await h._get(a);if(m){const g=Gs._fromJSON(e,m);h!==o&&(u=g),o=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Qc(o,e,i):(o=c[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(a)}catch{}})),new Qc(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($V(e))return"Blackberry";if(WV(e))return"Webos";if(ab(e))return"Safari";if((e.includes("chrome/")||GV(e))&&!e.includes("edge/"))return"Chrome";if(Pm(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zV(t=St()){return/firefox\//i.test(t)}function ab(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GV(t=St()){return/crios\//i.test(t)}function qV(t=St()){return/iemobile/i.test(t)}function Pm(t=St()){return/android/i.test(t)}function $V(t=St()){return/blackberry/i.test(t)}function WV(t=St()){return/webos/i.test(t)}function Fd(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function y$(t=St()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function _$(t=St()){var e;return Fd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function w$(){return bL()&&document.documentMode===10}function HV(t=St()){return Fd(t)||Pm(t)||WV(t)||$V(t)||/windows phone/i.test(t)||qV(t)}function E$(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t,e=[]){let n;switch(t){case"Browser":n=S2(St());break;case"Worker":n=`${S2(St())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const c=e(o);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T$(t,e={}){return Gt(t,"GET","/v2/passwordPolicy",zt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$=6;class b${constructor(e){var n,i,r,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:S$,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b2(this),this.idTokenSubscription=new b2(this),this.beforeStateQueue=new I$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Qc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await UV(this,{idToken:e}),i=await Gs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ft(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(r=c.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(Cn(this));const n=e?ge(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(Cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(Cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await T$(this),n=new b$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await v$(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fi(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Qc.create(this,[Fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Zq(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bt(t){return ge(t)}class b2{constructor(e){this.auth=e,this.observer=null,this.addObserver=RL(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A$(t){Rm=t}function lb(t){return Rm.loadJS(t)}function P$(){return Rm.recaptchaV2Script}function R$(){return Rm.recaptchaEnterpriseScript}function k$(){return Rm.gapiScript}function QV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const x$="recaptcha-enterprise",N$="NO_RECAPTCHA";class D${constructor(e){this.type=x$,this.auth=Bt(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{l$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new o$(c);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,a(h.siteKey)}}).catch(c=>{u(c)})})}function r(o,a,u){const c=window.grecaptcha;E2(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(h=>{a(h)}).catch(()=>{a(N$)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(u=>{if(!n&&E2(window.grecaptcha))r(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=R$();c.length!==0&&(c+=u),lb(c).then(()=>{r(u,o,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function C2(t,e,n,i=!1){const r=new D$(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jp(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await C2(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await C2(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}function O$(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function L$(t,e,n){const i=Bt(t);ee(i._canInitEmulator,i,"emulator-config-failed"),ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),o=YV(e),{host:a,port:u}=M$(e),c=u===null?"":`:${u}`;i.config.emulator={url:`${o}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||V$()}function YV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function M$(t){const e=YV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:A2(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:A2(a)}}}function A2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function V$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,n){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,e){return Gt(t,"POST","/v1/accounts:resetPassword",zt(t,e))}async function F$(t,e){return Gt(t,"POST","/v1/accounts:update",e)}async function U$(t,e){return Gt(t,"POST","/v1/accounts:signUp",e)}async function B$(t,e){return Gt(t,"POST","/v1/accounts:update",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(t,e){return lo(t,"POST","/v1/accounts:signInWithPassword",zt(t,e))}async function aw(t,e){return Gt(t,"POST","/v1/accounts:sendOobCode",zt(t,e))}async function z$(t,e){return aw(t,e)}async function G$(t,e){return aw(t,e)}async function q$(t,e){return aw(t,e)}async function $$(t,e){return aw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W$(t,e){return lo(t,"POST","/v1/accounts:signInWithEmailLink",zt(t,e))}async function H$(t,e){return lo(t,"POST","/v1/accounts:signInWithEmailLink",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp extends Ud{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Xp(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Xp(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,n,"signInWithPassword",j$);case"emailLink":return W$(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,i,"signUpPassword",U$);case"emailLink":return H$(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t,e){return lo(t,"POST","/v1/accounts:signInWithIdp",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$="http://localhost";class gs extends Ud{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=nb(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new gs(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Qs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Qs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qs(e,n)}buildRequest(){const e={requestUri:K$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=eu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q$(t,e){return Gt(t,"POST","/v1/accounts:sendVerificationCode",zt(t,e))}async function Y$(t,e){return lo(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,e))}async function J$(t,e){const n=await lo(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,e));if(n.temporaryProof)throw Ff(t,"account-exists-with-different-credential",n);return n}const X$={USER_NOT_FOUND:"user-not-found"};async function Z$(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return lo(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,n),X$)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Ud{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new bl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new bl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Y$(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return J$(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Z$(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:o}=e;return!i&&!n&&!r&&!o?null:new bl({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tW(t){const e=Vc(Mf(t)).link,n=e?Vc(Mf(e)).deep_link_id:null,i=Vc(Mf(t)).deep_link_id;return(i?Vc(Mf(i)).link:null)||i||n||e||t}class lw{constructor(e){var n,i,r,o,a,u;const c=Vc(Mf(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,m=(i=c.oobCode)!==null&&i!==void 0?i:null,g=eW((r=c.mode)!==null&&r!==void 0?r:null);ee(h&&m&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=m,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=tW(e);try{return new lw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.providerId=Pa.PROVIDER_ID}static credential(e,n){return Xp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=lw.parseLink(n);return ee(i,"argument-error"),Xp._fromEmailAndCode(e,i.code,i.tenantId)}}Pa.PROVIDER_ID="password";Pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends uo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yc extends Bd{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ee("providerId"in n&&"signInMethod"in n,"argument-error"),gs._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ee(e.idToken||e.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Yc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Yc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:o,nonce:a,providerId:u}=e;if(!i&&!r&&!n&&!o||!u)return null;try{return new Yc(u)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Bd{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Bd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gs._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return rs.credential(n,i)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Bd{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW="http://localhost";class pd extends Ud{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Qs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Qs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:o}=n;return!i||!r||!o||i!==r?null:new pd(i,o)}static _create(e,n){return new pd(e,n)}buildRequest(){return{requestUri:nW,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW="saml.";class a_ extends uo{constructor(e){ee(e.startsWith(iW),"argument-error"),super(e)}static credentialFromResult(e){return a_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return a_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=pd.fromJSON(e);return ee(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return pd._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Bd{constructor(){super("twitter.com")}static credential(e,n){return gs._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return os.credential(n,i)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,e){return lo(t,"POST","/v1/accounts:signUp",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Gs._fromIdTokenResponse(e,i,r),a=P2(i);return new or({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=P2(i);return new or({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function P2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rW(t){var e;if(Ft(t.app))return Promise.reject(Cn(t));const n=Bt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new or({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await XV(n,{returnSecureToken:!0}),r=await or._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends ri{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,l_.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new l_(e,n,i,r)}}function ZV(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?l_._fromErrorAndOperation(t,o,e,i):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sW(t,e){const n=ge(t);await uw(!0,n,e);const{providerUserInfo:i}=await c$(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=eF(i||[]);return n.providerData=n.providerData.filter(o=>r.has(o.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ub(t,e,n=!1){const i=await no(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return or._forOperation(t,"link",i)}async function uw(t,e,n){await Yp(e);const i=eF(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";ee(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t,e,n=!1){const{auth:i}=t;if(Ft(i.app))return Promise.reject(Cn(i));const r="reauthenticate";try{const o=await no(t,ZV(i,r,e,t),n);ee(o.idToken,i,"internal-error");const a=ow(o.idToken);ee(a,i,"internal-error");const{sub:u}=a;return ee(t.uid===u,i,"user-mismatch"),or._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Bn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t,e,n=!1){if(Ft(t.app))return Promise.reject(Cn(t));const i="signIn",r=await ZV(t,i,e),o=await or._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function cw(t,e){return nF(Bt(t),e)}async function iF(t,e){const n=ge(t);return await uw(!1,n,e.providerId),ub(n,e)}async function rF(t,e){return tF(ge(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oW(t,e){return lo(t,"POST","/v1/accounts:signInWithCustomToken",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(t,e){if(Ft(t.app))return Promise.reject(Cn(t));const n=Bt(t),i=await oW(n,{token:e,returnSecureToken:!0}),r=await or._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?cb._fromServerResponse(e,n):"totpInfo"in n?db._fromServerResponse(e,n):Bn(e,"internal-error")}}class cb extends km{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new cb(n)}}class db extends km{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new db(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t,e,n){var i;ee(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),ee(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ee(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ee(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(t){const e=Bt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lW(t,e,n){const i=Bt(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&dw(i,r,n),await Jp(i,r,"getOobCode",G$)}async function uW(t,e,n){await JV(ge(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&hb(t),i})}async function cW(t,e){await B$(ge(t),{oobCode:e})}async function sF(t,e){const n=ge(t),i=await JV(n,{oobCode:e}),r=i.requestType;switch(ee(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(i.mfaInfo,n,"internal-error");default:ee(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=km._fromServerResponse(Bt(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:r}}async function dW(t,e){const{data:n}=await sF(ge(t),e);return n.email}async function hW(t,e,n){if(Ft(t.app))return Promise.reject(Cn(t));const i=Bt(t),a=await Jp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XV).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&hb(t),c}),u=await or._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function fW(t,e,n){return Ft(t.app)?Promise.reject(Cn(t)):cw(ge(t),Pa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&hb(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pW(t,e,n){const i=Bt(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(a,u){ee(u.handleCodeInApp,i,"argument-error"),u&&dw(i,a,u)}o(r,n),await Jp(i,r,"getOobCode",q$)}function mW(t,e){const n=lw.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function gW(t,e,n){if(Ft(t.app))return Promise.reject(Cn(t));const i=ge(t),r=Pa.credentialWithLink(e,n||Qp());return ee(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),cw(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vW(t,e){return Gt(t,"POST","/v1/accounts:createAuthUri",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yW(t,e){const n=sb()?Qp():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await vW(ge(t),i);return r||[]}async function _W(t,e){const n=ge(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&dw(n.auth,r,e);const{email:o}=await z$(n.auth,r);o!==t.email&&await t.reload()}async function wW(t,e,n){const i=ge(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&dw(i.auth,o,n);const{email:a}=await $$(i.auth,o);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EW(t,e){return Gt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IW(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ge(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await no(i,EW(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const u=i.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function TW(t,e){const n=ge(t);return Ft(n.auth.app)?Promise.reject(Cn(n.auth)):oF(n,e,null)}function SW(t,e){return oF(ge(t),null,e)}async function oF(t,e,n){const{auth:i}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const a=await no(t,F$(i,o));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const a=(n=(e=ow(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(a){const u=a!=="anonymous"&&a!=="custom"?a:null;return new Jc(o,u)}}if(!i)return null;switch(i){case"facebook.com":return new CW(o,r);case"github.com":return new AW(o,r);case"google.com":return new PW(o,r);case"twitter.com":return new RW(o,r,t.screenName||null);case"custom":case"anonymous":return new Jc(o,null);default:return new Jc(o,i,r)}}class Jc{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class aF extends Jc{constructor(e,n,i,r){super(e,n,i),this.username=r}}class CW extends Jc{constructor(e,n){super(e,"facebook.com",n)}}class AW extends aF{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class PW extends Jc{constructor(e,n){super(e,"google.com",n)}}class RW extends aF{constructor(e,n,i){super(e,"twitter.com",n,i)}}function kW(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:bW(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new yl("enroll",e,n)}static _fromMfaPendingCredential(e){return new yl("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return yl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return yl._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=Bt(e),r=n.customData._serverResponse,o=(r.mfaInfo||[]).map(u=>km._fromServerResponse(i,u));ee(r.mfaPendingCredential,i,"internal-error");const a=yl._fromMfaPendingCredential(r.mfaPendingCredential);return new fb(a,o,async u=>{const c=await u._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const h=Object.assign(Object.assign({},r),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const m=await or._fromIdTokenResponse(i,n.operationType,h);return await i._updateCurrentUser(m.user),m;case"reauthenticate":return ee(n.user,i,"internal-error"),or._forOperation(n.user,n.operationType,h);default:Bn(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function xW(t,e){var n;const i=ge(t),r=e;return ee(e.customData.operationType,i,"argument-error"),ee((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),fb._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NW(t,e){return Gt(t,"POST","/v2/accounts/mfaEnrollment:start",zt(t,e))}function DW(t,e){return Gt(t,"POST","/v2/accounts/mfaEnrollment:finalize",zt(t,e))}function OW(t,e){return Gt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(t,e))}class pb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>km._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new pb(e)}async getSession(){return yl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),o=await no(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await no(this.user,OW(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const tI=new WeakMap;function LW(t){const e=ge(t);return tI.has(e)||tI.set(e,pb._fromUser(e)),tI.get(e)}const u_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(u_,"1"),this.storage.removeItem(u_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MW(){const t=St();return ab(t)||Fd(t)}const VW=1e3,FW=10;class uF extends lF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=MW()&&E$(),this.fallbackToPolling=HV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);w$()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,FW):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},VW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uF.type="LOCAL";const mb=uF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF extends lF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cF.type="SESSION";const Fl=cF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new hw(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async h=>h(n.origin,o)),c=await UW(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const h=xm("",20);r.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return window}function jW(t){rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function zW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qW(){return gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF="firebaseLocalStorageDb",$W=1,c_="firebaseLocalStorage",hF="fbase_key";class Nm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fw(t,e){return t.transaction([c_],e?"readwrite":"readonly").objectStore(c_)}function WW(){const t=indexedDB.deleteDatabase(dF);return new Nm(t).toPromise()}function D1(){const t=indexedDB.open(dF,$W);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(c_,{keyPath:hF})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(c_)?e(i):(i.close(),await WW(),e(await D1()))})})}async function R2(t,e,n){const i=fw(t,!0).put({[hF]:e,value:n});return new Nm(i).toPromise()}async function HW(t,e){const n=fw(t,!1).get(e),i=await new Nm(n).toPromise();return i===void 0?null:i.value}function k2(t,e){const n=fw(t,!0).delete(e);return new Nm(n).toPromise()}const KW=800,QW=3;class fF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>QW)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hw._getInstance(qW()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zW(),!this.activeServiceWorker)return;this.sender=new BW(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D1();return await R2(e,u_,"1"),await k2(e,u_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>R2(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>HW(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=fw(r,!1).getAll();return new Nm(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fF.type="LOCAL";const Zp=fF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(t,e){return Gt(t,"POST","/v2/accounts/mfaSignIn:start",zt(t,e))}function JW(t,e){return Gt(t,"POST","/v2/accounts/mfaSignIn:finalize",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW=500,ZW=6e4,Nv=1e12;class eH{constructor(e){this.auth=e,this.counter=Nv,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new tH(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||Nv;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||Nv;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||Nv;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class tH{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;ee(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=nH(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},ZW)},XW))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function nH(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=QV("rcb"),iH=new Am(3e4,6e4);class rH{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=rn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ee(sH(n),e,"argument-error"),this.shouldResolveImmediately(n)&&w2(rn().grecaptcha)?Promise.resolve(rn().grecaptcha):new Promise((i,r)=>{const o=rn().setTimeout(()=>{r(fn(e,"network-request-failed"))},iH.get());rn()[nI]=()=>{rn().clearTimeout(o),delete rn()[nI];const u=rn().grecaptcha;if(!u||!w2(u)){r(fn(e,"internal-error"));return}const c=u.render;u.render=(h,m)=>{const g=c(h,m);return this.counter++,g},this.hostLanguage=n,i(u)};const a=`${P$()}?${eu({onload:nI,render:"explicit",hl:n})}`;lb(a).catch(()=>{clearTimeout(o),r(fn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=rn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function sH(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class oH{async load(e){return new eH(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="recaptcha",aH={theme:"light",type:"image"};let lH=class{constructor(e,n,i=Object.assign({},aH)){this.parameters=i,this.type=pF,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bt(e),this.isInvisible=this.parameters.size==="invisible",ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;ee(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oH:new rH,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const o=a=>{a&&(this.tokenChangeListeners.delete(o),r(a))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=rn()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ee(sb()&&!gb(),this.auth,"internal-error"),await uH(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await a$(this.auth);ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function uH(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=bl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function cH(t,e,n){if(Ft(t.app))return Promise.reject(Cn(t));const i=Bt(t),r=await pw(i,e,ge(n));return new vb(r,o=>cw(i,o))}async function dH(t,e,n){const i=ge(t);await uw(!1,i,"phone");const r=await pw(i.auth,e,ge(n));return new vb(r,o=>iF(i,o))}async function hH(t,e,n){const i=ge(t);if(Ft(i.auth.app))return Promise.reject(Cn(i.auth));const r=await pw(i.auth,e,ge(n));return new vb(r,o=>rF(i,o))}async function pw(t,e,n){var i;const r=await n.verify();try{ee(typeof r=="string",t,"argument-error"),ee(n.type===pF,t,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const a=o.session;if("phoneNumber"in o)return ee(a.type==="enroll",t,"internal-error"),(await NW(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{ee(a.type==="signin",t,"internal-error");const u=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;return ee(u,t,"missing-multi-factor-info"),(await YW(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await Q$(t,{phoneNumber:o.phoneNumber,recaptchaToken:r});return a}}finally{n._reset()}}async function fH(t,e){const n=ge(t);if(Ft(n.auth.app))return Promise.reject(Cn(n.auth));await ub(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=class ry{constructor(e){this.providerId=ry.PROVIDER_ID,this.auth=Bt(e)}verifyPhoneNumber(e,n){return pw(this.auth,e,ge(n))}static credential(e,n){return bl._fromVerification(e,n)}static credentialFromResult(e){const n=e;return ry.credentialFromTaggedObject(n)}static credentialFromError(e){return ry.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?bl._fromTokenResponse(n,i):null}};Ul.PROVIDER_ID="phone";Ul.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t,e){return e?Fi(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends Ud{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pH(t){return nF(t.auth,new yb(t),t.bypassAuthState)}function mH(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),tF(n,new yb(t),t.bypassAuthState)}async function gH(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),ub(n,new yb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pH;case"linkViaPopup":case"linkViaRedirect":return gH;case"reauthViaPopup":case"reauthViaRedirect":return mH;default:Bn(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH=new Am(2e3,1e4);async function yH(t,e,n){if(Ft(t.app))return Promise.reject(fn(t,"operation-not-supported-in-this-environment"));const i=Bt(t);Vd(t,e,uo);const r=nu(i,n);return new qs(i,"signInViaPopup",e,r).executeNotNull()}async function _H(t,e,n){const i=ge(t);if(Ft(i.auth.app))return Promise.reject(fn(i.auth,"operation-not-supported-in-this-environment"));Vd(i.auth,e,uo);const r=nu(i.auth,n);return new qs(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function wH(t,e,n){const i=ge(t);Vd(i.auth,e,uo);const r=nu(i.auth,n);return new qs(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class qs extends mF{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vH.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH="pendingRedirect",op=new Map;class IH extends mF{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=op.get(this.auth._key());if(!e){try{const i=await TH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}op.set(this.auth._key(),e)}return this.bypassAuthState||op.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TH(t,e){const n=vF(e),i=gF(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function _b(t,e){return gF(t)._set(vF(e),"true")}function SH(){op.clear()}function wb(t,e){op.set(t._key(),e)}function gF(t){return Fi(t._redirectPersistence)}function vF(t){return Sl(EH,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(t,e,n){return CH(t,e,n)}async function CH(t,e,n){if(Ft(t.app))return Promise.reject(Cn(t));const i=Bt(t);Vd(t,e,uo),await i._initializationPromise;const r=nu(i,n);return await _b(r,i),r._openRedirect(i,e,"signInViaRedirect")}function AH(t,e,n){return PH(t,e,n)}async function PH(t,e,n){const i=ge(t);if(Vd(i.auth,e,uo),Ft(i.auth.app))return Promise.reject(Cn(i.auth));await i.auth._initializationPromise;const r=nu(i.auth,n);await _b(r,i.auth);const o=await yF(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",o)}function RH(t,e,n){return kH(t,e,n)}async function kH(t,e,n){const i=ge(t);Vd(i.auth,e,uo),await i.auth._initializationPromise;const r=nu(i.auth,n);await uw(!1,i,e.providerId),await _b(r,i.auth);const o=await yF(i);return r._openRedirect(i.auth,e,"linkViaRedirect",o)}async function xH(t,e){return await Bt(t)._initializationPromise,mw(t,e,!1)}async function mw(t,e,n=!1){if(Ft(t.app))return Promise.reject(Cn(t));const i=Bt(t),r=nu(i,e),a=await new IH(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function yF(t){const e=xm(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=10*60*1e3;class _F{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!wF(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(fn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NH&&this.cachedEventUids.clear(),this.cachedEventUids.has(x2(e))}saveEventToCache(e){this.cachedEventUids.add(x2(e)),this.lastProcessedEventTime=Date.now()}}function x2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(t,e={}){return Gt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LH=/^https?/;async function MH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EF(t);for(const n of e)try{if(VH(n))return}catch{}Bn(t,"unauthorized-domain")}function VH(t){const e=Qp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!LH.test(n))return!1;if(OH.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH=new Am(3e4,6e4);function N2(){const t=rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UH(t){return new Promise((e,n)=>{var i,r,o;function a(){N2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N2(),n(fn(t,"network-request-failed"))},timeout:FH.get()})}if(!((r=(i=rn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=rn().gapi)===null||o===void 0)&&o.load)a();else{const u=QV("iframefcb");return rn()[u]=()=>{gapi.load?a():n(fn(t,"network-request-failed"))},lb(`${k$()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw sy=null,e})}let sy=null;function BH(t){return sy=sy||UH(t),sy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH=new Am(5e3,15e3),zH="__/auth/iframe",GH="emulator/auth/iframe",qH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$H=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WH(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ob(e,GH):`https://${t.config.authDomain}/${zH}`,i={apiKey:e.apiKey,appName:t.name,v:oo},r=$H.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${eu(i).slice(1)}`}async function HH(t){const e=await BH(t),n=rn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:WH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qH,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=fn(t,"network-request-failed"),u=rn().setTimeout(()=>{o(a)},jH.get());function c(){rn().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QH=500,YH=600,JH="_blank",XH="http://localhost";class D2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZH(t,e,n,i=QH,r=YH){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c=Object.assign(Object.assign({},KH),{width:i.toString(),height:r.toString(),top:o,left:a}),h=St().toLowerCase();n&&(u=GV(h)?JH:n),zV(h)&&(e=e||XH,c.scrollbars="yes");const m=Object.entries(c).reduce((_,[T,P])=>`${_}${T}=${P},`,"");if(_$(h)&&u!=="_self")return eK(e||"",u),new D2(null);const g=window.open(e||"",u,m);ee(g,t,"popup-blocked");try{g.focus()}catch{}return new D2(g)}function eK(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK="__/auth/handler",nK="emulator/auth/handler",iK=encodeURIComponent("fac");async function O1(t,e,n,i,r,o){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:oo,eventId:r};if(e instanceof uo){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",u1(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries(o||{}))a[m]=g}if(e instanceof Bd){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),h=c?`#${iK}=${encodeURIComponent(c)}`:"";return`${rK(t)}?${eu(u).slice(1)}${h}`}function rK({config:t}){return t.emulator?ob(t,nK):`https://${t.authDomain}/${tK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="webStorageSupport";class sK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fl,this._completeRedirectFn=mw,this._overrideRedirectResult=wb}async _openPopup(e,n,i,r){var o;Vr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await O1(e,n,i,Qp(),r);return ZH(e,a,xm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await O1(e,n,i,Qp(),r);return jW(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Vr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await HH(e),i=new _F(e);return n.register("authEvent",r=>(ee(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(iI,{type:iI},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[iI];a!==void 0&&n(!!a),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HV()||ab()||Fd()}}const oK=sK;class aK{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return ls("unexpected MultiFactorSessionType")}}}class Eb extends aK{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Eb(e)}_finalizeEnroll(e,n,i){return DW(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return JW(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class IF{constructor(){}static assertion(e){return Eb._fromCredential(e)}}IF.FACTOR_ID="phone";var O2="@firebase/auth",L2="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cK(t){eo(new Mr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KV(t)},h=new C$(i,r,o,c);return O$(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),eo(new Mr("auth-internal",e=>{const n=Bt(e.getProvider("auth").getImmediate());return(i=>new lK(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(O2,L2,uK(t)),Bi(O2,L2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK=5*60;BB("authIdTokenMaxAge");function hK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}A$({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=fn("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",hK().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cK("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK=2e3;async function pK(t,e,n){var i;const{BuildInfo:r}=Bl();Vr(e.sessionId,"AuthEvent did not contain a session ID");const o=await _K(e.sessionId),a={};return Fd()?a.ibi=r.packageName:Pm()?a.apn=r.packageName:Bn(t,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=o,O1(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,a)}async function mK(t){const{BuildInfo:e}=Bl(),n={};Fd()?n.iosBundleId=e.packageName:Pm()?n.androidPackageName=e.packageName:Bn(t,"operation-not-supported-in-this-environment"),await EF(t,n)}function gK(t){const{cordova:e}=Bl();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,y$()?"_blank":"_system","location=yes"),n(r)})})}async function vK(t,e,n){const{cordova:i}=Bl();let r=()=>{};try{await new Promise((o,a)=>{let u=null;function c(){var g;o();const _=(g=i.plugins.browsertab)===null||g===void 0?void 0:g.close;typeof _=="function"&&_(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){u||(u=window.setTimeout(()=>{a(fn(t,"redirect-cancelled-by-user"))},fK))}function m(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(c),document.addEventListener("resume",h,!1),Pm()&&document.addEventListener("visibilitychange",m,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",m,!1),u&&window.clearTimeout(u)}})}finally{r()}}function yK(t){var e,n,i,r,o,a,u,c,h,m;const g=Bl();ee(typeof((e=g==null?void 0:g.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(typeof((n=g==null?void 0:g.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee(typeof((o=(r=(i=g==null?void 0:g.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee(typeof((c=(u=(a=g==null?void 0:g.cordova)===null||a===void 0?void 0:a.plugins)===null||u===void 0?void 0:u.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee(typeof((m=(h=g==null?void 0:g.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||m===void 0?void 0:m.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function _K(t){const e=wK(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function wK(t){if(Vr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK=20;class IK extends _F{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function TK(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:CK(),postBody:null,tenantId:t.tenantId,error:fn(t,"no-auth-event")}}function SK(t,e){return L1()._set(M1(t),e)}async function M2(t){const e=await L1()._get(M1(t));return e&&await L1()._remove(M1(t)),e}function bK(t,e){var n,i;const r=PK(e);if(r.includes("/__/auth/callback")){const o=oy(r),a=o.firebaseError?AK(decodeURIComponent(o.firebaseError)):null,u=(i=(n=a==null?void 0:a.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],c=u?fn(u):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function CK(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<EK;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function L1(){return Fi(mb)}function M1(t){return Sl("authEvent",t.config.apiKey,t.name)}function AK(t){try{return JSON.parse(t)}catch{return null}}function PK(t){const e=oy(t),n=e.link?decodeURIComponent(e.link):void 0,i=oy(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return oy(r).link||r||i||n||t}function oy(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Vc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK=500;class kK{constructor(){this._redirectPersistence=Fl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mw,this._overrideRedirectResult=wb}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new IK(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Bn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){yK(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),SH(),await this._originValidation(e);const a=TK(e,i,r);await SK(e,a);const u=await pK(e,a,n),c=await gK(u);return vK(e,o,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mK(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:o}=Bl(),a=setTimeout(async()=>{await M2(e),n.onEvent(V2())},RK),u=async m=>{clearTimeout(a);const g=await M2(e);let _=null;g&&(m!=null&&m.url)&&(_=bK(g,m.url)),n.onEvent(_||V2())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,u);const c=r,h=`${o.packageName.toLowerCase()}://`;Bl().handleOpenURL=async m=>{if(m.toLowerCase().startsWith(h)&&u({url:m}),typeof c=="function")try{c(m)}catch(g){console.error(g)}}}}const xK=kK;function V2(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NK(t,e){Bt(t)._logFramework(e)}var DK="@firebase/auth-compat",OK="0.5.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK=1e3;function ap(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function MK(){return ap()==="http:"||ap()==="https:"}function TF(t=St()){return!!((ap()==="file:"||ap()==="ionic:"||ap()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function VK(){return G_()||fS()}function FK(){return bL()&&(document==null?void 0:document.documentMode)===11}function UK(t=St()){return/Edge\/\d+/.test(t)}function BK(t=St()){return FK()||UK(t)}function SF(){try{const t=self.localStorage,e=xm();if(t)return t.setItem(e,"1"),t.removeItem(e),BK()?Op():!0}catch{return Ib()&&Op()}return!1}function Ib(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function rI(){return(MK()||SL()||TF())&&!VK()&&SF()&&!Ib()}function bF(){return TF()&&typeof document<"u"}async function jK(){return bF()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},LK);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function zK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi={LOCAL:"local",NONE:"none",SESSION:"session"},bf=ee,CF="persistence";function GK(t,e){if(bf(Object.values(Mi).includes(e),t,"invalid-persistence-type"),G_()){bf(e!==Mi.SESSION,t,"unsupported-persistence-type");return}if(fS()){bf(e===Mi.NONE,t,"unsupported-persistence-type");return}if(Ib()){bf(e===Mi.NONE||e===Mi.LOCAL&&Op(),t,"unsupported-persistence-type");return}bf(e===Mi.NONE||SF(),t,"unsupported-persistence-type")}async function V1(t){await t._initializationPromise;const e=AF(),n=Sl(CF,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function qK(t,e){const n=AF();if(!n)return[];const i=Sl(CF,t,e);switch(n.getItem(i)){case Mi.NONE:return[fd];case Mi.LOCAL:return[Zp,Fl];case Mi.SESSION:return[Fl];default:return[]}}function AF(){var t;try{return((t=zK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K=ee;class Ko{constructor(){this.browserResolver=Fi(oK),this.cordovaResolver=Fi(xK),this.underlyingResolver=null,this._redirectPersistence=Fl,this._completeRedirectFn=mw,this._overrideRedirectResult=wb}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return bF()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $K(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await jK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){return t.unwrap()}function WK(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(t){return RF(t)}function KK(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new QK(t,xW(t,e))}else if(i){const r=RF(e),o=e;r&&(o.credential=r,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function RF(t){const{_tokenResponse:e}=t instanceof ri?t.customData:t;if(!e)return null;if(!(t instanceof ri)&&"temporaryProof"in e&&"phoneNumber"in e)return Ul.credentialFromResult(t);const n=e.providerId;if(!n||n===Sf.PASSWORD)return null;let i;switch(n){case Sf.GOOGLE:i=rs;break;case Sf.FACEBOOK:i=is;break;case Sf.GITHUB:i=ss;break;case Sf.TWITTER:i=os;break;default:const{oauthIdToken:r,oauthAccessToken:o,oauthTokenSecret:a,pendingToken:u,nonce:c}=e;return!o&&!a&&!r&&!u?null:u?n.startsWith("saml.")?pd._create(n,u):gs._fromParams({providerId:n,signInMethod:n,pendingToken:u,idToken:r,accessToken:o}):new Yc(n).credential({idToken:r,accessToken:o,rawNonce:c})}return t instanceof ri?i.credentialFromError(t):i.credentialFromResult(t)}function mi(t,e){return e.catch(n=>{throw n instanceof ri&&KK(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:HK(n),additionalUserInfo:kW(n),user:gw.getOrCreate(r)}})}async function F1(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>mi(t,n.confirm(i))}}class QK{constructor(e,n){this.resolver=n,this.auth=WK(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return mi(PF(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gw=class Uf{constructor(e){this._delegate=e,this.multiFactor=LW(e)}static getOrCreate(e){return Uf.USER_MAP.has(e)||Uf.USER_MAP.set(e,new Uf(e)),Uf.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return mi(this.auth,iF(this._delegate,e))}async linkWithPhoneNumber(e,n){return F1(this.auth,dH(this._delegate,e,n))}async linkWithPopup(e){return mi(this.auth,wH(this._delegate,e,Ko))}async linkWithRedirect(e){return await V1(Bt(this.auth)),RH(this._delegate,e,Ko)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return mi(this.auth,rF(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return F1(this.auth,hH(this._delegate,e,n))}reauthenticateWithPopup(e){return mi(this.auth,_H(this._delegate,e,Ko))}async reauthenticateWithRedirect(e){return await V1(Bt(this.auth)),AH(this._delegate,e,Ko)}sendEmailVerification(e){return _W(this._delegate,e)}async unlink(e){return await sW(this._delegate,e),this}updateEmail(e){return TW(this._delegate,e)}updatePassword(e){return SW(this._delegate,e)}updatePhoneNumber(e){return fH(this._delegate,e)}updateProfile(e){return IW(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return wW(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};gw.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=ee;let U1=class{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;Cf(i,"invalid-api-key",{appName:e.name}),Cf(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?Ko:void 0;this._delegate=n.initialize({options:{persistence:YK(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Jq),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gw.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){L$(this._delegate,e,n)}applyActionCode(e){return cW(this._delegate,e)}checkActionCode(e){return sF(this._delegate,e)}confirmPasswordReset(e,n){return uW(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return mi(this._delegate,hW(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return yW(this._delegate,e)}isSignInWithEmailLink(e){return mW(this._delegate,e)}async getRedirectResult(){Cf(rI(),this._delegate,"operation-not-supported-in-this-environment");const e=await xH(this._delegate,Ko);return e?mi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){NK(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:o,complete:a}=F2(e,n,i);return this._delegate.onAuthStateChanged(r,o,a)}onIdTokenChanged(e,n,i){const{next:r,error:o,complete:a}=F2(e,n,i);return this._delegate.onIdTokenChanged(r,o,a)}sendSignInLinkToEmail(e,n){return pW(this._delegate,e,n)}sendPasswordResetEmail(e,n){return lW(this._delegate,e,n||void 0)}async setPersistence(e){GK(this._delegate,e);let n;switch(e){case Mi.SESSION:n=Fl;break;case Mi.LOCAL:n=await Fi(Zp)._isAvailable()?Zp:mb;break;case Mi.NONE:n=fd;break;default:return Bn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return mi(this._delegate,rW(this._delegate))}signInWithCredential(e){return mi(this._delegate,cw(this._delegate,e))}signInWithCustomToken(e){return mi(this._delegate,aW(this._delegate,e))}signInWithEmailAndPassword(e,n){return mi(this._delegate,fW(this._delegate,e,n))}signInWithEmailLink(e,n){return mi(this._delegate,gW(this._delegate,e,n))}signInWithPhoneNumber(e,n){return F1(this._delegate,cH(this._delegate,e,n))}async signInWithPopup(e){return Cf(rI(),this._delegate,"operation-not-supported-in-this-environment"),mi(this._delegate,yH(this._delegate,e,Ko))}async signInWithRedirect(e){return Cf(rI(),this._delegate,"operation-not-supported-in-this-environment"),await V1(this._delegate),bH(this._delegate,e,Ko)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return dW(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}};U1.Persistence=Mi;function F2(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&gw.getOrCreate(a)),error:e,complete:n}}function YK(t,e){const n=qK(t,e);if(typeof self<"u"&&!n.includes(Zp)&&n.push(Zp),typeof window<"u")for(const i of[mb,Fl])n.includes(i)||n.push(i);return n.includes(fd)||n.push(fd),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.providerId="phone",this._delegate=new Ul(PF(pe.auth()))}static credential(e,n){return Ul.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Tb.PHONE_SIGN_IN_METHOD=Ul.PHONE_SIGN_IN_METHOD;Tb.PROVIDER_ID=Ul.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK=ee;class XK{constructor(e,n,i=pe.app()){var r;JK((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new lH(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK="auth-compat";function eQ(t){t.INTERNAL.registerComponent(new Mr(ZK,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new U1(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:mc.EMAIL_SIGNIN,PASSWORD_RESET:mc.PASSWORD_RESET,RECOVER_EMAIL:mc.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:mc.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:mc.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:mc.VERIFY_EMAIL}},EmailAuthProvider:Pa,FacebookAuthProvider:is,GithubAuthProvider:ss,GoogleAuthProvider:rs,OAuthProvider:Yc,SAMLAuthProvider:a_,PhoneAuthProvider:Tb,PhoneMultiFactorGenerator:IF,RecaptchaVerifier:XK,TwitterAuthProvider:os,Auth:U1,AuthCredential:Ud,Error:ri}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(DK,OK)}eQ(pe);var U2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cl,kF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function L(){}L.prototype=C.prototype,N.D=C.prototype,N.prototype=new L,N.prototype.constructor=N,N.C=function(V,O,U){for(var D=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)D[Ge-2]=arguments[Ge];return C.prototype[O].apply(V,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,C,L){L||(L=0);var V=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)V[O]=C.charCodeAt(L++)|C.charCodeAt(L++)<<8|C.charCodeAt(L++)<<16|C.charCodeAt(L++)<<24;else for(O=0;16>O;++O)V[O]=C[L++]|C[L++]<<8|C[L++]<<16|C[L++]<<24;C=N.g[0],L=N.g[1],O=N.g[2];var U=N.g[3],D=C+(U^L&(O^U))+V[0]+3614090360&4294967295;C=L+(D<<7&4294967295|D>>>25),D=U+(O^C&(L^O))+V[1]+3905402710&4294967295,U=C+(D<<12&4294967295|D>>>20),D=O+(L^U&(C^L))+V[2]+606105819&4294967295,O=U+(D<<17&4294967295|D>>>15),D=L+(C^O&(U^C))+V[3]+3250441966&4294967295,L=O+(D<<22&4294967295|D>>>10),D=C+(U^L&(O^U))+V[4]+4118548399&4294967295,C=L+(D<<7&4294967295|D>>>25),D=U+(O^C&(L^O))+V[5]+1200080426&4294967295,U=C+(D<<12&4294967295|D>>>20),D=O+(L^U&(C^L))+V[6]+2821735955&4294967295,O=U+(D<<17&4294967295|D>>>15),D=L+(C^O&(U^C))+V[7]+4249261313&4294967295,L=O+(D<<22&4294967295|D>>>10),D=C+(U^L&(O^U))+V[8]+1770035416&4294967295,C=L+(D<<7&4294967295|D>>>25),D=U+(O^C&(L^O))+V[9]+2336552879&4294967295,U=C+(D<<12&4294967295|D>>>20),D=O+(L^U&(C^L))+V[10]+4294925233&4294967295,O=U+(D<<17&4294967295|D>>>15),D=L+(C^O&(U^C))+V[11]+2304563134&4294967295,L=O+(D<<22&4294967295|D>>>10),D=C+(U^L&(O^U))+V[12]+1804603682&4294967295,C=L+(D<<7&4294967295|D>>>25),D=U+(O^C&(L^O))+V[13]+4254626195&4294967295,U=C+(D<<12&4294967295|D>>>20),D=O+(L^U&(C^L))+V[14]+2792965006&4294967295,O=U+(D<<17&4294967295|D>>>15),D=L+(C^O&(U^C))+V[15]+1236535329&4294967295,L=O+(D<<22&4294967295|D>>>10),D=C+(O^U&(L^O))+V[1]+4129170786&4294967295,C=L+(D<<5&4294967295|D>>>27),D=U+(L^O&(C^L))+V[6]+3225465664&4294967295,U=C+(D<<9&4294967295|D>>>23),D=O+(C^L&(U^C))+V[11]+643717713&4294967295,O=U+(D<<14&4294967295|D>>>18),D=L+(U^C&(O^U))+V[0]+3921069994&4294967295,L=O+(D<<20&4294967295|D>>>12),D=C+(O^U&(L^O))+V[5]+3593408605&4294967295,C=L+(D<<5&4294967295|D>>>27),D=U+(L^O&(C^L))+V[10]+38016083&4294967295,U=C+(D<<9&4294967295|D>>>23),D=O+(C^L&(U^C))+V[15]+3634488961&4294967295,O=U+(D<<14&4294967295|D>>>18),D=L+(U^C&(O^U))+V[4]+3889429448&4294967295,L=O+(D<<20&4294967295|D>>>12),D=C+(O^U&(L^O))+V[9]+568446438&4294967295,C=L+(D<<5&4294967295|D>>>27),D=U+(L^O&(C^L))+V[14]+3275163606&4294967295,U=C+(D<<9&4294967295|D>>>23),D=O+(C^L&(U^C))+V[3]+4107603335&4294967295,O=U+(D<<14&4294967295|D>>>18),D=L+(U^C&(O^U))+V[8]+1163531501&4294967295,L=O+(D<<20&4294967295|D>>>12),D=C+(O^U&(L^O))+V[13]+2850285829&4294967295,C=L+(D<<5&4294967295|D>>>27),D=U+(L^O&(C^L))+V[2]+4243563512&4294967295,U=C+(D<<9&4294967295|D>>>23),D=O+(C^L&(U^C))+V[7]+1735328473&4294967295,O=U+(D<<14&4294967295|D>>>18),D=L+(U^C&(O^U))+V[12]+2368359562&4294967295,L=O+(D<<20&4294967295|D>>>12),D=C+(L^O^U)+V[5]+4294588738&4294967295,C=L+(D<<4&4294967295|D>>>28),D=U+(C^L^O)+V[8]+2272392833&4294967295,U=C+(D<<11&4294967295|D>>>21),D=O+(U^C^L)+V[11]+1839030562&4294967295,O=U+(D<<16&4294967295|D>>>16),D=L+(O^U^C)+V[14]+4259657740&4294967295,L=O+(D<<23&4294967295|D>>>9),D=C+(L^O^U)+V[1]+2763975236&4294967295,C=L+(D<<4&4294967295|D>>>28),D=U+(C^L^O)+V[4]+1272893353&4294967295,U=C+(D<<11&4294967295|D>>>21),D=O+(U^C^L)+V[7]+4139469664&4294967295,O=U+(D<<16&4294967295|D>>>16),D=L+(O^U^C)+V[10]+3200236656&4294967295,L=O+(D<<23&4294967295|D>>>9),D=C+(L^O^U)+V[13]+681279174&4294967295,C=L+(D<<4&4294967295|D>>>28),D=U+(C^L^O)+V[0]+3936430074&4294967295,U=C+(D<<11&4294967295|D>>>21),D=O+(U^C^L)+V[3]+3572445317&4294967295,O=U+(D<<16&4294967295|D>>>16),D=L+(O^U^C)+V[6]+76029189&4294967295,L=O+(D<<23&4294967295|D>>>9),D=C+(L^O^U)+V[9]+3654602809&4294967295,C=L+(D<<4&4294967295|D>>>28),D=U+(C^L^O)+V[12]+3873151461&4294967295,U=C+(D<<11&4294967295|D>>>21),D=O+(U^C^L)+V[15]+530742520&4294967295,O=U+(D<<16&4294967295|D>>>16),D=L+(O^U^C)+V[2]+3299628645&4294967295,L=O+(D<<23&4294967295|D>>>9),D=C+(O^(L|~U))+V[0]+4096336452&4294967295,C=L+(D<<6&4294967295|D>>>26),D=U+(L^(C|~O))+V[7]+1126891415&4294967295,U=C+(D<<10&4294967295|D>>>22),D=O+(C^(U|~L))+V[14]+2878612391&4294967295,O=U+(D<<15&4294967295|D>>>17),D=L+(U^(O|~C))+V[5]+4237533241&4294967295,L=O+(D<<21&4294967295|D>>>11),D=C+(O^(L|~U))+V[12]+1700485571&4294967295,C=L+(D<<6&4294967295|D>>>26),D=U+(L^(C|~O))+V[3]+2399980690&4294967295,U=C+(D<<10&4294967295|D>>>22),D=O+(C^(U|~L))+V[10]+4293915773&4294967295,O=U+(D<<15&4294967295|D>>>17),D=L+(U^(O|~C))+V[1]+2240044497&4294967295,L=O+(D<<21&4294967295|D>>>11),D=C+(O^(L|~U))+V[8]+1873313359&4294967295,C=L+(D<<6&4294967295|D>>>26),D=U+(L^(C|~O))+V[15]+4264355552&4294967295,U=C+(D<<10&4294967295|D>>>22),D=O+(C^(U|~L))+V[6]+2734768916&4294967295,O=U+(D<<15&4294967295|D>>>17),D=L+(U^(O|~C))+V[13]+1309151649&4294967295,L=O+(D<<21&4294967295|D>>>11),D=C+(O^(L|~U))+V[4]+4149444226&4294967295,C=L+(D<<6&4294967295|D>>>26),D=U+(L^(C|~O))+V[11]+3174756917&4294967295,U=C+(D<<10&4294967295|D>>>22),D=O+(C^(U|~L))+V[2]+718787259&4294967295,O=U+(D<<15&4294967295|D>>>17),D=L+(U^(O|~C))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+U&4294967295}i.prototype.u=function(N,C){C===void 0&&(C=N.length);for(var L=C-this.blockSize,V=this.B,O=this.h,U=0;U<C;){if(O==0)for(;U<=L;)r(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<C;)if(V[O++]=N.charCodeAt(U++),O==this.blockSize){r(this,V),O=0;break}}else for(;U<C;)if(V[O++]=N[U++],O==this.blockSize){r(this,V),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;var L=8*this.o;for(C=N.length-8;C<N.length;++C)N[C]=L&255,L/=256;for(this.u(N),N=Array(16),C=L=0;4>C;++C)for(var V=0;32>V;V+=8)N[L++]=this.g[C]>>>V&255;return N};function o(N,C){var L=u;return Object.prototype.hasOwnProperty.call(L,N)?L[N]:L[N]=C(N)}function a(N,C){this.h=C;for(var L=[],V=!0,O=N.length-1;0<=O;O--){var U=N[O]|0;V&&U==C||(L[O]=U,V=!1)}this.g=L}var u={};function c(N){return-128<=N&&128>N?o(N,function(C){return new a([C|0],0>C?-1:0)}):new a([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return g;if(0>N)return R(h(-N));for(var C=[],L=1,V=0;N>=L;V++)C[V]=N/L|0,L*=4294967296;return new a(C,0)}function m(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return R(m(N.substring(1),C));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=h(Math.pow(C,8)),V=g,O=0;O<N.length;O+=8){var U=Math.min(8,N.length-O),D=parseInt(N.substring(O,O+U),C);8>U?(U=h(Math.pow(C,U)),V=V.j(U).add(h(D))):(V=V.j(L),V=V.add(h(D)))}return V}var g=c(0),_=c(1),T=c(16777216);t=a.prototype,t.m=function(){if(E(this))return-R(this).m();for(var N=0,C=1,L=0;L<this.g.length;L++){var V=this.i(L);N+=(0<=V?V:4294967296+V)*C,C*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(E(this))return"-"+R(this).toString(N);for(var C=h(Math.pow(N,6)),L=this,V="";;){var O=F(L,C).g;L=S(L,O.j(C));var U=((0<L.g.length?L.g[0]:L.h)>>>0).toString(N);if(L=O,P(L))return U+V;for(;6>U.length;)U="0"+U;V=U+V}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(var C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function E(N){return N.h==-1}t.l=function(N){return N=S(this,N),E(N)?-1:P(N)?0:1};function R(N){for(var C=N.g.length,L=[],V=0;V<C;V++)L[V]=~N.g[V];return new a(L,~N.h).add(_)}t.abs=function(){return E(this)?R(this):this},t.add=function(N){for(var C=Math.max(this.g.length,N.g.length),L=[],V=0,O=0;O<=C;O++){var U=V+(this.i(O)&65535)+(N.i(O)&65535),D=(U>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);V=D>>>16,U&=65535,D&=65535,L[O]=D<<16|U}return new a(L,L[L.length-1]&-2147483648?-1:0)};function S(N,C){return N.add(R(C))}t.j=function(N){if(P(this)||P(N))return g;if(E(this))return E(N)?R(this).j(R(N)):R(R(this).j(N));if(E(N))return R(this.j(R(N)));if(0>this.l(T)&&0>N.l(T))return h(this.m()*N.m());for(var C=this.g.length+N.g.length,L=[],V=0;V<2*C;V++)L[V]=0;for(V=0;V<this.g.length;V++)for(var O=0;O<N.g.length;O++){var U=this.i(V)>>>16,D=this.i(V)&65535,Ge=N.i(O)>>>16,Re=N.i(O)&65535;L[2*V+2*O]+=D*Re,b(L,2*V+2*O),L[2*V+2*O+1]+=U*Re,b(L,2*V+2*O+1),L[2*V+2*O+1]+=D*Ge,b(L,2*V+2*O+1),L[2*V+2*O+2]+=U*Ge,b(L,2*V+2*O+2)}for(V=0;V<C;V++)L[V]=L[2*V+1]<<16|L[2*V];for(V=C;V<2*C;V++)L[V]=0;return new a(L,0)};function b(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function k(N,C){this.g=N,this.h=C}function F(N,C){if(P(C))throw Error("division by zero");if(P(N))return new k(g,g);if(E(N))return C=F(R(N),C),new k(R(C.g),R(C.h));if(E(C))return C=F(N,R(C)),new k(R(C.g),C.h);if(30<N.g.length){if(E(N)||E(C))throw Error("slowDivide_ only works with positive integers.");for(var L=_,V=C;0>=V.l(N);)L=j(L),V=j(V);var O=B(L,1),U=B(V,1);for(V=B(V,2),L=B(L,2);!P(V);){var D=U.add(V);0>=D.l(N)&&(O=O.add(L),U=D),V=B(V,1),L=B(L,1)}return C=S(N,O.j(C)),new k(O,C)}for(O=g;0<=N.l(C);){for(L=Math.max(1,Math.floor(N.m()/C.m())),V=Math.ceil(Math.log(L)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),U=h(L),D=U.j(C);E(D)||0<D.l(N);)L-=V,U=h(L),D=U.j(C);P(U)&&(U=_),O=O.add(U),N=S(N,D)}return new k(O,N)}t.A=function(N){return F(this,N).h},t.and=function(N){for(var C=Math.max(this.g.length,N.g.length),L=[],V=0;V<C;V++)L[V]=this.i(V)&N.i(V);return new a(L,this.h&N.h)},t.or=function(N){for(var C=Math.max(this.g.length,N.g.length),L=[],V=0;V<C;V++)L[V]=this.i(V)|N.i(V);return new a(L,this.h|N.h)},t.xor=function(N){for(var C=Math.max(this.g.length,N.g.length),L=[],V=0;V<C;V++)L[V]=this.i(V)^N.i(V);return new a(L,this.h^N.h)};function j(N){for(var C=N.g.length+1,L=[],V=0;V<C;V++)L[V]=N.i(V)<<1|N.i(V-1)>>>31;return new a(L,N.h)}function B(N,C){var L=C>>5;C%=32;for(var V=N.g.length-L,O=[],U=0;U<V;U++)O[U]=0<C?N.i(U+L)>>>C|N.i(U+L+1)<<32-C:N.i(U+L);return new a(O,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,kF=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,Cl=a}).apply(typeof U2<"u"?U2:typeof self<"u"?self:typeof window<"u"?window:{});var Dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xF,NF,Bf,DF,ay,B1,OF,LF,MF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,I){return f==Array.prototype||f==Object.prototype||(f[w]=I.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dv=="object"&&Dv];for(var w=0;w<f.length;++w){var I=f[w];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=n(this);function r(f,w){if(w)e:{var I=i;f=f.split(".");for(var x=0;x<f.length-1;x++){var z=f[x];if(!(z in I))break e;I=I[z]}f=f[f.length-1],x=I[f],w=w(x),w!=x&&w!=null&&e(I,f,{configurable:!0,writable:!0,value:w})}}function o(f,w){f instanceof String&&(f+="");var I=0,x=!1,z={next:function(){if(!x&&I<f.length){var W=I++;return{value:w(W,f[W]),done:!1}}return x=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}r("Array.prototype.values",function(f){return f||function(){return o(this,function(w,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function h(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function m(f,w,I){return f.call.apply(f.bind,arguments)}function g(f,w,I){if(!f)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,x),f.apply(w,z)}}return function(){return f.apply(w,arguments)}}function _(f,w,I){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,_.apply(null,arguments)}function T(f,w){var I=Array.prototype.slice.call(arguments,1);return function(){var x=I.slice();return x.push.apply(x,arguments),f.apply(this,x)}}function P(f,w){function I(){}I.prototype=w.prototype,f.aa=w.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(x,z,W){for(var ie=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)ie[Qe-2]=arguments[Qe];return w.prototype[z].apply(x,ie)}}function E(f){const w=f.length;if(0<w){const I=Array(w);for(let x=0;x<w;x++)I[x]=f[x];return I}return[]}function R(f,w){for(let I=1;I<arguments.length;I++){const x=arguments[I];if(c(x)){const z=f.length||0,W=x.length||0;f.length=z+W;for(let ie=0;ie<W;ie++)f[z+ie]=x[ie]}else f.push(x)}}class S{constructor(w,I){this.i=w,this.j=I,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function b(f){return/^[\s\xa0]*$/.test(f)}function k(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function F(f){return F[" "](f),f}F[" "]=function(){};var j=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function B(f,w,I){for(const x in f)w.call(I,f[x],x,f)}function N(f,w){for(const I in f)w.call(void 0,f[I],I,f)}function C(f){const w={};for(const I in f)w[I]=f[I];return w}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,w){let I,x;for(let z=1;z<arguments.length;z++){x=arguments[z];for(I in x)f[I]=x[I];for(let W=0;W<L.length;W++)I=L[W],Object.prototype.hasOwnProperty.call(x,I)&&(f[I]=x[I])}}function O(f){var w=1;f=f.split(":");const I=[];for(;0<w&&f.length;)I.push(f.shift()),w--;return f.length&&I.push(f.join(":")),I}function U(f){u.setTimeout(()=>{throw f},0)}function D(){var f=ue;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class Ge{constructor(){this.h=this.g=null}add(w,I){const x=Re.get();x.set(w,I),this.h?this.h.next=x:this.g=x,this.h=x}}var Re=new S(()=>new _e,f=>f.reset());class _e{constructor(){this.next=this.g=this.h=null}set(w,I){this.h=w,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,se=!1,ue=new Ge,he=()=>{const f=u.Promise.resolve(void 0);rt=()=>{f.then(Xe)}};var Xe=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(I){U(I)}var w=Re;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}se=!1};function Be(){this.s=this.s,this.C=this.C}Be.prototype.s=!1,Be.prototype.ma=function(){this.s||(this.s=!0,this.N())},Be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var ar=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};u.addEventListener("test",I,w),u.removeEventListener("test",I,w)}catch{}return f}();function lr(f,w){if(ct.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,x=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(j){e:{try{F(w.nodeName);var z=!0;break e}catch{}z=!1}z||(w=null)}}else I=="mouseover"?w=f.fromElement:I=="mouseout"&&(w=f.toElement);this.relatedTarget=w,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ur[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&lr.aa.h.call(this)}}P(lr,ct);var ur={2:"touch",3:"pen",4:"mouse"};lr.prototype.h=function(){lr.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Wm=0;function uu(f,w,I,x,z){this.listener=f,this.proxy=null,this.src=w,this.type=I,this.capture=!!x,this.ha=z,this.key=++Wm,this.da=this.fa=!1}function cu(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function du(f){this.src=f,this.g={},this.h=0}du.prototype.add=function(f,w,I,x,z){var W=f.toString();f=this.g[W],f||(f=this.g[W]=[],this.h++);var ie=fu(f,w,x,z);return-1<ie?(w=f[ie],I||(w.fa=!1)):(w=new uu(w,this.src,W,!!x,z),w.fa=I,f.push(w)),w};function hu(f,w){var I=w.type;if(I in f.g){var x=f.g[I],z=Array.prototype.indexOf.call(x,w,void 0),W;(W=0<=z)&&Array.prototype.splice.call(x,z,1),W&&(cu(w),f.g[I].length==0&&(delete f.g[I],f.h--))}}function fu(f,w,I,x){for(var z=0;z<f.length;++z){var W=f[z];if(!W.da&&W.listener==w&&W.capture==!!I&&W.ha==x)return z}return-1}var Qd="closure_lm_"+(1e6*Math.random()|0),kn={};function Hm(f,w,I,x,z){if(Array.isArray(w)){for(var W=0;W<w.length;W++)Hm(f,w[W],I,x,z);return null}return I=Jd(I),f&&f[Dt]?f.K(w,I,h(x)?!!x.capture:!!x,z):Bw(f,w,I,!1,x,z)}function Bw(f,w,I,x,z,W){if(!w)throw Error("Invalid event type");var ie=h(z)?!!z.capture:!!z,Qe=Da(f);if(Qe||(f[Qd]=Qe=new du(f)),I=Qe.add(w,I,x,ie,W),I.proxy)return I;if(x=jw(),I.proxy=x,x.src=f,x.listener=I,f.addEventListener)ar||(z=ie),z===void 0&&(z=!1),f.addEventListener(w.toString(),x,z);else if(f.attachEvent)f.attachEvent(Qm(w.toString()),x);else if(f.addListener&&f.removeListener)f.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return I}function jw(){function f(I){return w.call(f.src,f.listener,I)}const w=zw;return f}function Km(f,w,I,x,z){if(Array.isArray(w))for(var W=0;W<w.length;W++)Km(f,w[W],I,x,z);else x=h(x)?!!x.capture:!!x,I=Jd(I),f&&f[Dt]?(f=f.i,w=String(w).toString(),w in f.g&&(W=f.g[w],I=fu(W,I,x,z),-1<I&&(cu(W[I]),Array.prototype.splice.call(W,I,1),W.length==0&&(delete f.g[w],f.h--)))):f&&(f=Da(f))&&(w=f.g[w.toString()],f=-1,w&&(f=fu(w,I,x,z)),(I=-1<f?w[f]:null)&&Yd(I))}function Yd(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[Dt])hu(w.i,f);else{var I=f.type,x=f.proxy;w.removeEventListener?w.removeEventListener(I,x,f.capture):w.detachEvent?w.detachEvent(Qm(I),x):w.addListener&&w.removeListener&&w.removeListener(x),(I=Da(w))?(hu(I,f),I.h==0&&(I.src=null,w[Qd]=null)):cu(f)}}}function Qm(f){return f in kn?kn[f]:kn[f]="on"+f}function zw(f,w){if(f.da)f=!0;else{w=new lr(w,this);var I=f.listener,x=f.ha||f.src;f.fa&&Yd(f),f=I.call(x,w)}return f}function Da(f){return f=f[Qd],f instanceof du?f:null}var Br="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jd(f){return typeof f=="function"?f:(f[Br]||(f[Br]=function(w){return f.handleEvent(w)}),f[Br])}function Yt(){Be.call(this),this.i=new du(this),this.M=this,this.F=null}P(Yt,Be),Yt.prototype[Dt]=!0,Yt.prototype.removeEventListener=function(f,w,I,x){Km(this,f,w,I,x)};function mn(f,w){var I,x=f.F;if(x)for(I=[];x;x=x.F)I.push(x);if(f=f.M,x=w.type||w,typeof w=="string")w=new ct(w,f);else if(w instanceof ct)w.target=w.target||f;else{var z=w;w=new ct(x,f),V(w,z)}if(z=!0,I)for(var W=I.length-1;0<=W;W--){var ie=w.g=I[W];z=_s(ie,x,!0,w)&&z}if(ie=w.g=f,z=_s(ie,x,!0,w)&&z,z=_s(ie,x,!1,w)&&z,I)for(W=0;W<I.length;W++)ie=w.g=I[W],z=_s(ie,x,!1,w)&&z}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var I=f.g[w],x=0;x<I.length;x++)cu(I[x]);delete f.g[w],f.h--}}this.F=null},Yt.prototype.K=function(f,w,I,x){return this.i.add(String(f),w,!1,I,x)},Yt.prototype.L=function(f,w,I,x){return this.i.add(String(f),w,!0,I,x)};function _s(f,w,I,x){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var z=!0,W=0;W<w.length;++W){var ie=w[W];if(ie&&!ie.da&&ie.capture==I){var Qe=ie.listener,Jt=ie.ha||ie.src;ie.fa&&hu(f.i,ie),z=Qe.call(Jt,x)!==!1&&z}}return z&&!x.defaultPrevented}function ws(f,w,I){if(typeof f=="function")I&&(f=_(f,I));else if(f&&typeof f.handleEvent=="function")f=_(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:u.setTimeout(f,w||0)}function jr(f){f.g=ws(()=>{f.g=null,f.i&&(f.i=!1,jr(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class Ym extends Be{constructor(w,I){super(),this.m=w,this.l=I,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oa(f){Be.call(this),this.h=f,this.g={}}P(Oa,Be);var Jm=[];function La(f){B(f.g,function(w,I){this.g.hasOwnProperty(I)&&Yd(w)},f),f.g={}}Oa.prototype.N=function(){Oa.aa.N.call(this),La(this)},Oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var po=u.JSON.stringify,Es=u.JSON.parse,Gw=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Xd(){}Xd.prototype.h=null;function Zd(f){return f.h||(f.h=f.i())}function eh(){}var zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function th(){ct.call(this,"d")}P(th,ct);function Wi(){ct.call(this,"c")}P(Wi,ct);var cr={},pu=null;function mo(){return pu=pu||new Yt}cr.La="serverreachability";function mu(f){ct.call(this,cr.La,f)}P(mu,ct);function dr(f){const w=mo();mn(w,new mu(w))}cr.STAT_EVENT="statevent";function go(f,w){ct.call(this,cr.STAT_EVENT,f),this.stat=w}P(go,ct);function xn(f){const w=mo();mn(w,new go(w,f))}cr.Ma="timingevent";function nh(f,w){ct.call(this,cr.Ma,f),this.size=w}P(nh,ct);function Ma(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},w)}function Va(){this.g=!0}Va.prototype.xa=function(){this.g=!1};function qw(f,w,I,x,z,W){f.info(function(){if(f.g)if(W)for(var ie="",Qe=W.split("&"),Jt=0;Jt<Qe.length;Jt++){var ke=Qe[Jt].split("=");if(1<ke.length){var gn=ke[0];ke=ke[1];var yt=gn.split("_");ie=2<=yt.length&&yt[1]=="type"?ie+(gn+"="+ke+"&"):ie+(gn+"=redacted&")}}else ie=null;else ie=W;return"XMLHTTP REQ ("+x+") [attempt "+z+"]: "+w+`
`+I+`
`+ie})}function $w(f,w,I,x,z,W,ie){f.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+z+"]: "+w+`
`+I+`
`+W+" "+ie})}function Hi(f,w,I,x){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Is(f,I)+(x?" "+x:"")})}function Gr(f,w){f.info(function(){return"TIMEOUT: "+w})}Va.prototype.info=function(){};function Is(f,w){if(!f.g)return w;if(!w)return null;try{var I=JSON.parse(w);if(I){for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var x=I[f];if(!(2>x.length)){var z=x[1];if(Array.isArray(z)&&!(1>z.length)){var W=z[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ie=1;ie<z.length;ie++)z[ie]=""}}}}return po(I)}catch{return w}}var Fa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ih={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qr;function gu(){}P(gu,Xd),gu.prototype.g=function(){return new XMLHttpRequest},gu.prototype.i=function(){return{}},qr=new gu;function jn(f,w,I,x){this.j=f,this.i=w,this.l=I,this.R=x||1,this.U=new Oa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xm}function Xm(){this.i=null,this.g="",this.h=!1}var Zm={},vu={};function yu(f,w,I){f.L=1,f.v=Ki(Yn(w)),f.m=I,f.P=!0,bt(f,null)}function bt(f,w){f.F=Date.now(),Ua(f),f.A=Yn(f.v);var I=f.A,x=f.R;Array.isArray(x)||(x=[String(x)]),mr(I.i,"t",x),f.C=0,I=f.j.J,f.h=new Xm,f.g=lg(f.j,I?w:null,!f.m),0<f.O&&(f.M=new Ym(_(f.Y,f,f.g),f.O)),w=f.U,I=f.g,x=f.ca;var z="readystatechange";Array.isArray(z)||(z&&(Jm[0]=z.toString()),z=Jm);for(var W=0;W<z.length;W++){var ie=Hm(I,z[W],x||w.handleEvent,!1,w.h||w);if(!ie)break;w.g[ie.key]=ie}w=f.H?C(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),dr(),qw(f.i,f.u,f.A,f.l,f.R,f.m)}jn.prototype.ca=function(f){f=f.target;const w=this.M;w&&hi(f)==3?w.j():this.Y(f)},jn.prototype.Y=function(f){try{if(f==this.g)e:{const yt=hi(this.g);var w=this.g.Ba();const So=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||hh(this.g)))){this.J||yt!=4||w==7||(w==8||0>=So?dr(3):dr(2)),_u(this);var I=this.g.Z();this.X=I;t:if(Ts(this)){var x=hh(this.g);f="";var z=x.length,W=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bs(this),Ss(this);var ie="";break t}this.h.i=new u.TextDecoder}for(w=0;w<z;w++)this.h.h=!0,f+=this.h.i.decode(x[w],{stream:!(W&&w==z-1)});x.length=0,this.h.g+=f,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=I==200,$w(this.i,this.u,this.A,this.l,this.R,yt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Jt=this.g;if((Qe=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Qe)){var ke=Qe;break t}}ke=null}if(I=ke)Hi(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wu(this,I);else{this.o=!1,this.s=3,xn(12),bs(this),Ss(this);break e}}if(this.P){I=!0;let Dn;for(;!this.J&&this.C<ie.length;)if(Dn=eg(this,ie),Dn==vu){yt==4&&(this.s=4,xn(14),I=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==Zm){this.s=4,xn(15),Hi(this.i,this.l,ie,"[Invalid Chunk]"),I=!1;break}else Hi(this.i,this.l,Dn,null),wu(this,Dn);if(Ts(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||ie.length!=0||this.h.h||(this.s=1,xn(16),I=!1),this.o=this.o&&I,!I)Hi(this.i,this.l,ie,"[Invalid Chunked Response]"),bs(this),Ss(this);else if(0<ie.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),ae(gn),gn.M=!0,xn(11))}}else Hi(this.i,this.l,ie,null),wu(this,ie);yt==4&&bs(this),this.o&&!this.J&&(yt==4?ht(this.j,this):(this.o=!1,Ua(this)))}else Qw(this.g),I==400&&0<ie.indexOf("Unknown SID")?(this.s=3,xn(12)):(this.s=0,xn(13)),bs(this),Ss(this)}}}catch{}finally{}};function Ts(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function eg(f,w){var I=f.C,x=w.indexOf(`
`,I);return x==-1?vu:(I=Number(w.substring(I,x)),isNaN(I)?Zm:(x+=1,x+I>w.length?vu:(w=w.slice(x,x+I),f.C=x+I,w)))}jn.prototype.cancel=function(){this.J=!0,bs(this)};function Ua(f){f.S=Date.now()+f.I,Ae(f,f.I)}function Ae(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ma(_(f.ba,f),w)}function _u(f){f.B&&(u.clearTimeout(f.B),f.B=null)}jn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Gr(this.i,this.A),this.L!=2&&(dr(),xn(17)),bs(this),this.s=2,Ss(this)):Ae(this,this.S-f)};function Ss(f){f.j.G==0||f.J||ht(f.j,f)}function bs(f){_u(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,La(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function wu(f,w){try{var I=f.j;if(I.G!=0&&(I.g==f||an(I.h,f))){if(!f.K&&an(I.h,f)&&I.G==3){try{var x=I.Da.g.parse(w)}catch{x=null}if(Array.isArray(x)&&x.length==3){var z=x;if(z[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<f.F)xu(I),Ru(I);else break e;Oe(I),xn(18)}}else I.za=z[1],0<I.za-I.T&&37500>z[2]&&I.F&&I.v==0&&!I.C&&(I.C=Ma(_(I.Za,I),6e3));if(1>=ci(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Ct(I,11)}else if((f.K||I.g==f)&&xu(I),!b(w))for(z=I.Da.g.parse(w),w=0;w<z.length;w++){let ke=z[w];if(I.T=ke[0],ke=ke[1],I.G==2)if(ke[0]=="c"){I.K=ke[1],I.ia=ke[2];const gn=ke[3];gn!=null&&(I.la=gn,I.j.info("VER="+I.la));const yt=ke[4];yt!=null&&(I.Aa=yt,I.j.info("SVER="+I.Aa));const So=ke[5];So!=null&&typeof So=="number"&&0<So&&(x=1.5*So,I.L=x,I.j.info("backChannelRequestTimeoutMs_="+x)),x=I;const Dn=f.g;if(Dn){const Kr=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var W=x.h;W.g||Kr.indexOf("spdy")==-1&&Kr.indexOf("quic")==-1&&Kr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(rh(W,W.h),W.h=null))}if(x.D){const mh=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;mh&&(x.ya=mh,nt(x.I,x.D,mh))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms")),x=I;var ie=f;if(x.qa=ph(x,x.J?x.ia:null,x.W),ie.K){fr(x.h,ie);var Qe=ie,Jt=x.L;Jt&&(Qe.I=Jt),Qe.B&&(_u(Qe),Ua(Qe)),x.g=ie}else Wa(x);0<I.i.length&&ku(I)}else ke[0]!="stop"&&ke[0]!="close"||Ct(I,7);else I.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Ct(I,7):ks(I):ke[0]!="noop"&&I.l&&I.l.ta(ke),I.v=0)}}dr(4)}catch{}}var vt=class{constructor(f,w){this.g=f,this.map=w}};function hr(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tg(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ci(f){return f.h?1:f.g?f.g.size:0}function an(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function rh(f,w){f.g?f.g.add(w):f.h=w}function fr(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}hr.prototype.cancel=function(){if(this.i=sh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function sh(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const I of f.g.values())w=w.concat(I.D);return w}return E(f.i)}function Eu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var w=[],I=f.length,x=0;x<I;x++)w.push(f[x]);return w}w=[],I=0;for(x in f)w[I++]=f[x];return w}function oh(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var w=[];f=f.length;for(var I=0;I<f;I++)w.push(I);return w}w=[],I=0;for(const x in f)w[I++]=x;return w}}}function Iu(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var I=oh(f),x=Eu(f),z=x.length,W=0;W<z;W++)w.call(void 0,x[W],I&&I[W],f)}var Tu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ww(f,w){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var x=f[I].indexOf("="),z=null;if(0<=x){var W=f[I].substring(0,x);z=f[I].substring(x+1)}else W=f[I];w(W,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Qn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Qn){this.h=f.h,Ba(this,f.j),this.o=f.o,this.g=f.g,pr(this,f.s),this.l=f.l;var w=f.i,I=new yo;I.i=w.i,w.g&&(I.g=new Map(w.g),I.h=w.h),ah(this,I),this.m=f.m}else f&&(w=String(f).match(Tu))?(this.h=!1,Ba(this,w[1]||"",!0),this.o=vo(w[2]||""),this.g=vo(w[3]||"",!0),pr(this,w[4]),this.l=vo(w[5]||"",!0),ah(this,w[6]||"",!0),this.m=vo(w[7]||"")):(this.h=!1,this.i=new yo(null,this.h))}Qn.prototype.toString=function(){var f=[],w=this.j;w&&f.push(ja(w,zn,!0),":");var I=this.g;return(I||w=="file")&&(f.push("//"),(w=this.o)&&f.push(ja(w,zn,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&f.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(ja(I,I.charAt(0)=="/"?ig:$r,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",ja(I,rg)),f.join("")};function Yn(f){return new Qn(f)}function Ba(f,w,I){f.j=I?vo(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function pr(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function ah(f,w,I){w instanceof yo?(f.i=w,sg(f.i,f.h)):(I||(w=ja(w,Su)),f.i=new yo(w,f.h))}function nt(f,w,I){f.i.set(w,I)}function Ki(f){return nt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function vo(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ja(f,w,I){return typeof f=="string"?(f=encodeURI(f).replace(w,ng),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ng(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var zn=/[#\/\?@]/g,$r=/[#\?:]/g,ig=/[#\?]/g,Su=/[#\?@]/g,rg=/#/g;function yo(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Qi(f){f.g||(f.g=new Map,f.h=0,f.i&&Ww(f.i,function(w,I){f.add(decodeURIComponent(w.replace(/\+/g," ")),I)}))}t=yo.prototype,t.add=function(f,w){Qi(this),this.i=null,f=gr(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(w),this.h+=1,this};function Cs(f,w){Qi(f),w=gr(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function lh(f,w){return Qi(f),w=gr(f,w),f.g.has(w)}t.forEach=function(f,w){Qi(this),this.g.forEach(function(I,x){I.forEach(function(z){f.call(w,z,x,this)},this)},this)},t.na=function(){Qi(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),I=[];for(let x=0;x<w.length;x++){const z=f[x];for(let W=0;W<z.length;W++)I.push(w[x])}return I},t.V=function(f){Qi(this);let w=[];if(typeof f=="string")lh(this,f)&&(w=w.concat(this.g.get(gr(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)w=w.concat(f[I])}return w},t.set=function(f,w){return Qi(this),this.i=null,f=gr(this,f),lh(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},t.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function mr(f,w,I){Cs(f,w),0<I.length&&(f.i=null,f.g.set(gr(f,w),E(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var I=0;I<w.length;I++){var x=w[I];const W=encodeURIComponent(String(x)),ie=this.V(x);for(x=0;x<ie.length;x++){var z=W;ie[x]!==""&&(z+="="+encodeURIComponent(String(ie[x]))),f.push(z)}}return this.i=f.join("&")};function gr(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function sg(f,w){w&&!f.j&&(Qi(f),f.i=null,f.g.forEach(function(I,x){var z=x.toLowerCase();x!=z&&(Cs(this,x),mr(this,z,I))},f)),f.j=w}function za(f,w){const I=new Va;if(u.Image){const x=new Image;x.onload=T(Wr,I,"TestLoadImage: loaded",!0,w,x),x.onerror=T(Wr,I,"TestLoadImage: error",!1,w,x),x.onabort=T(Wr,I,"TestLoadImage: abort",!1,w,x),x.ontimeout=T(Wr,I,"TestLoadImage: timeout",!1,w,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=f}else w(!1)}function Hw(f,w){const I=new Va,x=new AbortController,z=setTimeout(()=>{x.abort(),Wr(I,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:x.signal}).then(W=>{clearTimeout(z),W.ok?Wr(I,"TestPingServer: ok",!0,w):Wr(I,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(z),Wr(I,"TestPingServer: error",!1,w)})}function Wr(f,w,I,x,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),x(I)}catch{}}function Kw(){this.g=new Gw}function _o(f,w,I){const x=I||"";try{Iu(f,function(z,W){let ie=z;h(z)&&(ie=po(z)),w.push(x+W+"="+encodeURIComponent(ie))})}catch(z){throw w.push(x+"type="+encodeURIComponent("_badmap")),z}}function di(f){this.l=f.Ub||null,this.j=f.eb||!1}P(di,Xd),di.prototype.g=function(){return new wo(this.l,this.j)},di.prototype.i=function(f){return function(){return f}}({});function wo(f,w){Yt.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(wo,Yt),t=wo.prototype,t.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,Ps(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||u).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ga(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ga(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?As(this):Ps(this),this.readyState==3&&Ga(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,As(this))},t.Qa=function(f){this.g&&(this.response=f,As(this))},t.ga=function(){this.g&&As(this)};function As(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ps(f)}t.setRequestHeader=function(f,w){this.u.append(f,w)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var I=w.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=w.next();return f.join(`\r
`)};function Ps(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function uh(f){let w="";return B(f,function(I,x){w+=x,w+=":",w+=I,w+=`\r
`}),w}function ch(f,w,I){e:{for(x in I){var x=!1;break e}x=!0}x||(I=uh(I),typeof f=="string"?I!=null&&encodeURIComponent(String(I)):nt(f,w,I))}function dt(f){Yt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(dt,Yt);var bu=/^https?$/i,Rs=["POST","PUT"];t=dt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,w,I,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qr.g(),this.v=this.o?Zd(this.o):Zd(qr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(W){Eo(this,W);return}if(f=I||"",I=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var z in x)I.set(z,x[z]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const W of x.keys())I.set(W,x.get(W));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(I.keys()).find(W=>W.toLowerCase()=="content-type"),z=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Rs,w,void 0))||x||z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ie]of I)this.g.setRequestHeader(W,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pu(this),this.u=!0,this.g.send(f),this.u=!1}catch(W){Eo(this,W)}};function Eo(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,Cu(f),Au(f)}function Cu(f){f.A||(f.A=!0,mn(f,"complete"),mn(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,mn(this,"complete"),mn(this,"abort"),Au(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Au(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dh(this):this.bb())},t.bb=function(){dh(this)};function dh(f){if(f.h&&typeof a<"u"&&(!f.v[1]||hi(f)!=4||f.Z()!=2)){if(f.u&&hi(f)==4)ws(f.Ea,0,f);else if(mn(f,"readystatechange"),hi(f)==4){f.h=!1;try{const ie=f.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var I;if(!(I=w)){var x;if(x=ie===0){var z=String(f.D).match(Tu)[1]||null;!z&&u.self&&u.self.location&&(z=u.self.location.protocol.slice(0,-1)),x=!bu.test(z?z.toLowerCase():"")}I=x}if(I)mn(f,"complete"),mn(f,"success");else{f.m=6;try{var W=2<hi(f)?f.g.statusText:""}catch{W=""}f.l=W+" ["+f.Z()+"]",Cu(f)}}finally{Au(f)}}}}function Au(f,w){if(f.g){Pu(f);const I=f.g,x=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||mn(f,"ready");try{I.onreadystatechange=x}catch{}}}function Pu(f){f.I&&(u.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function hi(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),Es(w)}};function hh(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Qw(f){const w={};f=(f.g&&2<=hi(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<f.length;x++){if(b(f[x]))continue;var I=O(f[x]);const z=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const W=w[z]||[];w[z]=W,W.push(I)}N(w,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Io(f,w,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||w}function vr(f){this.Aa=0,this.i=[],this.j=new Va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Io("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Io("baseRetryDelayMs",5e3,f),this.cb=Io("retryDelaySeedMs",1e4,f),this.Wa=Io("forwardChannelMaxRetries",2,f),this.wa=Io("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new hr(f&&f.concurrentRequestLimit),this.Da=new Kw,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vr.prototype,t.la=8,t.G=1,t.connect=function(f,w,I,x){xn(0),this.W=f,this.H=w||{},I&&x!==void 0&&(this.H.OSID=I,this.H.OAID=x),this.F=this.X,this.I=ph(this,null,this.W),ku(this)};function ks(f){if(og(f),f.G==3){var w=f.U++,I=Yn(f.I);if(nt(I,"SID",f.K),nt(I,"RID",w),nt(I,"TYPE","terminate"),ye(f,I),w=new jn(f,f.j,w),w.L=2,w.v=Ki(Yn(I)),I=!1,u.navigator&&u.navigator.sendBeacon)try{I=u.navigator.sendBeacon(w.v.toString(),"")}catch{}!I&&u.Image&&(new Image().src=w.v,I=!0),I||(w.g=lg(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Ua(w)}Hr(f)}function Ru(f){f.g&&(ae(f),f.g.cancel(),f.g=null)}function og(f){Ru(f),f.u&&(u.clearTimeout(f.u),f.u=null),xu(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function ku(f){if(!tg(f.h)&&!f.s){f.s=!0;var w=f.Ga;rt||he(),se||(rt(),se=!0),ue.add(w,f),f.B=0}}function Yw(f,w){return ci(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ma(_(f.Ga,f,w),fh(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const z=new jn(this,this.j,f);let W=this.o;if(this.S&&(W?(W=C(W),V(W,this.S)):W=this.S),this.m!==null||this.O||(z.H=W,W=null),this.P)e:{for(var w=0,I=0;I<this.i.length;I++){t:{var x=this.i[I];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(w+=x,4096<w){w=I;break e}if(w===4096||I===this.i.length-1){w=I+1;break e}}w=1e3}else w=1e3;w=$a(this,z,w),I=Yn(this.I),nt(I,"RID",f),nt(I,"CVER",22),this.D&&nt(I,"X-HTTP-Session-Id",this.D),ye(this,I),W&&(this.O?w="headers="+encodeURIComponent(String(uh(W)))+"&"+w:this.m&&ch(I,this.m,W)),rh(this.h,z),this.Ua&&nt(I,"TYPE","init"),this.P?(nt(I,"$req",w),nt(I,"SID","null"),z.T=!0,yu(z,I,null)):yu(z,I,w),this.G=2}}else this.G==3&&(f?qa(this,f):this.i.length==0||tg(this.h)||qa(this))};function qa(f,w){var I;w?I=w.l:I=f.U++;const x=Yn(f.I);nt(x,"SID",f.K),nt(x,"RID",I),nt(x,"AID",f.T),ye(f,x),f.m&&f.o&&ch(x,f.m,f.o),I=new jn(f,f.j,I,f.B+1),f.m===null&&(I.H=f.o),w&&(f.i=w.D.concat(f.i)),w=$a(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),rh(f.h,I),yu(I,x,w)}function ye(f,w){f.H&&B(f.H,function(I,x){nt(w,x,I)}),f.l&&Iu({},function(I,x){nt(w,x,I)})}function $a(f,w,I){I=Math.min(f.i.length,I);var x=f.l?_(f.l.Na,f.l,f):null;e:{var z=f.i;let W=-1;for(;;){const ie=["count="+I];W==-1?0<I?(W=z[0].g,ie.push("ofs="+W)):W=0:ie.push("ofs="+W);let Qe=!0;for(let Jt=0;Jt<I;Jt++){let ke=z[Jt].g;const gn=z[Jt].map;if(ke-=W,0>ke)W=Math.max(0,z[Jt].g-100),Qe=!1;else try{_o(gn,ie,"req"+ke+"_")}catch{x&&x(gn)}}if(Qe){x=ie.join("&");break e}}}return f=f.i.splice(0,I),w.D=f,x}function Wa(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;rt||he(),se||(rt(),se=!0),ue.add(w,f),f.v=0}}function Oe(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ma(_(f.Fa,f),fh(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,ag(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ma(_(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xn(10),Ru(this),ag(this))};function ae(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function ag(f){f.g=new jn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=Yn(f.qa);nt(w,"RID","rpc"),nt(w,"SID",f.K),nt(w,"AID",f.T),nt(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&nt(w,"TO",f.ja),nt(w,"TYPE","xmlhttp"),ye(f,w),f.m&&f.o&&ch(w,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=Ki(Yn(w)),I.m=null,I.P=!0,bt(I,f)}t.Za=function(){this.C!=null&&(this.C=null,Ru(this),Oe(this),xn(19))};function xu(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function ht(f,w){var I=null;if(f.g==w){xu(f),ae(f),f.g=null;var x=2}else if(an(f.h,w))I=w.D,fr(f.h,w),x=1;else return;if(f.G!=0){if(w.o)if(x==1){I=w.m?w.m.length:0,w=Date.now()-w.F;var z=f.B;x=mo(),mn(x,new nh(x,I)),ku(f)}else Wa(f);else if(z=w.s,z==3||z==0&&0<w.X||!(x==1&&Yw(f,w)||x==2&&Oe(f)))switch(I&&0<I.length&&(w=f.h,w.i=w.i.concat(I)),z){case 1:Ct(f,5);break;case 4:Ct(f,10);break;case 3:Ct(f,6);break;default:Ct(f,2)}}}function fh(f,w){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*w}function Ct(f,w){if(f.j.info("Error code "+w),w==2){var I=_(f.fb,f),x=f.Xa;const z=!x;x=new Qn(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ba(x,"https"),Ki(x),z?za(x.toString(),I):Hw(x.toString(),I)}else xn(2);f.G=0,f.l&&f.l.sa(w),Hr(f),og(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),xn(2)):(this.j.info("Failed to ping google.com"),xn(1))};function Hr(f){if(f.G=0,f.ka=[],f.l){const w=sh(f.h);(w.length!=0||f.i.length!=0)&&(R(f.ka,w),R(f.ka,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.ra()}}function ph(f,w,I){var x=I instanceof Qn?Yn(I):new Qn(I);if(x.g!="")w&&(x.g=w+"."+x.g),pr(x,x.s);else{var z=u.location;x=z.protocol,w=w?w+"."+z.hostname:z.hostname,z=+z.port;var W=new Qn(null);x&&Ba(W,x),w&&(W.g=w),z&&pr(W,z),I&&(W.l=I),x=W}return I=f.D,w=f.ya,I&&w&&nt(x,I,w),nt(x,"VER",f.la),ye(f,x),x}function lg(f,w,I){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new dt(new di({eb:I})):new dt(f.pa),w.Ha(f.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ug(){}t=ug.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nu(){}Nu.prototype.g=function(f,w){return new Nn(f,w)};function Nn(f,w){Yt.call(this),this.g=new vr(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!b(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!b(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new To(this)}P(Nn,Yt),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){ks(this.g)},Nn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.u&&(I={},I.__data__=po(f),f=I);w.i.push(new vt(w.Ya++,f)),w.G==3&&ku(w)},Nn.prototype.N=function(){this.g.l=null,delete this.j,ks(this.g),delete this.g,Nn.aa.N.call(this)};function cg(f){th.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const I in w){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}P(cg,th);function Du(){Wi.call(this),this.status=1}P(Du,Wi);function To(f){this.g=f}P(To,ug),To.prototype.ua=function(){mn(this.g,"a")},To.prototype.ta=function(f){mn(this.g,new cg(f))},To.prototype.sa=function(f){mn(this.g,new Du)},To.prototype.ra=function(){mn(this.g,"b")},Nu.prototype.createWebChannel=Nu.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,MF=function(){return new Nu},LF=function(){return mo()},OF=cr,B1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fa.NO_ERROR=0,Fa.TIMEOUT=8,Fa.HTTP_ERROR=6,ay=Fa,ih.COMPLETE="complete",DF=ih,eh.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,Bf=eh,NF=di,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,xF=dt}).apply(typeof Dv<"u"?Dv:typeof self<"u"?self:typeof window<"u"?window:{});const B2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new ym("@firebase/firestore");function wc(){return va.logLevel}function tQ(t){va.setLogLevel(t)}function J(t,...e){if(va.logLevel<=xe.DEBUG){const n=e.map(Sb);va.debug(`Firestore (${jd}): ${t}`,...n)}}function Kt(t,...e){if(va.logLevel<=xe.ERROR){const n=e.map(Sb);va.error(`Firestore (${jd}): ${t}`,...n)}}function Fr(t,...e){if(va.logLevel<=xe.WARN){const n=e.map(Sb);va.warn(`Firestore (${jd}): ${t}`,...n)}}function Sb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${jd}) INTERNAL ASSERTION FAILED: `+t;throw Kt(e),new Error(e)}function me(t,e){t||le()}function nQ(t,e){t||le()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends ri{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tn.UNAUTHENTICATED))}shutdown(){}}class rQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sQ{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new An;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new An,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new An)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string"),new VF(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new Tn(e)}}class oQ{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class aQ{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new oQ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new lQ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=cQ(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Te(t,e){return t<e?-1:t>e?1:0}function md(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function UF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Tt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Tt(0,0))}static max(){return new ve(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n,i){n===void 0?n=0:n>e.length&&le(),i===void 0?i=e.length-n:i>e.length-n&&le(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return em.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof em?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends em{construct(e,n,i){return new Fe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Y($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const dQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends em{construct(e,n,i){return new Et(e,n,i)}static isValidIdentifier(e){return dQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new Y($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new Y($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Fe.fromString(e))}static fromName(e){return new re(Fe.fromString(e).popFirst(5))}static empty(){return new re(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function j1(t){return t.fields.find(e=>e.kind===2)}function al(t){return t.fields.filter(e=>e.kind!==2)}d_.UNKNOWN_ID=-1;class ly{constructor(e,n){this.fieldPath=e,this.kind=n}}class tm{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new tm(0,zi.min())}}function BF(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ve.fromTimestamp(i===1e9?new Tt(n+1,0):new Tt(n,i));return new zi(r,re.empty(),e)}function jF(t){return new zi(t.readTime,t.key,-1)}class zi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new zi(ve.min(),re.empty(),-1)}static max(){return new zi(ve.max(),re.empty(),-1)}}function bb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==zF)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,i)=>{n(e)})}static reject(e){return new G((n,i)=>{i(e)})}static waitFor(e){return new G((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},c=>i(c))}),a=!0,o===r&&n()})}static or(e){let n=G.resolve(!1);for(const i of e)n=n.next(r=>r?G.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new G((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let c=0;c<o;c++){const h=c;n(e[h]).next(m=>{a[h]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new G((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new An,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new lp(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=Cb(i.target.error);this.V.reject(new lp(e,r))}}static open(e,n,i,r){try{return new vw(n,e.transaction(r,i))}catch(o){throw new lp(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(J("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new fQ(n)}}class fs{constructor(e,n,i){this.name=e,this.version=n,this.p=i,fs.S(St())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return J("SimpleDb","Removing database:",e),ll(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Op())return!1;if(fs.C())return!0;const e=St(),n=fs.S(e),i=0<n&&n<10,r=qF(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}async M(e){return this.db||(J("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{const a=o.target.result;n(a)},r.onblocked=()=>{i(new lp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const a=o.target.error;a.name==="VersionError"?i(new Y($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new Y($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new lp(e,a))},r.onupgradeneeded=o=>{J("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const a=o.target.result;this.p.O(a,r.transaction,o.oldVersion,this.version).next(()=>{J("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const o=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const u=vw.open(this.db,e,o?"readonly":"readwrite",i),c=r(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),G.reject(h))).toPromise();return c.catch(()=>{}),await u.m,c}catch(u){const c=u,h=c.name!=="FirebaseError"&&a<3;if(J("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class hQ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ll(this.B.delete())}}class lp extends Y{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ka(t){return t.name==="IndexedDbTransactionError"}class fQ{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(J("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(J("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ll(i)}add(e){return J("SimpleDb","ADD",this.store.name,e,e),ll(this.store.add(e))}get(e){return ll(this.store.get(e)).next(n=>(n===void 0&&(n=null),J("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return J("SimpleDb","DELETE",this.store.name,e),ll(this.store.delete(e))}count(){return J("SimpleDb","COUNT",this.store.name),ll(this.store.count())}U(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const o=r.getAll(i.range);return new G((a,u)=>{o.onerror=c=>{u(c.target.error)},o.onsuccess=c=>{a(c.target.result)}})}{const o=this.cursor(i),a=[];return this.W(o,(u,c)=>{a.push(c)}).next(()=>a)}}G(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new G((r,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}j(e,n){J("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.H=!1;const r=this.cursor(i);return this.W(r,(o,a,u)=>u.delete())}J(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.W(r,n)}Y(e){const n=this.cursor({});return new G((i,r)=>{n.onerror=o=>{const a=Cb(o.target.error);r(a)},n.onsuccess=o=>{const a=o.target.result;a?e(a.primaryKey,a.value).next(u=>{u?a.continue():i()}):i()}})}W(e,n){const i=[];return new G((r,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void r();const c=new hQ(u),h=n(u.primaryKey,u.value,c);if(h instanceof G){const m=h.catch(g=>(c.done(),G.reject(g)));i.push(m)}c.isDone?r():c.K===null?u.continue():u.continue(c.K)}}).next(()=>G.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ll(t){return new G((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=Cb(i.target.error);n(r)}})}let j2=!1;function Cb(t){const e=fs.S(St());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return j2||(j2=!0,setTimeout(()=>{throw i},0)),i}}return t}class pQ{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){J("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{J("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ka(n)?J("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Ra(n)}await this.X(6e4)})}}class mQ{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const i=new Set;let r=n,o=!0;return G.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return J("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,r).next(u=>{r-=u,i.add(a)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{const a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(r,o)).next(u=>(J("IndexBackfiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u))).next(()=>a.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{const a=jF(o);bb(a,i)>0&&(i=a)}),new zi(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_i.oe=-1;function Dm(t){return t==null}function nm(t){return t===0&&1/t==-1/0}function $F(t){return typeof t=="number"&&Number.isInteger(t)&&!nm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=z2(e)),e=gQ(t.get(n),e);return z2(e)}function gQ(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function z2(t){return t+""}function us(t){const e=t.length;if(me(e>=2),e===2)return me(t.charAt(0)===""&&t.charAt(1)===""),Fe.emptyPath();const n=e-2,i=[];let r="";for(let o=0;o<e;){const a=t.indexOf("",o);switch((a<0||a>n)&&le(),t.charAt(a+1)){case"":const u=t.substring(o,a);let c;r.length===0?c=u:(r+=u,c=r,r=""),i.push(c);break;case"":r+=t.substring(o,a),r+="\0";break;case"":r+=t.substring(o,a+1);break;default:le()}o=a+2}return new Fe(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e){return[t,si(e)]}function WF(t,e,n){return[t,si(e),n]}const vQ={},yQ=["prefixPath","collectionGroup","readTime","documentId"],_Q=["prefixPath","collectionGroup","documentId"],wQ=["collectionGroup","readTime","prefixPath","documentId"],EQ=["canonicalId","targetId"],IQ=["targetId","path"],TQ=["path","targetId"],SQ=["collectionId","parent"],bQ=["indexId","uid"],CQ=["uid","sequenceNumber"],AQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PQ=["indexId","uid","orderedDocumentKey"],RQ=["userId","collectionPath","documentId"],kQ=["userId","collectionPath","largestBatchId"],xQ=["userId","collectionGroup","largestBatchId"],HF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NQ=[...HF,"documentOverlays"],KF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QF=KF,YF=[...QF,"indexConfiguration","indexState","indexEntries"],DQ=YF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1 extends GF{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Pn(t,e){const n=oe(t);return fs.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function iu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ov(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ov(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ov(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ov(this.root,e,this.comparator,!0)}}class Ov{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Mn.RED,this.left=r??Mn.EMPTY,this.right=o??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Mn(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Mn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $2(this.data.getIterator())}getIteratorFrom(e){return new $2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class $2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gc(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new wi([])}unionWith(e){let n=new it(Et.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return md(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OQ(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new XF("Invalid base64 string: "+o):o}}(e);return new pn(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const LQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(t){if(me(!!t),typeof t=="string"){let e=0;const n=LQ.exec(t);if(me(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ya(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ab(t){const e=t.mapValue.fields.__previous_value__;return yw(e)?Ab(e):e}function im(t){const e=io(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{constructor(e,n,i,r,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class _a{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cy={nullValue:"NULL_VALUE"};function jl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yw(t)?4:ZF(t)?9007199254740991:10:le()}function vs(t,e){if(t===e)return!0;const n=jl(t);if(n!==jl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return im(t).isEqual(im(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=io(r.timestampValue),u=io(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ya(r.bytesValue).isEqual(ya(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Vt(r.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(r.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vt(r.integerValue)===Vt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=Vt(r.doubleValue),u=Vt(o.doubleValue);return a===u?nm(a)===nm(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return md(t.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(q2(a)!==q2(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!vs(a[c],u[c])))return!1;return!0}(t,e);default:return le()}}function rm(t,e){return(t.values||[]).find(n=>vs(n,e))!==void 0}function wa(t,e){if(t===e)return 0;const n=jl(t),i=jl(e);if(n!==i)return Te(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=Vt(o.integerValue||o.doubleValue),c=Vt(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return W2(t.timestampValue,e.timestampValue);case 4:return W2(im(t),im(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(o,a){const u=ya(o),c=ya(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),c=a.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=Te(u[h],c[h]);if(m!==0)return m}return Te(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Te(Vt(o.latitude),Vt(a.latitude));return u!==0?u:Te(Vt(o.longitude),Vt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,a){const u=o.values||[],c=a.values||[];for(let h=0;h<u.length&&h<c.length;++h){const m=wa(u[h],c[h]);if(m)return m}return Te(u.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,a){if(o===Qo.mapValue&&a===Qo.mapValue)return 0;if(o===Qo.mapValue)return 1;if(a===Qo.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),h=a.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const _=Te(c[g],m[g]);if(_!==0)return _;const T=wa(u[c[g]],h[m[g]]);if(T!==0)return T}return Te(c.length,m.length)}(t.mapValue,e.mapValue);default:throw le()}}function W2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=io(t),i=io(e),r=Te(n.seconds,i.seconds);return r!==0?r:Te(n.nanos,i.nanos)}function gd(t){return G1(t)}function G1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=io(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ya(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=G1(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${G1(n.fields[a])}`;return r+"}"}(t.mapValue):le()}function zl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function q1(t){return!!t&&"integerValue"in t}function sm(t){return!!t&&"arrayValue"in t}function H2(t){return!!t&&"nullValue"in t}function K2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dy(t){return!!t&&"mapValue"in t}function up(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return iu(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=up(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=up(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function VQ(t){return"nullValue"in t?cy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zl(_a.empty(),re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:le()}function FQ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zl(_a.empty(),re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Qo:le()}function Q2(t,e){const n=wa(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Y2(t,e){const n=wa(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!dy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=up(n)}setAll(e){let n=Et.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=up(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());dy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];dy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){iu(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Vn(up(this.value))}}function e4(t){const e=[];return iu(t.fields,(n,i)=>{const r=new Et([n]);if(dy(i)){const o=e4(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new mt(e,0,ve.min(),ve.min(),ve.min(),Vn.empty(),0)}static newFoundDocument(e,n,i,r){return new mt(e,1,n,ve.min(),i,r,0)}static newNoDocument(e,n){return new mt(e,2,n,ve.min(),ve.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ve.min(),ve.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.position=e,this.inclusive=n}}function J2(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=re.comparator(re.fromName(a.referenceValue),n.key):i=wa(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function X2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n="asc"){this.field=e,this.dir=n}}function UQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{}class Ue extends t4{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new BQ(e,n,i):n==="array-contains"?new GQ(e,i):n==="in"?new a4(e,i):n==="not-in"?new qQ(e,i):n==="array-contains-any"?new $Q(e,i):new Ue(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new jQ(e,i):new zQ(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wa(n,this.value)):n!==null&&jl(this.value)===jl(n)&&this.matchesComparison(wa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends t4{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new et(e,n)}matches(e){return vd(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vd(t){return t.op==="and"}function $1(t){return t.op==="or"}function Pb(t){return n4(t)&&vd(t)}function n4(t){for(const e of t.filters)if(e instanceof et)return!1;return!0}function W1(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+gd(t.value);if(Pb(t))return t.filters.map(e=>W1(e)).join(",");{const e=t.filters.map(n=>W1(n)).join(",");return`${t.op}(${e})`}}function i4(t,e){return t instanceof Ue?function(i,r){return r instanceof Ue&&i.op===r.op&&i.field.isEqual(r.field)&&vs(i.value,r.value)}(t,e):t instanceof et?function(i,r){return r instanceof et&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&i4(a,r.filters[u]),!0):!1}(t,e):void le()}function r4(t,e){const n=t.filters.concat(e);return et.create(n,t.op)}function s4(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${gd(n.value)}`}(t):t instanceof et?function(n){return n.op.toString()+" {"+n.getFilters().map(s4).join(" ,")+"}"}(t):"Filter"}class BQ extends Ue{constructor(e,n,i){super(e,n,i),this.key=re.fromName(i.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class jQ extends Ue{constructor(e,n){super(e,"in",n),this.keys=o4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zQ extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=o4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function o4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>re.fromName(i.referenceValue))}class GQ extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sm(n)&&rm(n.arrayValue,this.value)}}class a4 extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rm(this.value.arrayValue,n)}}class qQ extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(rm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rm(this.value.arrayValue,n)}}class $Q extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>rm(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function H1(t,e=null,n=[],i=[],r=null,o=null,a=null){return new WQ(t,e,n,i,r,o,a)}function Gl(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>W1(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Dm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>gd(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>gd(i)).join(",")),e.ue=n}return e.ue}function Om(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UQ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!i4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!X2(t.startAt,e.startAt)&&X2(t.endAt,e.endAt)}function h_(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function f_(t,e){return t.filters.filter(n=>n instanceof Ue&&n.field.isEqual(e))}function Z2(t,e,n){let i=cy,r=!0;for(const o of f_(t,e)){let a=cy,u=!0;switch(o.op){case"<":case"<=":a=VQ(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,u=!1;break;case"!=":case"not-in":a=cy}Q2({value:i,inclusive:r},{value:a,inclusive:u})<0&&(i=a,r=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const a=n.position[o];Q2({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function eN(t,e,n){let i=Qo,r=!0;for(const o of f_(t,e)){let a=Qo,u=!0;switch(o.op){case">=":case">":a=FQ(o.value),u=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,u=!1;break;case"!=":case"not-in":a=Qo}Y2({value:i,inclusive:r},{value:a,inclusive:u})>0&&(i=a,r=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const a=n.position[o];Y2({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function l4(t,e,n,i,r,o,a,u){return new co(t,e,n,i,r,o,a,u)}function zd(t){return new co(t)}function tN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Rb(t){return t.collectionGroup!==null}function Xc(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new it(Et.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new om(o,i))}),n.has(Et.keyField().canonicalString())||e.ce.push(new om(Et.keyField(),i))}return e.ce}function oi(t){const e=oe(t);return e.le||(e.le=HQ(e,Xc(t))),e.le}function HQ(t,e){if(t.limitType==="F")return H1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new om(r.field,o)});const n=t.endAt?new Ea(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ea(t.startAt.position,t.startAt.inclusive):null;return H1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function K1(t,e){const n=t.filters.concat([e]);return new co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function p_(t,e,n){return new co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lm(t,e){return Om(oi(t),oi(e))&&t.limitType===e.limitType}function u4(t){return`${Gl(oi(t))}|lt:${t.limitType}`}function Ec(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>s4(r)).join(", ")}]`),Dm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>gd(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>gd(r)).join(",")),`Target(${i})`}(oi(t))}; limitType=${t.limitType})`}function Mm(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):re.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Xc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const h=J2(a,u,c);return a.inclusive?h<=0:h<0}(i.startAt,Xc(i),r)||i.endAt&&!function(a,u,c){const h=J2(a,u,c);return a.inclusive?h>=0:h>0}(i.endAt,Xc(i),r))}(t,e)}function c4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function d4(t){return(e,n)=>{let i=!1;for(const r of Xc(t)){const o=KQ(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function KQ(t,e,n){const i=t.field.isKeyField()?re.comparator(e.key,n.key):function(o,a,u){const c=a.data.field(o),h=u.data.field(o);return c!==null&&h!==null?wa(c,h):le()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){iu(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return JF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=new ut(re.comparator);function Ei(){return QQ}const h4=new ut(re.comparator);function jf(...t){let e=h4;for(const n of t)e=e.insert(n.key,n);return e}function f4(t){let e=h4;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function cs(){return cp()}function p4(){return cp()}function cp(){return new xa(t=>t.toString(),(t,e)=>t.isEqual(e))}const YQ=new ut(re.comparator),JQ=new it(re.comparator);function Ce(...t){let e=JQ;for(const n of t)e=e.add(n);return e}const XQ=new it(Te);function kb(){return XQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nm(e)?"-0":e}}function g4(t){return{integerValue:""+t}}function v4(t,e){return $F(e)?g4(e):m4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this._=void 0}}function ZQ(t,e,n){return t instanceof yd?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&yw(o)&&(o=Ab(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof ql?_4(t,e):t instanceof $l?w4(t,e):function(r,o){const a=y4(r,o),u=nN(a)+nN(r.Pe);return q1(a)&&q1(r.Pe)?g4(u):m4(r.serializer,u)}(t,e)}function eY(t,e,n){return t instanceof ql?_4(t,e):t instanceof $l?w4(t,e):n}function y4(t,e){return t instanceof _d?function(i){return q1(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class yd extends _w{}class ql extends _w{constructor(e){super(),this.elements=e}}function _4(t,e){const n=E4(e);for(const i of t.elements)n.some(r=>vs(r,i))||n.push(i);return{arrayValue:{values:n}}}class $l extends _w{constructor(e){super(),this.elements=e}}function w4(t,e){let n=E4(e);for(const i of t.elements)n=n.filter(r=>!vs(r,i));return{arrayValue:{values:n}}}class _d extends _w{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function nN(t){return Vt(t.integerValue||t.doubleValue)}function E4(t){return sm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.field=e,this.transform=n}}function tY(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ql&&r instanceof ql||i instanceof $l&&r instanceof $l?md(i.elements,r.elements,vs):i instanceof _d&&r instanceof _d?vs(i.Pe,r.Pe):i instanceof yd&&r instanceof yd}(t.transform,e.transform)}class nY{constructor(e,n){this.version=e,this.transformResults=n}}class It{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new It}static exists(e){return new It(void 0,e)}static updateTime(e){return new It(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ww{}function I4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qd(t.key,It.none()):new Gd(t.key,t.data,It.none());{const n=t.data,i=Vn.empty();let r=new it(Et.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new ho(t.key,i,new wi(r.toArray()),It.none())}}function iY(t,e,n){t instanceof Gd?function(r,o,a){const u=r.value.clone(),c=rN(r.fieldTransforms,o,a.transformResults);u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ho?function(r,o,a){if(!hy(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=rN(r.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(T4(r)),c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function dp(t,e,n,i){return t instanceof Gd?function(o,a,u,c){if(!hy(o.precondition,a))return u;const h=o.value.clone(),m=sN(o.fieldTransforms,c,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof ho?function(o,a,u,c){if(!hy(o.precondition,a))return u;const h=sN(o.fieldTransforms,c,a),m=a.data;return m.setAll(T4(o)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return hy(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function rY(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=y4(i.transform,r||null);o!=null&&(n===null&&(n=Vn.empty()),n.set(i.field,o))}return n||null}function iN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&md(i,r,(o,a)=>tY(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gd extends ww{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ho extends ww{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function T4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function rN(t,e,n){const i=new Map;me(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,eY(a,u,n[r]))}return i}function sN(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,ZQ(o,a,e))}return i}class qd extends ww{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xb extends ww{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&iY(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=dp(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=dp(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=p4();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const c=I4(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&md(this.mutations,e.mutations,(n,i)=>iN(n,i))&&md(this.baseMutations,e.baseMutations,(n,i)=>iN(n,i))}}class Db{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){me(e.mutations.length===i.length);let r=function(){return YQ}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new Db(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,qe;function S4(t){switch(t){default:return le();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function b4(t){if(t===void 0)return Kt("GRPC error has no .code"),$.UNKNOWN;switch(t){case tn.OK:return $.OK;case tn.CANCELLED:return $.CANCELLED;case tn.UNKNOWN:return $.UNKNOWN;case tn.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case tn.INTERNAL:return $.INTERNAL;case tn.UNAVAILABLE:return $.UNAVAILABLE;case tn.UNAUTHENTICATED:return $.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case tn.NOT_FOUND:return $.NOT_FOUND;case tn.ALREADY_EXISTS:return $.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return $.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case tn.ABORTED:return $.ABORTED;case tn.OUT_OF_RANGE:return $.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return $.UNIMPLEMENTED;case tn.DATA_LOSS:return $.DATA_LOSS;default:return le()}}(qe=tn||(tn={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oY=new Cl([4294967295,4294967295],0);function oN(t){const e=C4().encode(t),n=new kF;return n.update(e),new Uint8Array(n.digest())}function aN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Cl([n,i],0),new Cl([r,o],0)]}class Lb{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new zf(`Invalid padding: ${n}`);if(i<0)throw new zf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new zf(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new zf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Cl.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Cl.fromNumber(i)));return r.compare(oY)===1&&(r=new Cl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=oN(e),[i,r]=aN(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Lb(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=oN(e),[i,r]=aN(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class zf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Um.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Fm(ve.min(),r,new ut(Te),Ei(),Ce())}}class Um{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Um(i,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class A4{constructor(e,n){this.targetId=e,this.me=n}}class P4{constructor(e,n,i=pn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class lN{constructor(){this.fe=0,this.ge=cN(),this.pe=pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ce(),n=Ce(),i=Ce();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:le()}}),new Um(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=cN()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aY{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ei(),this.qe=uN(),this.Qe=new ut(Te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(h_(o))if(i===0){const a=new re(o.path);this.Ue(n,a,mt.newNoDocument(a,ve.min()))}else me(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),c=u?this.Xe(u,e,a):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=ya(i).toUint8Array()}catch(c){if(c instanceof XF)return Fr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Lb(a,r,o)}catch(c){return Fr(c instanceof zf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&h_(u.target)){const c=new re(u.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,mt.newNoDocument(c,e))}o.be&&(n.set(a,o.Ce()),o.ve())}});let i=Ce();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new Fm(e,n,this.Qe,this.ke,i);return this.ke=Ei(),this.qe=uN(),this.Qe=new ut(Te),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new lN,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(Te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lN),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uN(){return new ut(re.comparator)}function cN(){return new ut(re.comparator)}const lY={asc:"ASCENDING",desc:"DESCENDING"},uY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cY={and:"AND",or:"OR"};class dY{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Q1(t,e){return t.useProto3Json||Dm(e)?e:{value:e}}function wd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hY(t,e){return wd(t,e.toTimestamp())}function Qt(t){return me(!!t),ve.fromTimestamp(function(n){const i=io(n);return new Tt(i.seconds,i.nanos)}(t))}function Mb(t,e){return Y1(t,e).canonicalString()}function Y1(t,e){const n=function(r){return new Fe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function k4(t){const e=Fe.fromString(t);return me(B4(e)),e}function am(t,e){return Mb(t.databaseId,e.path)}function ps(t,e){const n=k4(e);if(n.get(1)!==t.databaseId.projectId)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(D4(n))}function x4(t,e){return Mb(t.databaseId,e)}function N4(t){const e=k4(t);return e.length===4?Fe.emptyPath():D4(e)}function J1(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function D4(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dN(t,e,n){return{name:am(t,e),fields:n.value.mapValue.fields}}function O4(t,e,n){const i=ps(t,e.name),r=Qt(e.updateTime),o=e.createTime?Qt(e.createTime):ve.min(),a=new Vn({mapValue:{fields:e.fields}}),u=mt.newFoundDocument(i,r,o,a);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function fY(t,e){return"found"in e?function(i,r){me(!!r.found),r.found.name,r.found.updateTime;const o=ps(i,r.found.name),a=Qt(r.found.updateTime),u=r.found.createTime?Qt(r.found.createTime):ve.min(),c=new Vn({mapValue:{fields:r.found.fields}});return mt.newFoundDocument(o,a,u,c)}(t,e):"missing"in e?function(i,r){me(!!r.missing),me(!!r.readTime);const o=ps(i,r.missing),a=Qt(r.readTime);return mt.newNoDocument(o,a)}(t,e):le()}function pY(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(h,m){return h.useProto3Json?(me(m===void 0||typeof m=="string"),pn.fromBase64String(m||"")):(me(m===void 0||m instanceof Buffer||m instanceof Uint8Array),pn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(h){const m=h.code===void 0?$.UNKNOWN:b4(h.code);return new Y(m,h.message||"")}(a);n=new P4(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ps(t,i.document.name),o=Qt(i.document.updateTime),a=i.document.createTime?Qt(i.document.createTime):ve.min(),u=new Vn({mapValue:{fields:i.document.fields}}),c=mt.newFoundDocument(r,o,a,u),h=i.targetIds||[],m=i.removedTargetIds||[];n=new fy(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ps(t,i.document),o=i.readTime?Qt(i.readTime):ve.min(),a=mt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new fy([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ps(t,i.document),o=i.removedTargetIds||[];n=new fy([],o,r,null)}else{if(!("filter"in e))return le();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new sY(r,o),u=i.targetId;n=new A4(u,a)}}return n}function lm(t,e){let n;if(e instanceof Gd)n={update:dN(t,e.key,e.value)};else if(e instanceof qd)n={delete:am(t,e.key)};else if(e instanceof ho)n={update:dN(t,e.key,e.data),updateMask:wY(e.fieldMask)};else{if(!(e instanceof xb))return le();n={verify:am(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof yd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ql)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof $l)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof _d)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw le()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:hY(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:le()}(t,e.precondition)),n}function X1(t,e){const n=e.currentDocument?function(o){return o.updateTime!==void 0?It.updateTime(Qt(o.updateTime)):o.exists!==void 0?It.exists(o.exists):It.none()}(e.currentDocument):It.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,u){let c=null;if("setToServerValue"in u)me(u.setToServerValue==="REQUEST_TIME"),c=new yd;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];c=new ql(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];c=new $l(m)}else"increment"in u?c=new _d(a,u.increment):le();const h=Et.fromServerFormat(u.fieldPath);return new Vm(h,c)}(t,r)):[];if(e.update){e.update.name;const r=ps(t,e.update.name),o=new Vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const h=c.fieldPaths||[];return new wi(h.map(m=>Et.fromServerFormat(m)))}(e.updateMask);return new ho(r,o,a,n,i)}return new Gd(r,o,n,i)}if(e.delete){const r=ps(t,e.delete);return new qd(r,n)}if(e.verify){const r=ps(t,e.verify);return new xb(r,n)}return le()}function mY(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?Qt(r.updateTime):Qt(o);return a.isEqual(ve.min())&&(a=Qt(o)),new nY(a,r.transformResults||[])}(n,e))):[]}function L4(t,e){return{documents:[x4(t,e.path)]}}function M4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=x4(t,r);const o=function(h){if(h.length!==0)return U4(et.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(h){if(h.length!==0)return h.map(m=>function(_){return{field:Ic(_.field),direction:vY(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Q1(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:r}}function V4(t){let e=N4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){me(i===1);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=F4(g);return _ instanceof et&&Pb(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(P){return new om(Tc(P.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Dm(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,T=g.values||[];return new Ea(T,_)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const _=!g.before,T=g.values||[];return new Ea(T,_)}(n.endAt)),l4(e,r,a,o,u,"F",c,h)}function gY(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function F4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Tc(n.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Tc(n.unaryFilter.field);return Ue.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Tc(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Tc(n.unaryFilter.field);return Ue.create(a,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(Tc(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return et.create(n.compositeFilter.filters.map(i=>F4(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function vY(t){return lY[t]}function yY(t){return uY[t]}function _Y(t){return cY[t]}function Ic(t){return{fieldPath:t.canonicalString()}}function Tc(t){return Et.fromServerFormat(t.fieldPath)}function U4(t){return t instanceof Ue?function(n){if(n.op==="=="){if(K2(n.value))return{unaryFilter:{field:Ic(n.field),op:"IS_NAN"}};if(H2(n.value))return{unaryFilter:{field:Ic(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K2(n.value))return{unaryFilter:{field:Ic(n.field),op:"IS_NOT_NAN"}};if(H2(n.value))return{unaryFilter:{field:Ic(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ic(n.field),op:yY(n.op),value:n.value}}}(t):t instanceof et?function(n){const i=n.getFilters().map(r=>U4(r));return i.length===1?i[0]:{compositeFilter:{op:_Y(n.op),filters:i}}}(t):le()}function wY(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function B4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,i,r,o=ve.min(),a=ve.min(),u=pn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.ct=e}}function EY(t,e){let n;if(e.document)n=O4(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=re.fromSegments(e.noDocument.path),r=Hl(e.noDocument.readTime);n=mt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return le();{const i=re.fromSegments(e.unknownDocument.path),r=Hl(e.unknownDocument.version);n=mt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const o=new Tt(r[0],r[1]);return ve.fromTimestamp(o)}(e.readTime)),n}function hN(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:m_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,a){return{name:am(o,a.key),fields:a.data.value.mapValue.fields,updateTime:wd(o,a.version.toTimestamp()),createTime:wd(o,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Wl(e.version)};else{if(!e.isUnknownDocument())return le();i.unknownDocument={path:n.path.toArray(),version:Wl(e.version)}}return i}function m_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hl(t){const e=new Tt(t.seconds,t.nanoseconds);return ve.fromTimestamp(e)}function ul(t,e){const n=(e.baseMutations||[]).map(o=>X1(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){const a=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map(o=>X1(t.ct,o)),r=Tt.fromMillis(e.localWriteTimeMs);return new Nb(e.batchId,r,n,i)}function Gf(t){const e=Hl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Hl(t.lastLimboFreeSnapshotVersion):ve.min();let i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return me(o.documents.length===1),oi(zd(N4(o.documents[0])))}(t.query):function(o){return oi(V4(o))}(t.query),new $s(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,pn.fromBase64String(t.resumeToken))}function z4(t,e){const n=Wl(e.snapshotVersion),i=Wl(e.lastLimboFreeSnapshotVersion);let r;r=h_(e.target)?L4(t.ct,e.target):M4(t.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gl(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Vb(t){const e=V4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?p_(e,e.limit,"L"):e}function sI(t,e){return new Ob(e.largestBatchId,X1(t.ct,e.overlayMutation))}function fN(t,e){const n=e.path.lastSegment();return[t,si(e.path.popLast()),n]}function pN(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Wl(i.readTime),documentKey:si(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{getBundleMetadata(e,n){return mN(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Hl(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return mN(e).put(function(r){return{bundleId:r.id,createTime:Wl(Qt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return gN(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:Vb(o.bundledQuery),readTime:Hl(o.readTime)}}(i)})}saveNamedQuery(e,n){return gN(e).put(function(r){return{name:r.name,readTime:Wl(Qt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function mN(t){return Pn(t,"bundles")}function gN(t){return Pn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const i=n.uid||"";return new Ew(e,i)}getOverlay(e,n){return Af(e).get(fN(this.userId,n)).next(i=>i?sI(this.serializer,i):null)}getOverlays(e,n){const i=cs();return G.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((o,a)=>{const u=new Ob(n,a);r.push(this.ht(e,u))}),G.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(si(a.getCollectionPath())));const o=[];return r.forEach(a=>{const u=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);o.push(Af(e).j("collectionPathOverlayIndex",u))}),G.waitFor(o)}getOverlaysForCollection(e,n,i){const r=cs(),o=si(n),a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Af(e).U("collectionPathOverlayIndex",a).next(u=>{for(const c of u){const h=sI(this.serializer,c);r.set(h.getKey(),h)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const o=cs();let a;const u=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Af(e).J({index:"collectionGroupOverlayIndex",range:u},(c,h,m)=>{const g=sI(this.serializer,h);o.size()<r||g.largestBatchId===a?(o.set(g.getKey(),g),a=g.largestBatchId):m.done()}).next(()=>o)}ht(e,n){return Af(e).put(function(r,o,a){const[u,c,h]=fN(o,a.mutation.key);return{userId:o,collectionPath:c,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:lm(r.ct,a.mutation)}}(this.serializer,this.userId,n))}}function Af(t){return Pn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Vt(e.integerValue));else if("doubleValue"in e){const i=Vt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),nm(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=io(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(ya(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?ZF(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):le()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const i=e.fields||{};this.Et(n,55);for(const r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){const i=e.values||[];this.Et(n,50);for(const r of i)this.It(r,n)}gt(e,n){this.Et(n,37),re.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}cl.bt=new cl;function TY(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function vN(t){const e=64-function(i){let r=0;for(let o=0;o<8;++o){const a=TY(255&i[o]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class SY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{const r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{const r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){const n=this.Bt(e),i=vN(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){const n=this.Bt(e),i=vN(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,o,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class bY{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class CY{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Pf{constructor(){this.Gt=new SY,this.zt=new bY(this.Gt),this.jt=new CY(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new dl(this.indexId,this.documentKey,this.arrayValue,i)}}function Vo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=yN(t.arrayValue,e.arrayValue),n!==0?n:(n=yN(t.directionalValue,e.directionalValue),n!==0?n:re.comparator(t.documentKey,e.documentKey)))}function yN(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.Yt=new it((n,i)=>Et.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(me(e.collectionGroup===this.collectionId),this.en)return!1;const n=j1(e);if(n!==void 0&&!this.nn(n))return!1;const i=al(e);let r=new Set,o=0,a=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){const u=this.Yt.getIterator().getNext();if(!r.has(u.field.canonicalString())){const c=i[o];if(!this.rn(u,c)||!this.sn(this.Zt[a++],c))return!1}++o}for(;o<i.length;++o){const u=i[o];if(a>=this.Zt.length||!this.sn(this.Zt[a++],u))return!1}return!0}on(){if(this.en)return null;let e=new it(Et.comparator);const n=[];for(const i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new ly(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new ly(i.field,0))}for(const i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new ly(i.field,i.dir==="asc"?0:1)));return new d_(d_.UNKNOWN_ID,this.collectionId,n,tm.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){var e,n;if(me(t instanceof Ue||t instanceof et),t instanceof Ue){if(t instanceof a4){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Ue.create(t.field,"==",o)))||[];return et.create(r,"or")}return t}const i=t.filters.map(r=>G4(r));return et.create(i,t.op)}function AY(t){if(t.getFilters().length===0)return[];const e=tT(G4(t));return me(q4(e)),Z1(e)||eT(e)?[e]:e.getFilters()}function Z1(t){return t instanceof Ue}function eT(t){return t instanceof et&&Pb(t)}function q4(t){return Z1(t)||eT(t)||function(n){if(n instanceof et&&$1(n)){for(const i of n.getFilters())if(!Z1(i)&&!eT(i))return!1;return!0}return!1}(t)}function tT(t){if(me(t instanceof Ue||t instanceof et),t instanceof Ue)return t;if(t.filters.length===1)return tT(t.filters[0]);const e=t.filters.map(i=>tT(i));let n=et.create(e,t.op);return n=g_(n),q4(n)?n:(me(n instanceof et),me(vd(n)),me(n.filters.length>1),n.filters.reduce((i,r)=>Fb(i,r)))}function Fb(t,e){let n;return me(t instanceof Ue||t instanceof et),me(e instanceof Ue||e instanceof et),n=t instanceof Ue?e instanceof Ue?function(r,o){return et.create([r,o],"and")}(t,e):wN(t,e):e instanceof Ue?wN(e,t):function(r,o){if(me(r.filters.length>0&&o.filters.length>0),vd(r)&&vd(o))return r4(r,o.getFilters());const a=$1(r)?r:o,u=$1(r)?o:r,c=a.filters.map(h=>Fb(h,u));return et.create(c,"or")}(t,e),g_(n)}function wN(t,e){if(vd(e))return r4(e,t.getFilters());{const n=e.filters.map(i=>Fb(t,i));return et.create(n,"or")}}function g_(t){if(me(t instanceof Ue||t instanceof et),t instanceof Ue)return t;const e=t.getFilters();if(e.length===1)return g_(e[0]);if(n4(t))return t;const n=e.map(r=>g_(r)),i=[];return n.forEach(r=>{r instanceof Ue?i.push(r):r instanceof et&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:et.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{constructor(){this._n=new Ub}addToCollectionParentIndex(e,n){return this._n.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(zi.min())}updateCollectionGroup(e,n,i){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class Ub{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new it(Fe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new it(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=new Uint8Array(0);class RY{constructor(e,n){this.databaseId=n,this.an=new Ub,this.un=new xa(i=>Gl(i),(i,r)=>Om(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const o={collectionId:i,parent:si(r)};return EN(e).put(o)}return G.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[UF(n),""],!1,!0);return EN(e).U(r).next(o=>{for(const a of o){if(a.collectionId!==n)break;i.push(us(a.parent))}return i})}addFieldIndex(e,n){const i=Rf(e),r=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const o=i.add(r);if(n.indexState){const a=yc(e);return o.next(u=>{a.put(pN(u,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const i=Rf(e),r=yc(e),o=vc(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Rf(e),i=vc(e),r=yc(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return G.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const o=new _N(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const i=vc(e);let r=!0;const o=new Map;return G.forEach(this.cn(n),a=>this.ln(e,a).next(u=>{r&&(r=!!u),o.set(a,u)})).next(()=>{if(r){let a=Ce();const u=[];return G.forEach(o,(c,h)=>{J("IndexedDbIndexManager",`Using index ${function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(c)} to execute ${Gl(n)}`);const m=function(k,F){const j=j1(F);if(j===void 0)return null;for(const B of f_(k,j.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(h,c),g=function(k,F){const j=new Map;for(const B of al(F))for(const N of f_(k,B.fieldPath))switch(N.op){case"==":case"in":j.set(B.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return j.set(B.fieldPath.canonicalString(),N.value),Array.from(j.values())}return null}(h,c),_=function(k,F){const j=[];let B=!0;for(const N of al(F)){const C=N.kind===0?Z2(k,N.fieldPath,k.startAt):eN(k,N.fieldPath,k.startAt);j.push(C.value),B&&(B=C.inclusive)}return new Ea(j,B)}(h,c),T=function(k,F){const j=[];let B=!0;for(const N of al(F)){const C=N.kind===0?eN(k,N.fieldPath,k.endAt):Z2(k,N.fieldPath,k.endAt);j.push(C.value),B&&(B=C.inclusive)}return new Ea(j,B)}(h,c),P=this.hn(c,h,_),E=this.hn(c,h,T),R=this.Pn(c,h,g),S=this.In(c.indexId,m,P,_.inclusive,E,T.inclusive,R);return G.forEach(S,b=>i.G(b,n.limit).next(k=>{k.forEach(F=>{const j=re.fromSegments(F.documentKey);a.has(j)||(a=a.add(j),u.push(j))})}))}).next(()=>u)}return G.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=AY(et.create(e.filters,"and")).map(i=>H1(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,a,u){const c=(n!=null?n.length:1)*Math.max(i.length,o.length),h=c/(n!=null?n.length:1),m=[];for(let g=0;g<c;++g){const _=n?this.Tn(n[g/h]):Lv,T=this.En(e,_,i[g%h],r),P=this.dn(e,_,o[g%h],a),E=u.map(R=>this.En(e,_,R,!0));m.push(...this.createRange(T,P,E))}return m}En(e,n,i,r){const o=new dl(e,re.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){const o=new dl(e,re.empty(),n,i);return r?o.Jt():o}ln(e,n){const i=new _N(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let a=null;for(const u of o)i.tn(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a})}getIndexType(e,n){let i=2;const r=this.cn(n);return G.forEach(r,o=>this.ln(e,o).next(a=>{a?i!==0&&a.fields.length<function(c){let h=new it(Et.comparator),m=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?m=!0:h=h.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)}(o)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){const i=new Pf;for(const r of al(e)){const o=n.data.field(r.fieldPath);if(o==null)return null;const a=i.Ht(r.kind);cl.bt.Pt(o,a)}return i.Wt()}Tn(e){const n=new Pf;return cl.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const i=new Pf;return cl.bt.Pt(zl(this.databaseId,n),i.Ht(function(o){const a=al(o);return a.length===0?0:a[a.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new Pf);let o=0;for(const a of al(e)){const u=i[o++];for(const c of r)if(this.Vn(n,a.fieldPath)&&sm(u))r=this.mn(r,a,u);else{const h=c.Ht(a.kind);cl.bt.Pt(u,h)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){const r=[...e],o=[];for(const a of i.arrayValue.values||[])for(const u of r){const c=new Pf;c.seed(u.Wt()),cl.bt.Pt(a,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof Ue&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=Rf(e),r=yc(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{const a=[];return G.forEach(o,u=>r.get([u.indexId,this.uid]).next(c=>{a.push(function(m,g){const _=g?new tm(g.sequenceNumber,new zi(Hl(g.readTime),new re(us(g.documentKey)),g.largestBatchId)):tm.empty(),T=m.fields.map(([P,E])=>new ly(Et.fromServerFormat(P),E));return new d_(m.indexId,m.collectionGroup,T,_)}(u,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Te(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=Rf(e),o=yc(e);return this.gn(e).next(a=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(u=>G.forEach(u,c=>o.put(pN(c.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return G.forEach(n,(r,o)=>{const a=i.get(r.collectionGroup);return(a?G.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(u=>(i.set(r.collectionGroup,u),G.forEach(u,c=>this.pn(e,r,c).next(h=>{const m=this.yn(o,c);return h.isEqual(m)?G.resolve():this.wn(e,o,c,h,m)}))))})}Sn(e,n,i,r){return vc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return vc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){const r=vc(e);let o=new it(Vo);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(a,u)=>{o=o.add(new dl(i.indexId,n,u.arrayValue,u.directionalValue))}).next(()=>o)}yn(e,n){let i=new it(Vo);const r=this.An(n,e);if(r==null)return i;const o=j1(n);if(o!=null){const a=e.data.field(o.fieldPath);if(sm(a))for(const u of a.arrayValue.values||[])i=i.add(new dl(n.indexId,e.key,this.Tn(u),r))}else i=i.add(new dl(n.indexId,e.key,Lv,r));return i}wn(e,n,i,r,o){J("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return function(c,h,m,g,_){const T=c.getIterator(),P=h.getIterator();let E=gc(T),R=gc(P);for(;E||R;){let S=!1,b=!1;if(E&&R){const k=m(E,R);k<0?b=!0:k>0&&(S=!0)}else E!=null?b=!0:S=!0;S?(g(R),R=gc(P)):b?(_(E),E=gc(T)):(E=gc(T),R=gc(P))}}(r,o,Vo,u=>{a.push(this.Sn(e,n,i,u))},u=>{a.push(this.bn(e,n,i,u))}),G.waitFor(a)}gn(e){let n=1;return yc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,u)=>Vo(a,u)).filter((a,u,c)=>!u||Vo(a,c[u-1])!==0);const r=[];r.push(e);for(const a of i){const u=Vo(a,e),c=Vo(a,n);if(u===0)r[0]=e.Jt();else if(u>0&&c<0)r.push(a),r.push(a.Jt());else if(c>0)break}r.push(n);const o=[];for(let a=0;a<r.length;a+=2){if(this.Dn(r[a],r[a+1]))return[];const u=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,Lv,[]],c=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,Lv,[]];o.push(IDBKeyRange.bound(u,c))}return o}Dn(e,n){return Vo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(IN)}getMinOffset(e,n){return G.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||le())).next(IN)}}function EN(t){return Pn(t,"collectionParents")}function vc(t){return Pn(t,"indexEntries")}function Rf(t){return Pn(t,"indexConfiguration")}function yc(t){return Pn(t,"indexState")}function IN(t){me(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;bb(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new zi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gi{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new gi(e,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId);let u=0;const c=i.J({range:a},(m,g,_)=>(u++,_.delete()));o.push(c.next(()=>{me(u===1)}));const h=[];for(const m of n.mutations){const g=WF(e,m.key.path,n.batchId);o.push(r.delete(g)),h.push(m.key)}return G.waitFor(o).next(()=>h)}function v_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw le();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi.DEFAULT_COLLECTION_PERCENTILE=10,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gi.DEFAULT=new gi(41943040,gi.DEFAULT_COLLECTION_PERCENTILE,gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gi.DISABLED=new gi(-1,0,0);class Iw{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){me(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new Iw(o,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fo(e).J({index:"userMutationsIndex",range:i},(r,o,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const o=Sc(e),a=Fo(e);return a.add({}).next(u=>{me(typeof u=="number");const c=new Nb(u,n,i,r),h=function(T,P,E){const R=E.baseMutations.map(b=>lm(T.ct,b)),S=E.mutations.map(b=>lm(T.ct,b));return{userId:P,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:R,mutations:S}}(this.serializer,this.userId,c),m=[];let g=new it((_,T)=>Te(_.canonicalString(),T.canonicalString()));for(const _ of r){const T=WF(this.userId,_.key.path,u);g=g.add(_.key.path.popLast()),m.push(a.put(h)),m.push(o.put(T,vQ))}return g.forEach(_=>{m.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Cn[u]=c.keys()}),G.waitFor(m).next(()=>c)})}lookupMutationBatch(e,n){return Fo(e).get(n).next(i=>i?(me(i.userId===this.userId),ul(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?G.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Fo(e).J({index:"userMutationsIndex",range:r},(a,u,c)=>{u.userId===this.userId&&(me(u.batchId>=i),o=ul(this.serializer,u)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Fo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,a)=>{i=o.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fo(e).U("userMutationsIndex",n).next(i=>i.map(r=>ul(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=uy(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return Sc(e).J({range:r},(a,u,c)=>{const[h,m,g]=a,_=us(m);if(h===this.userId&&n.path.isEqual(_))return Fo(e).get(g).next(T=>{if(!T)throw le();me(T.userId===this.userId),o.push(ul(this.serializer,T))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new it(Te);const r=[];return n.forEach(o=>{const a=uy(this.userId,o.path),u=IDBKeyRange.lowerBound(a),c=Sc(e).J({range:u},(h,m,g)=>{const[_,T,P]=h,E=us(T);_===this.userId&&o.path.isEqual(E)?i=i.add(P):g.done()});r.push(c)}),G.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,o=uy(this.userId,i),a=IDBKeyRange.lowerBound(o);let u=new it(Te);return Sc(e).J({range:a},(c,h,m)=>{const[g,_,T]=c,P=us(_);g===this.userId&&i.isPrefixOf(P)?P.length===r&&(u=u.add(T)):m.done()}).next(()=>this.Fn(e,u))}Fn(e,n){const i=[],r=[];return n.forEach(o=>{r.push(Fo(e).get(o).next(a=>{if(a===null)throw le();me(a.userId===this.userId),i.push(ul(this.serializer,a))}))}),G.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return $4(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),G.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return G.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Sc(e).J({range:i},(o,a,u)=>{if(o[0]===this.userId){const c=us(o[1]);r.push(c)}else u.done()}).next(()=>{me(r.length===0)})})}containsKey(e,n){return W4(e,this.userId,n)}xn(e){return H4(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function W4(t,e,n){const i=uy(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i);let a=!1;return Sc(t).J({range:o,H:!0},(u,c,h)=>{const[m,g,_]=u;m===e&&g===r&&(a=!0),h.done()}).next(()=>a)}function Fo(t){return Pn(t,"mutations")}function Sc(t){return Pn(t,"documentMutations")}function H4(t){return Pn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Kl(0)}static Ln(){return new Kl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kY{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const i=new Kl(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ve.fromTimestamp(new Tt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>_c(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(me(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0;const o=[];return _c(e).J((a,u)=>{const c=Gf(u);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(e,c)))}).next(()=>G.waitFor(o)).next(()=>r)}forEachTarget(e,n){return _c(e).J((i,r)=>{const o=Gf(r);n(o)})}Bn(e){return SN(e).get("targetGlobalKey").next(n=>(me(n!==null),n))}kn(e,n){return SN(e).put("targetGlobalKey",n)}qn(e,n){return _c(e).put(z4(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Gl(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return _c(e).J({range:r,index:"queryTargetsIndex"},(a,u,c)=>{const h=Gf(u);Om(n,h.target)&&(o=h,c.done())}).next(()=>o)}addMatchingKeys(e,n,i){const r=[],o=qo(e);return n.forEach(a=>{const u=si(a.path);r.push(o.put({targetId:i,path:u})),r.push(this.referenceDelegate.addReference(e,i,a))}),G.waitFor(r)}removeMatchingKeys(e,n,i){const r=qo(e);return G.forEach(n,o=>{const a=si(o.path);return G.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){const i=qo(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=qo(e);let o=Ce();return r.J({range:i,H:!0},(a,u,c)=>{const h=us(a[1]),m=new re(h);o=o.add(m)}).next(()=>o)}containsKey(e,n){const i=si(n.path),r=IDBKeyRange.bound([i],[UF(i)],!1,!0);let o=0;return qo(e).J({index:"documentTargetsIndex",H:!0,range:r},([a,u],c,h)=>{a!==0&&(o++,h.done())}).next(()=>o>0)}ot(e,n){return _c(e).get(n).next(i=>i?Gf(i):null)}}function _c(t){return Pn(t,"targets")}function SN(t){return Pn(t,"targetGlobal")}function qo(t){return Pn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN([t,e],[n,i]){const r=Te(t,n);return r===0?Te(e,i):r}class xY{constructor(e){this.Kn=e,this.buffer=new it(bN),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();bN(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class NY{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){J("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ka(n)?J("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ra(n)}await this.zn(3e5)})}}class DY{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return G.resolve(_i.oe);const i=new xY(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(TN)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TN):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,a,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(h=Date.now(),wc()<=xe.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function OY(t,e){return new DY(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(e,n){this.db=e,this.garbageCollector=OY(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return Mv(e,i)}removeReference(e,n,i){return Mv(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Mv(e,n)}er(e,n){return function(r,o){let a=!1;return H4(r).Y(u=>W4(r,u,o).next(c=>(c&&(a=!0),G.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Xn(e,(a,u)=>{if(u<=n){const c=this.er(e,a).next(h=>{if(!h)return o++,i.getEntry(e,a).next(()=>(i.removeEntry(a,ve.min()),qo(e).delete(function(g){return[0,si(g.path)]}(a))))});r.push(c)}}).next(()=>G.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Mv(e,n)}Xn(e,n){const i=qo(e);let r,o=_i.oe;return i.J({index:"documentTargetsIndex"},([a,u],{path:c,sequenceNumber:h})=>{a===0?(o!==_i.oe&&n(new re(us(r)),o),o=h,r=c):o=_i.oe}).next(()=>{o!==_i.oe&&n(new re(us(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mv(t,e){return qo(t).put(function(i,r){return{targetId:0,path:si(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.changes=new xa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return nl(e).put(i)}removeEntry(e,n,i){return nl(e).delete(function(o,a){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],m_(a),u[u.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=mt.newInvalidDocument(n);return nl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kf(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:mt.newInvalidDocument(n)};return nl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kf(n))},(r,o)=>{i={document:this.nr(n,o),size:v_(o)}}).next(()=>i)}getEntries(e,n){let i=Ei();return this.ir(e,n,(r,o)=>{const a=this.nr(r,o);i=i.insert(r,a)}).next(()=>i)}sr(e,n){let i=Ei(),r=new ut(re.comparator);return this.ir(e,n,(o,a)=>{const u=this.nr(o,a);i=i.insert(o,u),r=r.insert(o,v_(a))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return G.resolve();let r=new it(PN);n.forEach(c=>r=r.add(c));const o=IDBKeyRange.bound(kf(r.first()),kf(r.last())),a=r.getIterator();let u=a.getNext();return nl(e).J({index:"documentKeyIndex",range:o},(c,h,m)=>{const g=re.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&PN(u,g)<0;)i(u,null),u=a.getNext();u&&u.isEqual(g)&&(i(u,h),u=a.hasNext()?a.getNext():null),u?m.$(kf(u)):m.done()}).next(()=>{for(;u;)i(u,null),u=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){const a=n.path,u=[a.popLast().toArray(),a.lastSegment(),m_(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nl(e).U(IDBKeyRange.bound(u,c,!0)).next(h=>{o==null||o.incrementDocumentReadCount(h.length);let m=Ei();for(const g of h){const _=this.nr(re.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(Mm(n,_)||r.has(_.key))&&(m=m.insert(_.key,_))}return m})}getAllFromCollectionGroup(e,n,i,r){let o=Ei();const a=AN(n,i),u=AN(n,zi.max());return nl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,u,!0)},(c,h,m)=>{const g=this.nr(re.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);o=o.insert(g.key,g),o.size===r&&m.done()}).next(()=>o)}newChangeBuffer(e){return new VY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return CN(e).get("remoteDocumentGlobalKey").next(n=>(me(!!n),n))}tr(e,n){return CN(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const i=EY(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(ve.min())))return i}return mt.newInvalidDocument(e)}}function Q4(t){return new MY(t)}class VY extends K4{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new xa(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new it((o,a)=>Te(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{const u=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,u.readTime)),a.isValidDocument()){const c=hN(this.ar.serializer,a);r=r.add(o.path.popLast());const h=v_(c);i+=h-u.size,n.push(this.ar.addEntry(e,o,c))}else if(i-=u.size,this.trackRemovals){const c=hN(this.ar.serializer,a.convertToNoDocument(ve.min()));n.push(this.ar.addEntry(e,o,c))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),G.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,a)=>{this.ur.set(o,{size:a,readTime:i.get(o).readTime})}),i))}}function CN(t){return Pn(t,"remoteDocumentGlobal")}function nl(t){return Pn(t,"remoteDocumentsV14")}function kf(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AN(t,e){const n=e.documentKey.path.toArray();return[t,m_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function PN(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Te(n[o],i[o]),r)return r;return r=Te(n.length,i.length),r||(r=Te(n[n.length-2],i[i.length-2]),r||Te(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&dp(i.mutation,r,wi.empty(),Tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ce()){const r=cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=jf();return o.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=Ei();const a=cp(),u=function(){return cp()}();return n.forEach((c,h)=>{const m=i.get(h.key);r.has(h.key)&&(m===void 0||m.mutation instanceof ho)?o=o.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),dp(m.mutation,h,m.mutation.getFieldMask(),Tt.now())):a.set(h.key,wi.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,m)=>a.set(h,m)),n.forEach((h,m)=>{var g;return u.set(h,new FY(m,(g=a.get(h))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const i=cp();let r=new ut((a,u)=>a-u),o=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=i.get(c)||wi.empty();m=u.applyToLocalView(h,m),i.set(c,m);const g=(r.get(u.batchId)||Ce()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,g=p4();m.forEach(_=>{if(!o.has(_)){const T=I4(n.get(_),i.get(_));T!==null&&g.set(_,T),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return G.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Rb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):G.resolve(cs());let u=-1,c=o;return a.next(h=>G.forEach(h,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?G.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{c=c.insert(m,_)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,Ce())).next(m=>({batchId:u,changes:f4(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(i=>{let r=jf();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=jf();return this.indexManager.getCollectionParents(e,o).next(u=>G.forEach(u,c=>{const h=function(g,_){return new co(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((c,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,mt.newInvalidDocument(m)))});let u=jf();return a.forEach((c,h)=>{const m=o.get(c);m!==void 0&&dp(m.mutation,h,wi.empty(),Tt.now()),Mm(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return G.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Qt(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:Vb(r.bundledQuery),readTime:Qt(r.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BY{constructor(){this.overlays=new ut(re.comparator),this.hr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const i=cs();return G.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),G.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),G.resolve()}getOverlaysForCollection(e,n,i){const r=cs(),o=n.length+1,a=new re(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ut((h,m)=>h-m);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let m=o.get(h.largestBatchId);m===null&&(m=cs(),o=o.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=cs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=r)););return G.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Ob(n,i));let o=this.hr.get(n);o===void 0&&(o=Ce(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.Pr=new it(En.Ir),this.Tr=new it(En.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const i=new En(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new En(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){const n=new re(new Fe([])),i=new En(n,e),r=new En(n,e+1),o=[];return this.Tr.forEachInRange([i,r],a=>{this.Ar(a),o.push(a.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new re(new Fe([])),i=new En(n,e),r=new En(n,e+1);let o=Ce();return this.Tr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new En(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class En{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return re.comparator(e.key,n.key)||Te(e.pr,n.pr)}static Er(e,n){return Te(e.pr,n.pr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new it(En.Ir)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Nb(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.wr=this.wr.add(new En(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return G.resolve(a)}lookupMutationBatch(e,n){return G.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.br(i),o=r<0?0:r;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new En(n,0),r=new En(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],a=>{const u=this.Sr(a.pr);o.push(u)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new it(Te);return n.forEach(r=>{const o=new En(r,0),a=new En(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,a],u=>{i=i.add(u.pr)})}),G.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;re.isDocumentKey(o)||(o=o.child(""));const a=new En(new re(o),0);let u=new it(Te);return this.wr.forEachWhile(c=>{const h=c.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(u=u.add(c.pr)),!0)},a),G.resolve(this.Dr(u))}Dr(e){const n=[];return e.forEach(i=>{const r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){me(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return G.forEach(n.mutations,r=>{const o=new En(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){const i=new En(n,0),r=this.wr.firstAfterOrEqual(i);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(e){this.vr=e,this.docs=function(){return new ut(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let i=Ei();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():mt.newInvalidDocument(r))}),G.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Ei();const a=n.path,u=new re(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||bb(jF(m),i)<=0||(r.has(m.key)||Mm(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,n,i,r){le()}Fr(e,n){return G.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new GY(this)}getSize(e){return G.resolve(this.size)}}class GY extends K4{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),G.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(e){this.persistence=e,this.Mr=new xa(n=>Gl(n),Om),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Bb,this.targetCount=0,this.Lr=Kl.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),G.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Kl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.qn(n),G.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Mr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),G.waitFor(o).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const i=this.Mr.get(n)||null;return G.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),G.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Nr.gr(n);return G.resolve(i)}containsKey(e,n){return G.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.Br={},this.overlays={},this.kr=new _i(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new qY(this),this.indexManager=new PY,this.remoteDocumentCache=function(r){return new zY(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new j4(n),this.$r=new UY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BY,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new jY(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){J("MemoryPersistence","Starting transaction:",e);const r=new $Y(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return G.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}}class $Y extends GF{constructor(e){super(),this.currentSequenceNumber=e}}class Tw{constructor(e){this.persistence=e,this.zr=new Bb,this.jr=null}static Hr(e){return new Tw(e)}get Jr(){if(this.jr)return this.jr;throw le()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),G.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),G.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Jr,i=>{const r=re.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,ve.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return G.or([()=>G.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WY{constructor(e){this.serializer=e}O(e,n,i,r){const o=new vw("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",G2,{unique:!0}),c.createObjectStore("documentMutations")}(e),RN(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=G.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),RN(e)),a=a.next(()=>function(c){const h=c.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)}(o))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(c,h){return h.store("mutations").U().next(m=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",G2,{unique:!0});const g=h.store("mutations"),_=m.map(T=>g.put(T));return G.waitFor(_)})}(e,o))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Xr(o))),i<6&&r>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(a=a.next(()=>this.ti(o))),i<8&&r>=8&&(a=a.next(()=>this.ni(e,o))),i<9&&r>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ri(o))),i<11&&r>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(c){const h=c.createObjectStore("documentOverlays",{keyPath:RQ});h.createIndex("collectionPathOverlayIndex",kQ,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",xQ,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(c){const h=c.createObjectStore("remoteDocumentsV14",{keyPath:yQ});h.createIndex("documentKeyIndex",_Q),h.createIndex("collectionGroupIndex",wQ)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(e,o))),i<15&&r>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:bQ}).createIndex("sequenceNumberIndex",CQ,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:AQ}).createIndex("documentKeyIndex",PQ,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),a}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=v_(r)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>G.forEach(r,o=>{const a=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",a).next(u=>G.forEach(u,c=>{me(c.userId===o.userId);const h=ul(this.serializer,c);return $4(e,o.userId,h).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.J((a,u)=>{const c=new Fe(a),h=function(g){return[0,si(g)]}(c);o.push(n.get(h).next(m=>m?G.resolve():(g=>n.put({targetId:0,path:si(g),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>G.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:SQ});const i=n.store("collectionParents"),r=new Ub,o=a=>{if(r.add(a)){const u=a.lastSegment(),c=a.popLast();return i.put({collectionId:u,parent:si(c)})}};return n.store("remoteDocuments").J({H:!0},(a,u)=>{const c=new Fe(a);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([a,u,c],h)=>{const m=us(u);return o(m.popLast())}))}ri(e){const n=e.store("targets");return n.J((i,r)=>{const o=Gf(r),a=z4(this.serializer,o);return n.put(a)})}ii(e,n){const i=n.store("remoteDocuments"),r=[];return i.J((o,a)=>{const u=n.store("remoteDocumentsV14"),c=function(g){return g.document?new re(Fe.fromString(g.document.name).popFirst(5)):g.noDocument?re.fromSegments(g.noDocument.path):g.unknownDocument?re.fromSegments(g.unknownDocument.path):le()}(a).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(u.put(h))}).next(()=>G.waitFor(r))}si(e,n){const i=n.store("mutations"),r=Q4(this.serializer),o=new J4(Tw.Hr,this.serializer.ct);return i.U().next(a=>{const u=new Map;return a.forEach(c=>{var h;let m=(h=u.get(c.userId))!==null&&h!==void 0?h:Ce();ul(this.serializer,c).keys().forEach(g=>m=m.add(g)),u.set(c.userId,m)}),G.forEach(u,(c,h)=>{const m=new Tn(h),g=Ew.lt(this.serializer,m),_=o.getIndexManager(m),T=Iw.lt(m,this.serializer,_,o.referenceDelegate);return new Y4(r,T,g,_).recalculateAndSaveOverlaysForDocumentKeys(new z1(n,_i.oe),c).next()})})}}function RN(t){t.createObjectStore("targetDocuments",{keyPath:IQ}).createIndex("documentTargetsIndex",TQ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",EQ,{unique:!0}),t.createObjectStore("targetGlobal")}const oI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jb{constructor(e,n,i,r,o,a,u,c,h,m,g=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=a,this.document=u,this._i=h,this.ai=m,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!jb.D())throw new Y($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LY(this,r),this.Ti=n+"main",this.serializer=new j4(c),this.Ei=new fs(this.Ti,this.ui,new WY(this.serializer)),this.Qr=new kY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Q4(this.serializer),this.$r=new IY,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,m===!1&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y($.FAILED_PRECONDITION,oI);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new _i(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ka(e))return J("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return xf(e).get("owner").next(n=>G.resolve(this.Si(n)))}bi(e){return Vv(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Pn(n,"clientMetadata");return i.U().next(r=>{const o=this.vi(r,18e5),a=r.filter(u=>o.indexOf(u)===-1);return G.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?G.resolve(!0):xf(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Y($.FAILED_PRECONDITION,oI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vv(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const o=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,u=this.networkEnabled===r.networkEnabled;if(o||a&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&J("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new z1(e,_i.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Vv(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Iw.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RY(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ew.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){J("IndexedDbPersistence","Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?DQ:c===15?YF:c===14?QF:c===13?KF:c===12?NQ:c===11?HF:void le()}(this.ui);let a;return this.Ei.runTransaction(e,r,o,u=>(a=new z1(u,this.kr?this.kr.next():_i.oe),n==="readwrite-primary"?this.gi(a).next(c=>!!c||this.pi(a)).next(c=>{if(!c)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Y($.FAILED_PRECONDITION,zF);return i(a)}).next(c=>this.wi(a).next(()=>c)):this.ki(a).next(()=>i(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}ki(e){return xf(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y($.FAILED_PRECONDITION,oI)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xf(e).put("owner",n)}static D(){return fs.D()}yi(e){const n=xf(e);return n.get("owner").next(i=>this.Si(i)?(J("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):G.resolve())}Ci(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(Kt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;AL()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return J("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Kt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xf(t){return Pn(t,"owner")}function Vv(t){return Pn(t,"clientMetadata")}function zb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Ce(),r=Ce();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Gb(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return AL()?8:qF(St())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ji(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new HY;return this.Ji(e,n,a).next(u=>{if(o.result=u,this.Ui)return this.Yi(e,n,a,u.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(wc()<=xe.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ec(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),G.resolve()):(wc()<=xe.DEBUG&&J("QueryEngine","Query:",Ec(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(wc()<=xe.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ec(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(n))):G.resolve())}ji(e,n){if(tN(n))return G.resolve(null);let i=oi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=p_(n,null,"F"),i=oi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Ce(...o);return this.zi.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const h=this.Zi(n,u);return this.Xi(n,h,a,c.readTime)?this.ji(e,p_(n,null,"F")):this.es(e,h,n,c)}))})))}Hi(e,n,i,r){return tN(n)||r.isEqual(ve.min())?G.resolve(null):this.zi.getDocuments(e,i).next(o=>{const a=this.Zi(n,o);return this.Xi(n,a,i,r)?G.resolve(null):(wc()<=xe.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ec(n)),this.es(e,a,n,BF(r,-1)).next(u=>u))})}Zi(e,n){let i=new it(d4(e));return n.forEach((r,o)=>{Mm(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return wc()<=xe.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ec(n)),this.zi.getDocumentsMatchingQuery(e,n,zi.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KY{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new ut(Te),this.rs=new xa(o=>Gl(o),Om),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y4(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Z4(t,e,n,i){return new KY(t,e,n,i)}async function e3(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let c=Ce();for(const h of r){a.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of o){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(i,c).next(h=>({us:h,removedBatchIds:a,addedBatchIds:u}))})})}function QY(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const g=h.batch,_=g.keys();let T=G.resolve();return _.forEach(P=>{T=T.next(()=>m.getEntry(c,P)).next(E=>{const R=h.docVersions.get(P);me(R!==null),E.version.compareTo(R)<0&&(g.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),m.addEntry(E)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=Ce();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function t3(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function YY(t,e){const n=oe(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Qr.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(o,m.addedDocuments,g)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(pn.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(g,T),function(E,R,S){return E.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(_,T,m)&&u.push(n.Qr.updateTargetData(o,T))});let c=Ei(),h=Ce();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(n3(o,a,e.documentUpdates).next(m=>{c=m.cs,h=m.ls})),!i.isEqual(ve.min())){const m=n.Qr.getLastRemoteSnapshotVersion(o).next(g=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return G.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(n.ns=r,o))}function n3(t,e,n){let i=Ce(),r=Ce();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Ei();return n.forEach((u,c)=>{const h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):J("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{cs:a,ls:r}})}function JY(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ed(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,G.resolve(r)):n.Qr.allocateTargetId(i).next(a=>(r=new $s(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}async function Id(t,e,n){const i=oe(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ka(a))throw a;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function y_(t,e,n){const i=oe(t);let r=ve.min(),o=Ce();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,m){const g=oe(c),_=g.rs.get(m);return _!==void 0?G.resolve(g.ns.get(_)):g.Qr.getTargetData(h,m)}(i,a,oi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,u.targetId).next(c=>{o=c})}).next(()=>i.ts.getDocumentsMatchingQuery(a,e,n?r:ve.min(),n?o:Ce())).next(u=>(s3(i,c4(e),u),{documents:u,hs:o})))}function i3(t,e){const n=oe(t),i=oe(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(a=>a?a.target:null))}function r3(t,e){const n=oe(t),i=n.ss.get(e)||ve.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,BF(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(s3(n,e,r),r))}function s3(t,e,n){let i=t.ss.get(e)||ve.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}async function XY(t,e,n,i){const r=oe(t);let o=Ce(),a=Ei();for(const h of n){const m=e.Ps(h.metadata.name);h.document&&(o=o.add(m));const g=e.Is(h);g.setReadTime(e.Ts(h.metadata.readTime)),a=a.insert(m,g)}const u=r.os.newChangeBuffer({trackRemovals:!0}),c=await Ed(r,function(m){return oi(zd(Fe.fromString(`__bundle__/docs/${m}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",h=>n3(h,u,a).next(m=>(u.apply(h),m)).next(m=>r.Qr.removeMatchingKeysForTargetId(h,c.targetId).next(()=>r.Qr.addMatchingKeys(h,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(h,m.cs,m.ls)).next(()=>m.cs)))}async function ZY(t,e,n=Ce()){const i=await Ed(t,oi(Vb(e.bundledQuery))),r=oe(t);return r.persistence.runTransaction("Save named query","readwrite",o=>{const a=Qt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.$r.saveNamedQuery(o,e);const u=i.withResumeToken(pn.EMPTY_BYTE_STRING,a);return r.ns=r.ns.insert(u.targetId,u),r.Qr.updateTargetData(o,u).next(()=>r.Qr.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Qr.addMatchingKeys(o,n,i.targetId)).next(()=>r.$r.saveNamedQuery(o,e))})}function kN(t,e){return`firestore_clients_${t}_${e}`}function xN(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function aI(t,e){return`firestore_targets_${t}_${e}`}class __{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){const r=JSON.parse(i);let o,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(o=new Y(r.error.code,r.error.message))),a?new __(e,n,r.state,o):(Kt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hp{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){const i=JSON.parse(n);let r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new Y(i.error.code,i.error.message))),o?new hp(e,i.state,r):(Kt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class w_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=kb();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=$F(i.activeTargetIds[a]),o=o.add(i.activeTargetIds[a]);return r?new w_(e,o):(Kt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class qb{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new qb(n.clientId,n.onlineState):(Kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nT{constructor(){this.activeTargetIds=kb()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lI{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ut(Te),this.started=!1,this.ys=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=kN(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new nT),this.bs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const i of e){if(i===this.Vs)continue;const r=this.getItem(kN(this.persistenceKey,i));if(r){const o=w_.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const i=this.xs(n);i&&this.Os(i)}for(const i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(aI(this.persistenceKey,e));if(i){const r=hp.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(aI(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J("SharedClientState","READ",e,n),n}setItem(e,n){J("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){J("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(J("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const i=this.$s(n.key);return this.Us(i,null)}{const i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){const i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){const i=function(o){let a=_i.oe;if(o!=null)try{const u=JSON.parse(o);me(typeof u=="number"),a=u}catch(u){Kt("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(n.newValue);i!==_i.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){const i=this.Js(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){const r=new __(this.currentUser,e,n,i),o=xN(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){const n=xN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){const r=aI(this.persistenceKey,e),o=new hp(e,n,i);this.setItem(r,o.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const i=this.$s(e);return w_.Es(i,n)}Gs(e,n){const i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return __.Es(new Tn(o),r,n)}js(e,n){const i=this.Cs.exec(e),r=Number(i[1]);return hp.Es(r,n)}xs(e){return qb.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);J("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),a=[],u=[];return o.forEach(c=>{r.has(c)||a.push(c)}),r.forEach(c=>{o.has(c)||u.push(c)}),this.syncEngine.eo(a,u).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=kb();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class o3{constructor(){this.no=new nT,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fv=null;function uI(){return Fv===null?Fv=function(){return 268435456+Math.round(2147483648*Math.random())}():Fv++,"0x"+Fv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class iJ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,a){const u=uI(),c=this.vo(n,i.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${u}:`,c,r);const h={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(h,o,a),this.Mo(n,c,h,r).then(m=>(J("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw Fr("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",r),m})}xo(n,i,r,o,a,u){return this.Co(n,i,r,o,a)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jd}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}vo(n,i){const r=tJ[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){const o=uI();return new Promise((a,u)=>{const c=new xF;c.setWithCredentials(!0),c.listenOnce(DF.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ay.NO_ERROR:const m=c.getResponseJson();J($n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case ay.TIMEOUT:J($n,`RPC '${e}' ${o} timed out`),u(new Y($.DEADLINE_EXCEEDED,"Request time out"));break;case ay.HTTP_ERROR:const g=c.getStatus();if(J($n,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const T=_==null?void 0:_.error;if(T&&T.status&&T.message){const P=function(R){const S=R.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(S)>=0?S:$.UNKNOWN}(T.status);u(new Y(P,T.message))}else u(new Y($.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Y($.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{J($n,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);J($n,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,i,15)})}Oo(e,n,i){const r=uI(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=MF(),u=LF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.xmlHttpFactory=new NF({})),this.Fo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const m=o.join("");J($n,`Creating RPC '${e}' stream ${r}: ${m}`,c);const g=a.createWebChannel(m,c);let _=!1,T=!1;const P=new nJ({lo:R=>{T?J($n,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(_||(J($n,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),J($n,`RPC '${e}' stream ${r} sending:`,R),g.send(R))},ho:()=>g.close()}),E=(R,S,b)=>{R.listen(S,k=>{try{b(k)}catch(F){setTimeout(()=>{throw F},0)}})};return E(g,Bf.EventType.OPEN,()=>{T||(J($n,`RPC '${e}' stream ${r} transport opened.`),P.mo())}),E(g,Bf.EventType.CLOSE,()=>{T||(T=!0,J($n,`RPC '${e}' stream ${r} transport closed`),P.po())}),E(g,Bf.EventType.ERROR,R=>{T||(T=!0,Fr($n,`RPC '${e}' stream ${r} transport errored:`,R),P.po(new Y($.UNAVAILABLE,"The operation could not be completed")))}),E(g,Bf.EventType.MESSAGE,R=>{var S;if(!T){const b=R.data[0];me(!!b);const k=b,F=k.error||((S=k[0])===null||S===void 0?void 0:S.error);if(F){J($n,`RPC '${e}' stream ${r} received error:`,F);const j=F.status;let B=function(L){const V=tn[L];if(V!==void 0)return b4(V)}(j),N=F.message;B===void 0&&(B=$.INTERNAL,N="Unknown error status: "+j+" with message "+F.message),T=!0,P.po(new Y(B,N)),g.close()}else J($n,`RPC '${e}' stream ${r} received:`,b),P.yo(b)}}),E(u,OF.STAT_EVENT,R=>{R.stat===B1.PROXY?J($n,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===B1.NOPROXY&&J($n,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.fo()},0),P}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(){return typeof window<"u"?window:null}function py(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t){return new dY(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&J("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n,i,r,o,a,u,c){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new $b(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Kt(n.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{const r=new Y($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){const i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rJ extends l3{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=pY(this.serializer,e),i=function(o){if(!("targetChange"in o))return ve.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ve.min():a.readTime?Qt(a.readTime):ve.min()}(e);return this.listener.h_(n,i)}P_(e){const n={};n.database=J1(this.serializer),n.addTarget=function(o,a){let u;const c=a.target;if(u=h_(c)?{documents:L4(o,c)}:{query:M4(o,c)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=R4(o,a.resumeToken);const h=Q1(o,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(ve.min())>0){u.readTime=wd(o,a.snapshotVersion.toTimestamp());const h=Q1(o,a.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const i=gY(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){const n={};n.database=J1(this.serializer),n.removeTarget=e,this.i_(n)}}class sJ extends l3{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=mY(e.writeResults,e.commitTime),i=Qt(e.commitTime);return this.listener.A_(i,n)}return me(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=J1(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>lm(this.serializer,i))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Y1(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y($.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.xo(e,Y1(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y($.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class aJ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Kt(n),this.y_=!1):J("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lJ{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{i.enqueueAndForget(async()=>{Na(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=oe(c);h.M_.add(4),await $d(h),h.N_.set("Unknown"),h.M_.delete(4),await jm(h)}(this))})}),this.N_=new aJ(i,r)}}async function jm(t){if(Na(t))for(const e of t.x_)await e(!0)}async function $d(t){for(const e of t.x_)await e(!1)}function Sw(t,e){const n=oe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Kb(n)?Hb(n):Hd(n).Xo()&&Wb(n,e))}function Td(t,e){const n=oe(t),i=Hd(n);n.F_.delete(e),i.Xo()&&u3(n,e),n.F_.size===0&&(i.Xo()?i.n_():Na(n)&&n.N_.set("Unknown"))}function Wb(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hd(t).P_(e)}function u3(t,e){t.L_.xe(e),Hd(t).I_(e)}function Hb(t){t.L_=new aY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hd(t).start(),t.N_.w_()}function Kb(t){return Na(t)&&!Hd(t).Zo()&&t.F_.size>0}function Na(t){return oe(t).M_.size===0}function c3(t){t.L_=void 0}async function uJ(t){t.N_.set("Online")}async function cJ(t){t.F_.forEach((e,n)=>{Wb(t,e)})}async function dJ(t,e){c3(t),Kb(t)?(t.N_.D_(e),Hb(t)):t.N_.set("Unknown")}async function hJ(t,e,n){if(t.N_.set("Online"),e instanceof P4&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.F_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.F_.delete(u),r.L_.removeTarget(u))}(t,e)}catch(i){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await E_(t,i)}else if(e instanceof fy?t.L_.Ke(e):e instanceof A4?t.L_.He(e):t.L_.We(e),!n.isEqual(ve.min()))try{const i=await t3(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.L_.rt(a);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=o.F_.get(h);m&&o.F_.set(h,m.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,h)=>{const m=o.F_.get(c);if(!m)return;o.F_.set(c,m.withResumeToken(pn.EMPTY_BYTE_STRING,m.snapshotVersion)),u3(o,c);const g=new $s(m.target,c,h,m.sequenceNumber);Wb(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){J("RemoteStore","Failed to raise snapshot:",i),await E_(t,i)}}async function E_(t,e,n){if(!ka(e))throw e;t.M_.add(1),await $d(t),t.N_.set("Offline"),n||(n=()=>t3(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await jm(t)})}function d3(t,e){return e().catch(n=>E_(t,n,e))}async function Wd(t){const e=oe(t),n=Ia(e);let i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;fJ(e);)try{const r=await JY(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,pJ(e,r)}catch(r){await E_(e,r)}h3(e)&&f3(e)}function fJ(t){return Na(t)&&t.v_.length<10}function pJ(t,e){t.v_.push(e);const n=Ia(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function h3(t){return Na(t)&&!Ia(t).Zo()&&t.v_.length>0}function f3(t){Ia(t).start()}async function mJ(t){Ia(t).V_()}async function gJ(t){const e=Ia(t);for(const n of t.v_)e.d_(n.mutations)}async function vJ(t,e,n){const i=t.v_.shift(),r=Db.from(i,e,n);await d3(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Wd(t)}async function yJ(t,e){e&&Ia(t).E_&&await async function(i,r){if(function(a){return S4(a)&&a!==$.ABORTED}(r.code)){const o=i.v_.shift();Ia(i).t_(),await d3(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Wd(i)}}(t,e),h3(t)&&f3(t)}async function DN(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const i=Na(n);n.M_.add(3),await $d(n),i&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await jm(n)}async function iT(t,e){const n=oe(t);e?(n.M_.delete(2),await jm(n)):e||(n.M_.add(2),await $d(n),n.N_.set("Unknown"))}function Hd(t){return t.B_||(t.B_=function(n,i,r){const o=oe(n);return o.f_(),new rJ(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:uJ.bind(null,t),To:cJ.bind(null,t),Ao:dJ.bind(null,t),h_:hJ.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Kb(t)?Hb(t):t.N_.set("Unknown")):(await t.B_.stop(),c3(t))})),t.B_}function Ia(t){return t.k_||(t.k_=function(n,i,r){const o=oe(n);return o.f_(),new sJ(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:mJ.bind(null,t),Ao:yJ.bind(null,t),R_:gJ.bind(null,t),A_:vJ.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await Wd(t)):(await t.k_.stop(),t.v_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Qb(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kd(t,e){if(Kt("AsyncQueue",`${e}: ${t}`),ka(t))return new Y($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.comparator=e?(n,i)=>e(n,i)||re.comparator(n.key,i.key):(n,i)=>re.comparator(n.key,i.key),this.keyedMap=jf(),this.sortedSet=new ut(this.comparator)}static emptySet(e){return new Zc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Zc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.q_=new ut(re.comparator)}track(e){const n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):le():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Sd{constructor(e,n,i,r,o,a,u,c,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Sd(e,n,Zc.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class wJ{constructor(){this.queries=new xa(e=>u4(e),Lm),this.onlineState="Unknown",this.z_=new Set}}async function Yb(t,e){const n=oe(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new _J,i=e.G_()?0:1);try{switch(i){case 0:o.K_=await n.onListen(r,!0);break;case 1:o.K_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Kd(a,`Initialization of query '${Ec(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&Xb(n)}async function Jb(t,e){const n=oe(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.U_.indexOf(e);a>=0&&(o.U_.splice(a,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function EJ(t,e){const n=oe(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.U_)u.H_(r)&&(i=!0);a.K_=r}}i&&Xb(n)}function IJ(t,e,n){const i=oe(t),r=i.queries.get(e);if(r)for(const o of r.U_)o.onError(n);i.queries.delete(e)}function Xb(t){t.z_.forEach(e=>{e.next()})}var rT,LN;(LN=rT||(rT={})).J_="default",LN.Cache="cache";class Zb{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Sd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==rT.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TJ{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.serializer=e}Ps(e){return ps(this.serializer,e)}Is(e){return e.metadata.exists?O4(this.serializer,e.document,!1):mt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Qt(e)}}class SJ{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=p3(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;const i=Fe.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){const n=new Map,i=new MN(this.serializer);for(const r of e)if(r.metadata.queries){const o=i.Ps(r.metadata.name);for(const a of r.metadata.queries){const u=(n.get(a)||Ce()).add(o);n.set(a,u)}}return n}async complete(){const e=await XY(this.localStore,new MN(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(const i of this.queries)await ZY(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function p3(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.key=e}}class g3{constructor(e){this.key=e}}class v3{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ce(),this.mutatedKeys=Ce(),this.Ia=d4(e),this.Ta=new Zc(this.Ia)}get Ea(){return this.la}da(e,n){const i=n?n.Aa:new ON,r=n?n.Ta:this.Ta;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),T=Mm(this.query,g)?g:null,P=!!_&&this.mutatedKeys.has(_.key),E=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let R=!1;_&&T?_.data.isEqual(T.data)?P!==E&&(i.track({type:3,doc:T}),R=!0):this.Ra(_,T)||(i.track({type:2,doc:T}),R=!0,(c&&this.Ia(T,c)>0||h&&this.Ia(T,h)<0)&&(u=!0)):!_&&T?(i.track({type:0,doc:T}),R=!0):_&&!T&&(i.track({type:1,doc:_}),R=!0,(c||h)&&(u=!0)),R&&(T?(a=a.add(T),o=E?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ta:a,Aa:i,Xi:u,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const a=e.Aa.Q_();a.sort((m,g)=>function(T,P){const E=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return E(T)-E(P)}(m.type,g.type)||this.Ia(m.doc,g.doc)),this.Va(i),r=r!=null&&r;const u=n&&!r?this.ma():[],c=this.Pa.size===0&&this.current&&!r?1:0,h=c!==this.ha;return this.ha=c,a.length!==0||h?{snapshot:new Sd(this.query,e.Ta,o,a,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:u}:{fa:u}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ON,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ce(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new g3(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new m3(i))}),n}pa(e){this.la=e.hs,this.Pa=Ce();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Sd.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class bJ{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class CJ{constructor(e){this.key=e,this.wa=!1}}class AJ{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new xa(u=>u4(u),Lm),this.Da=new Map,this.Ca=new Set,this.va=new ut(re.comparator),this.Fa=new Map,this.Ma=new Bb,this.xa={},this.Oa=new Map,this.Na=Kl.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function PJ(t,e,n=!0){const i=bw(t);let r;const o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=await y3(i,e,n,!0),r}async function RJ(t,e){const n=bw(t);await y3(n,e,!0,!1)}async function y3(t,e,n,i){const r=await Ed(t.localStore,oi(e)),o=r.targetId,a=n?t.sharedClientState.addLocalQueryTarget(o):"not-current";let u;return i&&(u=await eC(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Sw(t.remoteStore,r),u}async function eC(t,e,n,i,r){t.Ba=(g,_,T)=>async function(E,R,S,b){let k=R.view.da(S);k.Xi&&(k=await y_(E.localStore,R.query,!1).then(({documents:N})=>R.view.da(N,k)));const F=b&&b.targetChanges.get(R.targetId),j=b&&b.targetMismatches.get(R.targetId)!=null,B=R.view.applyChanges(k,E.isPrimaryClient,F,j);return sT(E,R.targetId,B.fa),B.snapshot}(t,g,_,T);const o=await y_(t.localStore,e,!0),a=new v3(e,o.hs),u=a.da(o.documents),c=Um.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=a.applyChanges(u,t.isPrimaryClient,c);sT(t,n,h.fa);const m=new bJ(e,n,a);return t.ba.set(e,m),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),h.snapshot}async function kJ(t,e,n){const i=oe(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(a=>!Lm(a,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Id(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Td(i.remoteStore,r.targetId),bd(i,r.targetId)}).catch(Ra)):(bd(i,r.targetId),await Id(i.localStore,r.targetId,!0))}async function xJ(t,e){const n=oe(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Td(n.remoteStore,i.targetId))}async function NJ(t,e,n){const i=rC(t);try{const r=await function(a,u){const c=oe(a),h=Tt.now(),m=u.reduce((T,P)=>T.add(P.key),Ce());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=Ei(),E=Ce();return c.os.getEntries(T,m).next(R=>{P=R,P.forEach((S,b)=>{b.isValidDocument()||(E=E.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,P)).next(R=>{g=R;const S=[];for(const b of u){const k=rY(b,g.get(b.key).overlayedDocument);k!=null&&S.push(new ho(b.key,k,e4(k.value.mapValue),It.exists(!0)))}return c.mutationQueue.addMutationBatch(T,h,S,u)}).next(R=>{_=R;const S=R.applyToLocalDocumentSet(g,E);return c.documentOverlayCache.saveOverlays(T,R.batchId,S)})}).then(()=>({batchId:_.batchId,changes:f4(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let h=a.xa[a.currentUser.toKey()];h||(h=new ut(Te)),h=h.insert(u,c),a.xa[a.currentUser.toKey()]=h}(i,r.batchId,n),await fo(i,r.changes),await Wd(i.remoteStore)}catch(r){const o=Kd(r,"Failed to persist write");n.reject(o)}}async function _3(t,e){const n=oe(t);try{const i=await YY(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Fa.get(o);a&&(me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.wa=!0:r.modifiedDocuments.size>0?me(a.wa):r.removedDocuments.size>0&&(me(a.wa),a.wa=!1))}),await fo(n,i,e)}catch(i){await Ra(i)}}function VN(t,e,n){const i=oe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ba.forEach((o,a)=>{const u=a.view.j_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=oe(a);c.onlineState=u;let h=!1;c.queries.forEach((m,g)=>{for(const _ of g.U_)_.j_(u)&&(h=!0)}),h&&Xb(c)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function DJ(t,e,n){const i=oe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Fa.get(e),o=r&&r.key;if(o){let a=new ut(re.comparator);a=a.insert(o,mt.newNoDocument(o,ve.min()));const u=Ce().add(o),c=new Fm(ve.min(),new Map,new ut(Te),a,u);await _3(i,c),i.va=i.va.remove(o),i.Fa.delete(e),iC(i)}else await Id(i.localStore,e,!1).then(()=>bd(i,e,n)).catch(Ra)}async function OJ(t,e){const n=oe(t),i=e.batch.batchId;try{const r=await QY(n.localStore,e);nC(n,i,null),tC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await fo(n,r)}catch(r){await Ra(r)}}async function LJ(t,e,n){const i=oe(t);try{const r=await function(a,u){const c=oe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(g=>(me(g!==null),m=g.keys(),c.mutationQueue.removeMutationBatch(h,g))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(i.localStore,e);nC(i,e,n),tC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await fo(i,r)}catch(r){await Ra(r)}}async function MJ(t,e){const n=oe(t);Na(n.remoteStore)||J("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const u=oe(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();const r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){const r=Kd(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function tC(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function nC(t,e,n){const i=oe(t);let r=i.xa[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function bd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||w3(t,i)})}function w3(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Td(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),iC(t))}function sT(t,e,n){for(const i of n)i instanceof m3?(t.Ma.addReference(i.key,e),VJ(t,i)):i instanceof g3?(J("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||w3(t,i.key)):le()}function VJ(t,e){const n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(J("SyncEngine","New document in limbo: "+n),t.Ca.add(i),iC(t))}function iC(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new re(Fe.fromString(e)),i=t.Na.next();t.Fa.set(i,new CJ(n)),t.va=t.va.insert(n,i),Sw(t.remoteStore,new $s(oi(zd(n.path)),i,"TargetPurposeLimboResolution",_i.oe))}}async function fo(t,e,n){const i=oe(t),r=[],o=[],a=[];i.ba.isEmpty()||(i.ba.forEach((u,c)=>{a.push(i.Ba(c,e,n).then(h=>{if((h||n)&&i.isPrimaryClient){const m=h&&!h.fromCache;i.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){r.push(h);const m=Gb.Ki(c.targetId,h);o.push(m)}}))}),await Promise.all(a),i.Sa.h_(r),await async function(c,h){const m=oe(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>G.forEach(h,_=>G.forEach(_.qi,T=>m.persistence.referenceDelegate.addReference(g,_.targetId,T)).next(()=>G.forEach(_.Qi,T=>m.persistence.referenceDelegate.removeReference(g,_.targetId,T)))))}catch(g){if(!ka(g))throw g;J("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const T=m.ns.get(_),P=T.snapshotVersion,E=T.withLastLimboFreeSnapshotVersion(P);m.ns=m.ns.insert(_,E)}}}(i.localStore,o))}async function FJ(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const i=await e3(n.localStore,e);n.currentUser=e,function(o,a){o.Oa.forEach(u=>{u.forEach(c=>{c.reject(new Y($.CANCELLED,a))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await fo(n,i.us)}}function UJ(t,e){const n=oe(t),i=n.Fa.get(e);if(i&&i.wa)return Ce().add(i.key);{let r=Ce();const o=n.Da.get(e);if(!o)return r;for(const a of o){const u=n.ba.get(a);r=r.unionWith(u.view.Ea)}return r}}async function BJ(t,e){const n=oe(t),i=await y_(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&sT(n,e.targetId,r.fa),r}async function jJ(t,e){const n=oe(t);return r3(n.localStore,e).then(i=>fo(n,i))}async function zJ(t,e,n,i){const r=oe(t),o=await function(u,c){const h=oe(u),m=oe(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>m.vn(g,c).next(_=>_?h.localDocuments.getDocuments(g,_):G.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?await Wd(r.remoteStore):n==="acknowledged"||n==="rejected"?(nC(r,e,i||null),tC(r,e),function(u,c){oe(oe(u).mutationQueue).Mn(c)}(r.localStore,e)):le(),await fo(r,o)):J("SyncEngine","Cannot apply mutation batch with id: "+e)}async function GJ(t,e){const n=oe(t);if(bw(n),rC(n),e===!0&&n.La!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await FN(n,i.toArray());n.La=!0,await iT(n.remoteStore,!0);for(const o of r)Sw(n.remoteStore,o)}else if(e===!1&&n.La!==!1){const i=[];let r=Promise.resolve();n.Da.forEach((o,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(bd(n,a),Id(n.localStore,a,!0))),Td(n.remoteStore,a)}),await r,await FN(n,i),function(a){const u=oe(a);u.Fa.forEach((c,h)=>{Td(u.remoteStore,h)}),u.Ma.mr(),u.Fa=new Map,u.va=new ut(re.comparator)}(n),n.La=!1,await iT(n.remoteStore,!1)}}async function FN(t,e,n){const i=oe(t),r=[],o=[];for(const a of e){let u;const c=i.Da.get(a);if(c&&c.length!==0){u=await Ed(i.localStore,oi(c[0]));for(const h of c){const m=i.ba.get(h),g=await BJ(i,m);g.snapshot&&o.push(g.snapshot)}}else{const h=await i3(i.localStore,a);u=await Ed(i.localStore,h),await eC(i,E3(h),a,!1,u.resumeToken)}r.push(u)}return i.Sa.h_(o),r}function E3(t){return l4(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function qJ(t){return function(n){return oe(oe(n).persistence).Bi()}(oe(t).localStore)}async function $J(t,e,n,i){const r=oe(t);if(r.La)return void J("SyncEngine","Ignoring unexpected query state notification.");const o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const a=await r3(r.localStore,c4(o[0])),u=Fm.createSynthesizedRemoteEventForCurrentChange(e,n==="current",pn.EMPTY_BYTE_STRING);await fo(r,a,u);break}case"rejected":await Id(r.localStore,e,!0),bd(r,e,i);break;default:le()}}async function WJ(t,e,n){const i=bw(t);if(i.La){for(const r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){J("SyncEngine","Adding an already active target "+r);continue}const o=await i3(i.localStore,r),a=await Ed(i.localStore,o);await eC(i,E3(o),a.targetId,!1,a.resumeToken),Sw(i.remoteStore,a)}for(const r of n)i.Da.has(r)&&await Id(i.localStore,r,!1).then(()=>{Td(i.remoteStore,r),bd(i,r)}).catch(Ra)}}function bw(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DJ.bind(null,e),e.Sa.h_=EJ.bind(null,e.eventManager),e.Sa.ka=IJ.bind(null,e.eventManager),e}function rC(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LJ.bind(null,e),e}function HJ(t,e,n){const i=oe(t);(async function(o,a,u){try{const c=await a.getMetadata();if(await function(T,P){const E=oe(T),R=Qt(P.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",S=>E.$r.getBundleMetadata(S,P.id)).then(S=>!!S&&S.createTime.compareTo(R)>=0)}(o.localStore,c))return await a.close(),u._completeWith(function(T){return{taskState:"Success",documentsLoaded:T.totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(p3(c));const h=new SJ(c,o.localStore,a.serializer);let m=await a.qa();for(;m;){const _=await h._a(m);_&&u._updateProgress(_),m=await a.qa()}const g=await h.complete();return await fo(o,g.ca,void 0),await function(T,P){const E=oe(T);return E.persistence.runTransaction("Save bundle","readwrite",R=>E.$r.saveBundleMetadata(R,P))}(o.localStore,c),u._completeWith(g.progress),Promise.resolve(g.ua)}catch(c){return Fr("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class oT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Z4(this.persistence,new X4,e.initialUser,this.serializer)}createPersistence(e){return new J4(Tw.Hr,this.serializer)}createSharedClientState(e){return new o3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class I3 extends oT{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await rC(this.Qa.syncEngine),await Wd(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return Z4(this.persistence,new X4,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new NY(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new mQ(n,this.persistence);return new pQ(e.asyncQueue,i)}createPersistence(e){const n=zb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?gi.withCacheSize(this.cacheSizeBytes):gi.DEFAULT;return new jb(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,a3(),py(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new o3}}class KJ extends I3{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Qa.syncEngine;this.sharedClientState instanceof lI&&(this.sharedClientState.syncEngine={Zs:zJ.bind(null,n),Xs:$J.bind(null,n),eo:WJ.bind(null,n),Bi:qJ.bind(null,n),Ys:jJ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async i=>{await GJ(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=a3();if(!lI.D(n))throw new Y($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=zb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lI(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class sC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>VN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FJ.bind(null,this.syncEngine),await iT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wJ}()}createDatastore(e){const n=Bm(e.databaseInfo.databaseId),i=function(o){return new iJ(o)}(e.databaseInfo);return function(o,a,u,c){return new oJ(o,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new lJ(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>VN(this.syncEngine,n,0),function(){return NN.D()?new NN:new eJ}())}createSyncEngine(e,n){return function(r,o,a,u,c,h,m){const g=new AJ(r,o,a,u,c,h);return m&&(g.La=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(i){const r=oe(i);J("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await $d(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new An,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);const r=await this.Ha(i);return new TJ(JSON.parse(r),e.length+i)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,o){const a=oe(r),u={documents:o.map(g=>am(a.serializer,g))},c=await a.xo("BatchGetDocuments",a.serializer.databaseId,Fe.emptyPath(),u,o.length),h=new Map;c.forEach(g=>{const _=fY(a.serializer,g);h.set(_.key.toString(),_)});const m=[];return o.forEach(g=>{const _=h.get(g.toString());me(!!_),m.push(_)}),m}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new qd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=re.fromPath(i);this.mutations.push(new xb(r,this.precondition(r)))}),await async function(i,r){const o=oe(i),a={writes:r.map(u=>lm(o.serializer,u))};await o.Co("Commit",o.serializer.databaseId,Fe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw le();n=ve.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new Y($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ve.min())?It.exists(!1):It.updateTime(n):It.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ve.min()))throw new Y($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return It.updateTime(n)}return It.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new $b(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new YJ(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})})}tu(e){try{const n=this.updateFunction(e);return!Dm(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!S4(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Tn.UNAUTHENTICATED,this.clientId=FF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Kd(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function my(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await e3(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function aT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oC(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>DN(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>DN(e.remoteStore,r)),t._onlineComponents=e}function T3(t){return t.name==="FirebaseError"?t.code===$.FAILED_PRECONDITION||t.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function oC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await my(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!T3(n))throw n;Fr("Error using user provided cache. Falling back to memory cache: "+n),await my(t,new oT)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await my(t,new oT);return t._offlineComponents}async function Aw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await aT(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await aT(t,new sC))),t._onlineComponents}function S3(t){return oC(t).then(e=>e.persistence)}function aC(t){return oC(t).then(e=>e.localStore)}function b3(t){return Aw(t).then(e=>e.remoteStore)}function lC(t){return Aw(t).then(e=>e.syncEngine)}function ZJ(t){return Aw(t).then(e=>e.datastore)}async function Cd(t){const e=await Aw(t),n=e.eventManager;return n.onListen=PJ.bind(null,e.syncEngine),n.onUnlisten=kJ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RJ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xJ.bind(null,e.syncEngine),n}function eX(t){return t.asyncQueue.enqueue(async()=>{const e=await S3(t),n=await b3(t);return e.setNetworkEnabled(!0),function(r){const o=oe(r);return o.M_.delete(0),jm(o)}(n)})}function tX(t){return t.asyncQueue.enqueue(async()=>{const e=await S3(t),n=await b3(t);return e.setNetworkEnabled(!1),async function(r){const o=oe(r);o.M_.add(0),await $d(o),o.N_.set("Offline")}(n)})}function nX(t,e){const n=new An;return t.asyncQueue.enqueueAndForget(async()=>async function(r,o,a){try{const u=await function(h,m){const g=oe(h);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,m))}(r,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new Y($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=Kd(u,`Failed to get document '${o} from cache`);a.reject(c)}}(await aC(t),e,n)),n.promise}function C3(t,e,n={}){const i=new An;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,h){const m=new Cw({next:_=>{a.enqueueAndForget(()=>Jb(o,g));const T=_.docs.has(u);!T&&_.fromCache?h.reject(new Y($.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&_.fromCache&&c&&c.source==="server"?h.reject(new Y($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new Zb(zd(u.path),m,{includeMetadataChanges:!0,ra:!0});return Yb(o,g)}(await Cd(t),t.asyncQueue,e,n,i)),i.promise}function iX(t,e){const n=new An;return t.asyncQueue.enqueueAndForget(async()=>async function(r,o,a){try{const u=await y_(r,o,!0),c=new v3(o,u.hs),h=c.da(u.documents),m=c.applyChanges(h,!1);a.resolve(m.snapshot)}catch(u){const c=Kd(u,`Failed to execute query '${o} against cache`);a.reject(c)}}(await aC(t),e,n)),n.promise}function A3(t,e,n={}){const i=new An;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,h){const m=new Cw({next:_=>{a.enqueueAndForget(()=>Jb(o,g)),_.fromCache&&c.source==="server"?h.reject(new Y($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new Zb(u,m,{includeMetadataChanges:!0,ra:!0});return Yb(o,g)}(await Cd(t),t.asyncQueue,e,n,i)),i.promise}function rX(t,e){const n=new Cw(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,o){oe(r).z_.add(o),o.next()}(await Cd(t),n)),()=>{n.$a(),t.asyncQueue.enqueueAndForget(async()=>function(r,o){oe(r).z_.delete(o)}(await Cd(t),n))}}function sX(t,e,n,i){const r=function(a,u){let c;return c=typeof a=="string"?C4().encode(a):a,function(m,g){return new QJ(m,g)}(function(m,g){if(m instanceof Uint8Array)return UN(m,g);if(m instanceof ArrayBuffer)return UN(new Uint8Array(m),g);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(n,Bm(e));t.asyncQueue.enqueueAndForget(async()=>{HJ(await lC(t),r,i)})}function oX(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const o=oe(i);return o.persistence.runTransaction("Get named query","readonly",a=>o.$r.getNamedQuery(a,r))}(await aC(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e,n){if(!n)throw new Y($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R3(t,e,n,i){if(e===!0&&i===!0)throw new Y($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jN(t){if(!re.isDocumentKey(t))throw new Y($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zN(t){if(re.isDocumentKey(t))throw new Y($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function We(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pw(t);throw new Y($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function k3(t,e){if(e<=0)throw new Y($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Y($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P3((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GN(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new iQ;switch(i.type){case"firstParty":return new aQ(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=BN.get(n);i&&(J("ComponentProvider","Removing Datastore"),BN.delete(n),i.terminate())}(this),Promise.resolve()}}function aX(t,e,n,i={}){var r;const o=(t=We(t,zm))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,c;if(typeof i.mockUserToken=="string")u=i.mockUserToken,c=Tn.MOCK_USER;else{u=IL(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new Y($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Tn(h)}t._authCredentials=new rQ(new VF(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ai=class x3{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new x3(this.firestore,e,this._query)}},kt=class N3{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new N3(this.firestore,e,this._key)}},ua=class D3 extends ai{constructor(e,n,i){super(e,n,zd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new re(e))}withConverter(e){return new D3(this.firestore,e,this._path)}};function O3(t,e,...n){if(t=ge(t),uC("collection","path",e),t instanceof zm){const i=Fe.fromString(e,...n);return zN(i),new ua(t,null,i)}{if(!(t instanceof kt||t instanceof ua))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Fe.fromString(e,...n));return zN(i),new ua(t.firestore,null,i)}}function lX(t,e){if(t=We(t,zm),uC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Y($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ai(t,null,function(i){return new co(Fe.emptyPath(),i)}(e))}function I_(t,e,...n){if(t=ge(t),arguments.length===1&&(e=FF.newId()),uC("doc","path",e),t instanceof zm){const i=Fe.fromString(e,...n);return jN(i),new kt(t,null,new re(i))}{if(!(t instanceof kt||t instanceof ua))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Fe.fromString(e,...n));return jN(i),new kt(t.firestore,t instanceof ua?t.converter:null,new re(i))}}function L3(t,e){return t=ge(t),e=ge(e),(t instanceof kt||t instanceof ua)&&(e instanceof kt||e instanceof ua)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function M3(t,e){return t=ge(t),e=ge(e),t instanceof ai&&e instanceof ai&&t.firestore===e.firestore&&Lm(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new $b(this,"async_queue_retry"),this.hu=()=>{const n=py();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=py();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=py();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new An;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ka(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw Kt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const r=Qb.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&le()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function lT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class cX{constructor(){this._progressObserver={},this._taskCompletionResolver=new An,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dX=-1;let jt=class extends zm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new uX}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||V3(this),this._firestoreClient.terminate()}};function Rn(t){return t._firestoreClient||V3(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function V3(t){var e,n,i;const r=t._freezeSettings(),o=function(u,c,h,m){return new MQ(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,P3(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new XJ(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function hX(t,e){U3(t=We(t,jt));const n=Rn(t);if(n._uninitializedComponentsProvider)throw new Y($.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new sC;return F3(n,r,new I3(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function fX(t){U3(t=We(t,jt));const e=Rn(t);if(e._uninitializedComponentsProvider)throw new Y($.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new sC;return F3(e,i,new KJ(i,n.cacheSizeBytes))}function F3(t,e,n){const i=new An;return t.asyncQueue.enqueue(async()=>{try{await my(t,n),await aT(t,e),i.resolve()}catch(r){const o=r;if(!T3(o))throw o;Fr("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}}).then(()=>i.promise)}function pX(t){if(t._initialized&&!t._terminated)throw new Y($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new An;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!fs.D())return Promise.resolve();const r=i+"main";await fs.delete(r)}(zb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function mX(t){return function(n){const i=new An;return n.asyncQueue.enqueueAndForget(async()=>MJ(await lC(n),i)),i.promise}(Rn(t=We(t,jt)))}function gX(t){return eX(Rn(t=We(t,jt)))}function vX(t){return tX(Rn(t=We(t,jt)))}function yX(t,e){const n=Rn(t=We(t,jt)),i=new cX;return sX(n,t._databaseId,e,i),i}function _X(t,e){return oX(Rn(t=We(t,jt)),e).then(n=>n?new ai(t,null,n.query):null)}function U3(t){if(t._initialized||t._terminated)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ys(pn.fromBase64String(e))}catch(n){throw new Y($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ys(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wX=/^__.*__$/;class EX{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gd(e,this.data,n,this.fieldTransforms)}}class B3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ho(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function j3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class kw{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new kw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return T_(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(j3(this.fu)&&wX.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class IX{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Bm(e)}Fu(e,n,i,r=!1){return new kw({fu:e,methodName:n,vu:i,path:Et.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function su(t){const e=t._freezeSettings(),n=Bm(t._databaseId);return new IX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xw(t,e,n,i,r,o={}){const a=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);gC("Data must be an object, but it was:",a,i);const u=q3(i,a);let c,h;if(o.merge)c=new wi(a.fieldMask),h=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=uT(e,g,n);if(!a.contains(_))throw new Y($.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);W3(m,_)||m.push(_)}c=new wi(m),h=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,h=a.fieldTransforms;return new EX(new Vn(u),c,h)}class Gm extends ru{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gm}}function z3(t,e,n){return new kw({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cC extends ru{_toFieldTransform(e){return new Vm(e.path,new yd)}isEqual(e){return e instanceof cC}}class dC extends ru{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=z3(this,e,!0),i=this.Mu.map(o=>ou(o,n)),r=new ql(i);return new Vm(e.path,r)}isEqual(e){return e instanceof dC&&Mp(this.Mu,e.Mu)}}class hC extends ru{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=z3(this,e,!0),i=this.Mu.map(o=>ou(o,n)),r=new $l(i);return new Vm(e.path,r)}isEqual(e){return e instanceof hC&&Mp(this.Mu,e.Mu)}}class fC extends ru{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new _d(e.serializer,v4(e.serializer,this.xu));return new Vm(e.path,n)}isEqual(e){return e instanceof fC&&this.xu===e.xu}}function pC(t,e,n,i){const r=t.Fu(1,e,n);gC("Data must be an object, but it was:",r,i);const o=[],a=Vn.empty();iu(i,(c,h)=>{const m=vC(e,c,n);h=ge(h);const g=r.Su(m);if(h instanceof Gm)o.push(m);else{const _=ou(h,g);_!=null&&(o.push(m),a.set(m,_))}});const u=new wi(o);return new B3(a,u,r.fieldTransforms)}function mC(t,e,n,i,r,o){const a=t.Fu(1,e,n),u=[uT(e,i,n)],c=[r];if(o.length%2!=0)throw new Y($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(uT(e,o[_])),c.push(o[_+1]);const h=[],m=Vn.empty();for(let _=u.length-1;_>=0;--_)if(!W3(h,u[_])){const T=u[_];let P=c[_];P=ge(P);const E=a.Su(T);if(P instanceof Gm)h.push(T);else{const R=ou(P,E);R!=null&&(h.push(T),m.set(T,R))}}const g=new wi(h);return new B3(m,g,a.fieldTransforms)}function G3(t,e,n,i=!1){return ou(n,t.Fu(i?4:3,e))}function ou(t,e){if($3(t=ge(t)))return gC("Unsupported field value:",e,t),q3(t,e);if(t instanceof ru)return function(i,r){if(!j3(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let c=ou(u,r.bu(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=ge(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return v4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Tt.fromDate(i);return{timestampValue:wd(r.serializer,o)}}if(i instanceof Tt){const o=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wd(r.serializer,o)}}if(i instanceof Rw)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ys)return{bytesValue:R4(r.serializer,i._byteString)};if(i instanceof kt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Mb(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${Pw(i)}`)}(t,e)}function q3(t,e){const n={};return JF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):iu(t,(i,r)=>{const o=ou(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function $3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Rw||t instanceof ys||t instanceof kt||t instanceof ru)}function gC(t,e,n){if(!$3(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Pw(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function uT(t,e,n){if((e=ge(e))instanceof Ta)return e._internalPath;if(typeof e=="string")return vC(t,e);throw T_("Field path arguments must be of type string or ",t,!1,void 0,n)}const TX=new RegExp("[~\\*/\\[\\]]");function vC(t,e,n){if(e.search(TX)>=0)throw T_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ta(...e.split("."))._internalPath}catch{throw T_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function T_(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new Y($.INVALID_ARGUMENT,u+t+c)}function W3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SX extends um{data(){return super.data()}}function Nw(t,e){return typeof e=="string"?vC(t,e):e instanceof Ta?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yC{}class qm extends yC{}function Uo(t,e,...n){let i=[];e instanceof yC&&i.push(e),i=i.concat(n),function(o){const a=o.filter(c=>c instanceof _C).length,u=o.filter(c=>c instanceof Dw).length;if(a>1||a>0&&u>0)throw new Y($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Dw extends qm{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Dw(e,n,i)}_apply(e){const n=this._parse(e);return Q3(e._query,n),new ai(e.firestore,e.converter,K1(e._query,n))}_parse(e){const n=su(e.firestore);return function(o,a,u,c,h,m,g){let _;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Y($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){$N(g,m);const T=[];for(const P of g)T.push(qN(c,o,P));_={arrayValue:{values:T}}}else _=qN(c,o,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||$N(g,m),_=G3(u,a,g,m==="in"||m==="not-in");return Ue.create(h,m,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bX(t,e,n){const i=e,r=Nw("where",t);return Dw._create(r,i,n)}class _C extends yC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _C(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:et.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r;const u=o.getFlattenedFilters();for(const c of u)Q3(a,c),a=K1(a,c)}(e._query,n),new ai(e.firestore,e.converter,K1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wC extends qm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wC(e,n)}_apply(e){const n=function(r,o,a){if(r.startAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new om(o,a)}(e._query,this._field,this._direction);return new ai(e.firestore,e.converter,function(r,o){const a=r.explicitOrderBy.concat([o]);return new co(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function CX(t,e="asc"){const n=e,i=Nw("orderBy",t);return wC._create(i,n)}class Ow extends qm{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Ow(e,n,i)}_apply(e){return new ai(e.firestore,e.converter,p_(e._query,this._limit,this._limitType))}}function AX(t){return k3("limit",t),Ow._create("limit",t,"F")}function PX(t){return k3("limitToLast",t),Ow._create("limitToLast",t,"L")}class Lw extends qm{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Lw(e,n,i)}_apply(e){const n=K3(e,this.type,this._docOrFields,this._inclusive);return new ai(e.firestore,e.converter,function(r,o){return new co(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}}function RX(...t){return Lw._create("startAt",t,!0)}function kX(...t){return Lw._create("startAfter",t,!1)}class Mw extends qm{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Mw(e,n,i)}_apply(e){const n=K3(e,this.type,this._docOrFields,this._inclusive);return new ai(e.firestore,e.converter,function(r,o){return new co(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}}function xX(...t){return Mw._create("endBefore",t,!1)}function NX(...t){return Mw._create("endAt",t,!0)}function K3(t,e,n,i){if(n[0]=ge(n[0]),n[0]instanceof um)return function(o,a,u,c,h){if(!c)throw new Y($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const m=[];for(const g of Xc(o))if(g.field.isKeyField())m.push(zl(a,c.key));else{const _=c.data.field(g.field);if(yw(_))throw new Y($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const T=g.field.canonicalString();throw new Y($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}m.push(_)}return new Ea(m,h)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=su(t.firestore);return function(a,u,c,h,m,g){const _=a.explicitOrderBy;if(m.length>_.length)throw new Y($.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let P=0;P<m.length;P++){const E=m[P];if(_[P].field.isKeyField()){if(typeof E!="string")throw new Y($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof E}`);if(!Rb(a)&&E.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${E}' contains a slash.`);const R=a.path.child(Fe.fromString(E));if(!re.isDocumentKey(R))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const S=new re(R);T.push(zl(u,S))}else{const R=G3(c,h,E);T.push(R)}}return new Ea(T,g)}(t._query,t.firestore._databaseId,r,e,n,i)}}function qN(t,e,n){if(typeof(n=ge(n))=="string"){if(n==="")throw new Y($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rb(e)&&n.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Fe.fromString(n));if(!re.isDocumentKey(i))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zl(t,new re(i))}if(n instanceof kt)return zl(t,n._key);throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pw(n)}.`)}function $N(t,e){if(!Array.isArray(t)||t.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Q3(t,e){const n=function(r,o){for(const a of r)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EC{convertValue(e,n="none"){switch(jl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return iu(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Rw(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ab(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(im(e));default:return null}}convertTimestamp(e){const n=io(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Fe.fromString(e);me(B4(i));const r=new _a(i.get(1),i.get(3)),o=new re(i.popFirst(5));return r.isEqual(n)||Kt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class DX extends EC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ro=class extends um{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Nw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},fp=class extends ro{data(e={}){return super.data(e)}},Sa=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new _l(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new fp(this._firestore,this._userDataWriter,i.key,i,new _l(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new fp(r._firestore,r._userDataWriter,u.doc.key,u.doc,new _l(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new fp(r._firestore,r._userDataWriter,u.doc.key,u.doc,new _l(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,m=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:OX(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function OX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}function Y3(t,e){return t instanceof ro&&e instanceof ro?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Sa&&e instanceof Sa&&t._firestore===e._firestore&&M3(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LX(t){t=We(t,kt);const e=We(t.firestore,jt);return C3(Rn(e),t._key).then(n=>IC(e,t,n))}class au extends EC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function MX(t){t=We(t,kt);const e=We(t.firestore,jt),n=Rn(e),i=new au(e);return nX(n,t._key).then(r=>new ro(e,i,t._key,r,new _l(r!==null&&r.hasLocalMutations,!0),t.converter))}function VX(t){t=We(t,kt);const e=We(t.firestore,jt);return C3(Rn(e),t._key,{source:"server"}).then(n=>IC(e,t,n))}function FX(t){t=We(t,ai);const e=We(t.firestore,jt),n=Rn(e),i=new au(e);return H3(t._query),A3(n,t._query).then(r=>new Sa(e,i,t,r))}function UX(t){t=We(t,ai);const e=We(t.firestore,jt),n=Rn(e),i=new au(e);return iX(n,t._query).then(r=>new Sa(e,i,t,r))}function BX(t){t=We(t,ai);const e=We(t.firestore,jt),n=Rn(e),i=new au(e);return A3(n,t._query,{source:"server"}).then(r=>new Sa(e,i,t,r))}function WN(t,e,n){t=We(t,kt);const i=We(t.firestore,jt),r=Vw(t.converter,e,n);return $m(i,[xw(su(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,It.none())])}function HN(t,e,n,...i){t=We(t,kt);const r=We(t.firestore,jt),o=su(r);let a;return a=typeof(e=ge(e))=="string"||e instanceof Ta?mC(o,"updateDoc",t._key,e,n,i):pC(o,"updateDoc",t._key,e),$m(r,[a.toMutation(t._key,It.exists(!0))])}function jX(t){return $m(We(t.firestore,jt),[new qd(t._key,It.none())])}function zX(t,e){const n=We(t.firestore,jt),i=I_(t),r=Vw(t.converter,e);return $m(n,[xw(su(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,It.exists(!1))]).then(()=>i)}function J3(t,...e){var n,i,r;t=ge(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||lT(e[a])||(o=e[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(lT(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),e[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let c,h,m;if(t instanceof kt)h=We(t.firestore,jt),m=zd(t._key.path),c={next:g=>{e[a]&&e[a](IC(h,t,g))},error:e[a+1],complete:e[a+2]};else{const g=We(t,ai);h=We(g.firestore,jt),m=g._query;const _=new au(h);c={next:T=>{e[a]&&e[a](new Sa(h,_,g,T))},error:e[a+1],complete:e[a+2]},H3(t._query)}return function(_,T,P,E){const R=new Cw(E),S=new Zb(T,R,P);return _.asyncQueue.enqueueAndForget(async()=>Yb(await Cd(_),S)),()=>{R.$a(),_.asyncQueue.enqueueAndForget(async()=>Jb(await Cd(_),S))}}(Rn(h),m,u,c)}function GX(t,e){return rX(Rn(t=We(t,jt)),lT(e)?e:{next:e})}function $m(t,e){return function(i,r){const o=new An;return i.asyncQueue.enqueueAndForget(async()=>NJ(await lC(i),r,o)),o.promise}(Rn(t),e)}function IC(t,e,n){const i=n.docs.get(e._key),r=new au(t);return new ro(t,r,e._key,i,new _l(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qX={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $X=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=su(e)}set(e,n,i){this._verifyNotCommitted();const r=$o(e,this._firestore),o=Vw(r.converter,n,i),a=xw(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,It.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const o=$o(e,this._firestore);let a;return a=typeof(n=ge(n))=="string"||n instanceof Ta?mC(this._dataReader,"WriteBatch.update",o._key,n,i,r):pC(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,It.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$o(e,this._firestore);return this._mutations=this._mutations.concat(new qd(n._key,It.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $o(t,e){if((t=ge(t)).firestore!==e)throw new Y($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WX=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=su(n)}get(n){const i=$o(n,this._firestore),r=new DX(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return le();const a=o[0];if(a.isFoundDocument())return new um(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new um(this._firestore,r,i._key,null,i.converter);throw le()})}set(n,i,r){const o=$o(n,this._firestore),a=Vw(o.converter,i,r),u=xw(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(n,i,r,...o){const a=$o(n,this._firestore);let u;return u=typeof(i=ge(i))=="string"||i instanceof Ta?mC(this._dataReader,"Transaction.update",a._key,i,r,o):pC(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,u),this}delete(n){const i=$o(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$o(e,this._firestore),i=new au(this._firestore);return super.get(e).then(r=>new ro(this._firestore,i,n._key,r._document,new _l(!1,!1),n.converter))}};function HX(t,e,n){t=We(t,jt);const i=Object.assign(Object.assign({},qX),n);return function(o){if(o.maxAttempts<1)throw new Y($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,a,u){const c=new An;return o.asyncQueue.enqueueAndForget(async()=>{const h=await ZJ(o);new JJ(o.asyncQueue,h,u,a,c).Xa()}),c.promise}(Rn(t),r=>e(new WX(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KX(){return new Gm("deleteField")}function QX(){return new cC("serverTimestamp")}function YX(...t){return new dC("arrayUnion",t)}function JX(...t){return new hC("arrayRemove",t)}function XX(t){return new fC("increment",t)}(function(e,n=!0){(function(r){jd=r})(oo),eo(new Mr("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new jt(new sQ(i.getProvider("auth-internal")),new uQ(i.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(h.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Bi(B2,"4.6.3",e),Bi(B2,"4.6.3","esm2017")})();const ZX="@firebase/firestore-compat",eZ="0.3.32";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Y("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(){if(typeof Uint8Array>"u")throw new Y("unimplemented","Uint8Arrays are not available in this environment.")}function QN(){if(!OQ())throw new Y("unimplemented","Blobs are unavailable in Firestore in this environment.")}let X3=class cT{constructor(e){this._delegate=e}static fromBase64String(e){return QN(),new cT(ys.fromBase64String(e))}static fromUint8Array(e){return KN(),new cT(ys.fromUint8Array(e))}toBase64(){return QN(),this._delegate.toBase64()}toUint8Array(){return KN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t){return tZ(t,["next","error","complete"])}function tZ(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{enableIndexedDbPersistence(e,n){return hX(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return fX(e._delegate)}clearIndexedDbPersistence(e){return pX(e._delegate)}}class Z3{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof _a||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){aX(this._delegate,e,n,i)}enableNetwork(){return gX(this._delegate)}disableNetwork(){return vX(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,R3("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return mX(this._delegate)}onSnapshotsInSync(e){return GX(this._delegate,e)}get app(){if(!this._appCompat)throw new Y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ad(this,O3(this._delegate,e))}catch(n){throw ti(n,"collection()","Firestore.collection()")}}doc(e){try{return new er(this,I_(this._delegate,e))}catch(n){throw ti(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ei(this,lX(this._delegate,e))}catch(n){throw ti(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return HX(this._delegate,n=>e(new eU(this,n)))}batch(){return Rn(this._delegate),new tU(new $X(this._delegate,e=>$m(this._delegate,e)))}loadBundle(e){return yX(this._delegate,e)}namedQuery(e){return _X(this._delegate,e).then(n=>n?new ei(this,n):null)}}class Fw extends EC{constructor(e){super(),this.firestore=e}convertBytes(e){return new X3(new ys(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return er.forKey(n,this.firestore,null)}}function iZ(t){tQ(t)}class eU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Fw(e)}get(e){const n=wl(e);return this._delegate.get(n).then(i=>new cm(this._firestore,new ro(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=wl(e);return i?(TC("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const o=wl(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){const n=wl(e);return this._delegate.delete(n),this}}class tU{constructor(e){this._delegate=e}set(e,n,i){const r=wl(e);return i?(TC("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const o=wl(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){const n=wl(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ql{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new fp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dm(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=Ql.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new Ql(e,new Fw(e),n),r.set(n,o)),o}}Ql.INSTANCES=new WeakMap;class er{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Fw(e)}static forPath(e,n,i){if(e.length%2!==0)throw new Y("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new er(n,new kt(n._delegate,i,new re(e)))}static forKey(e,n,i){return new er(n,new kt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ad(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ad(this.firestore,O3(this._delegate,e))}catch(n){throw ti(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ge(e),e instanceof kt?L3(this._delegate,e):!1}set(e,n){n=TC("DocumentReference.set",n);try{return n?WN(this._delegate,e,n):WN(this._delegate,e)}catch(i){throw ti(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?HN(this._delegate,e):HN(this._delegate,e,n,...i)}catch(r){throw ti(r,"updateDoc()","DocumentReference.update()")}}delete(){return jX(this._delegate)}onSnapshot(...e){const n=nU(e),i=iU(e,r=>new cm(this.firestore,new ro(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return J3(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=MX(this._delegate):(e==null?void 0:e.source)==="server"?n=VX(this._delegate):n=LX(this._delegate),n.then(i=>new cm(this.firestore,new ro(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new er(this.firestore,e?this._delegate.withConverter(Ql.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ti(t,e,n){return t.message=t.message.replace(e,n),t}function nU(t){for(const e of t)if(typeof e=="object"&&!dT(e))return e;return{}}function iU(t,e){var n,i;let r;return dT(t[0])?r=t[0]:dT(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class cm{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new er(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Y3(this._delegate,e._delegate)}}class dm extends cm{data(e){const n=this._delegate.data(e);return this._delegate._converter||nQ(n!==void 0),n}}class ei{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Fw(e)}where(e,n,i){try{return new ei(this.firestore,Uo(this._delegate,bX(e,n,i)))}catch(r){throw ti(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ei(this.firestore,Uo(this._delegate,CX(e,n)))}catch(i){throw ti(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ei(this.firestore,Uo(this._delegate,AX(e)))}catch(n){throw ti(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ei(this.firestore,Uo(this._delegate,PX(e)))}catch(n){throw ti(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ei(this.firestore,Uo(this._delegate,RX(...e)))}catch(n){throw ti(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ei(this.firestore,Uo(this._delegate,kX(...e)))}catch(n){throw ti(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ei(this.firestore,Uo(this._delegate,xX(...e)))}catch(n){throw ti(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ei(this.firestore,Uo(this._delegate,NX(...e)))}catch(n){throw ti(n,"endAt()","Query.endAt()")}}isEqual(e){return M3(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=UX(this._delegate):(e==null?void 0:e.source)==="server"?n=BX(this._delegate):n=FX(this._delegate),n.then(i=>new hT(this.firestore,new Sa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=nU(e),i=iU(e,r=>new hT(this.firestore,new Sa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return J3(this._delegate,n,i)}withConverter(e){return new ei(this.firestore,e?this._delegate.withConverter(Ql.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class rZ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new dm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hT{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ei(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new rZ(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new dm(this._firestore,i))})}isEqual(e){return Y3(this._delegate,e._delegate)}}class Ad extends ei{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new er(this.firestore,e):null}doc(e){try{return e===void 0?new er(this.firestore,I_(this._delegate)):new er(this.firestore,I_(this._delegate,e))}catch(n){throw ti(n,"doc()","CollectionReference.doc()")}}add(e){return zX(this._delegate,e).then(n=>new er(this.firestore,n))}isEqual(e){return L3(this._delegate,e._delegate)}withConverter(e){return new Ad(this.firestore,e?this._delegate.withConverter(Ql.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wl(t){return We(t,kt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(...e){this._delegate=new Ta(...e)}static documentId(){return new SC(Et.keyField().canonicalString())}isEqual(e){return e=ge(e),e instanceof Ta?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this._delegate=e}static serverTimestamp(){const e=QX();return e._methodName="FieldValue.serverTimestamp",new hl(e)}static delete(){const e=KX();return e._methodName="FieldValue.delete",new hl(e)}static arrayUnion(...e){const n=YX(...e);return n._methodName="FieldValue.arrayUnion",new hl(n)}static arrayRemove(...e){const n=JX(...e);return n._methodName="FieldValue.arrayRemove",new hl(n)}static increment(e){const n=XX(e);return n._methodName="FieldValue.increment",new hl(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sZ={Firestore:Z3,GeoPoint:Rw,Timestamp:Tt,Blob:X3,Transaction:eU,WriteBatch:tU,DocumentReference:er,DocumentSnapshot:cm,Query:ei,QueryDocumentSnapshot:dm,QuerySnapshot:hT,CollectionReference:Ad,FieldPath:SC,FieldValue:hl,setLogLevel:iZ,CACHE_SIZE_UNLIMITED:dX};function oZ(t,e){t.INTERNAL.registerComponent(new Mr("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},sZ)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(t){oZ(t,(e,n)=>new Z3(e,n,new nZ)),t.registerVersion(ZX,eZ)}aZ(pe);const lZ={apiKey:"AIzaSyB3V82mH6Ydl_hlMbB6b7ioLFT_1Gcz8Bc",authDomain:"exercise-d4c15.firebaseapp.com",projectId:"exercise-d4c15",storageBucket:"exercise-d4c15.appspot.com",messagingSenderId:"833031562012",appId:"1:833031562012:web:e44d878e820e3a7c3690d9"},uZ=pe.initializeApp(lZ),Al=pe.auth(),pp=({onClick:t,text:e,className:n})=>te.jsx("div",{className:n,children:te.jsx("button",{className:`btn ${n}`,onClick:t,children:e})}),YN=t=>t.length===0?"":t[0].toUpperCase()+t.substring(1),cZ=t=>({normal:"#A8A878",fighting:"#C03028",flying:"#A890F0",poison:"#e63ce6",ground:"#E0C068",rock:"#B8A038",bug:"#A8B820",ghost:"#705898",steel:"#B8B8D0",fire:"#F08030",water:"#6890F0",grass:"#78C850",electric:"#F8D030",psychic:"#F85888",ice:"#98D8D8",dragon:"#7038F8",dark:"#705848",fairy:"#EE99AC",stellar:"#FFD700",unknown:"#FFFFFF"})[t],rU=({hp:t,imgSrc:e,pokeName:n,statAttack:i,statDefense:r,statSpeed:o,types:a,isNewCard:u})=>{const[c,h]=we.useState("#242424");we.useEffect(()=>{a.length>0&&m(a[0].type.name)},[a]);const m=_=>{const T=cZ(_)||"#ffffff";h(T)},g=()=>a.map((_,T)=>te.jsx("span",{style:{color:c},children:YN(_.type.name)},T));return te.jsxs("div",{id:"card",style:{background:`radial-gradient(circle at 50% 0%, ${c} 36%, #404060 36%)`},children:[u&&te.jsx("div",{className:"ribbon ribbon-top-left",children:te.jsx("span",{children:"New"})}),te.jsxs("p",{className:"hp",children:[te.jsx("span",{children:"HP"}),t]}),te.jsx("img",{src:e,alt:n}),te.jsx("h2",{className:"poke-name",children:YN(n)}),te.jsx("div",{className:"types",children:g()}),te.jsxs("div",{className:"stats",children:[te.jsxs("div",{children:[te.jsx("h3",{children:i}),te.jsx("p",{style:{color:c},children:"Attack"})]}),te.jsxs("div",{children:[te.jsx("h3",{children:r}),te.jsx("p",{style:{color:c},children:"Defense"})]}),te.jsxs("div",{children:[te.jsx("h3",{children:o}),te.jsx("p",{style:{color:c},children:"Speed"})]})]})]})};function JN(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function bC(t={},e={}){Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:JN(e[n])&&JN(t[n])&&Object.keys(e[n]).length>0&&bC(t[n],e[n])})}const sU={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function lu(){const t=typeof document<"u"?document:{};return bC(t,sU),t}const dZ={document:sU,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function $i(){const t=typeof window<"u"?window:{};return bC(t,dZ),t}function hZ(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function fT(t,e=0){return setTimeout(t,e)}function S_(){return Date.now()}function fZ(t){const e=$i();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function pZ(t,e="x"){const n=$i();let i,r,o;const a=fZ(t);return n.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(u=>u.replace(",",".")).join(", ")),o=new n.WebKitCSSMatrix(r==="none"?"":r)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?r=o.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(n.WebKitCSSMatrix?r=o.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Uv(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function mZ(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Li(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<t.length;i+=1){const r=t[i];if(r!=null&&!mZ(r)){const o=Object.keys(Object(r)).filter(a=>n.indexOf(a)<0);for(let a=0,u=o.length;a<u;a+=1){const c=o[a],h=Object.getOwnPropertyDescriptor(r,c);h!==void 0&&h.enumerable&&(Uv(e[c])&&Uv(r[c])?r[c].__swiper__?e[c]=r[c]:Li(e[c],r[c]):!Uv(e[c])&&Uv(r[c])?(e[c]={},r[c].__swiper__?e[c]=r[c]:Li(e[c],r[c])):e[c]=r[c])}}}return e}function Bv(t,e,n){t.style.setProperty(e,n)}function oU({swiper:t,targetPosition:e,side:n}){const i=$i(),r=-t.translate;let o=null,a;const u=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const c=e>r?"next":"prev",h=(g,_)=>c==="next"&&g>=_||c==="prev"&&g<=_,m=()=>{a=new Date().getTime(),o===null&&(o=a);const g=Math.max(Math.min((a-o)/u,1),0),_=.5-Math.cos(g*Math.PI)/2;let T=r+_*(e-r);if(h(T,e)&&(T=e),t.wrapperEl.scrollTo({[n]:T}),h(T,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:T})}),i.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=i.requestAnimationFrame(m)};m()}function Ws(t,e=""){return[...t.children].filter(n=>n.matches(e))}function gZ(t,e=[]){const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:[e]),n}function vZ(t,e){const n=[];for(;t.previousElementSibling;){const i=t.previousElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function yZ(t,e){const n=[];for(;t.nextElementSibling;){const i=t.nextElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function Yo(t,e){return $i().getComputedStyle(t,null).getPropertyValue(e)}function XN(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function _Z(t,e){const n=[];let i=t.parentElement;for(;i;)n.push(i),i=i.parentElement;return n}function ZN(t,e,n){const i=$i();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}let cI;function wZ(){const t=$i(),e=lu();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function aU(){return cI||(cI=wZ()),cI}let dI;function EZ({userAgent:t}={}){const e=aU(),n=$i(),i=n.navigator.platform,r=t||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,u=n.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/);let h=r.match(/(iPad).*OS\s([\d_]+)/);const m=r.match(/(iPod)(.*OS\s([\d_]+))?/),g=!h&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),_=i==="Win32";let T=i==="MacIntel";const P=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&T&&e.touch&&P.indexOf(`${a}x${u}`)>=0&&(h=r.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),T=!1),c&&!_&&(o.os="android",o.android=!0),(h||g||m)&&(o.os="ios",o.ios=!0),o}function IZ(t={}){return dI||(dI=EZ(t)),dI}let hI;function TZ(){const t=$i();let e=!1;function n(){const i=t.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}if(n()){const i=String(t.navigator.userAgent);if(i.includes("Version/")){const[r,o]=i.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=r<16||r===16&&o<2}}return{isSafari:e||n(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function SZ(){return hI||(hI=TZ()),hI}function bZ({swiper:t,on:e,emit:n}){const i=$i();let r=null,o=null;const a=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},u=()=>{!t||t.destroyed||!t.initialized||(r=new ResizeObserver(m=>{o=i.requestAnimationFrame(()=>{const{width:g,height:_}=t;let T=g,P=_;m.forEach(({contentBoxSize:E,contentRect:R,target:S})=>{S&&S!==t.el||(T=R?R.width:(E[0]||E).inlineSize,P=R?R.height:(E[0]||E).blockSize)}),(T!==g||P!==_)&&a()})}),r.observe(t.el))},c=()=>{o&&i.cancelAnimationFrame(o),r&&r.unobserve&&t.el&&(r.unobserve(t.el),r=null)},h=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof i.ResizeObserver<"u"){u();return}i.addEventListener("resize",a),i.addEventListener("orientationchange",h)}),e("destroy",()=>{c(),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",h)})}function CZ({swiper:t,extendParams:e,on:n,emit:i}){const r=[],o=$i(),a=(h,m={})=>{const g=o.MutationObserver||o.WebkitMutationObserver,_=new g(T=>{if(t.__preventObserver__)return;if(T.length===1){i("observerUpdate",T[0]);return}const P=function(){i("observerUpdate",T[0])};o.requestAnimationFrame?o.requestAnimationFrame(P):o.setTimeout(P,0)});_.observe(h,{attributes:typeof m.attributes>"u"?!0:m.attributes,childList:typeof m.childList>"u"?!0:m.childList,characterData:typeof m.characterData>"u"?!0:m.characterData}),r.push(_)},u=()=>{if(t.params.observer){if(t.params.observeParents){const h=_Z(t.el);for(let m=0;m<h.length;m+=1)a(h[m])}a(t.el,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(h=>{h.disconnect()}),r.splice(0,r.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",u),n("destroy",c)}const AZ={on(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=n?"unshift":"push";return t.split(" ").forEach(o=>{i.eventsListeners[o]||(i.eventsListeners[o]=[]),i.eventsListeners[o][r](e)}),i},once(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(...o){i.off(t,r),r.__emitterProxy&&delete r.__emitterProxy,e.apply(i,o)}return r.__emitterProxy=e,i.on(t,r,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(i=>{typeof e>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((r,o)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&n.eventsListeners[i].splice(o,1)})}),n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let n,i,r;return typeof t[0]=="string"||Array.isArray(t[0])?(n=t[0],i=t.slice(1,t.length),r=e):(n=t[0].events,i=t[0].data,r=t[0].context||e),i.unshift(r),(Array.isArray(n)?n:n.split(" ")).forEach(a=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(u=>{u.apply(r,[a,...i])}),e.eventsListeners&&e.eventsListeners[a]&&e.eventsListeners[a].forEach(u=>{u.apply(r,i)})}),e}};function PZ(){const t=this;let e,n;const i=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=i.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=i.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(Yo(i,"padding-left")||0,10)-parseInt(Yo(i,"padding-right")||0,10),n=n-parseInt(Yo(i,"padding-top")||0,10)-parseInt(Yo(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function RZ(){const t=this;function e(O){return t.isHorizontal()?O:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[O]}function n(O,U){return parseFloat(O.getPropertyValue(e(U))||0)}const i=t.params,{wrapperEl:r,slidesEl:o,size:a,rtlTranslate:u,wrongRTL:c}=t,h=t.virtual&&i.virtual.enabled,m=h?t.virtual.slides.length:t.slides.length,g=Ws(o,`.${t.params.slideClass}, swiper-slide`),_=h?t.virtual.slides.length:g.length;let T=[];const P=[],E=[];let R=i.slidesOffsetBefore;typeof R=="function"&&(R=i.slidesOffsetBefore.call(t));let S=i.slidesOffsetAfter;typeof S=="function"&&(S=i.slidesOffsetAfter.call(t));const b=t.snapGrid.length,k=t.slidesGrid.length;let F=i.spaceBetween,j=-R,B=0,N=0;if(typeof a>"u")return;typeof F=="string"&&F.indexOf("%")>=0?F=parseFloat(F.replace("%",""))/100*a:typeof F=="string"&&(F=parseFloat(F)),t.virtualSize=-F,g.forEach(O=>{u?O.style.marginLeft="":O.style.marginRight="",O.style.marginBottom="",O.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(Bv(r,"--swiper-centered-offset-before",""),Bv(r,"--swiper-centered-offset-after",""));const C=i.grid&&i.grid.rows>1&&t.grid;C&&t.grid.initSlides(_);let L;const V=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(O=>typeof i.breakpoints[O].slidesPerView<"u").length>0;for(let O=0;O<_;O+=1){L=0;let U;if(g[O]&&(U=g[O]),C&&t.grid.updateSlide(O,U,_,e),!(g[O]&&Yo(U,"display")==="none")){if(i.slidesPerView==="auto"){V&&(g[O].style[e("width")]="");const D=getComputedStyle(U),Ge=U.style.transform,Re=U.style.webkitTransform;if(Ge&&(U.style.transform="none"),Re&&(U.style.webkitTransform="none"),i.roundLengths)L=t.isHorizontal()?ZN(U,"width"):ZN(U,"height");else{const _e=n(D,"width"),rt=n(D,"padding-left"),se=n(D,"padding-right"),ue=n(D,"margin-left"),he=n(D,"margin-right"),Xe=D.getPropertyValue("box-sizing");if(Xe&&Xe==="border-box")L=_e+ue+he;else{const{clientWidth:Be,offsetWidth:ct}=U;L=_e+rt+se+ue+he+(ct-Be)}}Ge&&(U.style.transform=Ge),Re&&(U.style.webkitTransform=Re),i.roundLengths&&(L=Math.floor(L))}else L=(a-(i.slidesPerView-1)*F)/i.slidesPerView,i.roundLengths&&(L=Math.floor(L)),g[O]&&(g[O].style[e("width")]=`${L}px`);g[O]&&(g[O].swiperSlideSize=L),E.push(L),i.centeredSlides?(j=j+L/2+B/2+F,B===0&&O!==0&&(j=j-a/2-F),O===0&&(j=j-a/2-F),Math.abs(j)<1/1e3&&(j=0),i.roundLengths&&(j=Math.floor(j)),N%i.slidesPerGroup===0&&T.push(j),P.push(j)):(i.roundLengths&&(j=Math.floor(j)),(N-Math.min(t.params.slidesPerGroupSkip,N))%t.params.slidesPerGroup===0&&T.push(j),P.push(j),j=j+L+F),t.virtualSize+=L+F,B=L,N+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+S,u&&c&&(i.effect==="slide"||i.effect==="coverflow")&&(r.style.width=`${t.virtualSize+F}px`),i.setWrapperSize&&(r.style[e("width")]=`${t.virtualSize+F}px`),C&&t.grid.updateWrapperSize(L,T,e),!i.centeredSlides){const O=[];for(let U=0;U<T.length;U+=1){let D=T[U];i.roundLengths&&(D=Math.floor(D)),T[U]<=t.virtualSize-a&&O.push(D)}T=O,Math.floor(t.virtualSize-a)-Math.floor(T[T.length-1])>1&&T.push(t.virtualSize-a)}if(h&&i.loop){const O=E[0]+F;if(i.slidesPerGroup>1){const U=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/i.slidesPerGroup),D=O*i.slidesPerGroup;for(let Ge=0;Ge<U;Ge+=1)T.push(T[T.length-1]+D)}for(let U=0;U<t.virtual.slidesBefore+t.virtual.slidesAfter;U+=1)i.slidesPerGroup===1&&T.push(T[T.length-1]+O),P.push(P[P.length-1]+O),t.virtualSize+=O}if(T.length===0&&(T=[0]),F!==0){const O=t.isHorizontal()&&u?"marginLeft":e("marginRight");g.filter((U,D)=>!i.cssMode||i.loop?!0:D!==g.length-1).forEach(U=>{U.style[O]=`${F}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let O=0;E.forEach(D=>{O+=D+(F||0)}),O-=F;const U=O-a;T=T.map(D=>D<=0?-R:D>U?U+S:D)}if(i.centerInsufficientSlides){let O=0;if(E.forEach(U=>{O+=U+(F||0)}),O-=F,O<a){const U=(a-O)/2;T.forEach((D,Ge)=>{T[Ge]=D-U}),P.forEach((D,Ge)=>{P[Ge]=D+U})}}if(Object.assign(t,{slides:g,snapGrid:T,slidesGrid:P,slidesSizesGrid:E}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){Bv(r,"--swiper-centered-offset-before",`${-T[0]}px`),Bv(r,"--swiper-centered-offset-after",`${t.size/2-E[E.length-1]/2}px`);const O=-t.snapGrid[0],U=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(D=>D+O),t.slidesGrid=t.slidesGrid.map(D=>D+U)}if(_!==m&&t.emit("slidesLengthChange"),T.length!==b&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),P.length!==k&&t.emit("slidesGridLengthChange"),i.watchSlidesProgress&&t.updateSlidesOffset(),!h&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const O=`${i.containerModifierClass}backface-hidden`,U=t.el.classList.contains(O);_<=i.maxBackfaceHiddenSlides?U||t.el.classList.add(O):U&&t.el.classList.remove(O)}}function kZ(t){const e=this,n=[],i=e.virtual&&e.params.virtual.enabled;let r=0,o;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const a=u=>i?e.slides[e.getSlideIndexByData(u)]:e.slides[u];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(u=>{n.push(u)});else for(o=0;o<Math.ceil(e.params.slidesPerView);o+=1){const u=e.activeIndex+o;if(u>e.slides.length&&!i)break;n.push(a(u))}else n.push(a(e.activeIndex));for(o=0;o<n.length;o+=1)if(typeof n[o]<"u"){const u=n[o].offsetHeight;r=u>r?u:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function xZ(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(t.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-n-t.cssOverflowAdjustment()}function NZ(t=this&&this.translate||0){const e=this,n=e.params,{slides:i,rtlTranslate:r,snapGrid:o}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-t;r&&(a=t),i.forEach(c=>{c.classList.remove(n.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let u=n.spaceBetween;typeof u=="string"&&u.indexOf("%")>=0?u=parseFloat(u.replace("%",""))/100*e.size:typeof u=="string"&&(u=parseFloat(u));for(let c=0;c<i.length;c+=1){const h=i[c];let m=h.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(m-=i[0].swiperSlideOffset);const g=(a+(n.centeredSlides?e.minTranslate():0)-m)/(h.swiperSlideSize+u),_=(a-o[0]+(n.centeredSlides?e.minTranslate():0)-m)/(h.swiperSlideSize+u),T=-(a-m),P=T+e.slidesSizesGrid[c];(T>=0&&T<e.size-1||P>1&&P<=e.size||T<=0&&P>=e.size)&&(e.visibleSlides.push(h),e.visibleSlidesIndexes.push(c),i[c].classList.add(n.slideVisibleClass)),h.progress=r?-g:g,h.originalProgress=r?-_:_}}function DZ(t){const e=this;if(typeof t>"u"){const m=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*m||0}const n=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:o,isEnd:a,progressLoop:u}=e;const c=o,h=a;if(i===0)r=0,o=!0,a=!0;else{r=(t-e.minTranslate())/i;const m=Math.abs(t-e.minTranslate())<1,g=Math.abs(t-e.maxTranslate())<1;o=m||r<=0,a=g||r>=1,m&&(r=0),g&&(r=1)}if(n.loop){const m=e.getSlideIndexByData(0),g=e.getSlideIndexByData(e.slides.length-1),_=e.slidesGrid[m],T=e.slidesGrid[g],P=e.slidesGrid[e.slidesGrid.length-1],E=Math.abs(t);E>=_?u=(E-_)/P:u=(E+P-T)/P,u>1&&(u-=1)}Object.assign(e,{progress:r,progressLoop:u,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),o&&!c&&e.emit("reachBeginning toEdge"),a&&!h&&e.emit("reachEnd toEdge"),(c&&!o||h&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}function OZ(){const t=this,{slides:e,params:n,slidesEl:i,activeIndex:r}=t,o=t.virtual&&n.virtual.enabled,a=c=>Ws(i,`.${n.slideClass}${c}, swiper-slide${c}`)[0];e.forEach(c=>{c.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)});let u;if(o)if(n.loop){let c=r-t.virtual.slidesBefore;c<0&&(c=t.virtual.slides.length+c),c>=t.virtual.slides.length&&(c-=t.virtual.slides.length),u=a(`[data-swiper-slide-index="${c}"]`)}else u=a(`[data-swiper-slide-index="${r}"]`);else u=e[r];if(u){u.classList.add(n.slideActiveClass);let c=yZ(u,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!c&&(c=e[0]),c&&c.classList.add(n.slideNextClass);let h=vZ(u,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!h===0&&(h=e[e.length-1]),h&&h.classList.add(n.slidePrevClass)}t.emitSlidesClasses()}const gy=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,i=e.closest(n());if(i){const r=i.querySelector(`.${t.params.lazyPreloaderClass}`);r&&r.remove()}},fI=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},pT=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const i=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),r=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const a=r,u=[a-e];u.push(...Array.from({length:e}).map((c,h)=>a+i+h)),t.slides.forEach((c,h)=>{u.includes(c.column)&&fI(t,h)});return}const o=r+i-1;if(t.params.rewind||t.params.loop)for(let a=r-e;a<=o+e;a+=1){const u=(a%n+n)%n;(u<r||u>o)&&fI(t,u)}else for(let a=Math.max(r-e,0);a<=Math.min(o+e,n-1);a+=1)a!==r&&(a>o||a<r)&&fI(t,a)};function LZ(t){const{slidesGrid:e,params:n}=t,i=t.rtlTranslate?t.translate:-t.translate;let r;for(let o=0;o<e.length;o+=1)typeof e[o+1]<"u"?i>=e[o]&&i<e[o+1]-(e[o+1]-e[o])/2?r=o:i>=e[o]&&i<e[o+1]&&(r=o+1):i>=e[o]&&(r=o);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function MZ(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:o,realIndex:a,snapIndex:u}=e;let c=t,h;const m=_=>{let T=_-e.virtual.slidesBefore;return T<0&&(T=e.virtual.slides.length+T),T>=e.virtual.slides.length&&(T-=e.virtual.slides.length),T};if(typeof c>"u"&&(c=LZ(e)),i.indexOf(n)>=0)h=i.indexOf(n);else{const _=Math.min(r.slidesPerGroupSkip,c);h=_+Math.floor((c-_)/r.slidesPerGroup)}if(h>=i.length&&(h=i.length-1),c===o){h!==u&&(e.snapIndex=h,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=m(c));return}let g;e.virtual&&r.virtual.enabled&&r.loop?g=m(c):e.slides[c]?g=parseInt(e.slides[c].getAttribute("data-swiper-slide-index")||c,10):g=c,Object.assign(e,{previousSnapIndex:u,snapIndex:h,previousRealIndex:a,realIndex:g,previousIndex:o,activeIndex:c}),e.initialized&&pT(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),a!==g&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function VZ(t){const e=this,n=e.params,i=t.closest(`.${n.slideClass}, swiper-slide`);let r=!1,o;if(i){for(let a=0;a<e.slides.length;a+=1)if(e.slides[a]===i){r=!0,o=a;break}}if(i&&r)e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=o;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const FZ={updateSize:PZ,updateSlides:RZ,updateAutoHeight:kZ,updateSlidesOffset:xZ,updateSlidesProgress:NZ,updateProgress:DZ,updateSlidesClasses:OZ,updateActiveIndex:MZ,updateClickedSlide:VZ};function UZ(t=this.isHorizontal()?"x":"y"){const e=this,{params:n,rtlTranslate:i,translate:r,wrapperEl:o}=e;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;let a=pZ(o,t);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function BZ(t,e){const n=this,{rtlTranslate:i,params:r,wrapperEl:o,progress:a}=n;let u=0,c=0;const h=0;n.isHorizontal()?u=i?-t:t:c=t,r.roundLengths&&(u=Math.floor(u),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:c,r.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-c:r.virtualTranslate||(n.isHorizontal()?u-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),o.style.transform=`translate3d(${u}px, ${c}px, ${h}px)`);let m;const g=n.maxTranslate()-n.minTranslate();g===0?m=0:m=(t-n.minTranslate())/g,m!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function jZ(){return-this.snapGrid[0]}function zZ(){return-this.snapGrid[this.snapGrid.length-1]}function GZ(t=0,e=this.params.speed,n=!0,i=!0,r){const o=this,{params:a,wrapperEl:u}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;const c=o.minTranslate(),h=o.maxTranslate();let m;if(i&&t>c?m=c:i&&t<h?m=h:m=t,o.updateProgress(m),a.cssMode){const g=o.isHorizontal();if(e===0)u[g?"scrollLeft":"scrollTop"]=-m;else{if(!o.support.smoothScroll)return oU({swiper:o,targetPosition:-m,side:g?"left":"top"}),!0;u.scrollTo({[g?"left":"top"]:-m,behavior:"smooth"})}return!0}return e===0?(o.setTransition(0),o.setTranslate(m),n&&(o.emit("beforeTransitionStart",e,r),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(m),n&&(o.emit("beforeTransitionStart",e,r),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(_){!o||o.destroyed||_.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}const qZ={getTranslate:UZ,setTranslate:BZ,minTranslate:jZ,maxTranslate:zZ,translateTo:GZ};function $Z(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`),n.emit("setTransition",t,e)}function lU({swiper:t,runCallbacks:e,direction:n,step:i}){const{activeIndex:r,previousIndex:o}=t;let a=n;if(a||(r>o?a="next":r<o?a="prev":a="reset"),t.emit(`transition${i}`),e&&r!==o){if(a==="reset"){t.emit(`slideResetTransition${i}`);return}t.emit(`slideChangeTransition${i}`),a==="next"?t.emit(`slideNextTransition${i}`):t.emit(`slidePrevTransition${i}`)}}function WZ(t=!0,e){const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),lU({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function HZ(t=!0,e){const n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),lU({swiper:n,runCallbacks:t,direction:e,step:"End"}))}const KZ={setTransition:$Z,transitionStart:WZ,transitionEnd:HZ};function QZ(t=0,e=this.params.speed,n=!0,i,r){typeof t=="string"&&(t=parseInt(t,10));const o=this;let a=t;a<0&&(a=0);const{params:u,snapGrid:c,slidesGrid:h,previousIndex:m,activeIndex:g,rtlTranslate:_,wrapperEl:T,enabled:P}=o;if(o.animating&&u.preventInteractionOnTransition||!P&&!i&&!r)return!1;const E=Math.min(o.params.slidesPerGroupSkip,a);let R=E+Math.floor((a-E)/o.params.slidesPerGroup);R>=c.length&&(R=c.length-1);const S=-c[R];if(u.normalizeSlideIndex)for(let k=0;k<h.length;k+=1){const F=-Math.floor(S*100),j=Math.floor(h[k]*100),B=Math.floor(h[k+1]*100);typeof h[k+1]<"u"?F>=j&&F<B-(B-j)/2?a=k:F>=j&&F<B&&(a=k+1):F>=j&&(a=k)}if(o.initialized&&a!==g&&(!o.allowSlideNext&&(_?S>o.translate&&S>o.minTranslate():S<o.translate&&S<o.minTranslate())||!o.allowSlidePrev&&S>o.translate&&S>o.maxTranslate()&&(g||0)!==a))return!1;a!==(m||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(S);let b;if(a>g?b="next":a<g?b="prev":b="reset",_&&-S===o.translate||!_&&S===o.translate)return o.updateActiveIndex(a),u.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),u.effect!=="slide"&&o.setTranslate(S),b!=="reset"&&(o.transitionStart(n,b),o.transitionEnd(n,b)),!1;if(u.cssMode){const k=o.isHorizontal(),F=_?S:-S;if(e===0){const j=o.virtual&&o.params.virtual.enabled;j&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),j&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{T[k?"scrollLeft":"scrollTop"]=F})):T[k?"scrollLeft":"scrollTop"]=F,j&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1})}else{if(!o.support.smoothScroll)return oU({swiper:o,targetPosition:F,side:k?"left":"top"}),!0;T.scrollTo({[k?"left":"top"]:F,behavior:"smooth"})}return!0}return o.setTransition(e),o.setTranslate(S),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,i),o.transitionStart(n,b),e===0?o.transitionEnd(n,b):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(F){!o||o.destroyed||F.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,b))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function YZ(t=0,e=this.params.speed,n=!0,i){typeof t=="string"&&(t=parseInt(t,10));const r=this;let o=t;return r.params.loop&&(r.virtual&&r.params.virtual.enabled?o=o+r.virtual.slidesBefore:o=r.getSlideIndexByData(o)),r.slideTo(o,e,n,i)}function JZ(t=this.params.speed,e=!0,n){const i=this,{enabled:r,params:o,animating:a}=i;if(!r)return i;let u=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(u=Math.max(i.slidesPerViewDynamic("current",!0),1));const c=i.activeIndex<o.slidesPerGroupSkip?1:u,h=i.virtual&&o.virtual.enabled;if(o.loop){if(a&&!h&&o.loopPreventsSliding)return!1;i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft}return o.rewind&&i.isEnd?i.slideTo(0,t,e,n):i.slideTo(i.activeIndex+c,t,e,n)}function XZ(t=this.params.speed,e=!0,n){const i=this,{params:r,snapGrid:o,slidesGrid:a,rtlTranslate:u,enabled:c,animating:h}=i;if(!c)return i;const m=i.virtual&&r.virtual.enabled;if(r.loop){if(h&&!m&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const g=u?i.translate:-i.translate;function _(S){return S<0?-Math.floor(Math.abs(S)):Math.floor(S)}const T=_(g),P=o.map(S=>_(S));let E=o[P.indexOf(T)-1];if(typeof E>"u"&&r.cssMode){let S;o.forEach((b,k)=>{T>=b&&(S=k)}),typeof S<"u"&&(E=o[S>0?S-1:S])}let R=0;if(typeof E<"u"&&(R=a.indexOf(E),R<0&&(R=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(R=R-i.slidesPerViewDynamic("previous",!0)+1,R=Math.max(R,0))),r.rewind&&i.isBeginning){const S=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(S,t,e,n)}return i.slideTo(R,t,e,n)}function ZZ(t=this.params.speed,e=!0,n){const i=this;return i.slideTo(i.activeIndex,t,e,n)}function eee(t=this.params.speed,e=!0,n,i=.5){const r=this;let o=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,o),u=a+Math.floor((o-a)/r.params.slidesPerGroup),c=r.rtlTranslate?r.translate:-r.translate;if(c>=r.snapGrid[u]){const h=r.snapGrid[u],m=r.snapGrid[u+1];c-h>(m-h)*i&&(o+=r.params.slidesPerGroup)}else{const h=r.snapGrid[u-1],m=r.snapGrid[u];c-h<=(m-h)*i&&(o-=r.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,r.slidesGrid.length-1),r.slideTo(o,t,e,n)}function tee(){const t=this,{params:e,slidesEl:n}=t,i=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let r=t.clickedIndex,o;const a=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;o=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<t.loopedSlides-i/2||r>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),r=t.getSlideIndex(Ws(n,`${a}[data-swiper-slide-index="${o}"]`)[0]),fT(()=>{t.slideTo(r)})):t.slideTo(r):r>t.slides.length-i?(t.loopFix(),r=t.getSlideIndex(Ws(n,`${a}[data-swiper-slide-index="${o}"]`)[0]),fT(()=>{t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}const nee={slideTo:QZ,slideToLoop:YZ,slideNext:JZ,slidePrev:XZ,slideReset:ZZ,slideToClosest:eee,slideToClickedSlide:tee};function iee(t){const e=this,{params:n,slidesEl:i}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;Ws(i,`.${n.slideClass}, swiper-slide`).forEach((o,a)=>{o.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function ree({slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:i,activeSlideIndex:r,byController:o,byMousewheel:a}={}){const u=this;if(!u.params.loop)return;u.emit("beforeLoopFix");const{slides:c,allowSlidePrev:h,allowSlideNext:m,slidesEl:g,params:_}=u;if(u.allowSlidePrev=!0,u.allowSlideNext=!0,u.virtual&&_.virtual.enabled){e&&(!_.centeredSlides&&u.snapIndex===0?u.slideTo(u.virtual.slides.length,0,!1,!0):_.centeredSlides&&u.snapIndex<_.slidesPerView?u.slideTo(u.virtual.slides.length+u.snapIndex,0,!1,!0):u.snapIndex===u.snapGrid.length-1&&u.slideTo(u.virtual.slidesBefore,0,!1,!0)),u.allowSlidePrev=h,u.allowSlideNext=m,u.emit("loopFix");return}const T=_.slidesPerView==="auto"?u.slidesPerViewDynamic():Math.ceil(parseFloat(_.slidesPerView,10));let P=_.loopedSlides||T;P%_.slidesPerGroup!==0&&(P+=_.slidesPerGroup-P%_.slidesPerGroup),u.loopedSlides=P;const E=[],R=[];let S=u.activeIndex;typeof r>"u"?r=u.getSlideIndex(u.slides.filter(B=>B.classList.contains(_.slideActiveClass))[0]):S=r;const b=n==="next"||!n,k=n==="prev"||!n;let F=0,j=0;if(r<P){F=Math.max(P-r,_.slidesPerGroup);for(let B=0;B<P-r;B+=1){const N=B-Math.floor(B/c.length)*c.length;E.push(c.length-N-1)}}else if(r>u.slides.length-P*2){j=Math.max(r-(u.slides.length-P*2),_.slidesPerGroup);for(let B=0;B<j;B+=1){const N=B-Math.floor(B/c.length)*c.length;R.push(N)}}if(k&&E.forEach(B=>{u.slides[B].swiperLoopMoveDOM=!0,g.prepend(u.slides[B]),u.slides[B].swiperLoopMoveDOM=!1}),b&&R.forEach(B=>{u.slides[B].swiperLoopMoveDOM=!0,g.append(u.slides[B]),u.slides[B].swiperLoopMoveDOM=!1}),u.recalcSlides(),_.slidesPerView==="auto"&&u.updateSlides(),_.watchSlidesProgress&&u.updateSlidesOffset(),e){if(E.length>0&&k)if(typeof t>"u"){const B=u.slidesGrid[S],C=u.slidesGrid[S+F]-B;a?u.setTranslate(u.translate-C):(u.slideTo(S+F,0,!1,!0),i&&(u.touches[u.isHorizontal()?"startX":"startY"]+=C))}else i&&u.slideToLoop(t,0,!1,!0);else if(R.length>0&&b)if(typeof t>"u"){const B=u.slidesGrid[S],C=u.slidesGrid[S-j]-B;a?u.setTranslate(u.translate-C):(u.slideTo(S-j,0,!1,!0),i&&(u.touches[u.isHorizontal()?"startX":"startY"]+=C))}else u.slideToLoop(t,0,!1,!0)}if(u.allowSlidePrev=h,u.allowSlideNext=m,u.controller&&u.controller.control&&!o){const B={slideRealIndex:t,slideTo:!1,direction:n,setTranslate:i,activeSlideIndex:r,byController:!0};Array.isArray(u.controller.control)?u.controller.control.forEach(N=>{!N.destroyed&&N.params.loop&&N.loopFix(B)}):u.controller.control instanceof u.constructor&&u.controller.control.params.loop&&u.controller.control.loopFix(B)}u.emit("loopFix")}function see(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];t.slides.forEach(r=>{const o=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[o]=r}),t.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{n.append(r)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}const oee={loopCreate:iee,loopFix:ree,loopDestroy:see};function aee(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function lee(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}const uee={setGrabCursor:aee,unsetGrabCursor:lee};function cee(t,e=this){function n(i){if(!i||i===lu()||i===$i())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(t);return!r&&!i.getRootNode?null:r||n(i.getRootNode().host)}return n(e)}function dee(t){const e=this,n=lu(),i=$i(),r=e.touchEventsData;r.evCache.push(t);const{params:o,touches:a,enabled:u}=e;if(!u||!o.simulateTouch&&t.pointerType==="mouse"||e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let c=t;c.originalEvent&&(c=c.originalEvent);let h=c.target;if(o.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(h)||"which"in c&&c.which===3||"button"in c&&c.button>0||r.isTouched&&r.isMoved)return;const m=!!o.noSwipingClass&&o.noSwipingClass!=="",g=t.composedPath?t.composedPath():t.path;m&&c.target&&c.target.shadowRoot&&g&&(h=g[0]);const _=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,T=!!(c.target&&c.target.shadowRoot);if(o.noSwiping&&(T?cee(_,h):h.closest(_))){e.allowClick=!0;return}if(o.swipeHandler&&!h.closest(o.swipeHandler))return;a.currentX=c.pageX,a.currentY=c.pageY;const P=a.currentX,E=a.currentY,R=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,S=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(R&&(P<=S||P>=i.innerWidth-S))if(R==="prevent")t.preventDefault();else return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=P,a.startY=E,r.touchStartTime=S_(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(r.allowThresholdMove=!1);let b=!0;h.matches(r.focusableElements)&&(b=!1,h.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==h&&n.activeElement.blur();const k=b&&e.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||k)&&!h.isContentEditable&&c.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",c)}function hee(t){const e=lu(),n=this,i=n.touchEventsData,{params:r,touches:o,rtlTranslate:a,enabled:u}=n;if(!u||!r.simulateTouch&&t.pointerType==="mouse")return;let c=t;if(c.originalEvent&&(c=c.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",c);return}const h=i.evCache.findIndex(B=>B.pointerId===c.pointerId);h>=0&&(i.evCache[h]=c);const m=i.evCache.length>1?i.evCache[0]:c,g=m.pageX,_=m.pageY;if(c.preventedByNestedSwiper){o.startX=g,o.startY=_;return}if(!n.allowTouchMove){c.target.matches(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(o,{startX:g,startY:_,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:g,currentY:_}),i.touchStartTime=S_());return}if(r.touchReleaseOnEdges&&!r.loop){if(n.isVertical()){if(_<o.startY&&n.translate<=n.maxTranslate()||_>o.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(g<o.startX&&n.translate<=n.maxTranslate()||g>o.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&c.target===e.activeElement&&c.target.matches(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}if(i.allowTouchCallbacks&&n.emit("touchMove",c),c.targetTouches&&c.targetTouches.length>1)return;o.currentX=g,o.currentY=_;const T=o.currentX-o.startX,P=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(T**2+P**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let B;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?i.isScrolling=!1:T*T+P*P>=25&&(B=Math.atan2(Math.abs(P),Math.abs(T))*180/Math.PI,i.isScrolling=n.isHorizontal()?B>r.touchAngle:90-B>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",c),typeof i.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(i.startMoving=!0),i.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&i.evCache.length>1){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation();let E=n.isHorizontal()?T:P,R=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;r.oneWayMovement&&(E=Math.abs(E)*(a?1:-1),R=Math.abs(R)*(a?1:-1)),o.diff=E,E*=r.touchRatio,a&&(E=-E,R=-R);const S=n.touchesDirection;n.swipeDirection=E>0?"prev":"next",n.touchesDirection=R>0?"prev":"next";const b=n.params.loop&&!r.cssMode;if(!i.isMoved){if(b&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const B=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(B)}i.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}let k;i.isMoved&&S!==n.touchesDirection&&b&&Math.abs(E)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),k=!0),n.emit("sliderMove",c),i.isMoved=!0,i.currentTranslate=E+i.startTranslate;let F=!0,j=r.resistanceRatio;if(r.touchReleaseOnEdges&&(j=0),E>0?(b&&!k&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(F=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+E)**j))):E<0&&(b&&!k&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(F=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-E)**j))),F&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(E)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,i.currentTranslate=i.startTranslate,o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function fee(t){const e=this,n=e.touchEventsData,i=n.evCache.findIndex(k=>k.pointerId===t.pointerId);if(i>=0&&n.evCache.splice(i,1),["pointercancel","pointerout","pointerleave"].includes(t.type)&&!(t.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:r,touches:o,rtlTranslate:a,slidesGrid:u,enabled:c}=e;if(!c||!r.simulateTouch&&t.pointerType==="mouse")return;let h=t;if(h.originalEvent&&(h=h.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",h),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&r.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}r.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const m=S_(),g=m-n.touchStartTime;if(e.allowClick){const k=h.path||h.composedPath&&h.composedPath();e.updateClickedSlide(k&&k[0]||h.target),e.emit("tap click",h),g<300&&m-n.lastClickTime<300&&e.emit("doubleTap doubleClick",h)}if(n.lastClickTime=S_(),fT(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||o.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let _;if(r.followFinger?_=a?e.translate:-e.translate:_=-n.currentTranslate,r.cssMode)return;if(r.freeMode&&r.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:_});return}let T=0,P=e.slidesSizesGrid[0];for(let k=0;k<u.length;k+=k<r.slidesPerGroupSkip?1:r.slidesPerGroup){const F=k<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;typeof u[k+F]<"u"?_>=u[k]&&_<u[k+F]&&(T=k,P=u[k+F]-u[k]):_>=u[k]&&(T=k,P=u[u.length-1]-u[u.length-2])}let E=null,R=null;r.rewind&&(e.isBeginning?R=r.virtual&&r.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(E=0));const S=(_-u[T])/P,b=T<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(g>r.longSwipesMs){if(!r.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(S>=r.longSwipesRatio?e.slideTo(r.rewind&&e.isEnd?E:T+b):e.slideTo(T)),e.swipeDirection==="prev"&&(S>1-r.longSwipesRatio?e.slideTo(T+b):R!==null&&S<0&&Math.abs(S)>r.longSwipesRatio?e.slideTo(R):e.slideTo(T))}else{if(!r.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(h.target===e.navigation.nextEl||h.target===e.navigation.prevEl)?h.target===e.navigation.nextEl?e.slideTo(T+b):e.slideTo(T):(e.swipeDirection==="next"&&e.slideTo(E!==null?E:T+b),e.swipeDirection==="prev"&&e.slideTo(R!==null?R:T))}}function eD(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:o}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const u=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!u?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=r,t.allowSlideNext=i,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}function pee(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function mee(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:i}=t;if(!i)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let r;const o=t.maxTranslate()-t.minTranslate();o===0?r=0:r=(t.translate-t.minTranslate())/o,r!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function gee(t){const e=this;gy(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let tD=!1;function vee(){}const uU=(t,e)=>{const n=lu(),{params:i,el:r,wrapperEl:o,device:a}=t,u=!!i.nested,c=e==="on"?"addEventListener":"removeEventListener",h=e;r[c]("pointerdown",t.onTouchStart,{passive:!1}),n[c]("pointermove",t.onTouchMove,{passive:!1,capture:u}),n[c]("pointerup",t.onTouchEnd,{passive:!0}),n[c]("pointercancel",t.onTouchEnd,{passive:!0}),n[c]("pointerout",t.onTouchEnd,{passive:!0}),n[c]("pointerleave",t.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[c]("click",t.onClick,!0),i.cssMode&&o[c]("scroll",t.onScroll),i.updateOnWindowResize?t[h](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",eD,!0):t[h]("observerUpdate",eD,!0),r[c]("load",t.onLoad,{capture:!0})};function yee(){const t=this,e=lu(),{params:n}=t;t.onTouchStart=dee.bind(t),t.onTouchMove=hee.bind(t),t.onTouchEnd=fee.bind(t),n.cssMode&&(t.onScroll=mee.bind(t)),t.onClick=pee.bind(t),t.onLoad=gee.bind(t),tD||(e.addEventListener("touchstart",vee),tD=!0),uU(t,"on")}function _ee(){uU(this,"off")}const wee={attachEvents:yee,detachEvents:_ee},nD=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function Eee(){const t=this,{realIndex:e,initialized:n,params:i,el:r}=t,o=i.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const a=t.getBreakpoint(o,t.params.breakpointsBase,t.el);if(!a||t.currentBreakpoint===a)return;const c=(a in o?o[a]:void 0)||t.originalParams,h=nD(t,i),m=nD(t,c),g=i.enabled;h&&!m?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!h&&m&&(r.classList.add(`${i.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(E=>{if(typeof c[E]>"u")return;const R=i[E]&&i[E].enabled,S=c[E]&&c[E].enabled;R&&!S&&t[E].disable(),!R&&S&&t[E].enable()});const _=c.direction&&c.direction!==i.direction,T=i.loop&&(c.slidesPerView!==i.slidesPerView||_);_&&n&&t.changeDirection(),Li(t.params,c);const P=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),g&&!P?t.disable():!g&&P&&t.enable(),t.currentBreakpoint=a,t.emit("_beforeBreakpoint",c),T&&n&&(t.loopDestroy(),t.loopCreate(e),t.updateSlides()),t.emit("breakpoint",c)}function Iee(t,e="window",n){if(!t||e==="container"&&!n)return;let i=!1;const r=$i(),o=e==="window"?r.innerHeight:n.clientHeight,a=Object.keys(t).map(u=>{if(typeof u=="string"&&u.indexOf("@")===0){const c=parseFloat(u.substr(1));return{value:o*c,point:u}}return{value:u,point:u}});a.sort((u,c)=>parseInt(u.value,10)-parseInt(c.value,10));for(let u=0;u<a.length;u+=1){const{point:c,value:h}=a[u];e==="window"?r.matchMedia(`(min-width: ${h}px)`).matches&&(i=c):h<=n.clientWidth&&(i=c)}return i||"max"}const Tee={setBreakpoint:Eee,getBreakpoint:Iee};function See(t,e){const n=[];return t.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&n.push(e+r)}):typeof i=="string"&&n.push(e+i)}),n}function bee(){const t=this,{classNames:e,params:n,rtl:i,el:r,device:o}=t,a=See(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...a),r.classList.add(...e),t.emitContainerClasses()}function Cee(){const t=this,{el:e,classNames:n}=t;e.classList.remove(...n),t.emitContainerClasses()}const Aee={addClasses:bee,removeClasses:Cee};function Pee(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:i}=n;if(i){const r=t.slides.length-1,o=t.slidesGrid[r]+t.slidesSizesGrid[r]+i*2;t.isLocked=t.size>o}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}const Ree={checkOverflow:Pee},iD={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function kee(t,e){return function(i={}){const r=Object.keys(i)[0],o=i[r];if(typeof o!="object"||o===null){Li(e,i);return}if(["navigation","pagination","scrollbar"].indexOf(r)>=0&&t[r]===!0&&(t[r]={auto:!0}),!(r in t&&"enabled"in o)){Li(e,i);return}t[r]===!0&&(t[r]={enabled:!0}),typeof t[r]=="object"&&!("enabled"in t[r])&&(t[r].enabled=!0),t[r]||(t[r]={enabled:!1}),Li(e,i)}}const pI={eventsEmitter:AZ,update:FZ,translate:qZ,transition:KZ,slide:nee,loop:oee,grabCursor:uee,events:wee,breakpoints:Tee,checkOverflow:Ree,classes:Aee},mI={};let hm=class Vs{constructor(...e){let n,i;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?i=e[0]:[n,i]=e,i||(i={}),i=Li({},i),n&&!i.el&&(i.el=n);const r=lu();if(i.el&&typeof i.el=="string"&&r.querySelectorAll(i.el).length>1){const c=[];return r.querySelectorAll(i.el).forEach(h=>{const m=Li({},i,{el:h});c.push(new Vs(m))}),c}const o=this;o.__swiper__=!0,o.support=aU(),o.device=IZ({userAgent:i.userAgent}),o.browser=SZ(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],i.modules&&Array.isArray(i.modules)&&o.modules.push(...i.modules);const a={};o.modules.forEach(c=>{c({params:i,swiper:o,extendParams:kee(i,a),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const u=Li({},iD,a);return o.params=Li({},u,mI,i),o.originalParams=Li({},o.params),o.passedParams=Li({},i),o.params&&o.params.on&&Object.keys(o.params.on).forEach(c=>{o.on(c,o.params.on[c])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:n,params:i}=this,r=Ws(n,`.${i.slideClass}, swiper-slide`),o=XN(r[0]);return XN(e)-o}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:n,params:i}=e;e.slides=Ws(n,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),a=(i.maxTranslate()-r)*e+r;i.translateTo(a,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);n.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e="current",n=!1){const i=this,{params:r,slides:o,slidesGrid:a,slidesSizesGrid:u,size:c,activeIndex:h}=i;let m=1;if(r.centeredSlides){let g=o[h]?o[h].swiperSlideSize:0,_;for(let T=h+1;T<o.length;T+=1)o[T]&&!_&&(g+=o[T].swiperSlideSize,m+=1,g>c&&(_=!0));for(let T=h-1;T>=0;T-=1)o[T]&&!_&&(g+=o[T].swiperSlideSize,m+=1,g>c&&(_=!0))}else if(e==="current")for(let g=h+1;g<o.length;g+=1)(n?a[g]+u[g]-a[h]<c:a[g]-a[h]<c)&&(m+=1);else for(let g=h-1;g>=0;g-=1)a[h]-a[g]<c&&(m+=1);return m}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&gy(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,u=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(u),e.updateActiveIndex(),e.updateSlidesClasses()}let o;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;o=e.slideTo(a.length-1,0,!1,!0)}else o=e.slideTo(e.activeIndex,0,!1,!0);o||r()}i.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n=!0){const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(o=>{e==="vertical"?o.style.width="":o.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let i=e||n.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=n,i.shadowEl&&(n.isElement=!0);const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):Ws(i,r())[0];return!a&&n.params.createElements&&(a=gZ("div",n.params.wrapperClass),i.append(a),Ws(i,`.${n.params.slideClass}`).forEach(u=>{a.append(u)})),Object.assign(n,{el:i,wrapperEl:a,slidesEl:n.isElement?i:a,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Yo(i,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Yo(i,"direction")==="rtl"),wrongRTL:Yo(a,"display")==="-webkit-box"}),!0}init(e){const n=this;return n.initialized||n.mount(e)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents(),[...n.el.querySelectorAll('[loading="lazy"]')].forEach(r=>{r.complete?gy(n,r):r.addEventListener("load",o=>{gy(n,o.target)})}),pT(n),n.initialized=!0,pT(n),n.emit("init"),n.emit("afterInit")),n}destroy(e=!0,n=!0){const i=this,{params:r,el:o,wrapperEl:a,slides:u}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),n&&(i.removeClasses(),o.removeAttribute("style"),a.removeAttribute("style"),u&&u.length&&u.forEach(c=>{c.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(c=>{i.off(c)}),e!==!1&&(i.el.swiper=null,hZ(i)),i.destroyed=!0),null}static extendDefaults(e){Li(mI,e)}static get extendedDefaults(){return mI}static get defaults(){return iD}static installModule(e){Vs.prototype.__modules__||(Vs.prototype.__modules__=[]);const n=Vs.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Vs.installModule(n)),Vs):(Vs.installModule(e),Vs)}};Object.keys(pI).forEach(t=>{Object.keys(pI[t]).forEach(e=>{hm.prototype[e]=pI[t][e]})});hm.use([bZ,CZ]);function Yl(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Jo(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof t[i]>"u"?t[i]=e[i]:Yl(e[i])&&Yl(t[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?t[i]=e[i]:Jo(t[i],e[i]):t[i]=e[i]})}function cU(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function dU(t={}){return t.pagination&&typeof t.pagination.el>"u"}function hU(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function fU(t=""){const e=t.split(" ").map(i=>i.trim()).filter(i=>!!i),n=[];return e.forEach(i=>{n.indexOf(i)<0&&n.push(i)}),n.join(" ")}function xee(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}const pU=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Nee(t={},e=!0){const n={on:{}},i={},r={};Jo(n,hm.defaults),Jo(n,hm.extendedDefaults),n._emitClasses=!0,n.init=!1;const o={},a=pU.map(c=>c.replace(/_/,"")),u=Object.assign({},t);return Object.keys(u).forEach(c=>{typeof t[c]>"u"||(a.indexOf(c)>=0?Yl(t[c])?(n[c]={},r[c]={},Jo(n[c],t[c]),Jo(r[c],t[c])):(n[c]=t[c],r[c]=t[c]):c.search(/on[A-Z]/)===0&&typeof t[c]=="function"?e?i[`${c[2].toLowerCase()}${c.substr(3)}`]=t[c]:n.on[`${c[2].toLowerCase()}${c.substr(3)}`]=t[c]:o[c]=t[c])}),["navigation","pagination","scrollbar"].forEach(c=>{n[c]===!0&&(n[c]={}),n[c]===!1&&delete n[c]}),{params:n,passedParams:r,rest:o,events:i}}function Dee({el:t,nextEl:e,prevEl:n,paginationEl:i,scrollbarEl:r,swiper:o},a){cU(a)&&e&&n&&(o.params.navigation.nextEl=e,o.originalParams.navigation.nextEl=e,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),dU(a)&&i&&(o.params.pagination.el=i,o.originalParams.pagination.el=i),hU(a)&&r&&(o.params.scrollbar.el=r,o.originalParams.scrollbar.el=r),o.init(t)}function Oee(t,e,n,i,r){const o=[];if(!e)return o;const a=c=>{o.indexOf(c)<0&&o.push(c)};if(n&&i){const c=i.map(r),h=n.map(r);c.join("")!==h.join("")&&a("children"),i.length!==n.length&&a("children")}return pU.filter(c=>c[0]==="_").map(c=>c.replace(/_/,"")).forEach(c=>{if(c in t&&c in e)if(Yl(t[c])&&Yl(e[c])){const h=Object.keys(t[c]),m=Object.keys(e[c]);h.length!==m.length?a(c):(h.forEach(g=>{t[c][g]!==e[c][g]&&a(c)}),m.forEach(g=>{t[c][g]!==e[c][g]&&a(c)}))}else t[c]!==e[c]&&a(c)}),o}function mU(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function gU(t){const e=[];return nn.Children.toArray(t).forEach(n=>{mU(n)?e.push(n):n.props&&n.props.children&&gU(n.props.children).forEach(i=>e.push(i))}),e}function Lee(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return nn.Children.toArray(t).forEach(i=>{if(mU(i))e.push(i);else if(i.props&&i.props.slot&&n[i.props.slot])n[i.props.slot].push(i);else if(i.props&&i.props.children){const r=gU(i.props.children);r.length>0?r.forEach(o=>e.push(o)):n["container-end"].push(i)}else n["container-end"].push(i)}),{slides:e,slots:n}}function Mee({swiper:t,slides:e,passedParams:n,changedParams:i,nextEl:r,prevEl:o,scrollbarEl:a,paginationEl:u}){const c=i.filter(C=>C!=="children"&&C!=="direction"&&C!=="wrapperClass"),{params:h,pagination:m,navigation:g,scrollbar:_,virtual:T,thumbs:P}=t;let E,R,S,b,k,F,j,B;i.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&h.thumbs&&!h.thumbs.swiper&&(E=!0),i.includes("controller")&&n.controller&&n.controller.control&&h.controller&&!h.controller.control&&(R=!0),i.includes("pagination")&&n.pagination&&(n.pagination.el||u)&&(h.pagination||h.pagination===!1)&&m&&!m.el&&(S=!0),i.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(h.scrollbar||h.scrollbar===!1)&&_&&!_.el&&(b=!0),i.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||r)&&(h.navigation||h.navigation===!1)&&g&&!g.prevEl&&!g.nextEl&&(k=!0);const N=C=>{t[C]&&(t[C].destroy(),C==="navigation"?(t.isElement&&(t[C].prevEl.remove(),t[C].nextEl.remove()),h[C].prevEl=void 0,h[C].nextEl=void 0,t[C].prevEl=void 0,t[C].nextEl=void 0):(t.isElement&&t[C].el.remove(),h[C].el=void 0,t[C].el=void 0))};i.includes("loop")&&t.isElement&&(h.loop&&!n.loop?F=!0:!h.loop&&n.loop?j=!0:B=!0),c.forEach(C=>{if(Yl(h[C])&&Yl(n[C]))Jo(h[C],n[C]),(C==="navigation"||C==="pagination"||C==="scrollbar")&&"enabled"in n[C]&&!n[C].enabled&&N(C);else{const L=n[C];(L===!0||L===!1)&&(C==="navigation"||C==="pagination"||C==="scrollbar")?L===!1&&N(C):h[C]=n[C]}}),c.includes("controller")&&!R&&t.controller&&t.controller.control&&h.controller&&h.controller.control&&(t.controller.control=h.controller.control),i.includes("children")&&e&&T&&h.virtual.enabled&&(T.slides=e,T.update(!0)),i.includes("children")&&e&&h.loop&&(B=!0),E&&P.init()&&P.update(!0),R&&(t.controller.control=h.controller.control),S&&(t.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-pagination"),t.el.shadowEl.appendChild(u)),u&&(h.pagination.el=u),m.init(),m.render(),m.update()),b&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),t.el.shadowEl.appendChild(a)),a&&(h.scrollbar.el=a),_.init(),_.updateSize(),_.setTranslate()),k&&(t.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),t.el.shadowEl.appendChild(r)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),t.el.shadowEl.appendChild(o))),r&&(h.navigation.nextEl=r),o&&(h.navigation.prevEl=o),g.init(),g.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),i.includes("direction")&&t.changeDirection(n.direction,!1),(F||B)&&t.loopDestroy(),(j||B)&&t.loopCreate(),t.update()}function Vee(t,e,n){if(!n)return null;const i=m=>{let g=m;return m<0?g=e.length+m:g>=e.length&&(g=g-e.length),g},r=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:o,to:a}=n,u=t.params.loop?-e.length:0,c=t.params.loop?e.length*2:e.length,h=[];for(let m=u;m<c;m+=1)m>=o&&m<=a&&h.push(e[i(m)]);return h.map((m,g)=>nn.cloneElement(m,{swiper:t,style:r,key:`slide-${g}`}))}const Fee=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function mp(t,e){return typeof window>"u"?we.useEffect(t,e):we.useLayoutEffect(t,e)}const rD=we.createContext(null),Uee=we.createContext(null);function mT(){return mT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mT.apply(this,arguments)}const CC=we.forwardRef(function(t,e){let{className:n,tag:i="div",wrapperTag:r="div",children:o,onSwiper:a,...u}=t===void 0?{}:t,c=!1;const[h,m]=we.useState("swiper"),[g,_]=we.useState(null),[T,P]=we.useState(!1),E=we.useRef(!1),R=we.useRef(null),S=we.useRef(null),b=we.useRef(null),k=we.useRef(null),F=we.useRef(null),j=we.useRef(null),B=we.useRef(null),N=we.useRef(null),{params:C,passedParams:L,rest:V,events:O}=Nee(u),{slides:U,slots:D}=Lee(o),Ge=()=>{P(!T)};Object.assign(C.on,{_containerClasses(ue,he){m(he)}});const Re=()=>{Object.assign(C.on,O),c=!0;const ue={...C};if(delete ue.wrapperClass,S.current=new hm(ue),S.current.virtual&&S.current.params.virtual.enabled){S.current.virtual.slides=U;const he={cache:!1,slides:U,renderExternal:_,renderExternalUpdate:!1};Jo(S.current.params.virtual,he),Jo(S.current.originalParams.virtual,he)}};R.current||Re(),S.current&&S.current.on("_beforeBreakpoint",Ge);const _e=()=>{c||!O||!S.current||Object.keys(O).forEach(ue=>{S.current.on(ue,O[ue])})},rt=()=>{!O||!S.current||Object.keys(O).forEach(ue=>{S.current.off(ue,O[ue])})};we.useEffect(()=>()=>{S.current&&S.current.off("_beforeBreakpoint",Ge)}),we.useEffect(()=>{!E.current&&S.current&&(S.current.emitSlidesClasses(),E.current=!0)}),mp(()=>{if(e&&(e.current=R.current),!!R.current)return S.current.destroyed&&Re(),Dee({el:R.current,nextEl:F.current,prevEl:j.current,paginationEl:B.current,scrollbarEl:N.current,swiper:S.current},C),a&&a(S.current),()=>{S.current&&!S.current.destroyed&&S.current.destroy(!0,!1)}},[]),mp(()=>{_e();const ue=Oee(L,b.current,U,k.current,he=>he.key);return b.current=L,k.current=U,ue.length&&S.current&&!S.current.destroyed&&Mee({swiper:S.current,slides:U,passedParams:L,changedParams:ue,nextEl:F.current,prevEl:j.current,scrollbarEl:N.current,paginationEl:B.current}),()=>{rt()}}),mp(()=>{Fee(S.current)},[g]);function se(){return C.virtual?Vee(S.current,U,g):U.map((ue,he)=>nn.cloneElement(ue,{swiper:S.current,swiperSlideIndex:he}))}return nn.createElement(i,mT({ref:R,className:fU(`${h}${n?` ${n}`:""}`)},V),nn.createElement(Uee.Provider,{value:S.current},D["container-start"],nn.createElement(r,{className:xee(C.wrapperClass)},D["wrapper-start"],se(),D["wrapper-end"]),cU(C)&&nn.createElement(nn.Fragment,null,nn.createElement("div",{ref:j,className:"swiper-button-prev"}),nn.createElement("div",{ref:F,className:"swiper-button-next"})),hU(C)&&nn.createElement("div",{ref:N,className:"swiper-scrollbar"}),dU(C)&&nn.createElement("div",{ref:B,className:"swiper-pagination"}),D["container-end"]))});CC.displayName="Swiper";function gT(){return gT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gT.apply(this,arguments)}const AC=we.forwardRef(function(t,e){let{tag:n="div",children:i,className:r="",swiper:o,zoom:a,lazy:u,virtualIndex:c,swiperSlideIndex:h,...m}=t===void 0?{}:t;const g=we.useRef(null),[_,T]=we.useState("swiper-slide"),[P,E]=we.useState(!1);function R(F,j,B){j===g.current&&T(B)}mp(()=>{if(typeof h<"u"&&(g.current.swiperSlideIndex=h),e&&(e.current=g.current),!(!g.current||!o)){if(o.destroyed){_!=="swiper-slide"&&T("swiper-slide");return}return o.on("_slideClass",R),()=>{o&&o.off("_slideClass",R)}}}),mp(()=>{o&&g.current&&!o.destroyed&&T(o.getSlideClasses(g.current))},[o]);const S={isActive:_.indexOf("swiper-slide-active")>=0,isVisible:_.indexOf("swiper-slide-visible")>=0,isPrev:_.indexOf("swiper-slide-prev")>=0,isNext:_.indexOf("swiper-slide-next")>=0},b=()=>typeof i=="function"?i(S):i,k=()=>{E(!0)};return nn.createElement(n,gT({ref:g,className:fU(`${_}${r?` ${r}`:""}`),"data-swiper-slide-index":c,onLoad:k},m),a&&nn.createElement(rD.Provider,{value:S},nn.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},b(),u&&!P&&nn.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&nn.createElement(rD.Provider,{value:S},b(),u&&!P&&nn.createElement("div",{className:"swiper-lazy-preloader"})))});AC.displayName="SwiperSlide";const Uw=({message:t})=>te.jsxs(te.Fragment,{children:[te.jsx("div",{className:"spinner"}),te.jsx("p",{className:"",children:t})]}),Bee=()=>{const[t,e]=we.useState(null),[n,i]=we.useState(0),[r,o]=we.useState(!0),[a,u]=we.useState(null),c=we.useRef(null);return we.useEffect(()=>{const h=rp(uZ),m=Al.currentUser;if(m){o(!0);const g=m.uid,_=Hc(h,`users/${g}/pokemon`);(async()=>{uV(_,async P=>{try{const E=P.val();if(console.log(E,"display item"),E){const R=Object.values(E),S=await Promise.all(R.map(async b=>await Bq(b)));i(R.length),e(S)}else e([]);setTimeout(()=>{o(!1)},500)}catch{u("Failed to fetch Pokémon data. Please try again."),setTimeout(()=>{o(!1)},500)}})})()}return()=>{m&&rG(Hc(h,`users/${m.uid}/pokemon`))}},[]),te.jsxs(te.Fragment,{children:[te.jsx("h2",{children:"My Cards"}),r?te.jsx(Uw,{message:"Loading cards..."}):a?te.jsx("div",{className:"error",children:a}):te.jsxs("div",{children:[te.jsxs("p",{className:"pokemon-count",children:["You have ",t==null?void 0:t.length," Pokemon cards."]}),te.jsx(CC,{ref:c,spaceBetween:50,slidesPerView:1,initialSlide:n||0,onSlideChange:()=>console.log("slide change"),onSwiper:h=>console.log(h),loop:!0,children:t&&t.map((h,m)=>te.jsx(AC,{className:"col-md-4 mb-4 blur",children:te.jsx(rU,{hp:h.stats[0].base_stat,imgSrc:h.sprites.front_default,pokeName:h.name,statAttack:h.stats[1].base_stat,statDefense:h.stats[2].base_stat,statSpeed:h.stats[5].base_stat,types:h.types,isNewCard:m===t.length-1})},m))})]})]})},jee=({handleFetchPokemon:t,deductBalance:e,addBalance:n})=>{const[i,r]=we.useState(""),o=we.useRef([]),a=["💎","💎","🔔","🍒","🔔","🍒","🔔","💎","🍒","💎","🔔","💎"];we.useEffect(()=>{u()},[]);const u=(g=!0,_=1,T=1)=>{var S;const P=document.querySelectorAll(".door");o.current=Array.from(P);const E=[],R=[];r("");for(const b of o.current){if(g)b.dataset.spinned="0";else if(b.dataset.spinned==="1")return;const k=b.querySelector(".boxes");if(!k)continue;const F=k.cloneNode(!1),j=["❓"];if(!g){for(let N=0;N<(_>0?_:1);N++)E.push(...a);j.push(...h(E)),F.addEventListener("transitionstart",function(){b.dataset.spinned="1",this.querySelectorAll(".box").forEach(N=>{N.style.filter="blur(1px)"})},{once:!0}),F.addEventListener("transitionend",function(){this.querySelectorAll(".box").forEach((N,C)=>{N.style.filter="blur(0)",C>0&&this.removeChild(N)})},{once:!0})}for(let N=j.length-1;N>=0;N--){const C=document.createElement("div");C.classList.add("box"),C.style.width=b.clientWidth+"px",C.style.height=b.clientHeight+"px",C.textContent=j[N],F.appendChild(C)}F.style.transitionDuration=`${T>0?T:1}s`,F.style.transform=`translateY(-${b.clientHeight*(j.length-1)}px)`,b.replaceChild(F,k);const B=((S=b.querySelector("div.box"))==null?void 0:S.innerHTML)??"";if(R.push(B),!g&&R.length===3)if(R.every((N,C,L)=>N===L[0]&&N!=="❓"))switch(R.join("")){case"💎💎💎":m(1200,()=>r("You won a card!")),m(2400,t);break;case"🍒🍒🍒":m(1200,()=>{r("You won $500!"),n(500)});break;case"🔔🔔🔔":m(1200,()=>{r("You won $300!"),n(300)});break;default:r("You Won! +$500");break}else m(1400,()=>r("Try Again!"))}};async function c(){e(),u(!1,1,1);for(const g of o.current){const _=g.querySelector(".boxes");if(!_)continue;const T=parseInt(getComputedStyle(_).transitionDuration);_.style.transform="translateY(0)",await new Promise(P=>setTimeout(P,T*100))}}const h=([...g])=>{let _=g.length;for(;_;){const T=Math.floor(Math.random()*_--);[g[_],g[T]]=[g[T],g[_]]}return g},m=(g,_)=>setTimeout(()=>{_()},g);return te.jsxs("div",{id:"slot-machine",children:[te.jsx("p",{children:"You have to pay $100 to play."}),te.jsxs("div",{className:"doors",children:[te.jsx("div",{className:"door",ref:g=>g&&(o.current[0]=g),children:te.jsx("div",{className:"boxes"})}),te.jsx("div",{className:"door",ref:g=>g&&(o.current[1]=g),children:te.jsx("div",{className:"boxes"})}),te.jsx("div",{className:"door",ref:g=>g&&(o.current[2]=g),children:te.jsx("div",{className:"boxes"})})]}),i&&te.jsx("h2",{className:"msg",children:i}),te.jsxs("div",{className:"buttons",children:[te.jsx("button",{id:"spinner",onClick:c,children:"Play"}),te.jsx("button",{id:"reseter",onClick:()=>u(),children:"Reset"})]})]})},zee=()=>{const[t,e]=we.useState(!0),[n,i]=we.useState(!1),r=()=>{e(!t)},o=async()=>{try{const c=Al.currentUser;if(c){const h=c.uid,m=rp(),g=Hc(m,`users/${h}/balance`),P=((await i2(g)).val()||0)-100;await T1(g,P)}}catch(c){console.error("Error deducting balance:",c)}},a=async c=>{try{const h=Al.currentUser;if(h){const m=h.uid,g=rp(),_=Hc(g,`users/${m}/balance`),E=((await i2(_)).val()||0)+c;await T1(_,E)}}catch(h){console.error("Error deducting balance:",h)}},u=async()=>{i(!0);try{const c=Al.currentUser;if(c){const h=await tb(),m=c.uid,g=rp(),_=Hc(g,`users/${m}/pokemon`);await nG(_,h.id)}}catch{i(!1)}finally{i(!1),console.log("should switch tab!"),e(!0)}};return te.jsxs("div",{children:[t?te.jsx("div",{className:"card-container",children:te.jsx(Bee,{})}):te.jsx("div",{children:n?te.jsx(Uw,{message:"Loading cards..."}):te.jsx(jee,{handleFetchPokemon:u,deductBalance:o,addBalance:a})}),te.jsx(pp,{onClick:r,text:t?"Play to get a new card":"Go to my Collection",className:"my-cards"})]})},Gee=()=>{const[t,e]=we.useState([]),[n,i]=we.useState(!0),[r,o]=we.useState(null),a=we.useRef(null),u=async()=>{e([]),i(!0),o(null);const h=5,m=[];try{for(let g=0;g<h;g++){const _=await tb();m.push(_)}e(m)}catch{o("Failed to fetch Pokémon data. Please try again.")}finally{setTimeout(()=>{i(!1)},1e3)}};we.useEffect(()=>{u()},[]);const c=()=>{console.log("buy this one")};return te.jsxs(te.Fragment,{children:[te.jsx("h2",{children:"Cards to buy"}),n?te.jsx(Uw,{message:"Loading cards..."}):r?te.jsx("div",{className:"error",children:r}):te.jsxs("div",{children:[te.jsx("p",{className:"pokemon-count",children:"Choose your card."}),te.jsx(CC,{ref:a,spaceBetween:50,slidesPerView:1,onSlideChange:()=>console.log("slide change"),onSwiper:h=>console.log(h),loop:!0,children:t&&t.map((h,m)=>te.jsx("li",{children:te.jsx(AC,{className:"col-md-4 mb-4 blur",children:te.jsx(rU,{hp:h.stats[0].base_stat,imgSrc:h.sprites.front_default,pokeName:h.name,statAttack:h.stats[1].base_stat,statDefense:h.stats[2].base_stat,statSpeed:h.stats[5].base_stat,types:h.types})},m)},m))}),te.jsx(pp,{onClick:c,text:"Buy",className:"buy"})]})]})},qee=({activeSection:t})=>te.jsxs("div",{className:"container",children:[te.jsx("h1",{children:"Pokeslot"}),t==="game"?te.jsx(zee,{}):te.jsx(Gee,{})]});var vU={exports:{}};(function(t){(function(){var e=window.CustomEvent;(!e||typeof e=="object")&&(e=function(R,S){S=S||{};var b=document.createEvent("CustomEvent");return b.initCustomEvent(R,!!S.bubbles,!!S.cancelable,S.detail||null),b},e.prototype=window.Event.prototype);function n(E){for(;E&&E!==document.body;){var R=window.getComputedStyle(E),S=function(b,k){return!(R[b]===void 0||R[b]===k)};if(R.opacity<1||S("zIndex","auto")||S("transform","none")||S("mixBlendMode","normal")||S("filter","none")||S("perspective","none")||R.isolation==="isolate"||R.position==="fixed"||R.webkitOverflowScrolling==="touch")return!0;E=E.parentElement}return!1}function i(E){for(;E;){if(E.localName==="dialog")return E;E=E.parentElement}return null}function r(E){E&&E.blur&&E!==document.body&&E.blur()}function o(E,R){for(var S=0;S<E.length;++S)if(E[S]===R)return!0;return!1}function a(E){return!E||!E.hasAttribute("method")?!1:E.getAttribute("method").toLowerCase()==="dialog"}function u(E){if(this.dialog_=E,this.replacedStyleTop_=!1,this.openAsModal_=!1,E.hasAttribute("role")||E.setAttribute("role","dialog"),E.show=this.show.bind(this),E.showModal=this.showModal.bind(this),E.close=this.close.bind(this),"returnValue"in E||(E.returnValue=""),"MutationObserver"in window){var R=new MutationObserver(this.maybeHideModal.bind(this));R.observe(E,{attributes:!0,attributeFilter:["open"]})}else{var S=!1,b=(function(){S?this.downgradeModal():this.maybeHideModal(),S=!1}).bind(this),k,F=function(j){if(j.target===E){var B="DOMNodeRemoved";S|=j.type.substr(0,B.length)===B,window.clearTimeout(k),k=window.setTimeout(b,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(j){E.addEventListener(j,F)})}Object.defineProperty(E,"open",{set:this.setOpen.bind(this),get:E.hasAttribute.bind(E,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}u.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),c.dm.removeDialog(this))},setOpen:function(E){E?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(E){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var R=document.createElement("div");this.dialog_.insertBefore(R,this.dialog_.firstChild),R.tabIndex=-1,R.focus(),this.dialog_.removeChild(R)}var S=document.createEvent("MouseEvents");S.initMouseEvent(E.type,E.bubbles,E.cancelable,window,E.detail,E.screenX,E.screenY,E.clientX,E.clientY,E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget),this.dialog_.dispatchEvent(S),E.stopPropagation()},focus_:function(){var E=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!E&&this.dialog_.tabIndex>=0&&(E=this.dialog_),!E){var R=["button","input","keygen","select","textarea"],S=R.map(function(b){return b+":not([disabled])"});S.push('[tabindex]:not([disabled]):not([tabindex=""])'),E=this.dialog_.querySelector(S.join(", "))}r(document.activeElement),E&&E.focus()},updateZIndex:function(E,R){if(E<R)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=E,this.backdrop_.style.zIndex=R},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!c.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");n(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,c.needsCentering(this.dialog_)?(c.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(E){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),E!==void 0&&(this.dialog_.returnValue=E);var R=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(R)}};var c={};if(c.reposition=function(E){var R=document.body.scrollTop||document.documentElement.scrollTop,S=R+(window.innerHeight-E.offsetHeight)/2;E.style.top=Math.max(R,S)+"px"},c.isInlinePositionSetByStylesheet=function(E){for(var R=0;R<document.styleSheets.length;++R){var S=document.styleSheets[R],b=null;try{b=S.cssRules}catch{}if(b)for(var k=0;k<b.length;++k){var F=b[k],j=null;try{j=document.querySelectorAll(F.selectorText)}catch{}if(!(!j||!o(j,E))){var B=F.style.getPropertyValue("top"),N=F.style.getPropertyValue("bottom");if(B&&B!=="auto"||N&&N!=="auto")return!0}}}return!1},c.needsCentering=function(E){var R=window.getComputedStyle(E);return R.position!=="absolute"||E.style.top!=="auto"&&E.style.top!==""||E.style.bottom!=="auto"&&E.style.bottom!==""?!1:!c.isInlinePositionSetByStylesheet(E)},c.forceRegisterDialog=function(E){if((window.HTMLDialogElement||E.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",E),E.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new u(E)},c.registerDialog=function(E){E.showModal||c.forceRegisterDialog(E)},c.DialogManager=function(){this.pendingDialogStack=[];var E=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",(function(R){this.forwardTab_=void 0,R.stopPropagation(),E([])}).bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(R){var S=[];R.forEach(function(b){for(var k=0,F;F=b.removedNodes[k];++k){if(F instanceof Element)F.localName==="dialog"&&S.push(F);else continue;S=S.concat(F.querySelectorAll("dialog"))}}),S.length&&E(S)}))},c.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},c.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},c.DialogManager.prototype.updateStacking=function(){for(var E=this.zIndexHigh_,R=0,S;S=this.pendingDialogStack[R];++R)S.updateZIndex(--E,--E),R===0&&(this.overlay.style.zIndex=--E);var b=this.pendingDialogStack[0];if(b){var k=b.dialog.parentNode||document.body;k.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},c.DialogManager.prototype.containedByTopDialog_=function(E){for(;E=i(E);){for(var R=0,S;S=this.pendingDialogStack[R];++R)if(S.dialog===E)return R===0;E=E.parentElement}return!1},c.DialogManager.prototype.handleFocus_=function(E){if(!this.containedByTopDialog_(E.target)&&(E.preventDefault(),E.stopPropagation(),r(E.target),this.forwardTab_!==void 0)){var R=this.pendingDialogStack[0],S=R.dialog,b=S.compareDocumentPosition(E.target);return b&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?R.focus_():document.documentElement.focus()),!1}},c.DialogManager.prototype.handleKey_=function(E){if(this.forwardTab_=void 0,E.keyCode===27){E.preventDefault(),E.stopPropagation();var R=new e("cancel",{bubbles:!1,cancelable:!0}),S=this.pendingDialogStack[0];S&&S.dialog.dispatchEvent(R)&&S.dialog.close()}else E.keyCode===9&&(this.forwardTab_=!E.shiftKey)},c.DialogManager.prototype.checkDOM_=function(E){var R=this.pendingDialogStack.slice();R.forEach(function(S){E.indexOf(S.dialog)!==-1?S.downgradeModal():S.maybeHideModal()})},c.DialogManager.prototype.pushDialog=function(E){var R=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=R?!1:(this.pendingDialogStack.unshift(E)===1&&this.blockDocument(),this.updateStacking(),!0)},c.DialogManager.prototype.removeDialog=function(E){var R=this.pendingDialogStack.indexOf(E);R!==-1&&(this.pendingDialogStack.splice(R,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())},c.dm=new c.DialogManager,c.formSubmitter=null,c.useValue=null,window.HTMLDialogElement===void 0){var h=document.createElement("form");if(h.setAttribute("method","dialog"),h.method!=="dialog"){var m=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(m){var g=m.get;m.get=function(){return a(this)?"dialog":g.call(this)};var _=m.set;m.set=function(E){return typeof E=="string"&&E.toLowerCase()==="dialog"?this.setAttribute("method",E):_.call(this,E)},Object.defineProperty(HTMLFormElement.prototype,"method",m)}}document.addEventListener("click",function(E){if(c.formSubmitter=null,c.useValue=null,!E.defaultPrevented){var R=E.target;if(!(!R||!a(R.form))){var S=R.type==="submit"&&["button","input"].indexOf(R.localName)>-1;if(!S){if(!(R.localName==="input"&&R.type==="image"))return;c.useValue=E.offsetX+","+E.offsetY}var b=i(R);b&&(c.formSubmitter=R)}}},!1);var T=HTMLFormElement.prototype.submit,P=function(){if(!a(this))return T.call(this);var E=i(this);E&&E.close()};HTMLFormElement.prototype.submit=P,document.addEventListener("submit",function(E){var R=E.target;if(a(R)){E.preventDefault();var S=i(R);if(S){var b=c.formSubmitter;b&&b.form===R?S.close(c.useValue||b.value):S.close(),c.formSubmitter=null}}},!0)}c.forceRegisterDialog=c.forceRegisterDialog,c.registerDialog=c.registerDialog,typeof t.exports=="object"?t.exports=c:window.dialogPolyfill=c})()})(vU);var $ee=vU.exports;const Wee=sD($ee);/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};xt=function(){var t=[],e=[],n="mdlComponentConfigInternal_";function i(E,R){for(var S=0;S<t.length;S++)if(t[S].className===E)return typeof R<"u"&&(t[S]=R),t[S];return!1}function r(E){var R=E.getAttribute("data-upgraded");return R===null?[""]:R.split(",")}function o(E,R){var S=r(E);return S.indexOf(R)!==-1}function a(E,R,S){if("CustomEvent"in window&&typeof window.CustomEvent=="function")return new CustomEvent(E,{bubbles:R,cancelable:S});var b=document.createEvent("Events");return b.initEvent(E,R,S),b}function u(E,R){if(typeof E>"u"&&typeof R>"u")for(var S=0;S<t.length;S++)u(t[S].className,t[S].cssClass);else{var b=E;if(typeof R>"u"){var k=i(b);k&&(R=k.cssClass)}for(var F=document.querySelectorAll("."+R),j=0;j<F.length;j++)c(F[j],b)}}function c(E,R){if(!(typeof E=="object"&&E instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var S=a("mdl-componentupgrading",!0,!0);if(E.dispatchEvent(S),!S.defaultPrevented){var b=r(E),k=[];if(R)o(E,R)||k.push(i(R));else{var F=E.classList;t.forEach(function(U){F.contains(U.cssClass)&&k.indexOf(U)===-1&&!o(E,U.className)&&k.push(U)})}for(var j=0,B=k.length,N;j<B;j++){if(N=k[j],N){b.push(N.className),E.setAttribute("data-upgraded",b.join(","));var C=new N.classConstructor(E);C[n]=N,e.push(C);for(var L=0,V=N.callbacks.length;L<V;L++)N.callbacks[L](E);N.widget&&(E[N.className]=C)}else throw new Error("Unable to find a registered component for the given class.");var O=a("mdl-componentupgraded",!0,!1);E.dispatchEvent(O)}}}function h(E){Array.isArray(E)||(E instanceof Element?E=[E]:E=Array.prototype.slice.call(E));for(var R=0,S=E.length,b;R<S;R++)b=E[R],b instanceof HTMLElement&&(c(b),b.children.length>0&&h(b.children))}function m(E){var R=typeof E.widget>"u"&&typeof E.widget>"u",S=!0;R||(S=E.widget||E.widget);var b={classConstructor:E.constructor||E.constructor,className:E.classAsString||E.classAsString,cssClass:E.cssClass||E.cssClass,widget:S,callbacks:[]};if(t.forEach(function(F){if(F.cssClass===b.cssClass)throw new Error("The provided cssClass has already been registered: "+F.cssClass);if(F.className===b.className)throw new Error("The provided className has already been registered")}),E.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have "+n+" defined as a property.");var k=i(E.classAsString,b);k||t.push(b)}function g(E,R){var S=i(E);S&&S.callbacks.push(R)}function _(){for(var E=0;E<t.length;E++)u(t[E].className)}function T(E){if(E){var R=e.indexOf(E);e.splice(R,1);var S=E.element_.getAttribute("data-upgraded").split(","),b=S.indexOf(E[n].classAsString);S.splice(b,1),E.element_.setAttribute("data-upgraded",S.join(","));var k=a("mdl-componentdowngraded",!0,!1);E.element_.dispatchEvent(k)}}function P(E){var R=function(b){e.filter(function(k){return k.element_===b}).forEach(T)};if(E instanceof Array||E instanceof NodeList)for(var S=0;S<E.length;S++)R(E[S]);else if(E instanceof Node)R(E);else throw new Error("Invalid argument provided to downgrade MDL nodes.")}return{upgradeDom:u,upgradeElement:c,upgradeElements:h,upgradeAllRegistered:_,registerUpgradedCallback:g,register:m,downgradeElements:P}}();xt.ComponentConfigPublic;xt.ComponentConfig;xt.Component;xt.upgradeDom=xt.upgradeDom;xt.upgradeElement=xt.upgradeElement;xt.upgradeElements=xt.upgradeElements;xt.upgradeAllRegistered=xt.upgradeAllRegistered;xt.registerUpgradedCallback=xt.registerUpgradedCallback;xt.register=xt.register;xt.downgradeElements=xt.downgradeElements;window.componentHandler=xt;window.componentHandler=xt;window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),xt.upgradeAllRegistered()):(xt.upgradeElement=function(){},xt.register=function(){})});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialButton=t,t.prototype.Constant_={},t.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},t.prototype.blurHandler_=function(e){e&&this.element_.blur()},t.prototype.disable=function(){this.element_.disabled=!0},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.element_.disabled=!1},t.prototype.enable=t.prototype.enable,t.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:t,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialProgress=t,t.prototype.Constant_={},t.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},t.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},t.prototype.setProgress=t.prototype.setProgress,t.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},t.prototype.setBuffer=t.prototype.setBuffer,t.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialSpinner=t,t.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},t.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},t.prototype.createLayer=function(e){var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),o.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[i,r,o],u=0;u<a.length;u++){var c=document.createElement("div");c.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[u].appendChild(c)}n.appendChild(i),n.appendChild(r),n.appendChild(o),this.element_.appendChild(n)},t.prototype.createLayer=t.prototype.createLayer,t.prototype.stop=function(){this.element_.classList.remove("is-active")},t.prototype.stop=t.prototype.stop,t.prototype.start=function(){this.element_.classList.add("is-active")},t.prototype.start=t.prototype.start,t.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=t,t.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},t.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},t.prototype.onKeyDown_=function(e){var n=e.target.value.split(`
`).length;e.keyCode===13&&n>=this.maxRows&&e.preventDefault()},t.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},t.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.onReset_=function(e){this.updateClasses_()},t.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},t.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},t.prototype.checkDisabled=t.prototype.checkDisabled,t.prototype.checkFocus=function(){this.element_.querySelector(":focus")?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.checkFocus=t.prototype.checkFocus,t.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},t.prototype.checkValidity=t.prototype.checkValidity,t.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},t.prototype.checkDirty=t.prototype.checkDirty,t.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},t.prototype.enable=t.prototype.enable,t.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},t.prototype.change=t.prototype.change,t.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:t,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})})();(function(){(function(){var t,e=typeof Object.create=="function"?Object.create:function(s){function l(){}return l.prototype=s,new l},n;if(typeof Object.setPrototypeOf=="function")n=Object.setPrototypeOf;else{var i;e:{var r={xb:!0},o={};try{o.__proto__=r,i=o.xb;break e}catch{}i=!1}n=i?function(s,l){if(s.__proto__=l,s.__proto__!==l)throw new TypeError(s+" is not extensible");return s}:null}var a=n;function u(s,l){if(s.prototype=e(l.prototype),s.prototype.constructor=s,a)a(s,l);else for(var d in l)if(d!="prototype")if(Object.defineProperties){var p=Object.getOwnPropertyDescriptor(l,d);p&&Object.defineProperty(s,d,p)}else s[d]=l[d];s.K=l.prototype}var c=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,d){s!=Array.prototype&&s!=Object.prototype&&(s[l]=d.value)},h=typeof window<"u"&&window===this?this:typeof global<"u"&&global!=null?global:this;function m(s,l){if(l){var d=h;s=s.split(".");for(var p=0;p<s.length-1;p++){var v=s[p];v in d||(d[v]={}),d=d[v]}s=s[s.length-1],p=d[s],l=l(p),l!=p&&l!=null&&c(d,s,{configurable:!0,writable:!0,value:l})}}m("Object.is",function(s){return s||function(l,d){return l===d?l!==0||1/l===1/d:l!==l&&d!==d}}),m("Array.prototype.includes",function(s){return s||function(l,d){var p=this;p instanceof String&&(p=String(p));var v=p.length;for(d=d||0,0>d&&(d=Math.max(d+v,0));d<v;d++){var y=p[d];if(y===l||Object.is(y,l))return!0}return!1}});var g=this;function _(s){return s!==void 0}function T(s){return typeof s=="string"}var P=/^[\w+/_-]+[=]{0,2}$/,E=null;function R(){}function S(s){s.W=void 0,s.Xa=function(){return s.W?s.W:s.W=new s}}function b(s){var l=typeof s;if(l=="object")if(s){if(s instanceof Array)return"array";if(s instanceof Object)return l;var d=Object.prototype.toString.call(s);if(d=="[object Window]")return"object";if(d=="[object Array]"||typeof s.length=="number"&&typeof s.splice<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("splice"))return"array";if(d=="[object Function]"||typeof s.call<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("call"))return"function"}else return"null";else if(l=="function"&&typeof s.call>"u")return"object";return l}function k(s){return b(s)=="array"}function F(s){var l=b(s);return l=="array"||l=="object"&&typeof s.length=="number"}function j(s){return b(s)=="function"}function B(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}var N="closure_uid_"+(1e9*Math.random()>>>0),C=0;function L(s,l,d){return s.call.apply(s.bind,arguments)}function V(s,l,d){if(!s)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var v=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(v,p),s.apply(l,v)}}return function(){return s.apply(l,arguments)}}function O(s,l,d){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?O=L:O=V,O.apply(null,arguments)}function U(s,l){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),s.apply(this,p)}}function D(s,l){for(var d in l)s[d]=l[d]}var Ge=Date.now||function(){return+new Date};function Re(s,l){s=s.split(".");var d=g;s[0]in d||typeof d.execScript>"u"||d.execScript("var "+s[0]);for(var p;s.length&&(p=s.shift());)!s.length&&_(l)?d[p]=l:d[p]&&d[p]!==Object.prototype[p]?d=d[p]:d=d[p]={}}function _e(s,l){function d(){}d.prototype=l.prototype,s.K=l.prototype,s.prototype=new d,s.prototype.constructor=s,s.vc=function(p,v,y){for(var A=Array(arguments.length-2),M=2;M<arguments.length;M++)A[M-2]=arguments[M];return l.prototype[v].apply(p,A)}}function rt(s){if(Error.captureStackTrace)Error.captureStackTrace(this,rt);else{var l=Error().stack;l&&(this.stack=l)}s&&(this.message=String(s))}_e(rt,Error),rt.prototype.name="CustomError";var se;function ue(s,l){s=s.split("%s");for(var d="",p=s.length-1,v=0;v<p;v++)d+=s[v]+(v<l.length?l[v]:"%s");rt.call(this,d+s[p])}_e(ue,rt),ue.prototype.name="AssertionError";function he(s,l){throw new ue("Failure"+(s?": "+s:""),Array.prototype.slice.call(arguments,1))}var Xe=Array.prototype.indexOf?function(s,l){return Array.prototype.indexOf.call(s,l,void 0)}:function(s,l){if(T(s))return T(l)&&l.length==1?s.indexOf(l,0):-1;for(var d=0;d<s.length;d++)if(d in s&&s[d]===l)return d;return-1},Be=Array.prototype.forEach?function(s,l,d){Array.prototype.forEach.call(s,l,d)}:function(s,l,d){for(var p=s.length,v=T(s)?s.split(""):s,y=0;y<p;y++)y in v&&l.call(d,v[y],y,s)};function ct(s,l){for(var d=T(s)?s.split(""):s,p=s.length-1;0<=p;--p)p in d&&l.call(void 0,d[p],p,s)}var ar=Array.prototype.filter?function(s,l){return Array.prototype.filter.call(s,l,void 0)}:function(s,l){for(var d=s.length,p=[],v=0,y=T(s)?s.split(""):s,A=0;A<d;A++)if(A in y){var M=y[A];l.call(void 0,M,A,s)&&(p[v++]=M)}return p},lr=Array.prototype.map?function(s,l){return Array.prototype.map.call(s,l,void 0)}:function(s,l){for(var d=s.length,p=Array(d),v=T(s)?s.split(""):s,y=0;y<d;y++)y in v&&(p[y]=l.call(void 0,v[y],y,s));return p},ur=Array.prototype.some?function(s,l){return Array.prototype.some.call(s,l,void 0)}:function(s,l){for(var d=s.length,p=T(s)?s.split(""):s,v=0;v<d;v++)if(v in p&&l.call(void 0,p[v],v,s))return!0;return!1};function Dt(s,l){return 0<=Xe(s,l)}function Wm(s,l){l=Xe(s,l);var d;return(d=0<=l)&&uu(s,l),d}function uu(s,l){return Array.prototype.splice.call(s,l,1).length==1}function cu(s,l){e:{for(var d=s.length,p=T(s)?s.split(""):s,v=0;v<d;v++)if(v in p&&l.call(void 0,p[v],v,s)){l=v;break e}l=-1}0<=l&&uu(s,l)}function du(s,l){var d=0;ct(s,function(p,v){l.call(void 0,p,v,s)&&uu(s,v)&&d++})}function hu(s){return Array.prototype.concat.apply([],arguments)}function fu(s){var l=s.length;if(0<l){for(var d=Array(l),p=0;p<l;p++)d[p]=s[p];return d}return[]}function Qd(s,l,d){return 2>=arguments.length?Array.prototype.slice.call(s,l):Array.prototype.slice.call(s,l,d)}var kn=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]},Hm=/&/g,Bw=/</g,jw=/>/g,Km=/"/g,Yd=/'/g,Qm=/\x00/g,zw=/[\x00&<>"']/;function Da(s,l){return s<l?-1:s>l?1:0}function Br(s){return zw.test(s)&&(s.indexOf("&")!=-1&&(s=s.replace(Hm,"&amp;")),s.indexOf("<")!=-1&&(s=s.replace(Bw,"&lt;")),s.indexOf(">")!=-1&&(s=s.replace(jw,"&gt;")),s.indexOf('"')!=-1&&(s=s.replace(Km,"&quot;")),s.indexOf("'")!=-1&&(s=s.replace(Yd,"&#39;")),s.indexOf("\0")!=-1&&(s=s.replace(Qm,"&#0;"))),s}function Jd(s,l,d){for(var p in s)l.call(d,s[p],p,s)}function Yt(s){var l={},d;for(d in s)l[d]=s[d];return l}var mn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _s(s,l){for(var d,p,v=1;v<arguments.length;v++){p=arguments[v];for(d in p)s[d]=p[d];for(var y=0;y<mn.length;y++)d=mn[y],Object.prototype.hasOwnProperty.call(p,d)&&(s[d]=p[d])}}var ws="StopIteration"in g?g.StopIteration:{message:"StopIteration",stack:""};function jr(){}jr.prototype.next=function(){throw ws},jr.prototype.ha=function(){return this};function Ym(s){if(s instanceof jr)return s;if(typeof s.ha=="function")return s.ha(!1);if(F(s)){var l=0,d=new jr;return d.next=function(){for(;;){if(l>=s.length)throw ws;if(l in s)return s[l++];l++}},d}throw Error("Not implemented")}function Oa(s,l){if(F(s))try{Be(s,l,void 0)}catch(d){if(d!==ws)throw d}else{s=Ym(s);try{for(;;)l.call(void 0,s.next(),void 0,s)}catch(d){if(d!==ws)throw d}}}function Jm(s){if(F(s))return fu(s);s=Ym(s);var l=[];return Oa(s,function(d){l.push(d)}),l}function La(s,l){this.g={},this.a=[],this.j=this.h=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var p=0;p<d;p+=2)this.set(arguments[p],arguments[p+1])}else if(s)if(s instanceof La)for(d=s.ja(),p=0;p<d.length;p++)this.set(d[p],s.get(d[p]));else for(p in s)this.set(p,s[p])}t=La.prototype,t.la=function(){po(this);for(var s=[],l=0;l<this.a.length;l++)s.push(this.g[this.a[l]]);return s},t.ja=function(){return po(this),this.a.concat()},t.clear=function(){this.g={},this.j=this.h=this.a.length=0};function po(s){if(s.h!=s.a.length){for(var l=0,d=0;l<s.a.length;){var p=s.a[l];Es(s.g,p)&&(s.a[d++]=p),l++}s.a.length=d}if(s.h!=s.a.length){var v={};for(d=l=0;l<s.a.length;)p=s.a[l],Es(v,p)||(s.a[d++]=p,v[p]=1),l++;s.a.length=d}}t.get=function(s,l){return Es(this.g,s)?this.g[s]:l},t.set=function(s,l){Es(this.g,s)||(this.h++,this.a.push(s),this.j++),this.g[s]=l},t.forEach=function(s,l){for(var d=this.ja(),p=0;p<d.length;p++){var v=d[p],y=this.get(v);s.call(l,y,v,this)}},t.ha=function(s){po(this);var l=0,d=this.j,p=this,v=new jr;return v.next=function(){if(d!=p.j)throw Error("The map has changed since the iterator was created");if(l>=p.a.length)throw ws;var y=p.a[l++];return s?y:p.g[y]},v};function Es(s,l){return Object.prototype.hasOwnProperty.call(s,l)}var Gw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xd(s,l){if(s){s=s.split("&");for(var d=0;d<s.length;d++){var p=s[d].indexOf("="),v=null;if(0<=p){var y=s[d].substring(0,p);v=s[d].substring(p+1)}else y=s[d];l(y,v?decodeURIComponent(v.replace(/\+/g," ")):"")}}}function Zd(s,l,d,p){for(var v=d.length;0<=(l=s.indexOf(d,l))&&l<p;){var y=s.charCodeAt(l-1);if((y==38||y==63)&&(y=s.charCodeAt(l+v),!y||y==61||y==38||y==35))return l;l+=v+1}return-1}var eh=/#|$/;function zr(s,l){var d=s.search(eh),p=Zd(s,0,l,d);if(0>p)return null;var v=s.indexOf("&",p);return(0>v||v>d)&&(v=d),p+=l.length+1,decodeURIComponent(s.substr(p,v-p).replace(/\+/g," "))}var th=/[?&]($|#)/;function Wi(s,l){this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1;var d;s instanceof Wi?(this.i=_(l)?l:s.i,cr(this,s.j),this.A=s.A,this.h=s.h,pu(this,s.C),this.g=s.g,mo(this,ih(s.a)),this.s=s.s):s&&(d=String(s).match(Gw))?(this.i=!!l,cr(this,d[1]||"",!0),this.A=dr(d[2]||""),this.h=dr(d[3]||"",!0),pu(this,d[4]),this.g=dr(d[5]||"",!0),mo(this,d[6]||"",!0),this.s=dr(d[7]||"")):(this.i=!!l,this.a=new Hi(null,this.i))}Wi.prototype.toString=function(){var s=[],l=this.j;l&&s.push(go(l,nh,!0),":");var d=this.h;return(d||l=="file")&&(s.push("//"),(l=this.A)&&s.push(go(l,nh,!0),"@"),s.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.C,d!=null&&s.push(":",String(d))),(d=this.g)&&(this.h&&d.charAt(0)!="/"&&s.push("/"),s.push(go(d,d.charAt(0)=="/"?Va:Ma,!0))),(d=this.a.toString())&&s.push("?",d),(d=this.s)&&s.push("#",go(d,$w)),s.join("")};function cr(s,l,d){s.j=d?dr(l,!0):l,s.j&&(s.j=s.j.replace(/:$/,""))}function pu(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.C=l}else s.C=null}function mo(s,l,d){l instanceof Hi?(s.a=l,gu(s.a,s.i)):(d||(l=go(l,qw)),s.a=new Hi(l,s.i))}function mu(s){return s instanceof Wi?new Wi(s):new Wi(s,void 0)}function dr(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function go(s,l,d){return T(s)?(s=encodeURI(s).replace(l,xn),d&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function xn(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var nh=/[#\/\?@]/g,Ma=/[#\?:]/g,Va=/[#\?]/g,qw=/[#\?@]/g,$w=/#/g;function Hi(s,l){this.g=this.a=null,this.h=s||null,this.j=!!l}function Gr(s){s.a||(s.a=new La,s.g=0,s.h&&Xd(s.h,function(l,d){s.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}t=Hi.prototype,t.add=function(s,l){Gr(this),this.h=null,s=qr(this,s);var d=this.a.get(s);return d||this.a.set(s,d=[]),d.push(l),this.g+=1,this};function Is(s,l){Gr(s),l=qr(s,l),Es(s.a.g,l)&&(s.h=null,s.g-=s.a.get(l).length,s=s.a,Es(s.g,l)&&(delete s.g[l],s.h--,s.j++,s.a.length>2*s.h&&po(s)))}t.clear=function(){this.a=this.h=null,this.g=0};function Fa(s,l){return Gr(s),l=qr(s,l),Es(s.a.g,l)}t.forEach=function(s,l){Gr(this),this.a.forEach(function(d,p){Be(d,function(v){s.call(l,v,p,this)},this)},this)},t.ja=function(){Gr(this);for(var s=this.a.la(),l=this.a.ja(),d=[],p=0;p<l.length;p++)for(var v=s[p],y=0;y<v.length;y++)d.push(l[p]);return d},t.la=function(s){Gr(this);var l=[];if(T(s))Fa(this,s)&&(l=hu(l,this.a.get(qr(this,s))));else{s=this.a.la();for(var d=0;d<s.length;d++)l=hu(l,s[d])}return l},t.set=function(s,l){return Gr(this),this.h=null,s=qr(this,s),Fa(this,s)&&(this.g-=this.a.get(s).length),this.a.set(s,[l]),this.g+=1,this},t.get=function(s,l){return s?(s=this.la(s),0<s.length?String(s[0]):l):l},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var s=[],l=this.a.ja(),d=0;d<l.length;d++){var p=l[d],v=encodeURIComponent(String(p));p=this.la(p);for(var y=0;y<p.length;y++){var A=v;p[y]!==""&&(A+="="+encodeURIComponent(String(p[y]))),s.push(A)}}return this.h=s.join("&")};function ih(s){var l=new Hi;return l.h=s.h,s.a&&(l.a=new La(s.a),l.g=s.g),l}function qr(s,l){return l=String(l),s.j&&(l=l.toLowerCase()),l}function gu(s,l){l&&!s.j&&(Gr(s),s.h=null,s.a.forEach(function(d,p){var v=p.toLowerCase();p!=v&&(Is(this,p),Is(this,v),0<d.length&&(this.h=null,this.a.set(qr(this,v),fu(d)),this.g+=d.length))},s)),s.j=l}function jn(s){this.a=mu(s)}function Xm(s,l){l?s.a.a.set(bt.Sa,l):Is(s.a.a,bt.Sa)}function Zm(s,l){l!==null?s.a.a.set(bt.Qa,l?"1":"0"):Is(s.a.a,bt.Qa)}function vu(s){return s.a.a.get(bt.Pa)||null}function yu(s,l){l?s.a.a.set(bt.PROVIDER_ID,l):Is(s.a.a,bt.PROVIDER_ID)}jn.prototype.toString=function(){return this.a.toString()};var bt={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"},Ts;e:{var eg=g.navigator;if(eg){var Ua=eg.userAgent;if(Ua){Ts=Ua;break e}}Ts=""}function Ae(s){return Ts.indexOf(s)!=-1}function _u(){return(Ae("Chrome")||Ae("CriOS"))&&!Ae("Edge")}function Ss(s){return Ss[" "](s),s}Ss[" "]=R;function bs(s,l){var d=Ww;return Object.prototype.hasOwnProperty.call(d,s)?d[s]:d[s]=l(s)}var wu=Ae("Opera"),vt=Ae("Trident")||Ae("MSIE"),hr=Ae("Edge"),tg=hr||vt,ci=Ae("Gecko")&&!(Ts.toLowerCase().indexOf("webkit")!=-1&&!Ae("Edge"))&&!(Ae("Trident")||Ae("MSIE"))&&!Ae("Edge"),an=Ts.toLowerCase().indexOf("webkit")!=-1&&!Ae("Edge"),rh=an&&Ae("Mobile"),fr=Ae("Macintosh");function sh(){var s=g.document;return s?s.documentMode:void 0}var Eu;e:{var oh="",Iu=function(){var s=Ts;if(ci)return/rv:([^\);]+)(\)|;)/.exec(s);if(hr)return/Edge\/([\d\.]+)/.exec(s);if(vt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s);if(an)return/WebKit\/(\S+)/.exec(s);if(wu)return/(?:Version)[ \/]?(\S+)/.exec(s)}();if(Iu&&(oh=Iu?Iu[1]:""),vt){var Tu=sh();if(Tu!=null&&Tu>parseFloat(oh)){Eu=String(Tu);break e}}Eu=oh}var Ww={};function Qn(s){return bs(s,function(){for(var l=0,d=kn(String(Eu)).split("."),p=kn(String(s)).split("."),v=Math.max(d.length,p.length),y=0;l==0&&y<v;y++){var A=d[y]||"",M=p[y]||"";do{if(A=/(\d*)(\D*)(.*)/.exec(A)||["","","",""],M=/(\d*)(\D*)(.*)/.exec(M)||["","","",""],A[0].length==0&&M[0].length==0)break;l=Da(A[1].length==0?0:parseInt(A[1],10),M[1].length==0?0:parseInt(M[1],10))||Da(A[2].length==0,M[2].length==0)||Da(A[2],M[2]),A=A[3],M=M[3]}while(l==0)}return 0<=l})}var Yn,Ba=g.document;Yn=Ba&&vt?sh()||(Ba.compatMode=="CSS1Compat"?parseInt(Eu,10):5):void 0;function pr(s,l){this.a=s===nt&&l||"",this.g=ah}pr.prototype.ma=!0,pr.prototype.ka=function(){return this.a},pr.prototype.toString=function(){return"Const{"+this.a+"}"};var ah={},nt={};function Ki(){this.a="",this.h=ng}Ki.prototype.ma=!0,Ki.prototype.ka=function(){return this.a.toString()},Ki.prototype.g=function(){return 1},Ki.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function vo(s){return s instanceof Ki&&s.constructor===Ki&&s.h===ng?s.a:(he("expected object of type TrustedResourceUrl, got '"+s+"' of type "+b(s)),"type_error:TrustedResourceUrl")}function ja(){var s=UU;s instanceof pr&&s.constructor===pr&&s.g===ah?s=s.a:(he("expected object of type Const, got '"+s+"'"),s="type_error:Const");var l=new Ki;return l.a=s,l}var ng={};function zn(){this.a="",this.h=yo}zn.prototype.ma=!0,zn.prototype.ka=function(){return this.a.toString()},zn.prototype.g=function(){return 1},zn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function $r(s){return s instanceof zn&&s.constructor===zn&&s.h===yo?s.a:(he("expected object of type SafeUrl, got '"+s+"' of type "+b(s)),"type_error:SafeUrl")}var ig=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Su(s){return s instanceof zn?s:(s=typeof s=="object"&&s.ma?s.ka():String(s),ig.test(s)||(s="about:invalid#zClosurez"),Qi(s))}function rg(s){return s instanceof zn?s:(s=typeof s=="object"&&s.ma?s.ka():String(s),ig.test(s)||(s="about:invalid#zClosurez"),Qi(s))}var yo={};function Qi(s){var l=new zn;return l.a=s,l}Qi("about:blank");function Cs(){this.a="",this.g=lh}Cs.prototype.ma=!0;var lh={};Cs.prototype.ka=function(){return this.a},Cs.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function mr(){this.a="",this.j=sg,this.h=null}mr.prototype.g=function(){return this.h},mr.prototype.ma=!0,mr.prototype.ka=function(){return this.a.toString()},mr.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function gr(s){return s instanceof mr&&s.constructor===mr&&s.j===sg?s.a:(he("expected object of type SafeHtml, got '"+s+"' of type "+b(s)),"type_error:SafeHtml")}var sg={};function za(s,l){var d=new mr;return d.a=s,d.h=l,d}za("<!DOCTYPE html>",0);var Hw=za("",0);za("<br>",0);var Wr=function(s){var l=!1,d;return function(){return l||(d=s(),l=!0),d}}(function(){if(typeof document>"u")return!1;var s=document.createElement("div"),l=document.createElement("div");return l.appendChild(document.createElement("div")),s.appendChild(l),s.firstChild?(l=s.firstChild.firstChild,s.innerHTML=gr(Hw),!l.parentElement):!1});function Kw(s,l){if(s.src=vo(l),E===null)e:{if(l=g.document,(l=l.querySelector&&l.querySelector("script[nonce]"))&&(l=l.nonce||l.getAttribute("nonce"))&&P.test(l)){E=l;break e}E=""}l=E,l&&s.setAttribute("nonce",l)}function _o(s,l){l=l instanceof zn?l:rg(l),s.assign($r(l))}function di(s,l){this.a=_(s)?s:0,this.g=_(l)?l:0}di.prototype.toString=function(){return"("+this.a+", "+this.g+")"},di.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},di.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},di.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this};function wo(s,l){this.width=s,this.height=l}t=wo.prototype,t.toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};function Ga(s){return s?new Pu(Eo(s)):se||(se=new Pu)}function As(s,l){var d=l||document;return d.querySelectorAll&&d.querySelector?d.querySelectorAll("."+s):uh(document,s,l)}function Ps(s,l){var d=l||document;if(d.getElementsByClassName)s=d.getElementsByClassName(s)[0];else{d=document;var p=l||d;s=p.querySelectorAll&&p.querySelector&&s?p.querySelector(s?"."+s:""):uh(d,s,l)[0]||null}return s||null}function uh(s,l,d){var p;if(s=d||s,s.querySelectorAll&&s.querySelector&&l)return s.querySelectorAll(l?"."+l:"");if(l&&s.getElementsByClassName){var v=s.getElementsByClassName(l);return v}if(v=s.getElementsByTagName("*"),l){var y={};for(d=p=0;s=v[d];d++){var A=s.className;typeof A.split=="function"&&Dt(A.split(/\s+/),l)&&(y[p++]=s)}return y.length=p,y}return v}function ch(s,l){Jd(l,function(d,p){d&&typeof d=="object"&&d.ma&&(d=d.ka()),p=="style"?s.style.cssText=d:p=="class"?s.className=d:p=="for"?s.htmlFor=d:dt.hasOwnProperty(p)?s.setAttribute(dt[p],d):p.lastIndexOf("aria-",0)==0||p.lastIndexOf("data-",0)==0?s.setAttribute(p,d):s[p]=d})}var dt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function bu(s){return s.scrollingElement?s.scrollingElement:(an||s.compatMode!="CSS1Compat")&&s.body||s.documentElement}function Rs(s){s&&s.parentNode&&s.parentNode.removeChild(s)}function Eo(s){return s.nodeType==9?s:s.ownerDocument||s.document}function Cu(s,l){if("textContent"in s)s.textContent=l;else if(s.nodeType==3)s.data=String(l);else if(s.firstChild&&s.firstChild.nodeType==3){for(;s.lastChild!=s.firstChild;)s.removeChild(s.lastChild);s.firstChild.data=String(l)}else{for(var d;d=s.firstChild;)s.removeChild(d);s.appendChild(Eo(s).createTextNode(String(l)))}}function dh(s,l){return l?Au(s,function(d){return!l||T(d.className)&&Dt(d.className.split(/\s+/),l)}):null}function Au(s,l){for(var d=0;s;){if(l(s))return s;s=s.parentNode,d++}return null}function Pu(s){this.a=s||g.document||document}Pu.prototype.N=function(){return T(void 0)?this.a.getElementById(void 0):void 0};var hi={Fc:!0},hh={Hc:!0},Qw={Ec:!0},Io={Gc:!0};function vr(){throw Error("Do not instantiate directly")}vr.prototype.va=null,vr.prototype.toString=function(){return this.content};function ks(s,l,d,p){if(s=s(l||ku,void 0,d),p=(p||Ga()).a.createElement("DIV"),s=Ru(s),s.match(og),s=za(s,null),Wr())for(;p.lastChild;)p.removeChild(p.lastChild);return p.innerHTML=gr(s),p.childNodes.length==1&&(s=p.firstChild,s.nodeType==1&&(p=s)),p}function Ru(s){if(!B(s))return Br(String(s));if(s instanceof vr){if(s.fa===hi)return s.content;if(s.fa===Io)return Br(s.content)}return he("Soy template output is unsafe for use as HTML: "+s),"zSoyz"}var og=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,ku={};function Yw(s){if(s!=null)switch(s.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}function qa(){vr.call(this)}_e(qa,vr),qa.prototype.fa=hi;function ye(s){return s!=null&&s.fa===hi?s:s instanceof mr?ae(gr(s).toString(),s.g()):ae(Br(String(String(s))),Yw(s))}function $a(){vr.call(this)}_e($a,vr),$a.prototype.fa=hh,$a.prototype.va=1;function Wa(s,l){this.content=String(s),this.va=l??null}_e(Wa,vr),Wa.prototype.fa=Io;function Oe(s){return new Wa(s,void 0)}var ae=function(s){function l(d){this.content=d}return l.prototype=s.prototype,function(d,p){return d=new l(String(d)),p!==void 0&&(d.va=p),d}}(qa),ag=function(s){function l(d){this.content=d}return l.prototype=s.prototype,function(d){return new l(String(d))}}($a);function xu(s){function l(){}var d={label:ht("New password")};l.prototype=s,s=new l;for(var p in d)s[p]=d[p];return s}function ht(s){return(s=String(s))?new Wa(s,void 0):""}var fh=function(s){function l(d){this.content=d}return l.prototype=s.prototype,function(d,p){return d=String(d),d?(d=new l(d),p!==void 0&&(d.va=p),d):""}}(qa);function Ct(s){return s!=null&&s.fa===hi?String(String(s.content).replace(w,"").replace(I,"&lt;")).replace(cg,ug):Br(String(s))}function Hr(s){return s!=null&&s.fa===hh?s=String(s).replace(Du,Nn):s instanceof zn?s=String($r(s).toString()).replace(Du,Nn):(s=String(s),f.test(s)?s=s.replace(Du,Nn):(he("Bad value `%s` for |filterNormalizeUri",[s]),s="#zSoyz")),s}function ph(s){return s!=null&&s.fa===Qw?s=s.content:s==null?s="":s instanceof Cs?s instanceof Cs&&s.constructor===Cs&&s.g===lh?s=s.a:(he("expected object of type SafeStyle, got '"+s+"' of type "+b(s)),s="type_error:SafeStyle"):(s=String(s),To.test(s)||(he("Bad value `%s` for |filterCssValue",[s]),s="zSoyz")),s}var lg={"\0":"&#0;","	":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function ug(s){return lg[s]}var Nu={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","\x07":"%07","\b":"%08","	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","\x1B":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function Nn(s){return Nu[s]}var cg=/[\x00\x22\x27\x3c\x3e]/g,Du=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,To=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,f=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,w=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,I=/</g;function x(){return Oe("Enter a valid phone number")}function z(){return Oe("Unable to send password reset code to specified email")}function W(){return Oe("Something went wrong. Please try again.")}function ie(){return Oe("This email already exists without any means of sign-in. Please reset the password to recover.")}function Qe(s){s=s||{};var l="";switch(s.code){case"invalid-argument":l+="Client specified an invalid argument.";break;case"invalid-configuration":l+="Client specified an invalid project configuration.";break;case"failed-precondition":l+="Request can not be executed in the current system state.";break;case"out-of-range":l+="Client specified an invalid range.";break;case"unauthenticated":l+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":l+="Client does not have sufficient permission.";break;case"not-found":l+="Specified resource is not found.";break;case"aborted":l+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":l+="The resource that a client tried to create already exists.";break;case"resource-exhausted":l+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":l+="Request cancelled by the client.";break;case"data-loss":l+="Unrecoverable data loss or data corruption.";break;case"unknown":l+="Unknown server error.";break;case"internal":l+="Internal server error.";break;case"not-implemented":l+="API method not implemented by the server.";break;case"unavailable":l+="Service unavailable.";break;case"deadline-exceeded":l+="Request deadline exceeded.";break;case"auth/user-disabled":l+="The user account has been disabled by an administrator.";break;case"auth/timeout":l+="The operation has timed out.";break;case"auth/too-many-requests":l+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":l+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":l+="A network error has occurred. Try again later.";break;case"restart-process":l+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":l+="No sign-in provider is available for the given email, please try with a different email."}return Oe(l)}function Jt(){return Oe("Please login again to perform this operation")}function ke(s,l,d){var p=Error.call(this);if(this.message=p.message,"stack"in p&&(this.stack=p.stack),this.code=gn+s,!(s=l)){switch(s="",this.code){case"firebaseui/merge-conflict":s+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:s+=W()}s=Oe(s).toString()}this.message=s||"",this.credential=d||null}u(ke,Error),ke.prototype.toJSON=function(){return{code:this.code,message:this.message}};var gn="firebaseui/";function yt(){this.T=this.T,this.C=this.C}var So=0;yt.prototype.T=!1,yt.prototype.m=function(){!this.T&&(this.T=!0,this.o(),So!=0)&&(this[N]||(this[N]=++C))};function Dn(s,l){s.T?_(void 0)?l.call(void 0):l():(s.C||(s.C=[]),s.C.push(_(void 0)?O(l,void 0):l))}yt.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Kr(s){s&&typeof s.m=="function"&&s.m()}var mh=Object.freeze||function(s){return s},PC=!vt||9<=Number(Yn),yU=vt&&!Qn("9"),_U=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{g.addEventListener("test",R,l),g.removeEventListener("test",R,l)}catch{}return s}();function xs(s,l){this.type=s,this.g=this.target=l,this.h=!1,this.qb=!0}xs.prototype.stopPropagation=function(){this.h=!0},xs.prototype.preventDefault=function(){this.qb=!1};function Jn(s,l){if(xs.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,s){var d=this.type=s.type,p=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=l,l=s.relatedTarget){if(ci){e:{try{Ss(l.nodeName);var v=!0;break e}catch{}v=!1}v||(l=null)}}else d=="mouseover"?l=s.fromElement:d=="mouseout"&&(l=s.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.keyCode=s.keyCode||0,this.key=s.key||"",this.j=s.charCode||(d=="keypress"?s.keyCode:0),this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=T(s.pointerType)?s.pointerType:wU[s.pointerType]||"",this.a=s,s.defaultPrevented&&this.preventDefault()}}_e(Jn,xs);var wU=mh({2:"touch",3:"pen",4:"mouse"});Jn.prototype.stopPropagation=function(){Jn.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Jn.prototype.preventDefault=function(){Jn.K.preventDefault.call(this);var s=this.a;if(s.preventDefault)s.preventDefault();else if(s.returnValue=!1,yU)try{(s.ctrlKey||112<=s.keyCode&&123>=s.keyCode)&&(s.keyCode=-1)}catch{}};var gh="closure_listenable_"+(1e6*Math.random()|0),EU=0;function IU(s,l,d,p,v){this.listener=s,this.proxy=null,this.src=l,this.type=d,this.capture=!!p,this.La=v,this.key=++EU,this.sa=this.Ia=!1}function dg(s){s.sa=!0,s.listener=null,s.proxy=null,s.src=null,s.La=null}function hg(s){this.src=s,this.a={},this.g=0}hg.prototype.add=function(s,l,d,p,v){var y=s.toString();s=this.a[y],s||(s=this.a[y]=[],this.g++);var A=Xw(s,l,p,v);return-1<A?(l=s[A],d||(l.Ia=!1)):(l=new IU(l,this.src,y,!!p,v),l.Ia=d,s.push(l)),l};function Jw(s,l){var d=l.type;d in s.a&&Wm(s.a[d],l)&&(dg(l),s.a[d].length==0&&(delete s.a[d],s.g--))}function Xw(s,l,d,p){for(var v=0;v<s.length;++v){var y=s[v];if(!y.sa&&y.listener==l&&y.capture==!!d&&y.La==p)return v}return-1}var Zw="closure_lm_"+(1e6*Math.random()|0),e0={};function yr(s,l,d,p,v){if(p&&p.once)return vh(s,l,d,p,v);if(k(l)){for(var y=0;y<l.length;y++)yr(s,l[y],d,p,v);return null}return d=n0(d),s&&s[gh]?s.J.add(String(l),d,!1,B(p)?!!p.capture:!!p,v):RC(s,l,d,!1,p,v)}function RC(s,l,d,p,v,y){if(!l)throw Error("Invalid event type");var A=B(v)?!!v.capture:!!v,M=fg(s);if(M||(s[Zw]=M=new hg(s)),d=M.add(l,d,p,A,y),d.proxy)return d;if(p=TU(),d.proxy=p,p.src=s,p.listener=d,s.addEventListener)_U||(v=A),v===void 0&&(v=!1),s.addEventListener(l.toString(),p,v);else if(s.attachEvent)s.attachEvent(kC(l.toString()),p);else if(s.addListener&&s.removeListener)s.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function TU(){var s=SU,l=PC?function(d){return s.call(l.src,l.listener,d)}:function(d){if(d=s.call(l.src,l.listener,d),!d)return d};return l}function vh(s,l,d,p,v){if(k(l)){for(var y=0;y<l.length;y++)vh(s,l[y],d,p,v);return null}return d=n0(d),s&&s[gh]?s.J.add(String(l),d,!0,B(p)?!!p.capture:!!p,v):RC(s,l,d,!0,p,v)}function Ha(s,l,d,p,v){if(k(l))for(var y=0;y<l.length;y++)Ha(s,l[y],d,p,v);else p=B(p)?!!p.capture:!!p,d=n0(d),s&&s[gh]?(s=s.J,l=String(l).toString(),l in s.a&&(y=s.a[l],d=Xw(y,d,p,v),-1<d&&(dg(y[d]),uu(y,d),y.length==0&&(delete s.a[l],s.g--)))):s&&(s=fg(s))&&(l=s.a[l.toString()],s=-1,l&&(s=Xw(l,d,p,v)),(d=-1<s?l[s]:null)&&bo(d))}function bo(s){if(typeof s!="number"&&s&&!s.sa){var l=s.src;if(l&&l[gh])Jw(l.J,s);else{var d=s.type,p=s.proxy;l.removeEventListener?l.removeEventListener(d,p,s.capture):l.detachEvent?l.detachEvent(kC(d),p):l.addListener&&l.removeListener&&l.removeListener(p),(d=fg(l))?(Jw(d,s),d.g==0&&(d.src=null,l[Zw]=null)):dg(s)}}}function kC(s){return s in e0?e0[s]:e0[s]="on"+s}function xC(s,l,d,p){var v=!0;if((s=fg(s))&&(l=s.a[l.toString()]))for(l=l.concat(),s=0;s<l.length;s++){var y=l[s];y&&y.capture==d&&!y.sa&&(y=NC(y,p),v=v&&y!==!1)}return v}function NC(s,l){var d=s.listener,p=s.La||s.src;return s.Ia&&bo(s),d.call(p,l)}function SU(s,l){if(s.sa)return!0;if(!PC){if(!l)e:{l=["window","event"];for(var d=g,p=0;p<l.length;p++)if(d=d[l[p]],d==null){l=null;break e}l=d}if(p=l,l=new Jn(p,this),d=!0,!(0>p.keyCode||p.returnValue!=null)){e:{var v=!1;if(p.keyCode==0)try{p.keyCode=-1;break e}catch{v=!0}(v||p.returnValue==null)&&(p.returnValue=!0)}for(p=[],v=l.g;v;v=v.parentNode)p.push(v);for(s=s.type,v=p.length-1;!l.h&&0<=v;v--){l.g=p[v];var y=xC(p[v],s,!0,l);d=d&&y}for(v=0;!l.h&&v<p.length;v++)l.g=p[v],y=xC(p[v],s,!1,l),d=d&&y}return d}return NC(s,new Jn(l,this))}function fg(s){return s=s[Zw],s instanceof hg?s:null}var t0="__closure_events_fn_"+(1e9*Math.random()>>>0);function n0(s){return j(s)?s:(s[t0]||(s[t0]=function(l){return s.handleEvent(l)}),s[t0])}function Xt(){yt.call(this),this.J=new hg(this),this.wb=this,this.Ha=null}_e(Xt,yt),Xt.prototype[gh]=!0,Xt.prototype.Za=function(s){this.Ha=s},Xt.prototype.removeEventListener=function(s,l,d,p){Ha(this,s,l,d,p)};function Co(s,l){var d,p=s.Ha;if(p)for(d=[];p;p=p.Ha)d.push(p);if(s=s.wb,p=l.type||l,T(l))l=new xs(l,s);else if(l instanceof xs)l.target=l.target||s;else{var v=l;l=new xs(p,s),_s(l,v)}if(v=!0,d)for(var y=d.length-1;!l.h&&0<=y;y--){var A=l.g=d[y];v=pg(A,p,!0,l)&&v}if(l.h||(A=l.g=s,v=pg(A,p,!0,l)&&v,l.h||(v=pg(A,p,!1,l)&&v)),d)for(y=0;!l.h&&y<d.length;y++)A=l.g=d[y],v=pg(A,p,!1,l)&&v;return v}Xt.prototype.o=function(){if(Xt.K.o.call(this),this.J){var s=this.J,l;for(l in s.a){for(var d=s.a[l],p=0;p<d.length;p++)dg(d[p]);delete s.a[l],s.g--}}this.Ha=null};function pg(s,l,d,p){if(l=s.J.a[String(l)],!l)return!0;l=l.concat();for(var v=!0,y=0;y<l.length;++y){var A=l[y];if(A&&!A.sa&&A.capture==d){var M=A.listener,q=A.La||A.src;A.Ia&&Jw(s.J,A),v=M.call(q,p)!==!1&&v}}return v&&p.qb!=0}var Pi={},DC=0;function OC(s,l){if(!s)throw Error("Event target element must be provided!");if(s=i0(s),Pi[s]&&Pi[s].length)for(var d=0;d<Pi[s].length;d++)Co(Pi[s][d],l)}function bU(s){var l=i0(s.N());Pi[l]&&Pi[l].length&&(cu(Pi[l],function(d){return d==s}),Pi[l].length||delete Pi[l])}function i0(s){return typeof s.a>"u"&&(s.a=DC,DC++),s.a}function mg(s){if(!s)throw Error("Event target element must be provided!");Xt.call(this),this.a=s}u(mg,Xt),mg.prototype.N=function(){return this.a},mg.prototype.register=function(){var s=i0(this.N());Pi[s]?Dt(Pi[s],this)||Pi[s].push(this):Pi[s]=[this]};function LC(s){if(!s)return!1;try{return!!s.$goog_Thenable}catch{return!1}}function r0(s,l){this.h=s,this.j=l,this.g=0,this.a=null}r0.prototype.get=function(){if(0<this.g){this.g--;var s=this.a;this.a=s.next,s.next=null}else s=this.h();return s};function MC(s,l){s.j(l),100>s.g&&(s.g++,l.next=s.a,s.a=l)}function VC(){this.g=this.a=null}var FC=new r0(function(){return new s0},function(s){s.reset()});VC.prototype.add=function(s,l){var d=FC.get();d.set(s,l),this.g?this.g.next=d:this.a=d,this.g=d};function CU(){var s=BC,l=null;return s.a&&(l=s.a,s.a=s.a.next,s.a||(s.g=null),l.next=null),l}function s0(){this.next=this.g=this.a=null}s0.prototype.set=function(s,l){this.a=s,this.g=l,this.next=null},s0.prototype.reset=function(){this.next=this.g=this.a=null};function UC(s){g.setTimeout(function(){throw s},0)}var o0;function AU(){var s=g.MessageChannel;if(typeof s>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Ae("Presto")&&(s=function(){var v=document.createElement("IFRAME");v.style.display="none",v.src="",document.documentElement.appendChild(v);var y=v.contentWindow;v=y.document,v.open(),v.write(""),v.close();var A="callImmediate"+Math.random(),M=y.location.protocol=="file:"?"*":y.location.protocol+"//"+y.location.host;v=O(function(q){(M=="*"||q.origin==M)&&q.data==A&&this.port1.onmessage()},this),y.addEventListener("message",v,!1),this.port1={},this.port2={postMessage:function(){y.postMessage(A,M)}}}),typeof s<"u"&&!Ae("Trident")&&!Ae("MSIE")){var l=new s,d={},p=d;return l.port1.onmessage=function(){if(_(d.next)){d=d.next;var v=d.gb;d.gb=null,v()}},function(v){p.next={gb:v},p=p.next,l.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(v){var y=document.createElement("SCRIPT");y.onreadystatechange=function(){y.onreadystatechange=null,y.parentNode.removeChild(y),y=null,v(),v=null},document.documentElement.appendChild(y)}:function(v){g.setTimeout(v,0)}}function a0(s,l){gg||PU(),l0||(gg(),l0=!0),BC.add(s,l)}var gg;function PU(){if(g.Promise&&g.Promise.resolve){var s=g.Promise.resolve(void 0);gg=function(){s.then(jC)}}else gg=function(){var l=jC;!j(g.setImmediate)||g.Window&&g.Window.prototype&&!Ae("Edge")&&g.Window.prototype.setImmediate==g.setImmediate?(o0||(o0=AU()),o0(l)):g.setImmediate(l)}}var l0=!1,BC=new VC;function jC(){for(var s;s=CU();){try{s.a.call(s.g)}catch(l){UC(l)}MC(FC,s)}l0=!1}function Zt(s){if(this.a=Ka,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,s!=R)try{var l=this;s.call(void 0,function(d){Qa(l,yh,d)},function(d){if(!(d instanceof Lu))try{throw d instanceof Error?d:Error("Promise rejected.")}catch{}Qa(l,Ns,d)})}catch(d){Qa(this,Ns,d)}}var Ka=0,yh=2,Ns=3;function zC(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}zC.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var GC=new r0(function(){return new zC},function(s){s.reset()});function u0(s,l,d){var p=GC.get();return p.s=s,p.g=l,p.j=d,p}function Ot(s){if(s instanceof Zt)return s;var l=new Zt(R);return Qa(l,yh,s),l}function Ou(s){return new Zt(function(l,d){d(s)})}Zt.prototype.then=function(s,l,d){return $C(this,j(s)?s:null,j(l)?l:null,d)},Zt.prototype.$goog_Thenable=!0,t=Zt.prototype,t.fc=function(s,l){return s=u0(s,s,l),s.h=!0,c0(this,s),this},t.Ca=function(s,l){return $C(this,null,s,l)},t.cancel=function(s){this.a==Ka&&a0(function(){var l=new Lu(s);qC(this,l)},this)};function qC(s,l){if(s.a==Ka)if(s.h){var d=s.h;if(d.g){for(var p=0,v=null,y=null,A=d.g;A&&(A.h||(p++,A.a==s&&(v=A),!(v&&1<p)));A=A.next)v||(y=A);v&&(d.a==Ka&&p==1?qC(d,l):(y?(p=y,p.next==d.j&&(d.j=p),p.next=p.next.next):HC(d),KC(d,v,Ns,l)))}s.h=null}else Qa(s,Ns,l)}function c0(s,l){s.g||s.a!=yh&&s.a!=Ns||WC(s),s.j?s.j.next=l:s.g=l,s.j=l}function $C(s,l,d,p){var v=u0(null,null,null);return v.a=new Zt(function(y,A){v.s=l?function(M){try{var q=l.call(p,M);y(q)}catch(X){A(X)}}:y,v.g=d?function(M){try{var q=d.call(p,M);!_(q)&&M instanceof Lu?A(M):y(q)}catch(X){A(X)}}:A}),v.a.h=s,c0(s,v),v.a}t.hc=function(s){this.a=Ka,Qa(this,yh,s)},t.ic=function(s){this.a=Ka,Qa(this,Ns,s)};function Qa(s,l,d){if(s.a==Ka){s===d&&(l=Ns,d=new TypeError("Promise cannot resolve to itself")),s.a=1;e:{var p=d,v=s.hc,y=s.ic;if(p instanceof Zt){c0(p,u0(v||R,y||null,s));var A=!0}else if(LC(p))p.then(v,y,s),A=!0;else{if(B(p))try{var M=p.then;if(j(M)){RU(p,M,v,y,s),A=!0;break e}}catch(q){y.call(s,q),A=!0;break e}A=!1}}A||(s.A=d,s.a=l,s.h=null,WC(s),l!=Ns||d instanceof Lu||kU(s,d))}}function RU(s,l,d,p,v){function y(q){M||(M=!0,p.call(v,q))}function A(q){M||(M=!0,d.call(v,q))}var M=!1;try{l.call(s,A,y)}catch(q){y(q)}}function WC(s){s.i||(s.i=!0,a0(s.Hb,s))}function HC(s){var l=null;return s.g&&(l=s.g,s.g=l.next,l.next=null),s.g||(s.j=null),l}t.Hb=function(){for(var s;s=HC(this);)KC(this,s,this.a,this.A);this.i=!1};function KC(s,l,d,p){if(d==Ns&&l.g&&!l.h)for(;s&&s.s;s=s.h)s.s=!1;if(l.a)l.a.h=null,QC(l,d,p);else try{l.h?l.s.call(l.j):QC(l,d,p)}catch(v){YC.call(null,v)}MC(GC,l)}function QC(s,l,d){l==yh?s.s.call(s.j,d):s.g&&s.g.call(s.j,d)}function kU(s,l){s.s=!0,a0(function(){s.s&&YC.call(null,l)})}var YC=UC;function Lu(s){rt.call(this,s)}_e(Lu,rt),Lu.prototype.name="cancel";function JC(s,l,d){l||(l={}),d=d||window;var p=s instanceof zn?s:Su(typeof s.href<"u"?s.href:String(s));s=l.target||s.target;var v=[];for(y in l)switch(y){case"width":case"height":case"top":case"left":v.push(y+"="+l[y]);break;case"target":case"noopener":case"noreferrer":break;default:v.push(y+"="+(l[y]?1:0))}var y=v.join(",");return(Ae("iPhone")&&!Ae("iPod")&&!Ae("iPad")||Ae("iPad")||Ae("iPod"))&&d.navigator&&d.navigator.standalone&&s&&s!="_self"?(y=d.document.createElement("A"),p=p instanceof zn?p:rg(p),y.href=$r(p),y.setAttribute("target",s),l.noreferrer&&y.setAttribute("rel","noreferrer"),l=document.createEvent("MouseEvent"),l.initMouseEvent("click",!0,!0,d,1),y.dispatchEvent(l),d={}):l.noreferrer?(d=d.open("",s,y),l=$r(p).toString(),d&&(tg&&l.indexOf(";")!=-1&&(l="'"+l.replace(/'/g,"%27")+"'"),d.opener=null,l=za('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Br(l)+'">',null),d.document.write(gr(l)),d.document.close())):(d=d.open($r(p).toString(),s,y))&&l.noopener&&(d.opener=null),d}function XC(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function Mu(s){JC(s,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function vg(s,l){if(s=B(s)&&s.nodeType==1?s:document.querySelector(String(s)),s==null)throw Error(l||"Cannot find element.");return s}function Ds(){return window.location.href}function xU(){var s=null;return new Zt(function(l){g.document.readyState=="complete"?l():(s=function(){l()},vh(window,"load",s))}).Ca(function(l){throw Ha(window,"load",s),l})}function NU(){for(var s=32,l=[];0<s;)l.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return l.join("")}function DU(s,l,d){return d=d===void 0?{}:d,Object.keys(s).filter(function(p){return l.includes(p)}).reduce(function(p,v){return p[v]=s[v],p},d)}function Ao(s){var l=MU;this.s=[],this.T=l,this.O=s||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}Ao.prototype.cancel=function(s){if(this.a)this.h instanceof Ao&&this.h.cancel();else{if(this.g){var l=this.g;delete this.g,s?l.cancel(s):(l.C--,0>=l.C&&l.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(s=new wh,yg(this),_h(this,!1,s))}},Ao.prototype.L=function(s,l){this.A=!1,_h(this,s,l)};function _h(s,l,d){s.a=!0,s.h=d,s.j=!l,tA(s)}function yg(s){if(s.a){if(!s.J)throw new _g;s.J=!1}}Ao.prototype.callback=function(s){yg(this),_h(this,!0,s)};function ZC(s,l,d){s.s.push([l,d,void 0]),s.a&&tA(s)}Ao.prototype.then=function(s,l,d){var p,v,y=new Zt(function(A,M){p=A,v=M});return ZC(this,p,function(A){A instanceof wh?y.cancel():v(A)}),y.then(s,l,d)},Ao.prototype.$goog_Thenable=!0;function eA(s){return ur(s.s,function(l){return j(l[1])})}function tA(s){if(s.i&&s.a&&eA(s)){var l=s.i,d=wg[l];d&&(g.clearTimeout(d.a),delete wg[l]),s.i=0}s.g&&(s.g.C--,delete s.g),l=s.h;for(var p=d=!1;s.s.length&&!s.A;){var v=s.s.shift(),y=v[0],A=v[1];if(v=v[2],y=s.j?A:y)try{var M=y.call(v||s.O,l);_(M)&&(s.j=s.j&&(M==l||M instanceof Error),s.h=l=M),(LC(l)||typeof g.Promise=="function"&&l instanceof g.Promise)&&(p=!0,s.A=!0)}catch(q){l=q,s.j=!0,eA(s)||(d=!0)}}s.h=l,p&&(M=O(s.L,s,!0),p=O(s.L,s,!1),l instanceof Ao?(ZC(l,M,p),l.l=!0):l.then(M,p)),d&&(l=new nA(l),wg[l.a]=l,s.i=l.a)}function _g(){rt.call(this)}_e(_g,rt),_g.prototype.message="Deferred has already fired",_g.prototype.name="AlreadyCalledError";function wh(){rt.call(this)}_e(wh,rt),wh.prototype.message="Deferred was canceled",wh.prototype.name="CanceledError";function nA(s){this.a=g.setTimeout(O(this.h,this),0),this.g=s}nA.prototype.h=function(){throw delete wg[this.a],this.g};var wg={};function OU(s){var l={},d=l.document||document,p=vo(s).toString(),v=document.createElement("SCRIPT"),y={rb:v,sb:void 0},A=new Ao(y),M=null,q=l.timeout!=null?l.timeout:5e3;return 0<q&&(M=window.setTimeout(function(){Eg(v,!0);var X=new d0(FU,"Timeout reached for loading script "+p);yg(A),_h(A,!1,X)},q),y.sb=M),v.onload=v.onreadystatechange=function(){v.readyState&&v.readyState!="loaded"&&v.readyState!="complete"||(Eg(v,l.xc||!1,M),A.callback(null))},v.onerror=function(){Eg(v,!0,M);var X=new d0(VU,"Error while loading script "+p);yg(A),_h(A,!1,X)},y=l.attributes||{},_s(y,{type:"text/javascript",charset:"UTF-8"}),ch(v,y),Kw(v,s),LU(d).appendChild(v),A}function LU(s){var l=(s||document).getElementsByTagName("HEAD");return l&&l.length!=0?l[0]:s.documentElement}function MU(){if(this&&this.rb){var s=this.rb;s&&s.tagName=="SCRIPT"&&Eg(s,!0,this.sb)}}function Eg(s,l,d){d!=null&&g.clearTimeout(d),s.onload=R,s.onerror=R,s.onreadystatechange=R,l&&window.setTimeout(function(){Rs(s)},0)}var VU=0,FU=1;function d0(s,l){var d="Jsloader error (code #"+s+")";l&&(d+=": "+l),rt.call(this,d),this.code=s}_e(d0,rt);function Eh(){return g.google&&g.google.accounts&&g.google.accounts.id||null}function h0(s){this.a=s||Eh(),this.h=!1,this.g=null}h0.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())};function iA(s,l,d){if(s.a&&l)return function(){return s.h=!0,new Zt(function(v){s.g=v,s.a.initialize({client_id:l,callback:v,auto_select:!d}),s.a.prompt()})}();if(l){var p=f0.Xa().load().then(function(){return s.a=Eh(),iA(s,l,d)}).Ca(function(){return null});return Ot(p)}return Ot(null)}S(h0);var UU=new pr(nt,"https://accounts.google.com/gsi/client");function f0(){this.a=null}f0.prototype.load=function(){var s=this;if(this.a)return this.a;var l=ja();return Eh()?Ot():this.a=xU().then(function(){if(!Eh())return new Zt(function(d,p){var v=setTimeout(function(){s.a=null,p(Error("Network error!"))},1e4);g.onGoogleLibraryLoad=function(){clearTimeout(v),d()},Ot(OU(l)).then(function(){Eh()&&d()}).Ca(function(y){clearTimeout(v),s.a=null,p(y)})})})},S(f0);function p0(s,l){this.a=s,this.g=l||function(d){throw d}}p0.prototype.confirm=function(s){return Ot(this.a.confirm(s)).Ca(this.g)};function m0(s,l,d){this.reset(s,l,d,void 0,void 0)}m0.prototype.a=null,m0.prototype.reset=function(s,l,d,p,v){this.h=p||Ge(),this.j=s,this.s=l,this.g=d,delete this.a};function g0(s){this.s=s,this.a=this.h=this.j=this.g=null}function Ig(s,l){this.name=s,this.value=l}Ig.prototype.toString=function(){return this.name};var rA=new Ig("SEVERE",1e3),sA=new Ig("WARNING",900),oA=new Ig("CONFIG",700);function aA(s){return s.j?s.j:s.g?aA(s.g):(he("Root logger has no level set."),null)}g0.prototype.log=function(s,l,d){if(s.value>=aA(this).value)for(j(l)&&(l=l()),s=new m0(s,String(l),this.s),d&&(s.a=d),d=this;d;){var p=d,v=s;if(p.a)for(var y=0;l=p.a[y];y++)l(v);d=d.g}};var v0={},Ih=null;function lA(){Ih||(Ih=new g0(""),v0[""]=Ih,Ih.j=oA)}function uA(s){lA();var l;if(!(l=v0[s])){l=new g0(s);var d=s.lastIndexOf("."),p=s.substr(d+1);d=uA(s.substr(0,d)),d.h||(d.h={}),d.h[p]=l,l.g=d,v0[s]=l}return l}function Tg(){this.a=Ge()}var y0=null;Tg.prototype.set=function(s){this.a=s},Tg.prototype.reset=function(){this.set(Ge())},Tg.prototype.get=function(){return this.a};function Th(s){this.j=s||"",y0||(y0=new Tg),this.s=y0}Th.prototype.a=!0,Th.prototype.g=!0,Th.prototype.h=!1;function Ya(s){return 10>s?"0"+s:String(s)}function BU(s,l){s=(s.h-l)/1e3,l=s.toFixed(3);var d=0;if(1>s)d=2;else for(;100>s;)d++,s*=10;for(;0<d--;)l=" "+l;return l}function cA(s){Th.call(this,s)}_e(cA,Th);function jU(s,l){var d=[];if(d.push(s.j," "),s.g){var p=new Date(l.h);d.push("[",Ya(p.getFullYear()-2e3)+Ya(p.getMonth()+1)+Ya(p.getDate())+" "+Ya(p.getHours())+":"+Ya(p.getMinutes())+":"+Ya(p.getSeconds())+"."+Ya(Math.floor(p.getMilliseconds()/10)),"] ")}return d.push("[",BU(l,s.s.get()),"s] "),d.push("[",l.g,"] "),d.push(l.s),s.h&&(l=l.a)&&d.push(`
`,l instanceof Error?l.message:l.toString()),s.a&&d.push(`
`),d.join("")}function dA(){this.s=O(this.h,this),this.a=new cA,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}dA.prototype.h=function(s){function l(y){if(y){if(y.value>=rA.value)return"error";if(y.value>=sA.value)return"warn";if(y.value>=oA.value)return"log"}return"debug"}if(!this.j[s.g]){var d=jU(this.a,s),p=zU;if(p){var v=l(s.j);GU(p,v,d,s.a)}}};var zU=g.console;function GU(s,l,d,p){s[l]?s[l](d,p||""):s.log(d,p||"")}function Ri(s,l){var d=_0;d&&d.log(rA,s,l)}var _0;_0=uA("firebaseui");var w0=new dA;if(w0.g!=1){var Sg;lA(),Sg=Ih;var qU=w0.s;Sg.a||(Sg.a=[]),Sg.a.push(qU),w0.g=!0}function Po(s){var l=_0;l&&l.log(sA,s,void 0)}function hA(){this.a=(typeof document>"u"?null:document)||{cookie:""}}t=hA.prototype,t.set=function(s,l,d,p,v,y){if(/[;=\s]/.test(s))throw Error('Invalid cookie name "'+s+'"');if(/[;\r\n]/.test(l))throw Error('Invalid cookie value "'+l+'"');_(d)||(d=-1),v=v?";domain="+v:"",p=p?";path="+p:"",y=y?";secure":"",d=0>d?"":d==0?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(Ge()+1e3*d).toUTCString(),this.a.cookie=s+"="+l+v+p+d+y},t.get=function(s,l){for(var d=s+"=",p=(this.a.cookie||"").split(";"),v=0,y;v<p.length;v++){if(y=kn(p[v]),y.lastIndexOf(d,0)==0)return y.substr(d.length);if(y==s)return""}return l},t.ja=function(){return E0(this).keys},t.la=function(){return E0(this).values},t.clear=function(){for(var s=E0(this).keys,l=s.length-1;0<=l;l--){var d=s[l];this.get(d),this.set(d,"",0,void 0,void 0)}};function E0(s){s=(s.a.cookie||"").split(";");for(var l=[],d=[],p,v,y=0;y<s.length;y++)v=kn(s[y]),p=v.indexOf("="),p==-1?(l.push(""),d.push(v)):(l.push(v.substring(0,p)),d.push(v.substring(p+1)));return{keys:l,values:d}}var bg=new hA;function fA(){}function Vu(s,l,d,p){this.h=typeof s<"u"&&s!==null?s:-1,this.g=l||null,this.a=d||null,this.j=!!p}u(Vu,fA),Vu.prototype.set=function(s,l){bg.set(s,l,this.h,this.g,this.a,this.j)},Vu.prototype.get=function(s){return bg.get(s)||null},Vu.prototype.ra=function(s){var l=this.g,d=this.a;bg.get(s),bg.set(s,"",0,l,d)};function I0(s,l){this.g=s,this.a=l||null}function pA(s){return{email:s.g,credential:s.a&&s.a.toJSON()}}function mA(s){if(s&&s.email){var l=s.credential&&pe.auth.AuthCredential.fromJSON(s.credential);return new I0(s.email,l)}return null}function gA(s){this.a=s||null}function vA(s){for(var l=[],d=0,p=0;p<s.length;p++){var v=s.charCodeAt(p);255<v&&(l[d++]=v&255,v>>=8),l[d++]=v}return l}function $U(s){return lr(s,function(l){return l=l.toString(16),1<l.length?l:"0"+l}).join("")}function Cg(s){for(this.i=s,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(Fu*(this.j+1)),s=0;s<this.g;s++)this.a[s]=[this.i[4*s],this.i[4*s+1],this.i[4*s+2],this.i[4*s+3]];var l=Array(4);for(s=this.g;s<Fu*(this.j+1);s++){if(l[0]=this.a[s-1][0],l[1]=this.a[s-1][1],l[2]=this.a[s-1][2],l[3]=this.a[s-1][3],s%this.g==0){var d=l,p=d[0];d[0]=d[1],d[1]=d[2],d[2]=d[3],d[3]=p,IA(l),l[0]^=Pg[s/this.g][0],l[1]^=Pg[s/this.g][1],l[2]^=Pg[s/this.g][2],l[3]^=Pg[s/this.g][3]}else 6<this.g&&s%this.g==4&&IA(l);this.a[s]=Array(4),this.a[s][0]=this.a[s-this.g][0]^l[0],this.a[s][1]=this.a[s-this.g][1]^l[1],this.a[s][2]=this.a[s-this.g][2]^l[2],this.a[s][3]=this.a[s-this.g][3]^l[3]}}Cg.prototype.A=16;var Fu=Cg.prototype.A/4;function yA(s,l){for(var d,p=0;p<Fu;p++)for(var v=0;4>v;v++)d=4*v+p,d=l[d],s.h[p][v]=d}function _A(s){for(var l=[],d=0;d<Fu;d++)for(var p=0;4>p;p++)l[4*p+d]=s.h[d][p];return l}function Uu(s,l){for(var d=0;4>d;d++)for(var p=0;4>p;p++)s.h[d][p]^=s.a[4*l+p][d]}function Ag(s,l){for(var d=0;4>d;d++)for(var p=0;4>p;p++)s.h[d][p]=l[s.h[d][p]]}function wA(s){for(var l=1;4>l;l++)for(var d=0;4>d;d++)s.s[l][d]=s.h[l][d];for(l=1;4>l;l++)for(d=0;4>d;d++)s.h[l][d]=s.s[l][(d+l)%Fu]}function EA(s){for(var l=1;4>l;l++)for(var d=0;4>d;d++)s.s[l][(d+l)%Fu]=s.h[l][d];for(l=1;4>l;l++)for(d=0;4>d;d++)s.h[l][d]=s.s[l][d]}function IA(s){s[0]=Bu[s[0]],s[1]=Bu[s[1]],s[2]=Bu[s[2]],s[3]=Bu[s[3]]}var Bu=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],TA=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Pg=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Rg=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],kg=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],xg=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Ng=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Dg=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Og=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function SA(s,l){s=new Cg(CA(s)),l=vA(l);for(var d=l.splice(0,16),p="",v;d.length;){v=16-d.length;for(var y=0;y<v;y++)d.push(0);for(v=s,yA(v,d),Uu(v,0),d=1;d<v.j;++d){Ag(v,Bu),wA(v),y=v.h;for(var A=v.s[0],M=0;4>M;M++)A[0]=y[0][M],A[1]=y[1][M],A[2]=y[2][M],A[3]=y[3][M],y[0][M]=Rg[A[0]]^kg[A[1]]^A[2]^A[3],y[1][M]=A[0]^Rg[A[1]]^kg[A[2]]^A[3],y[2][M]=A[0]^A[1]^Rg[A[2]]^kg[A[3]],y[3][M]=kg[A[0]]^A[1]^A[2]^Rg[A[3]];Uu(v,d)}Ag(v,Bu),wA(v),Uu(v,v.j),p+=$U(_A(v)),d=l.splice(0,16)}return p}function bA(s,l){s=new Cg(CA(s));for(var d=[],p=0;p<l.length;p+=2)d.push(parseInt(l.substring(p,p+2),16));var v=d.splice(0,16);for(l="";v.length;){for(p=s,yA(p,v),Uu(p,p.j),v=1;v<p.j;++v){EA(p),Ag(p,TA),Uu(p,p.j-v);for(var y=p.h,A=p.s[0],M=0;4>M;M++)A[0]=y[0][M],A[1]=y[1][M],A[2]=y[2][M],A[3]=y[3][M],y[0][M]=Og[A[0]]^Ng[A[1]]^Dg[A[2]]^xg[A[3]],y[1][M]=xg[A[0]]^Og[A[1]]^Ng[A[2]]^Dg[A[3]],y[2][M]=Dg[A[0]]^xg[A[1]]^Og[A[2]]^Ng[A[3]],y[3][M]=Ng[A[0]]^Dg[A[1]]^xg[A[2]]^Og[A[3]]}if(EA(p),Ag(p,TA),Uu(p,0),p=_A(p),8192>=p.length)p=String.fromCharCode.apply(null,p);else{for(v="",y=0;y<p.length;y+=8192)v+=String.fromCharCode.apply(null,Qd(p,y,y+8192));p=v}l+=p,v=d.splice(0,16)}return l.replace(/(\x00)+$/,"")}function CA(s){s=vA(s.substring(0,32));for(var l=32-s.length,d=0;d<l;d++)s.push(0);return s}function AA(s){var l=[];return T0(new WU,s,l),l.join("")}function WU(){}function T0(s,l,d){if(l==null)d.push("null");else{if(typeof l=="object"){if(k(l)){var p=l;l=p.length,d.push("[");for(var v="",y=0;y<l;y++)d.push(v),T0(s,p[y],d),v=",";d.push("]");return}if(l instanceof String||l instanceof Number||l instanceof Boolean)l=l.valueOf();else{d.push("{"),v="";for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&(y=l[p],typeof y!="function"&&(d.push(v),RA(p,d),d.push(":"),T0(s,y,d),v=","));d.push("}");return}}switch(typeof l){case"string":RA(l,d);break;case"number":d.push(isFinite(l)&&!isNaN(l)?String(l):"null");break;case"boolean":d.push(String(l));break;case"function":d.push("null");break;default:throw Error("Unknown type: "+typeof l)}}}var PA={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},HU=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function RA(s,l){l.push('"',s.replace(HU,function(d){var p=PA[d];return p||(p="\\u"+(d.charCodeAt(0)|65536).toString(16).substr(1),PA[d]=p),p}),'"')}function Sh(s){this.a=s}Sh.prototype.set=function(s,l){_(l)?this.a.set(s,AA(l)):this.a.ra(s)},Sh.prototype.get=function(s){try{var l=this.a.get(s)}catch{return}if(l!==null)try{return JSON.parse(l)}catch{throw"Storage: Invalid value was encountered"}};function Lg(){}_e(Lg,fA),Lg.prototype.clear=function(){var s=Jm(this.ha(!0)),l=this;Be(s,function(d){l.ra(d)})};function Mg(s){this.a=s}_e(Mg,Lg);function Vg(s){if(!s.a)return!1;try{return s.a.setItem("__sak","1"),s.a.removeItem("__sak"),!0}catch{return!1}}t=Mg.prototype,t.set=function(s,l){try{this.a.setItem(s,l)}catch{throw this.a.length==0?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},t.get=function(s){if(s=this.a.getItem(s),!T(s)&&s!==null)throw"Storage mechanism: Invalid value was encountered";return s},t.ra=function(s){this.a.removeItem(s)},t.ha=function(s){var l=0,d=this.a,p=new jr;return p.next=function(){if(l>=d.length)throw ws;var v=d.key(l++);if(s)return v;if(v=d.getItem(v),!T(v))throw"Storage mechanism: Invalid value was encountered";return v},p},t.clear=function(){this.a.clear()},t.key=function(s){return this.a.key(s)};function S0(){var s=null;try{s=window.localStorage||null}catch{}this.a=s}_e(S0,Mg);function b0(){var s=null;try{s=window.sessionStorage||null}catch{}this.a=s}_e(b0,Mg);function ju(s,l){this.g=s,this.a=l+"::"}_e(ju,Lg),ju.prototype.set=function(s,l){this.g.set(this.a+s,l)},ju.prototype.get=function(s){return this.g.get(this.a+s)},ju.prototype.ra=function(s){this.g.ra(this.a+s)},ju.prototype.ha=function(s){var l=this.g.ha(!0),d=this,p=new jr;return p.next=function(){for(var v=l.next();v.substr(0,d.a.length)!=d.a;)v=l.next();return s?v.substr(d.a.length):d.g.get(v)},p},Vg(new S0);var kA,xA=new b0;kA=Vg(xA)?new ju(xA,"firebaseui"):null;var C0=new Sh(kA),A0={name:"pendingEmailCredential",storage:C0},Ja={name:"redirectStatus",storage:C0},bh={name:"redirectUrl",storage:C0},zu={name:"emailForSignIn",storage:new Sh(new Vu(3600,"/"))},Ch={name:"pendingEncryptedCredential",storage:new Sh(new Vu(3600,"/"))};function Gu(s,l){return s.storage.get(l?s.name+":"+l:s.name)}function fi(s,l){s.storage.a.ra(l?s.name+":"+l:s.name)}function qu(s,l,d){s.storage.set(d?s.name+":"+d:s.name,l)}function NA(s){return Gu(bh,s)||null}function Qr(s){return s=Gu(A0,s)||null,mA(s)}function Yr(s){fi(A0,s)}function DA(s,l){qu(A0,pA(s),l)}function P0(s){return(s=Gu(Ja,s)||null)&&typeof s.tenantId<"u"?new gA(s.tenantId):null}function KU(s,l){qu(Ja,{tenantId:s.a},l)}function QU(s,l){l=Gu(zu,l);var d=null;if(l)try{var p=bA(s,l),v=JSON.parse(p);d=v&&v.email||null}catch{}return d}function YU(s,l){l=Gu(Ch,l);var d=null;if(l)try{var p=bA(s,l);d=JSON.parse(p)}catch{}return mA(d||null)}function JU(s,l,d){qu(Ch,SA(s,JSON.stringify(pA(l))),d)}function R0(){this.W={}}function qt(s,l,d){if(l.toLowerCase()in s.W)throw Error("Configuration "+l+" has already been defined.");s.W[l.toLowerCase()]=d}function k0(s,l,d){if(!(l.toLowerCase()in s.W))throw Error("Configuration "+l+" is not defined.");s.W[l.toLowerCase()]=d}R0.prototype.get=function(s){if(!(s.toLowerCase()in this.W))throw Error("Configuration "+s+" is not defined.");return this.W[s.toLowerCase()]};function x0(s,l){if(s=s.get(l),!s)throw Error("Configuration "+l+" is required.");return s}function N0(){this.g=void 0,this.a={}}t=N0.prototype,t.set=function(s,l){OA(this,s,l,!1)},t.add=function(s,l){OA(this,s,l,!0)};function OA(s,l,d,p){for(var v=0;v<l.length;v++){var y=l.charAt(v);s.a[y]||(s.a[y]=new N0),s=s.a[y]}if(p&&s.g!==void 0)throw Error('The collection already contains the key "'+l+'"');s.g=d}t.get=function(s){e:{for(var l=this,d=0;d<s.length;d++)if(l=l.a[s.charAt(d)],!l){s=void 0;break e}s=l}return s?s.g:void 0},t.la=function(){var s=[];return LA(this,s),s};function LA(s,l){s.g!==void 0&&l.push(s.g);for(var d in s.a)LA(s.a[d],l)}t.ja=function(){var s=[];return MA(this,"",s),s};function MA(s,l,d){s.g!==void 0&&d.push(l);for(var p in s.a)MA(s.a[p],l+p,d)}t.clear=function(){this.a={},this.g=void 0};function VA(s){for(this.a=s,this.g=new N0,s=0;s<this.a.length;s++){var l=this.g.get("+"+this.a[s].b);l?l.push(this.a[s]):this.g.add("+"+this.a[s].b,[this.a[s]])}}function Fg(s,l){s=s.g;var d={},p=0;for(s.g!==void 0&&(d[p]=s.g);p<l.length;p++){var v=l.charAt(p);if(!(v in s.a))break;s=s.a[v],s.g!==void 0&&(d[p]=s.g)}for(var y in d)if(d.hasOwnProperty(y))return d[y];return[]}function Xa(s){for(var l=0;l<Xn.length;l++)if(Xn[l].c===s)return Xn[l];return null}function FA(s){s=s.toUpperCase();for(var l=[],d=0;d<Xn.length;d++)Xn[d].f===s&&l.push(Xn[d]);return l}function UA(s){if(0<s.length&&s.charAt(0)=="+"){s=s.substring(1);for(var l=[],d=0;d<Xn.length;d++)Xn[d].b==s&&l.push(Xn[d]);s=l}else s=FA(s);return s}function BA(s){s.sort(function(l,d){return l.name.localeCompare(d.name,"en")})}var Xn=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];BA(Xn);var Ah=new VA(Xn);function jA(s,l){this.a=s,this.Aa=l}function zA(s){s=kn(s);var l=Fg(Ah,s);return 0<l.length?new jA(l[0].b=="1"?"1-US-0":l[0].c,kn(s.substr(l[0].b.length+1))):null}function D0(s){var l=Xa(s.a);if(!l)throw Error("Country ID "+s.a+" not found.");return"+"+l.b+s.Aa}function GA(s,l){for(var d=0;d<s.length;d++)if(!Dt(qA,s[d])&&($u!==null&&s[d]in $u||Dt(l,s[d])))return s[d];return null}var qA=["emailLink","password","phone"],$u={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function XU(){this.a=new R0,qt(this.a,"autoUpgradeAnonymousUsers"),qt(this.a,"callbacks"),qt(this.a,"credentialHelper",jg),qt(this.a,"immediateFederatedRedirect",!1),qt(this.a,"popupMode",!1),qt(this.a,"privacyPolicyUrl"),qt(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),qt(this.a,"queryParameterForWidgetMode","mode"),qt(this.a,"signInFlow"),qt(this.a,"signInOptions"),qt(this.a,"signInSuccessUrl"),qt(this.a,"siteName"),qt(this.a,"tosUrl"),qt(this.a,"widgetUrl"),qt(this.a,"adminRestrictedOperation")}function Ug(s){var l=!!s.a.get("autoUpgradeAnonymousUsers");return l&&!eP(s)&&Ri('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),l}function Bg(s){s=s.a.get("signInOptions")||[];for(var l=[],d=0;d<s.length;d++){var p=s[d];p=B(p)?p:{provider:p},p.provider&&l.push(p)}return l}function ki(s,l){s=Bg(s);for(var d=0;d<s.length;d++)if(s[d].provider===l)return s[d];return null}function Wu(s){return Bg(s).map(function(l){return l.provider})}function Ph(s,l){s=$A(s);for(var d=0;d<s.length;d++)if(s[d].providerId===l)return s[d];return null}function $A(s){return Bg(s).map(function(l){if($u[l.provider]||Dt(l5,l.provider)){l={providerId:l.provider,S:l.providerName||null,V:l.fullLabel||null,ta:l.buttonColor||null,za:l.iconUrl?$r(Su(l.iconUrl)).toString():null};for(var d in l)l[d]===null&&delete l[d];return l}return{providerId:l.provider,S:l.providerName||null,V:l.fullLabel||null,ta:l.buttonColor||null,za:l.iconUrl?$r(Su(l.iconUrl)).toString():null,Ob:l.loginHintKey||null}})}function WA(s){var l=ki(s,pe.auth.GoogleAuthProvider.PROVIDER_ID),d;if(d=l&&l.clientId){e:{if((window.location&&window.location.protocol)==="http:"||(window.location&&window.location.protocol)==="https:"){for(p in s=s.a.get("credentialHelper"),F0)if(F0[p]===s){var p=F0[p];break e}}p=jg}d=p===V0}return d&&l.clientId||null}function HA(s){return s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID),!!(s&&s.disableSignUp&&s.disableSignUp.status)}function Za(s){return s=s.a.get("adminRestrictedOperation")||null,!(!s||!s.status)}function ZU(s){var l=null;if(Bg(s).forEach(function(p){p.provider==pe.auth.PhoneAuthProvider.PROVIDER_ID&&B(p.recaptchaParameters)&&!Array.isArray(p.recaptchaParameters)&&(l=Yt(p.recaptchaParameters))}),l){var d=[];u5.forEach(function(p){typeof l[p]<"u"&&(d.push(p),delete l[p])}),d.length&&Po('The following provided "recaptchaParameters" keys are not allowed: '+d.join(", "))}return l}function e5(s){return(s=s.a.get("adminRestrictedOperation"))&&s.adminEmail?s.adminEmail:null}function t5(s){if(s=s.a.get("adminRestrictedOperation")||null){var l=s.helpLink||null;if(l&&typeof l=="string")return function(){Mu(l)}}return null}function n5(s){return(s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp&&s.disableSignUp.adminEmail||null}function i5(s){if((s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp){var l=s.disableSignUp.helpLink||null;if(l&&typeof l=="string")return function(){Mu(l)}}return null}function KA(s,l){return s=(s=ki(s,l))&&s.scopes,Array.isArray(s)?s:[]}function QA(s,l){return s=(s=ki(s,l))&&s.customParameters,B(s)?(s=Yt(s),l===pe.auth.GoogleAuthProvider.PROVIDER_ID&&delete s.login_hint,l===pe.auth.GithubAuthProvider.PROVIDER_ID&&delete s.login,s):null}function r5(s){s=ki(s,pe.auth.PhoneAuthProvider.PROVIDER_ID);var l=null;return s&&typeof s.loginHint=="string"&&(l=zA(s.loginHint)),s&&s.defaultNationalNumber||l&&l.Aa||null}function s5(s){var l=(s=ki(s,pe.auth.PhoneAuthProvider.PROVIDER_ID))&&s.defaultCountry||null;l=l&&FA(l);var d=null;return s&&typeof s.loginHint=="string"&&(d=zA(s.loginHint)),l&&l[0]||d&&Xa(d.a)||null}function O0(s){if(s=ki(s,pe.auth.PhoneAuthProvider.PROVIDER_ID),!s)return null;var l=s.whitelistedCountries,d=s.blacklistedCountries;if(typeof l<"u"&&(!Array.isArray(l)||l.length==0))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof d<"u"&&!Array.isArray(d))throw Error("BlacklistedCountries must be an array.");if(l&&d)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!l&&!d)return Xn;if(s=[],l){d={};for(var p=0;p<l.length;p++)for(var v=UA(l[p]),y=0;y<v.length;y++)d[v[y].c]=v[y];for(var A in d)d.hasOwnProperty(A)&&s.push(d[A])}else{for(A={},l=0;l<d.length;l++)for(v=UA(d[l]),p=0;p<v.length;p++)A[v[p].c]=v[p];for(v=0;v<Xn.length;v++)A!==null&&Xn[v].c in A||s.push(Xn[v])}return s}function YA(s){return x0(s.a,"queryParameterForWidgetMode")}function $t(s){var l=s.a.get("tosUrl")||null;if(s=s.a.get("privacyPolicyUrl")||null,l&&!s&&Po("Privacy Policy URL is missing, the link will not be displayed."),l&&s){if(typeof l=="function")return l;if(typeof l=="string")return function(){Mu(l)}}return null}function Wt(s){var l=s.a.get("tosUrl")||null,d=s.a.get("privacyPolicyUrl")||null;if(d&&!l&&Po("Term of Service URL is missing, the link will not be displayed."),l&&d){if(typeof d=="function")return d;if(typeof d=="string")return function(){Mu(d)}}return null}function JA(s){return(s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID))&&typeof s.requireDisplayName<"u"?!!s.requireDisplayName:!0}function Hu(s){return s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID),!(!s||s.signInMethod!==pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function o5(s){return s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID),!(!s||!s.forceSameDevice)}function a5(s){if(Hu(s)){var l={url:Ds(),handleCodeInApp:!0};(s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID))&&typeof s.emailLinkSignIn=="function"&&_s(l,s.emailLinkSignIn()),s=l.url;var d=Ds();d instanceof Wi||(d=mu(d)),s instanceof Wi||(s=mu(s));var p=d;d=new Wi(p);var v=!!s.j;v?cr(d,s.j):v=!!s.A,v?d.A=s.A:v=!!s.h,v?d.h=s.h:v=s.C!=null;var y=s.g;if(v)pu(d,s.C);else if(v=!!s.g){if(y.charAt(0)!="/"&&(p.h&&!p.g?y="/"+y:(p=d.g.lastIndexOf("/"),p!=-1&&(y=d.g.substr(0,p+1)+y))),y==".."||y==".")y="";else if(y.indexOf("./")!=-1||y.indexOf("/.")!=-1){p=y.lastIndexOf("/",0)==0,y=y.split("/");for(var A=[],M=0;M<y.length;){var q=y[M++];q=="."?p&&M==y.length&&A.push(""):q==".."?((1<A.length||A.length==1&&A[0]!="")&&A.pop(),p&&M==y.length&&A.push("")):(A.push(q),p=!0)}y=A.join("/")}}return v?d.g=y:v=s.a.toString()!=="",v?mo(d,ih(s.a)):v=!!s.s,v&&(d.s=s.s),l.url=d.toString(),l}return null}function L0(s){var l=!!s.a.get("immediateFederatedRedirect"),d=Wu(s);return s=XA(s),l&&d.length==1&&!Dt(qA,d[0])&&s==zg}function XA(s){s=s.a.get("signInFlow");for(var l in U0)if(U0[l]==s)return U0[l];return zg}function M0(s){return Rh(s).signInSuccess||null}function ZA(s){return Rh(s).signInSuccessWithAuthResult||null}function eP(s){return Rh(s).signInFailure||null}function Rh(s){return s.a.get("callbacks")||{}}var V0="googleyolo",jg="none",F0={nc:V0,NONE:jg},zg="redirect",U0={qc:"popup",rc:zg},B0={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},l5=["anonymous"],u5=["sitekey","tabindex","callback","expired-callback"],kh,Ku,j0,tP,Ke={};function de(s,l,d,p){Ke[s].apply(null,Array.prototype.slice.call(arguments,1))}function nP(s){return s.classList?s.classList:(s=s.className,T(s)&&s.match(/\S+/g)||[])}function xh(s,l){return s.classList?s.classList.contains(l):Dt(nP(s),l)}function Jr(s,l){s.classList?s.classList.add(l):xh(s,l)||(s.className+=0<s.className.length?" "+l:l)}function Xr(s,l){s.classList?s.classList.remove(l):xh(s,l)&&(s.className=ar(nP(s),function(d){return d!=l}).join(" "))}function vn(s){var l=s.type;switch(T(l)&&l.toLowerCase()){case"checkbox":case"radio":return s.checked?s.value:null;case"select-one":return l=s.selectedIndex,0<=l?s.options[l].value:null;case"select-multiple":l=[];for(var d,p=0;d=s.options[p];p++)d.selected&&l.push(d.value);return l.length?l:null;default:return s.value!=null?s.value:null}}function iP(s,l){var d=s.type;switch(T(d)&&d.toLowerCase()){case"checkbox":case"radio":s.checked=l;break;case"select-one":if(s.selectedIndex=-1,T(l)){for(var p=0;d=s.options[p];p++)if(d.value==l){d.selected=!0;break}}break;case"select-multiple":for(T(l)&&(l=[l]),p=0;d=s.options[p];p++)if(d.selected=!1,l)for(var v,y=0;v=l[y];y++)d.value==v&&(d.selected=!0);break;default:s.value=l??""}}function c5(s){if(s.altKey&&!s.ctrlKey||s.metaKey||112<=s.keyCode&&123>=s.keyCode)return!1;if(Nh(s.keyCode))return!0;switch(s.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!ci;default:return 166>s.keyCode||183<s.keyCode}}function rP(s,l,d,p,v,y){if(an&&!Qn("525"))return!0;if(fr&&v)return Nh(s);if(v&&!p)return!1;if(!ci){typeof l=="number"&&(l=z0(l));var A=l==17||l==18||fr&&l==91;if((!d||fr)&&A||fr&&l==16&&(p||y))return!1}if((an||hr)&&p&&d)switch(s){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(vt&&p&&l==s)return!1;switch(s){case 13:return ci?y||v?!1:!(d&&p):!0;case 27:return!(an||hr||ci)}return ci&&(p||v||y)?!1:Nh(s)}function Nh(s){if(48<=s&&57>=s||96<=s&&106>=s||65<=s&&90>=s||(an||hr)&&s==0)return!0;switch(s){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return ci;default:return!1}}function z0(s){if(ci)s=d5(s);else if(fr&&an)switch(s){case 93:s=91}return s}function d5(s){switch(s){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return s}}function Qu(s){Xt.call(this),this.a=s,yr(s,"keydown",this.g,!1,this),yr(s,"click",this.h,!1,this)}_e(Qu,Xt),Qu.prototype.g=function(s){(s.keyCode==13||an&&s.keyCode==3)&&sP(this,s)},Qu.prototype.h=function(s){sP(this,s)};function sP(s,l){var d=new aP(l);if(Co(s,d)){d=new oP(l);try{Co(s,d)}finally{l.stopPropagation()}}}Qu.prototype.o=function(){Qu.K.o.call(this),Ha(this.a,"keydown",this.g,!1,this),Ha(this.a,"click",this.h,!1,this),delete this.a};function oP(s){Jn.call(this,s.a),this.type="action"}_e(oP,Jn);function aP(s){Jn.call(this,s.a),this.type="beforeaction"}_e(aP,Jn);function Yu(s){Xt.call(this),this.a=s,s=vt?"focusout":"blur",this.g=yr(this.a,vt?"focusin":"focus",this,!vt),this.h=yr(this.a,s,this,!vt)}_e(Yu,Xt),Yu.prototype.handleEvent=function(s){var l=new Jn(s.a);l.type=s.type=="focusin"||s.type=="focus"?"focusin":"focusout",Co(this,l)},Yu.prototype.o=function(){Yu.K.o.call(this),bo(this.g),bo(this.h),delete this.a};function Gg(s,l){Xt.call(this),this.g=s||1,this.a=l||g,this.h=O(this.gc,this),this.j=Ge()}_e(Gg,Xt),t=Gg.prototype,t.Ka=!1,t.aa=null,t.gc=function(){if(this.Ka){var s=Ge()-this.j;0<s&&s<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-s):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),Co(this,"tick"),this.Ka&&(qg(this),this.start()))}},t.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=Ge())};function qg(s){s.Ka=!1,s.aa&&(s.a.clearTimeout(s.aa),s.aa=null)}t.o=function(){Gg.K.o.call(this),qg(this),delete this.a};function h5(s,l){if(j(s))l&&(s=O(s,l));else if(s&&typeof s.handleEvent=="function")s=O(s.handleEvent,s);else throw Error("Invalid listener argument");return g.setTimeout(s,0)}function Ju(s){yt.call(this),this.g=s,this.a={}}_e(Ju,yt);var lP=[];function Xu(s,l,d,p){k(d)||(d&&(lP[0]=d.toString()),d=lP);for(var v=0;v<d.length;v++){var y=yr(l,d[v],p||s.handleEvent,!1,s.g||s);if(!y)break;s.a[y.key]=y}}function uP(s){Jd(s.a,function(l,d){this.a.hasOwnProperty(d)&&bo(l)},s),s.a={}}Ju.prototype.o=function(){Ju.K.o.call(this),uP(this)},Ju.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Dh(s){Xt.call(this),this.a=null,this.g=s,s=vt||hr||an&&!Qn("531")&&s.tagName=="TEXTAREA",this.h=new Ju(this),Xu(this.h,this.g,s?["keydown","paste","cut","drop","input"]:"input",this)}_e(Dh,Xt),Dh.prototype.handleEvent=function(s){if(s.type=="input")vt&&Qn(10)&&s.keyCode==0&&s.j==0||(G0(this),Co(this,cP(s)));else if(s.type!="keydown"||c5(s)){var l=s.type=="keydown"?this.g.value:null;vt&&s.keyCode==229&&(l=null);var d=cP(s);G0(this),this.a=h5(function(){this.a=null,this.g.value!=l&&Co(this,d)},this)}};function G0(s){s.a!=null&&(g.clearTimeout(s.a),s.a=null)}function cP(s){return s=new Jn(s.a),s.type="input",s}Dh.prototype.o=function(){Dh.K.o.call(this),this.h.m(),G0(this),delete this.g};function Oh(s,l){Xt.call(this),s&&(this.Oa&&mP(this),this.qa=s,this.Na=yr(this.qa,"keypress",this,l),this.Ya=yr(this.qa,"keydown",this.Jb,l,this),this.Oa=yr(this.qa,"keyup",this.Kb,l,this))}_e(Oh,Xt),t=Oh.prototype,t.qa=null,t.Na=null,t.Ya=null,t.Oa=null,t.R=-1,t.X=-1,t.Ua=!1;var dP={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},hP={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},fP=!an||Qn("525"),pP=fr&&ci;t=Oh.prototype,t.Jb=function(s){(an||hr)&&(this.R==17&&!s.ctrlKey||this.R==18&&!s.altKey||fr&&this.R==91&&!s.metaKey)&&(this.X=this.R=-1),this.R==-1&&(s.ctrlKey&&s.keyCode!=17?this.R=17:s.altKey&&s.keyCode!=18?this.R=18:s.metaKey&&s.keyCode!=91&&(this.R=91)),fP&&!rP(s.keyCode,this.R,s.shiftKey,s.ctrlKey,s.altKey,s.metaKey)?this.handleEvent(s):(this.X=z0(s.keyCode),pP&&(this.Ua=s.altKey))},t.Kb=function(s){this.X=this.R=-1,this.Ua=s.altKey},t.handleEvent=function(s){var l=s.a,d=l.altKey;if(vt&&s.type=="keypress")var p=this.X,v=p!=13&&p!=27?l.keyCode:0;else(an||hr)&&s.type=="keypress"?(p=this.X,v=0<=l.charCode&&63232>l.charCode&&Nh(p)?l.charCode:0):wu&&!an?(p=this.X,v=Nh(p)?l.keyCode:0):(s.type=="keypress"?(pP&&(d=this.Ua),l.keyCode==l.charCode?32>l.keyCode?(p=l.keyCode,v=0):(p=this.X,v=l.charCode):(p=l.keyCode||this.X,v=l.charCode||0)):(p=l.keyCode||this.X,v=l.charCode||0),fr&&v==63&&p==224&&(p=191));var y=p=z0(p);p?63232<=p&&p in dP?y=dP[p]:p==25&&s.shiftKey&&(y=9):l.keyIdentifier&&l.keyIdentifier in hP&&(y=hP[l.keyIdentifier]),ci&&fP&&s.type=="keypress"&&!rP(y,this.R,s.shiftKey,s.ctrlKey,d,s.metaKey)||(s=y==this.R,this.R=y,l=new gP(y,v,s,l),l.altKey=d,Co(this,l))},t.N=function(){return this.qa};function mP(s){s.Na&&(bo(s.Na),bo(s.Ya),bo(s.Oa),s.Na=null,s.Ya=null,s.Oa=null),s.qa=null,s.R=-1,s.X=-1}t.o=function(){Oh.K.o.call(this),mP(this)};function gP(s,l,d,p){Jn.call(this,p),this.type="key",this.keyCode=s,this.j=l,this.repeat=d}_e(gP,Jn);function Zu(s,l,d,p){this.top=s,this.right=l,this.bottom=d,this.left=p}Zu.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Zu.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Zu.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Zu.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};function $g(s,l){var d=Eo(s);return d.defaultView&&d.defaultView.getComputedStyle&&(s=d.defaultView.getComputedStyle(s,null))&&(s[l]||s.getPropertyValue(l))||""}function vP(s){try{var l=s.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return vt&&s.ownerDocument.body&&(s=s.ownerDocument,l.left-=s.documentElement.clientLeft+s.body.clientLeft,l.top-=s.documentElement.clientTop+s.body.clientTop),l}function f5(s,l){l=l||bu(document);var d=l||bu(document),p=yP(s),v=yP(d);if(!vt||9<=Number(Yn)){A=$g(d,"borderLeftWidth");var y=$g(d,"borderRightWidth");M=$g(d,"borderTopWidth"),q=$g(d,"borderBottomWidth"),y=new Zu(parseFloat(M),parseFloat(y),parseFloat(q),parseFloat(A))}else{var A=Wg(d,"borderLeft");y=Wg(d,"borderRight");var M=Wg(d,"borderTop"),q=Wg(d,"borderBottom");y=new Zu(M,y,q,A)}d==bu(document)?(A=p.a-d.scrollLeft,p=p.g-d.scrollTop,!vt||10<=Number(Yn)||(A+=y.left,p+=y.top)):(A=p.a-v.a-y.left,p=p.g-v.g-y.top),v=s.offsetWidth,y=s.offsetHeight,M=an&&!v&&!y,_(v)&&!M||!s.getBoundingClientRect?s=new wo(v,y):(s=vP(s),s=new wo(s.right-s.left,s.bottom-s.top)),v=d.clientHeight-s.height,y=d.scrollLeft,M=d.scrollTop,y+=Math.min(A,Math.max(A-(d.clientWidth-s.width),0)),M+=Math.min(p,Math.max(p-v,0)),d=new di(y,M),l.scrollLeft=d.a,l.scrollTop=d.g}function yP(s){var l=Eo(s),d=new di(0,0),p=l?Eo(l):document;return p=!vt||9<=Number(Yn)||Ga(p).a.compatMode=="CSS1Compat"?p.documentElement:p.body,s==p||(s=vP(s),p=Ga(l).a,l=bu(p),p=p.parentWindow||p.defaultView,l=vt&&Qn("10")&&p.pageYOffset!=l.scrollTop?new di(l.scrollLeft,l.scrollTop):new di(p.pageXOffset||l.scrollLeft,p.pageYOffset||l.scrollTop),d.a=s.left+l.a,d.g=s.top+l.g),d}var _P={thin:2,medium:4,thick:6};function Wg(s,l){if((s.currentStyle?s.currentStyle[l+"Style"]:null)=="none")return 0;var d=s.currentStyle?s.currentStyle[l+"Width"]:null;if(d in _P)s=_P[d];else if(/^\d+px?$/.test(d))s=parseInt(d,10);else{l=s.style.left;var p=s.runtimeStyle.left;s.runtimeStyle.left=s.currentStyle.left,s.style.left=d,d=s.style.pixelLeft,s.style.left=l,s.runtimeStyle.left=p,s=+d}return s}function q0(){}S(q0),q0.prototype.a=0;function el(s){Xt.call(this),this.s=s||Ga(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}_e(el,Xt),t=el.prototype,t.Lb=q0.Xa(),t.N=function(){return this.g};function je(s,l){return s.g?Ps(l,s.g||s.s.a):null}function Lh(s){return s.L||(s.L=new Ju(s)),s.L}t.Za=function(s){if(this.Y&&this.Y!=s)throw Error("Method not supported");el.K.Za.call(this,s)},t.kb=function(){this.g=this.s.a.createElement("DIV")},t.render=function(s){if(this.na)throw Error("Component already rendered");this.g||this.kb(),s?s.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},t.v=function(){this.na=!0,$0(this,function(s){!s.na&&s.N()&&s.v()})},t.ya=function(){$0(this,function(s){s.na&&s.ya()}),this.L&&uP(this.L),this.na=!1},t.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),$0(this,function(s){s.m()}),this.g&&Rs(this.g),this.Y=this.g=this.oa=this.Ea=null,el.K.o.call(this)};function $0(s,l){s.Ea&&Be(s.Ea,l,void 0)}t.removeChild=function(s,l){if(s){var d=T(s)?s:s.cb||(s.cb=":"+(s.Lb.a++).toString(36));if(this.oa&&d?(s=this.oa,s=(s!==null&&d in s?s[d]:void 0)||null):s=null,d&&s){var p=this.oa;if(d in p&&delete p[d],Wm(this.Ea,s),l&&(s.ya(),s.g&&Rs(s.g)),l=s,l==null)throw Error("Unable to set parent component");l.Y=null,el.K.Za.call(l,null)}}if(!s)throw Error("Child is not in parent component");return s};function Lt(s,l){var d=dh(s,"firebaseui-textfield");l?(Xr(s,"firebaseui-input-invalid"),Jr(s,"firebaseui-input"),d&&Xr(d,"firebaseui-textfield-invalid")):(Xr(s,"firebaseui-input"),Jr(s,"firebaseui-input-invalid"),d&&Jr(d,"firebaseui-textfield-invalid"))}function ec(s,l,d){l=new Dh(l),Dn(s,U(Kr,l)),Xu(Lh(s),l,"input",d)}function Mh(s,l,d){l=new Oh(l),Dn(s,U(Kr,l)),Xu(Lh(s),l,"key",function(p){p.keyCode==13&&(p.stopPropagation(),p.preventDefault(),d(p))})}function p5(s,l,d){l=new Yu(l),Dn(s,U(Kr,l)),Xu(Lh(s),l,"focusin",d)}function m5(s,l,d){l=new Yu(l),Dn(s,U(Kr,l)),Xu(Lh(s),l,"focusout",d)}function At(s,l,d){l=new Qu(l),Dn(s,U(Kr,l)),Xu(Lh(s),l,"action",function(p){p.stopPropagation(),p.preventDefault(),d(p)})}function xi(s){Jr(s,"firebaseui-hidden")}function yn(s,l){l&&Cu(s,l),Xr(s,"firebaseui-hidden")}function tc(s){return!xh(s,"firebaseui-hidden")&&s.style.display!="none"}function nc(s){s=s||{};var l=s.email,d=s.disabled,p='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return p=s.wc?p+"Enter new email address":p+"Email",p+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+Ct(l??"")+'"'+(d?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',ae(p)}function pi(s){s=s||{},s=s.label;var l='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return l=s?l+ye(s):l+"Next",ae(l+"</button>")}function W0(){var s=""+pi({label:ht("Sign In")});return ae(s)}function wP(){var s=""+pi({label:ht("Save")});return ae(s)}function _r(){var s=""+pi({label:ht("Continue")});return ae(s)}function EP(s){s=s||{},s=s.label;var l='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return l=s?l+ye(s):l+"Choose password",ae(l+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function IP(){var s={},l='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return l=s.current?l+"Current password":l+"Password",ae(l+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function TP(){return ae('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function Ni(s){s=s||{},s=s.label;var l='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return l=s?l+ye(s):l+"Cancel",ae(l+"</button>")}function On(s){var l="";return s.F&&s.D&&(l+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),ae(l)}function ic(s){var l="";return s.F&&s.D&&(l+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),ae(l)}function SP(s){return s='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+ye(s.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',ae(s)}SP.a="firebaseui.auth.soy2.element.infoBar";function bP(s){var l=s.content;return s=s.Ab,ae('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(s?" "+Ct(s):"")+'">'+ye(l)+"</dialog>")}function CP(s){var l=s.message;return ae(bP({content:fh('<div class="firebaseui-dialog-icon-wrapper"><div class="'+Ct(s.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+ye(l)+"</div>")}))}CP.a="firebaseui.auth.soy2.element.progressDialog";function AP(s){var l='<div class="firebaseui-list-box-actions">';s=s.items;for(var d=s.length,p=0;p<d;p++){var v=s[p];l+='<button type="button" data-listboxid="'+Ct(v.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(v.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+Ct(v.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+ye(v.label)+"</div></button>"}return l=""+bP({Ab:ht("firebaseui-list-box-dialog"),content:fh(l+"</div>")}),ae(l)}AP.a="firebaseui.auth.soy2.element.listBoxDialog";function Hg(s){return s=s||{},ae(s.tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}Hg.a="firebaseui.auth.soy2.element.busyIndicator";function Ro(s,l){return s=s||{},s=s.ga,Oe(s.S?s.S:l.hb[s.providerId]?""+l.hb[s.providerId]:s.providerId&&s.providerId.indexOf("saml.")==0||s.providerId&&s.providerId.indexOf("oidc.")==0?s.providerId.substring(5):""+s.providerId)}function H0(s){PP(s,"upgradeElement")}function K0(s){PP(s,"downgradeElements")}var g5=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function PP(s,l){s&&window.componentHandler&&window.componentHandler[l]&&g5.forEach(function(d){xh(s,d)&&window.componentHandler[l](s),Be(As(d,s),function(p){window.componentHandler[l](p)})})}function RP(s,l,d){if(Kg.call(this),document.body.appendChild(s),s.showModal||window.dialogPolyfill.registerDialog(s),s.showModal(),H0(s),l&&At(this,s,function(y){var A=s.getBoundingClientRect();(y.clientX<A.left||A.left+A.width<y.clientX||y.clientY<A.top||A.top+A.height<y.clientY)&&Kg.call(this)}),!d){var p=this.N().parentElement||this.N().parentNode;if(p){var v=this;this.da=function(){if(s.open){var y=s.getBoundingClientRect().height,A=p.getBoundingClientRect().height,M=p.getBoundingClientRect().top-document.body.getBoundingClientRect().top,q=p.getBoundingClientRect().left-document.body.getBoundingClientRect().left,X=s.getBoundingClientRect().width,fe=p.getBoundingClientRect().width;s.style.top=(M+(A-y)/2).toString()+"px",y=q+(fe-X)/2,s.style.left=y.toString()+"px",s.style.right=(document.body.getBoundingClientRect().width-y-X).toString()+"px"}else window.removeEventListener("resize",v.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function Kg(){var s=Q0.call(this);s&&(K0(s),s.open&&s.close(),Rs(s),this.da&&window.removeEventListener("resize",this.da))}function Q0(){return Ps("firebaseui-id-dialog")}function kP(){Rs(xP.call(this))}function xP(){return je(this,"firebaseui-id-info-bar")}function NP(){return je(this,"firebaseui-id-dismiss-info-bar")}var v5={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function Y0(s,l,d){xs.call(this,s,l);for(var p in d)this[p]=d[p]}_e(Y0,xs);function K(s,l,d,p,v){el.call(this,d),this.fb=s,this.eb=l,this.Fa=!1,this.Ga=p||null,this.A=this.ca=null,this.Z=Yt(v5),_s(this.Z,v||{})}_e(K,el),t=K.prototype,t.kb=function(){var s=ks(this.fb,this.eb,this.Z,this.s);H0(s),this.g=s},t.v=function(){if(K.K.v.call(this),OC(_t(this),new Y0("pageEnter",_t(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var s=this.Z.F;At(this,this.bb(),function(){s()})}if(this.ab()&&this.Z.D){var l=this.Z.D;At(this,this.ab(),function(){l()})}},t.ya=function(){OC(_t(this),new Y0("pageExit",_t(this),{pageId:this.Ga})),K.K.ya.call(this)},t.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,K0(this.N()),K.K.o.call(this)};function y5(s){s.Fa=!0;var l=xh(s.N(),"firebaseui-use-spinner");s.ca=window.setTimeout(function(){s.N()&&s.A===null&&(s.A=ks(Hg,{tb:l},null,s.s),s.N().appendChild(s.A),H0(s.A))},500)}t.I=function(s,l,d,p){function v(){if(y.T)return null;y.Fa=!1,window.clearTimeout(y.ca),y.ca=null,y.A&&(K0(y.A),Rs(y.A),y.A=null)}var y=this;return y.Fa?null:(y5(y),s.apply(null,l).then(d,p).then(v,v))};function _t(s){return s.N().parentElement||s.N().parentNode}function Vh(s,l,d){Mh(s,l,function(){d.focus()})}function rc(s,l,d){Mh(s,l,function(){d()})}D(K.prototype,{a:function(s){kP.call(this);var l=ks(SP,{message:s},null,this.s);this.N().appendChild(l),At(this,NP.call(this),function(){Rs(l)})},yc:kP,Ac:xP,zc:NP,$:function(s,l){s=ks(CP,{Ma:s,message:l},null,this.s),RP.call(this,s)},h:Kg,Cb:Q0,Cc:function(){return je(this,"firebaseui-tos")},bb:function(){return je(this,"firebaseui-tos-link")},ab:function(){return je(this,"firebaseui-pp-link")},Dc:function(){return je(this,"firebaseui-tos-list")}});function DP(s,l,d){s=s||{},l=s.Va;var p=s.ia;return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+nc(s)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(l?Ni(null):"")+pi(null)+'</div></div><div class="firebaseui-card-footer">'+(p?ic(d):On(d))+"</div></form></div>",ae(s)}DP.a="firebaseui.auth.soy2.page.signIn";function OP(s,l,d){return s=s||{},l=s.ia,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+nc(s)+IP()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+TP()+'</div><div class="firebaseui-form-actions">'+W0()+'</div></div><div class="firebaseui-card-footer">'+(l?ic(d):On(d))+"</div></form></div>",ae(s)}OP.a="firebaseui.auth.soy2.page.passwordSignIn";function LP(s,l,d){s=s||{};var p=s.Tb;l=s.Ta;var v=s.ia,y='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+nc(s);return p?(s=s||{},s=s.name,s='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+Ct(s??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',s=ae(s)):s="",d=y+s+EP(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(l?Ni(null):"")+wP()+'</div></div><div class="firebaseui-card-footer">'+(v?ic(d):On(d))+"</div></form></div>",ae(d)}LP.a="firebaseui.auth.soy2.page.passwordSignUp";function MP(s,l,d){return s=s||{},l=s.Ta,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+nc(s)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(l?Ni(null):"")+pi({label:ht("Send")})+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(s)}MP.a="firebaseui.auth.soy2.page.passwordRecovery";function VP(s,l,d){l=s.G;var p="";return s="Follow the instructions sent to <strong>"+(ye(s.email)+"</strong> to recover your password"),p+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+'</p></div><div class="firebaseui-card-actions">',l&&(p+='<div class="firebaseui-form-actions">'+pi({label:ht("Done")})+"</div>"),p+='</div><div class="firebaseui-card-footer">'+On(d)+"</div></div>",ae(p)}VP.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent";function FP(s,l,d){return ae('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+Hg(null)+"</div></div>")}FP.a="firebaseui.auth.soy2.page.callback";function UP(s,l,d){return ae('<div class="firebaseui-container firebaseui-id-page-spinner">'+Hg({tb:!0})+"</div>")}UP.a="firebaseui.auth.soy2.page.spinner";function BP(){return ae('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}BP.a="firebaseui.auth.soy2.page.blank";function jP(s,l,d){l="",s="A sign-in email with additional instructions was sent to <strong>"+(ye(s.email)+"</strong>. Check your email to complete sign-in.");var p=ae('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');return l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+s+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+p+'</div><div class="firebaseui-form-actions">'+Ni({label:ht("Back")})+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(l)}jP.a="firebaseui.auth.soy2.page.emailLinkSignInSent";function zP(s,l,d){return s=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn't work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">`+ae('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+Ni({label:ht("Back")})+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(s)}zP.a="firebaseui.auth.soy2.page.emailNotReceived";function GP(s,l,d){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+nc(s)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni(null)+pi(null)+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(s)}GP.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation";function qP(){var s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni({label:ht("Dismiss")})+"</div></div></div>";return ae(s)}qP.a="firebaseui.auth.soy2.page.differentDeviceError";function $P(){var s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni({label:ht("Dismiss")})+"</div></div></div>";return ae(s)}$P.a="firebaseui.auth.soy2.page.anonymousUserMismatch";function WP(s,l,d){return l="",s="You’ve already used <strong>"+(ye(s.email)+"</strong> to sign in. Enter your password for that account."),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+s+"</p>"+IP()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+TP()+'</div><div class="firebaseui-form-actions">'+W0()+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(l)}WP.a="firebaseui.auth.soy2.page.passwordLinking";function HP(s,l,d){var p=s.email;return l="",s=""+Ro(s,d),s=ht(s),p="You’ve already used <strong>"+(ye(p)+("</strong>. You can connect your <strong>"+(ye(s)+("</strong> account with <strong>"+(ye(p)+"</strong> by signing in with email link below."))))),s="For this flow to successfully connect your "+(ye(s)+" account with this email, you have to open the link on the same device or browser."),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+p+'<p class="firebaseui-text firebaseui-text-justify">'+s+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+W0()+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(l)}HP.a="firebaseui.auth.soy2.page.emailLinkSignInLinking";function KP(s,l,d){l="";var p=""+Ro(s,d);return p=ht(p),s="You originally intended to connect <strong>"+(ye(p)+"</strong> to your email account but have opened the link on a different device where you are not signed in."),p="If you still want to connect your <strong>"+(ye(p)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device."),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+s+'</p><p class="firebaseui-text firebaseui-text-justify">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+_r()+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(l)}KP.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice";function QP(s,l,d){var p=s.email;return l="",s=""+Ro(s,d),s=ht(s),p="You’ve already used <strong>"+(ye(p)+("</strong>. Sign in with "+(ye(s)+" to continue."))),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pi({label:ht("Sign in with "+s)})+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(l)}QP.a="firebaseui.auth.soy2.page.federatedLinking";function YP(s,l,d){s=s||{};var p=s.kc;l=s.yb,s=s.Eb;var v='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return p?(p="<strong>"+(ye(p)+"</strong> is not authorized to view the requested page."),v+=p):v+="User is not authorized to view the requested page.",v+="</p>",l&&(l="Please contact <strong>"+(ye(l)+"</strong> for authorization."),v+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+l+"</p>"),v+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',s&&(v+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),v+='</div><div class="firebaseui-form-actions">'+Ni({label:ht("Back")})+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(v)}YP.a="firebaseui.auth.soy2.page.unauthorizedUser";function JP(s,l,d){return l="",s="To continue sign in with <strong>"+(ye(s.email)+"</strong> on this device, you have to recover the password."),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni(null)+pi({label:ht("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(l)}JP.a="firebaseui.auth.soy2.page.unsupportedProvider";function XP(s){var l="",d='<p class="firebaseui-text">for <strong>'+(ye(s.email)+"</strong></p>");return l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+d+EP(xu(s))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+wP()+"</div></div></form></div>",ae(l)}XP.a="firebaseui.auth.soy2.page.passwordReset";function ZP(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",ae(s)}ZP.a="firebaseui.auth.soy2.page.passwordResetSuccess";function eR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",ae(s)}eR.a="firebaseui.auth.soy2.page.passwordResetFailure";function tR(s){var l=s.G,d="";return s="Your sign-in email address has been changed back to <strong>"+(ye(s.email)+"</strong>."),d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(l?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></form></div>",ae(d)}tR.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess";function nR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",ae(s)}nR.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure";function iR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",ae(s)}iR.a="firebaseui.auth.soy2.page.emailVerificationSuccess";function rR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",ae(s)}rR.a="firebaseui.auth.soy2.page.emailVerificationFailure";function sR(s){var l=s.G,d="";return s="You can now sign in with your new email <strong>"+(ye(s.email)+"</strong>."),d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+'</p></div><div class="firebaseui-card-actions">'+(l?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",ae(d)}sR.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess";function oR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",ae(s)}oR.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure";function aR(s){var l=s.factorId,d=s.phoneNumber;s=s.G;var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(l){case"phone":l="The <strong>"+(ye(l)+(" "+(ye(d)+"</strong> was removed as a second authentication step."))),p+=l;break;default:p+="The device or app was removed as a second authentication step."}return p+=`</p><p class="firebaseui-text">If you don't recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">`+(s?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></form></div>",ae(p)}aR.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess";function lR(s){return s=s||{},s=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn't remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn't work, contact support for assistance.</p></div><div class="firebaseui-card-actions">`+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",ae(s)}lR.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure";function uR(s){var l=s.zb;return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+ye(s.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',l&&(s+=pi({label:ht("Retry")})),ae(s+"</div></div></div>")}uR.a="firebaseui.auth.soy2.page.recoverableError";function cR(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+ye(s.errorMessage)+"</p></div></div>",ae(s)}cR.a="firebaseui.auth.soy2.page.unrecoverableError";function dR(s,l,d){var p=s.Qb;return l="",s="Continue with "+(ye(s.jc)+"?"),p="You originally wanted to sign in with "+ye(p),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+s+'</h2><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni(null)+pi({label:ht("Continue")})+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form></div>",ae(l)}dR.a="firebaseui.auth.soy2.page.emailMismatch";function hR(s,l,d){var p='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';s=s.Sb,l=s.length;for(var v=0;v<l;v++){var y={ga:s[v]},A=d;y=y||{};var M=y.ga,q=y;q=q||{};var X="";switch(q.ga.providerId){case"google.com":X+="firebaseui-idp-google";break;case"github.com":X+="firebaseui-idp-github";break;case"facebook.com":X+="firebaseui-idp-facebook";break;case"twitter.com":X+="firebaseui-idp-twitter";break;case"phone":X+="firebaseui-idp-phone";break;case"anonymous":X+="firebaseui-idp-anonymous";break;case"password":X+="firebaseui-idp-password";break;default:X+="firebaseui-idp-generic"}q='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+Ct(Oe(X))+' firebaseui-id-idp-button" data-provider-id="'+Ct(M.providerId)+'" style="background-color:',X=(X=y)||{},X=X.ga,q=q+Ct(ph(Oe(X.ta?X.ta:A.wa[X.providerId]?""+A.wa[X.providerId]:X.providerId.indexOf("saml.")==0?""+A.wa.saml:X.providerId.indexOf("oidc.")==0?""+A.wa.oidc:""+A.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var fe=y;X=A,fe=fe||{},fe=fe.ga,X=ag(fe.za?Hr(fe.za):X.xa[fe.providerId]?Hr(X.xa[fe.providerId]):fe.providerId.indexOf("saml.")==0?Hr(X.xa.saml):fe.providerId.indexOf("oidc.")==0?Hr(X.xa.oidc):Hr(X.xa.password)),q=q+Ct(Hr(X))+'"></span>',M.providerId=="password"?(q+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',M.V?q+=ye(M.V):M.S?(y="Sign in with "+ye(Ro(y,A)),q+=y):q+="Sign in with email",q+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',q=M.S?q+ye(M.S):q+"Email",q+="</span>"):M.providerId=="phone"?(q+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',M.V?q+=ye(M.V):M.S?(y="Sign in with "+ye(Ro(y,A)),q+=y):q+="Sign in with phone",q+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',q=M.S?q+ye(M.S):q+"Phone",q+="</span>"):M.providerId=="anonymous"?(q+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',M.V?q+=ye(M.V):M.S?(y="Sign in with "+ye(Ro(y,A)),q+=y):q+="Continue as guest",q+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',q=M.S?q+ye(M.S):q+"Guest",q+="</span>"):(q+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',M.V?q+=ye(M.V):(X="Sign in with "+ye(Ro(y,A)),q+=X),q+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(M.S?ye(M.S):ye(Ro(y,A)))+"</span>"),M=ae(q+"</button>"),p+='<li class="firebaseui-list-item">'+M+"</li>"}return p+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+ic(d)+"</div></div>",ae(p)}hR.a="firebaseui.auth.soy2.page.providerSignIn";function fR(s,l,d){s=s||{};var p=s.Gb,v=s.Va;l=s.ia,s=s||{},s=s.Aa,s='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+Ct(s??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ae(s);var y;return p?y=ae('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):y="",y=s+y+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(v?Ni(null):"")+pi({label:ht("Verify")})+'</div></div><div class="firebaseui-card-footer">',l?(l='<p class="firebaseui-tos firebaseui-phone-tos">',l=d.F&&d.D?l+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':l+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",d=ae(l+"</p>")):d=ae('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+On(d),ae(y+d+"</div></form></div>")}fR.a="firebaseui.auth.soy2.page.phoneSignInStart";function pR(s,l,d){s=s||{},l=s.phoneNumber;var p="";return s='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(ye(l)+"</a>"),ye(l),l=p,p=ae('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'),d='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+"</p>"+p+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni(null)+pi({label:ht("Continue")})+'</div></div><div class="firebaseui-card-footer">'+On(d)+"</div></form>",s=ae('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),ae(l+(d+s+"</div>"))}pR.a="firebaseui.auth.soy2.page.phoneSignInFinish";function mR(){return ae('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}mR.a="firebaseui.auth.soy2.page.signOut";function gR(s,l,d){var p='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';s=s.ec,l=s.length;for(var v=0;v<l;v++){var y=s[v],A="",M=ye(y.displayName),q=y.tenantId?y.tenantId:"top-level-project";q=ht(q),A+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+Ct(q)+' firebaseui-id-tenant-selection-button"'+(y.tenantId?'data-tenant-id="'+Ct(y.tenantId)+'"':"")+'style="background-color:'+Ct(ph(y.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+Ct(Hr(y.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',y.V?A+=ye(y.V):(y="Sign in to "+ye(y.displayName),A+=y),A=ae(A+('</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+M+"</span></button>")),p+='<li class="firebaseui-list-item">'+A+"</li>"}return p+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+ic(d)+"</div></div>",ae(p)}gR.a="firebaseui.auth.soy2.page.selectTenant";function vR(s,l,d){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+nc(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+pi(null)+'</div></div><div class="firebaseui-card-footer">'+ic(d)+"</div></form></div>",ae(s)}vR.a="firebaseui.auth.soy2.page.providerMatchByEmail";function ln(){return je(this,"firebaseui-id-submit")}function en(){return je(this,"firebaseui-id-secondary-link")}function _n(s,l){At(this,ln.call(this),function(p){s(p)});var d=en.call(this);d&&l&&At(this,d,function(p){l(p)})}function Qg(){return je(this,"firebaseui-id-password")}function Yg(){return je(this,"firebaseui-id-password-error")}function yR(){var s=Qg.call(this),l=Yg.call(this);ec(this,s,function(){tc(l)&&(Lt(s,!0),xi(l))})}function _R(){var s=Qg.call(this),l=Yg.call(this);return vn(s)?(Lt(s,!0),xi(l),l=!0):(Lt(s,!1),yn(l,Oe("Enter your password").toString()),l=!1),l?vn(s):null}function sc(s,l,d,p,v,y){K.call(this,WP,{email:s},y,"passwordLinking",{F:p,D:v}),this.w=l,this.H=d}u(sc,K),sc.prototype.v=function(){this.P(),this.M(this.w,this.H),rc(this,this.i(),this.w),this.i().focus(),K.prototype.v.call(this)},sc.prototype.o=function(){this.w=null,K.prototype.o.call(this)},sc.prototype.j=function(){return vn(je(this,"firebaseui-id-email"))},D(sc.prototype,{i:Qg,B:Yg,P:yR,u:_R,ea:ln,ba:en,M:_n});var _5=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Os(){return je(this,"firebaseui-id-email")}function ko(){return je(this,"firebaseui-id-email-error")}function oc(s){var l=Os.call(this),d=ko.call(this);ec(this,l,function(){tc(d)&&(Lt(l,!0),xi(d))}),s&&Mh(this,l,function(){s()})}function ac(){return kn(vn(Os.call(this))||"")}function lc(){var s=Os.call(this),l=ko.call(this),d=vn(s)||"";return d?_5.test(d)?(Lt(s,!0),xi(l),l=!0):(Lt(s,!1),yn(l,Oe("That email address isn't correct").toString()),l=!1):(Lt(s,!1),yn(l,Oe("Enter your email address to continue").toString()),l=!1),l?kn(vn(s)):null}function Fh(s,l,d,p,v,y,A){K.call(this,OP,{email:d,ia:!!y},A,"passwordSignIn",{F:p,D:v}),this.w=s,this.H=l}u(Fh,K),Fh.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),Vh(this,this.l(),this.i()),rc(this,this.i(),this.w),vn(this.l())?this.i().focus():this.l().focus(),K.prototype.v.call(this)},Fh.prototype.o=function(){this.H=this.w=null,K.prototype.o.call(this)},D(Fh.prototype,{l:Os,U:ko,P:oc,M:ac,j:lc,i:Qg,B:Yg,ea:yR,u:_R,ua:ln,pa:en,ba:_n});function Ye(s,l,d,p,v,y){K.call(this,s,l,p,v||"notice",y),this.i=d||null}_e(Ye,K),Ye.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Ye.K.v.call(this)},Ye.prototype.o=function(){this.i=null,Ye.K.o.call(this)},D(Ye.prototype,{l:ln,w:en,u:_n});function Jg(s,l,d,p,v){Ye.call(this,VP,{email:s,G:!!l},l,v,"passwordRecoveryEmailSent",{F:d,D:p})}_e(Jg,Ye);function wR(s,l){Ye.call(this,iR,{G:!!s},s,l,"emailVerificationSuccess")}_e(wR,Ye);function ER(s,l){Ye.call(this,rR,{G:!!s},s,l,"emailVerificationFailure")}_e(ER,Ye);function IR(s,l,d){Ye.call(this,sR,{email:s,G:!!l},l,d,"verifyAndChangeEmailSuccess")}_e(IR,Ye);function TR(s,l){Ye.call(this,oR,{G:!!s},s,l,"verifyAndChangeEmailFailure")}_e(TR,Ye);function SR(s,l){Ye.call(this,lR,{G:!!s},s,l,"revertSecondFactorAdditionFailure")}_e(SR,Ye);function bR(s){Ye.call(this,mR,void 0,void 0,s,"signOut")}_e(bR,Ye);function CR(s,l){Ye.call(this,ZP,{G:!!s},s,l,"passwordResetSuccess")}_e(CR,Ye);function AR(s,l){Ye.call(this,eR,{G:!!s},s,l,"passwordResetFailure")}_e(AR,Ye);function PR(s,l){Ye.call(this,nR,{G:!!s},s,l,"emailChangeRevokeFailure")}_e(PR,Ye);function RR(s,l,d){Ye.call(this,uR,{errorMessage:s,zb:!!l},l,d,"recoverableError")}_e(RR,Ye);function kR(s,l){Ye.call(this,cR,{errorMessage:s},void 0,l,"unrecoverableError")}_e(kR,Ye);function Uh(s){if(s.code==="auth/invalid-credential"&&s.message&&s.message.indexOf("error=consent_required")!==-1)return{code:"auth/user-cancelled"};if(s.message&&s.message.indexOf("HTTP Cloud Function returned an error:")!==-1){var l=JSON.parse(s.message.substring(s.message.indexOf("{"),s.message.lastIndexOf("}")+1));return{code:s.code,message:l&&l.error&&l.error.message||s.message}}return s}function Ls(s,l,d,p){function v(A){if(!A.name||A.name!="cancel"){e:{var M=A.message;try{var q=((JSON.parse(M).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(q&&q.length){var X=!0;break e}}catch{}X=!1}if(X)A=_t(l),l.m(),st(s,A,void 0,Oe("Your sign-in session has expired. Please try again.").toString());else{if(X=A&&A.message||"",A.code){if(A.code=="auth/email-already-in-use"||A.code=="auth/credential-already-in-use")return;X=Ze(A)}l.a(X)}}}if(XR(s),p)return xR(s,d),Ot();if(!d.credential)throw Error("No credential found!");if(!Le(s).currentUser&&!d.user)throw Error("User not logged in.");try{var y=J5(s,d)}catch(A){return Ri(A.code||A.message,A),l.a(A.code||A.message),Ot()}return d=y.then(function(A){xR(s,A)},v).then(void 0,v),Se(s,y),Ot(d)}function xR(s,l){if(!l.user)throw Error("No user found");var d=ZA(Q(s));if(M0(Q(s))&&d&&Po("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),d){d=ZA(Q(s));var p=NA(Ee(s))||void 0;fi(bh,Ee(s));var v=!1;XC()?((!d||d(l,p))&&(v=!0,_o(window.opener.location,Xg(s,p))),d||window.close()):(!d||d(l,p))&&(v=!0,_o(window.location,Xg(s,p))),v||s.reset()}else{d=l.user,l=l.credential,p=M0(Q(s)),v=NA(Ee(s))||void 0,fi(bh,Ee(s));var y=!1;XC()?((!p||p(d,l,v))&&(y=!0,_o(window.opener.location,Xg(s,v))),p||window.close()):(!p||p(d,l,v))&&(y=!0,_o(window.location,Xg(s,v))),y||s.reset()}}function Xg(s,l){if(s=l||Q(s).a.get("signInSuccessUrl"),!s)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return s}function Ze(s){var l={code:s.code};l=l||{};var d="";switch(l.code){case"auth/email-already-in-use":d+="The email address is already used by another account";break;case"auth/requires-recent-login":d+=Jt();break;case"auth/too-many-requests":d+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":d+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":d+="That email address doesn't match an existing account";break;case"auth/user-token-expired":d+=Jt();break;case"auth/weak-password":d+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":d+="The email and password you entered don't match";break;case"auth/network-request-failed":d+="A network error has occurred";break;case"auth/invalid-phone-number":d+=x();break;case"auth/invalid-verification-code":d+=Oe("Wrong code. Try again.");break;case"auth/code-expired":d+="This code is no longer valid";break;case"auth/expired-action-code":d+="This code has expired.";break;case"auth/invalid-action-code":d+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(l=Oe(d).toString())return l;try{return JSON.parse(s.message),Ri("Internal error: "+s.message,void 0),W().toString()}catch{return s.message}}function w5(s,l,d){var p=$u[l]&&pe.auth[$u[l]]?new pe.auth[$u[l]]:l.indexOf("saml.")==0?new pe.auth.SAMLAuthProvider(l):new pe.auth.OAuthProvider(l);if(!p)throw Error("Invalid Firebase Auth provider!");var v=KA(Q(s),l);if(p.addScope)for(var y=0;y<v.length;y++)p.addScope(v[y]);return v=QA(Q(s),l)||{},d&&(l==pe.auth.GoogleAuthProvider.PROVIDER_ID?s="login_hint":l==pe.auth.GithubAuthProvider.PROVIDER_ID?s="login":s=(s=Ph(Q(s),l))&&s.Ob,s&&(v[s]=d)),p.setCustomParameters&&p.setCustomParameters(v),p}function Bh(s,l,d,p){function v(){KU(new gA(s.h.tenantId||null),Ee(s)),Se(s,l.I(O(s.dc,s),[q],function(){if((window.location&&window.location.protocol)==="file:")return Se(s,HR(s).then(function(X){l.m(),fi(Ja,Ee(s)),de("callback",s,M,Ot(X))},y))},A))}function y(X){if(fi(Ja,Ee(s)),!X.name||X.name!="cancel")switch(X=Uh(X),X.code){case"auth/popup-blocked":v();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":l.a(Ze(X));break;case"auth/admin-restricted-operation":l.m(),Za(Q(s))?de("handleUnauthorizedUser",s,M,null,d):de("callback",s,M,Ou(X));break;default:l.m(),de("callback",s,M,Ou(X))}}function A(X){fi(Ja,Ee(s)),X.name&&X.name=="cancel"||(Ri("signInWithRedirect: "+X.code,void 0),X=Ze(X),l.Ga=="blank"&&L0(Q(s))?(l.m(),de("providerSignIn",s,M,X)):l.a(X))}var M=_t(l),q=w5(s,d,p);XA(Q(s))==zg?v():Se(s,Y5(s,q).then(function(X){l.m(),de("callback",s,M,Ot(X))},y))}function E5(s,l){Se(s,l.I(O(s.$b,s),[],function(d){return l.m(),Ls(s,l,d,!0)},function(d){d.name&&d.name=="cancel"||(Ri("ContinueAsGuest: "+d.code,void 0),d=Ze(d),l.a(d))}))}function I5(s,l,d){function p(y){var A=!1;return y=l.I(O(s.ac,s),[y],function(M){var q=_t(l);l.m(),de("callback",s,q,Ot(M)),A=!0},function(M){if((!M.name||M.name!="cancel")&&(!M||M.code!="auth/credential-already-in-use"))if(M&&M.code=="auth/email-already-in-use"&&M.email&&M.credential){var q=_t(l);l.m(),de("callback",s,q,Ou(M))}else M&&M.code=="auth/admin-restricted-operation"&&Za(Q(s))?(M=_t(l),l.m(),de("handleUnauthorizedUser",s,M,null,pe.auth.GoogleAuthProvider.PROVIDER_ID)):(M=Ze(M),l.a(M))}),Se(s,y),y.then(function(){return A},function(){return!1})}if(d&&d.credential&&d.clientId===WA(Q(s))){if(KA(Q(s),pe.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var v=JSON.parse(atob(d.credential.split(".")[1])).email}catch{}return Bh(s,l,pe.auth.GoogleAuthProvider.PROVIDER_ID,v),Ot(!0)}return p(pe.auth.GoogleAuthProvider.credential(d.credential))}return d&&l.a(Oe("The selected credential for the authentication provider is not supported!").toString()),Ot(!1)}function T5(s,l){var d=l.j(),p=l.u();if(d)if(p){var v=pe.auth.EmailAuthProvider.credential(d,p);Se(s,l.I(O(s.bc,s),[d,p],function(y){return Ls(s,l,{user:y.user,credential:v,operationType:y.operationType,additionalUserInfo:y.additionalUserInfo})},function(y){if(!y.name||y.name!="cancel")switch(y.code){case"auth/email-already-in-use":break;case"auth/email-exists":Lt(l.l(),!1),yn(l.U(),Ze(y));break;case"auth/too-many-requests":case"auth/wrong-password":Lt(l.i(),!1),yn(l.B(),Ze(y));break;default:Ri("verifyPassword: "+y.message,void 0),l.a(Ze(y))}}))}else l.i().focus();else l.l().focus()}function Zg(s){return s=Wu(Q(s)),s.length==1&&s[0]==pe.auth.EmailAuthProvider.PROVIDER_ID}function NR(s){return s=Wu(Q(s)),s.length==1&&s[0]==pe.auth.PhoneAuthProvider.PROVIDER_ID}function st(s,l,d,p){Zg(s)?p?de("signIn",s,l,d,p):X0(s,l,d):s&&NR(s)&&!p?de("phoneSignInStart",s,l):s&&L0(Q(s))&&!p?de("federatedRedirect",s,l,d):de("providerSignIn",s,l,p,d)}function DR(s,l,d,p){var v=_t(l);Se(s,l.I(O(Le(s).fetchSignInMethodsForEmail,Le(s)),[d],function(y){l.m(),OR(s,v,y,d,p)},function(y){y=Ze(y),l.a(y)}))}function OR(s,l,d,p,v,y){d.length||Hu(Q(s))&&!Hu(Q(s))?Dt(d,pe.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?de("passwordSignIn",s,l,p,y):d.length==1&&d[0]===pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Hu(Q(s))?de("sendEmailLinkForSignIn",s,l,p,function(){de("signIn",s,l)}):de("unsupportedProvider",s,l,p):(d=GA(d,Wu(Q(s))))?(DA(new I0(p),Ee(s)),de("federatedSignIn",s,l,p,d,v)):de("unsupportedProvider",s,l,p):HA(Q(s))?de("handleUnauthorizedUser",s,l,p,pe.auth.EmailAuthProvider.PROVIDER_ID):Hu(Q(s))?de("sendEmailLinkForSignIn",s,l,p,function(){de("signIn",s,l)}):de("passwordSignUp",s,l,p,void 0,void 0,y)}function J0(s,l,d,p,v,y){var A=_t(l);Se(s,l.I(O(s.Ib,s),[d,y],function(){l.m(),de("emailLinkSignInSent",s,A,d,p,y)},v))}function X0(s,l,d){d?de("prefilledEmailSignIn",s,l,d):de("signIn",s,l)}function jh(){return zr(Ds(),"oobCode")}function Z0(){var s=zr(Ds(),"continueUrl");return s?function(){_o(window.location,s)}:null}function zh(s,l){K.call(this,$P,void 0,l,"anonymousUserMismatch"),this.i=s}u(zh,K),zh.prototype.v=function(){var s=this;At(this,this.l(),function(){s.i()}),this.l().focus(),K.prototype.v.call(this)},zh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},D(zh.prototype,{l:en}),Ke.anonymousUserMismatch=function(s,l){var d=new zh(function(){d.m(),st(s,l)});d.render(l),Pe(s,d)};function ev(s){K.call(this,FP,void 0,s,"callback")}u(ev,K),ev.prototype.I=function(s,l,d,p){return s.apply(null,l).then(d,p)};function LR(s,l,d){if(d.user){var p={user:d.user,credential:d.credential,operationType:d.operationType,additionalUserInfo:d.additionalUserInfo},v=Qr(Ee(s)),y=v&&v.g;if(y&&!b5(d.user,y))S5(s,l,p);else{var A=v&&v.a;A?Se(s,d.user.linkWithCredential(A).then(function(M){p={user:M.user,credential:A,operationType:M.operationType,additionalUserInfo:M.additionalUserInfo},MR(s,l,p)},function(M){tv(s,l,M)})):MR(s,l,p)}}else d=_t(l),l.m(),Yr(Ee(s)),st(s,d)}function MR(s,l,d){Yr(Ee(s)),Ls(s,l,d)}function tv(s,l,d){var p=_t(l);Yr(Ee(s)),d=Ze(d),l.m(),st(s,p,void 0,d)}function VR(s,l,d,p){var v=_t(l);Se(s,Le(s).fetchSignInMethodsForEmail(d).then(function(y){l.m(),y.length?Dt(y,pe.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?de("passwordLinking",s,v,d):y.length==1&&y[0]===pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?de("emailLinkSignInLinking",s,v,d):(y=GA(y,Wu(Q(s))))?de("federatedLinking",s,v,d,y,p):(Yr(Ee(s)),de("unsupportedProvider",s,v,d)):(Yr(Ee(s)),de("passwordRecovery",s,v,d,!1,ie().toString()))},function(y){tv(s,l,y)}))}function S5(s,l,d){var p=_t(l);Se(s,xo(s).then(function(){l.m(),de("emailMismatch",s,p,d)},function(v){v.name&&v.name=="cancel"||(v=Ze(v.code),l.a(v))}))}function b5(s,l){if(l==s.email)return!0;if(s.providerData){for(var d=0;d<s.providerData.length;d++)if(l==s.providerData[d].email)return!0}return!1}Ke.callback=function(s,l,d){var p=new ev;p.render(l),Pe(s,p),d=d||HR(s),Se(s,d.then(function(v){LR(s,p,v)},function(v){if((v=Uh(v))&&(v.code=="auth/account-exists-with-different-credential"||v.code=="auth/email-already-in-use")&&v.email&&v.credential)DA(new I0(v.email,v.credential),Ee(s)),VR(s,p,v.email);else if(v&&v.code=="auth/user-cancelled"){var y=Qr(Ee(s)),A=Ze(v);y&&y.a?VR(s,p,y.g,A):y?DR(s,p,y.g,A):tv(s,p,v)}else v&&v.code=="auth/credential-already-in-use"||(v&&v.code=="auth/operation-not-supported-in-this-environment"&&Zg(s)?LR(s,p,{user:null,credential:null}):v&&v.code=="auth/admin-restricted-operation"&&Za(Q(s))?(p.m(),Yr(Ee(s)),de("handleUnauthorizedUser",s,l,null,null)):tv(s,p,v))}))};function Gh(s,l){K.call(this,qP,void 0,l,"differentDeviceError"),this.i=s}u(Gh,K),Gh.prototype.v=function(){var s=this;At(this,this.l(),function(){s.i()}),this.l().focus(),K.prototype.v.call(this)},Gh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},D(Gh.prototype,{l:en}),Ke.differentDeviceError=function(s,l){var d=new Gh(function(){d.m(),st(s,l)});d.render(l),Pe(s,d)};function qh(s,l,d,p){K.call(this,tR,{email:s,G:!!d},p,"emailChangeRevoke"),this.l=l,this.i=d||null}u(qh,K),qh.prototype.v=function(){var s=this;At(this,je(this,"firebaseui-id-reset-password-link"),function(){s.l()}),this.i&&(this.w(this.i),this.u().focus()),K.prototype.v.call(this)},qh.prototype.o=function(){this.l=this.i=null,K.prototype.o.call(this)},D(qh.prototype,{u:ln,B:en,w:_n});function $h(){return je(this,"firebaseui-id-new-password")}function nv(){return je(this,"firebaseui-id-password-toggle")}function C5(){this.Ra=!this.Ra;var s=nv.call(this),l=$h.call(this);this.Ra?(l.type="text",Jr(s,"firebaseui-input-toggle-off"),Xr(s,"firebaseui-input-toggle-on")):(l.type="password",Jr(s,"firebaseui-input-toggle-on"),Xr(s,"firebaseui-input-toggle-off")),l.focus()}function iv(){return je(this,"firebaseui-id-new-password-error")}function FR(){this.Ra=!1;var s=$h.call(this);s.type="password";var l=iv.call(this);ec(this,s,function(){tc(l)&&(Lt(s,!0),xi(l))});var d=nv.call(this);Jr(d,"firebaseui-input-toggle-on"),Xr(d,"firebaseui-input-toggle-off"),p5(this,s,function(){Jr(d,"firebaseui-input-toggle-focus"),Xr(d,"firebaseui-input-toggle-blur")}),m5(this,s,function(){Jr(d,"firebaseui-input-toggle-blur"),Xr(d,"firebaseui-input-toggle-focus")}),At(this,d,O(C5,this))}function UR(){var s=$h.call(this),l=iv.call(this);return vn(s)?(Lt(s,!0),xi(l),l=!0):(Lt(s,!1),yn(l,Oe("Enter your password").toString()),l=!1),l?vn(s):null}function Wh(s,l,d){K.call(this,XP,{email:s},d,"passwordReset"),this.l=l}u(Wh,K),Wh.prototype.v=function(){this.H(),this.B(this.l),rc(this,this.i(),this.l),this.i().focus(),K.prototype.v.call(this)},Wh.prototype.o=function(){this.l=null,K.prototype.o.call(this)},D(Wh.prototype,{i:$h,w:iv,M:nv,H:FR,u:UR,U:ln,P:en,B:_n});function Hh(s,l,d,p,v){K.call(this,aR,{factorId:s,phoneNumber:d||null,G:!!p},v,"revertSecondFactorAdditionSuccess"),this.l=l,this.i=p||null}u(Hh,K),Hh.prototype.v=function(){var s=this;At(this,je(this,"firebaseui-id-reset-password-link"),function(){s.l()}),this.i&&(this.w(this.i),this.u().focus()),K.prototype.v.call(this)},Hh.prototype.o=function(){this.l=this.i=null,K.prototype.o.call(this)},D(Hh.prototype,{u:ln,B:en,w:_n});function A5(s,l,d,p,v){var y=d.u();y&&Se(s,d.I(O(Le(s).confirmPasswordReset,Le(s)),[p,y],function(){d.m();var A=new CR(v);A.render(l),Pe(s,A)},function(A){BR(s,l,d,A)}))}function BR(s,l,d,p){(p&&p.code)=="auth/weak-password"?(s=Ze(p),Lt(d.i(),!1),yn(d.w(),s),d.i().focus()):(d&&d.m(),d=new AR,d.render(l),Pe(s,d))}function P5(s,l,d){var p=new qh(d,function(){Se(s,p.I(O(Le(s).sendPasswordResetEmail,Le(s)),[d],function(){p.m(),p=new Jg(d,void 0,$t(Q(s)),Wt(Q(s))),p.render(l),Pe(s,p)},function(){p.a(z().toString())}))});p.render(l),Pe(s,p)}function R5(s,l,d,p){var v=new Hh(p.factorId,function(){v.I(O(Le(s).sendPasswordResetEmail,Le(s)),[d],function(){v.m(),v=new Jg(d,void 0,$t(Q(s)),Wt(Q(s))),v.render(l),Pe(s,v)},function(){v.a(z().toString())})},p.phoneNumber);v.render(l),Pe(s,v)}Ke.passwordReset=function(s,l,d,p){Se(s,Le(s).verifyPasswordResetCode(d).then(function(v){var y=new Wh(v,function(){A5(s,l,y,d,p)});y.render(l),Pe(s,y)},function(){BR(s,l)}))},Ke.emailChangeRevocation=function(s,l,d){var p=null;Se(s,Le(s).checkActionCode(d).then(function(v){return p=v.data.email,Le(s).applyActionCode(d)}).then(function(){P5(s,l,p)},function(){var v=new PR;v.render(l),Pe(s,v)}))},Ke.emailVerification=function(s,l,d,p){Se(s,Le(s).applyActionCode(d).then(function(){var v=new wR(p);v.render(l),Pe(s,v)},function(){var v=new ER;v.render(l),Pe(s,v)}))},Ke.revertSecondFactorAddition=function(s,l,d){var p=null,v=null;Se(s,Le(s).checkActionCode(d).then(function(y){return p=y.data.email,v=y.data.multiFactorInfo,Le(s).applyActionCode(d)}).then(function(){R5(s,l,p,v)},function(){var y=new SR;y.render(l),Pe(s,y)}))},Ke.verifyAndChangeEmail=function(s,l,d,p){var v=null;Se(s,Le(s).checkActionCode(d).then(function(y){return v=y.data.email,Le(s).applyActionCode(d)}).then(function(){var y=new IR(v,p);y.render(l),Pe(s,y)},function(){var y=new TR;y.render(l),Pe(s,y)}))};function rv(s,l){try{var d=typeof s.selectionStart=="number"}catch{d=!1}d?(s.selectionStart=l,s.selectionEnd=l):vt&&!Qn("9")&&(s.type=="textarea"&&(l=s.value.substring(0,l).replace(/(\r\n|\r|\n)/g,`
`).length),s=s.createTextRange(),s.collapse(!0),s.move("character",l),s.select())}function Kh(s,l,d,p,v,y){K.call(this,GP,{email:d},y,"emailLinkSignInConfirmation",{F:p,D:v}),this.l=s,this.u=l}u(Kh,K),Kh.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),rv(this.i(),(this.i().value||"").length),K.prototype.v.call(this)},Kh.prototype.o=function(){this.u=this.l=null,K.prototype.o.call(this)},D(Kh.prototype,{i:Os,M:ko,w:oc,H:ac,j:lc,U:ln,P:en,B:_n}),Ke.emailLinkConfirmation=function(s,l,d,p,v,y){var A=new Kh(function(){var M=A.j();M?(A.m(),p(s,l,M,d)):A.i().focus()},function(){A.m(),st(s,l,v||void 0)},v||void 0,$t(Q(s)),Wt(Q(s)));A.render(l),Pe(s,A),y&&A.a(y)};function Qh(s,l,d,p,v){K.call(this,KP,{ga:s},v,"emailLinkSignInLinkingDifferentDevice",{F:d,D:p}),this.i=l}u(Qh,K),Qh.prototype.v=function(){this.u(this.i),this.l().focus(),K.prototype.v.call(this)},Qh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},D(Qh.prototype,{l:ln,u:_n}),Ke.emailLinkNewDeviceLinking=function(s,l,d,p){var v=new jn(d);if(d=v.a.a.get(bt.PROVIDER_ID)||null,yu(v,null),d){var y=new Qh(Ph(Q(s),d),function(){y.m(),p(s,l,v.toString())},$t(Q(s)),Wt(Q(s)));y.render(l),Pe(s,y)}else st(s,l)};function sv(s){K.call(this,BP,void 0,s,"blank")}u(sv,K);function eE(s,l,d,p,v){var y=new sv,A=new jn(d),M=A.a.a.get(bt.$a)||"",q=A.a.a.get(bt.Sa)||"",X=A.a.a.get(bt.Qa)==="1",fe=vu(A),Je=A.a.a.get(bt.PROVIDER_ID)||null;A=A.a.a.get(bt.vb)||null,ZR(s,A);var Ir=!Gu(zu,Ee(s)),rk=p||QU(q,Ee(s)),uf=(p=YU(q,Ee(s)))&&p.a;Je&&uf&&uf.providerId!==Je&&(uf=null),y.render(l),Pe(s,y),Se(s,y.I(function(){var Yi=Ot(null);Yi=fe&&Ir||Ir&&X?Ou(Error("anonymous-user-not-found")):H5(s,d).then(function(dE){if(Je&&!uf)throw Error("pending-credential-not-found");return dE});var cf=null;return Yi.then(function(dE){return cf=dE,v?null:Le(s).checkActionCode(M)}).then(function(){return cf})},[],function(Yi){rk?x5(s,y,rk,d,uf,Yi):X?(y.m(),de("differentDeviceError",s,l)):(y.m(),de("emailLinkConfirmation",s,l,d,jR))},function(Yi){var cf=void 0;if(!Yi||!Yi.name||Yi.name!="cancel")switch(y.m(),Yi&&Yi.message){case"anonymous-user-not-found":de("differentDeviceError",s,l);break;case"anonymous-user-mismatch":de("anonymousUserMismatch",s,l);break;case"pending-credential-not-found":de("emailLinkNewDeviceLinking",s,l,d,k5);break;default:Yi&&(cf=Ze(Yi)),st(s,l,void 0,cf)}}))}function jR(s,l,d,p){eE(s,l,p,d,!0)}function k5(s,l,d){eE(s,l,d)}function x5(s,l,d,p,v,y){var A=_t(l);l.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Oe("Signing in...").toString());var M=null;v=(y?K5(s,y,d,p,v):Q5(s,d,p,v)).then(function(q){fi(Ch,Ee(s)),fi(zu,Ee(s)),l.h(),l.$("firebaseui-icon-done",Oe("Signed in!").toString()),M=setTimeout(function(){l.h(),Ls(s,l,q,!0)},1e3),Se(s,function(){l&&(l.h(),l.m()),clearTimeout(M)})},function(q){if(l.h(),l.m(),!q.name||q.name!="cancel"){q=Uh(q);var X=Ze(q);q.code=="auth/email-already-in-use"||q.code=="auth/credential-already-in-use"?(fi(Ch,Ee(s)),fi(zu,Ee(s))):q.code=="auth/invalid-email"?(X=Oe("The email provided does not match the current sign-in session.").toString(),de("emailLinkConfirmation",s,A,p,jR,null,X)):st(s,A,d,X)}}),Se(s,v)}Ke.emailLinkSignInCallback=eE;function Yh(s,l,d,p,v,y){K.call(this,HP,{email:s,ga:l},y,"emailLinkSignInLinking",{F:p,D:v}),this.i=d}u(Yh,K),Yh.prototype.v=function(){this.u(this.i),this.l().focus(),K.prototype.v.call(this)},Yh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},D(Yh.prototype,{l:ln,u:_n});function N5(s,l,d,p){var v=_t(l);J0(s,l,d,function(){st(s,v,d)},function(y){if(!y.name||y.name!="cancel"){var A=Ze(y);y&&y.code=="auth/network-request-failed"?l.a(A):(l.m(),st(s,v,d,A))}},p)}Ke.emailLinkSignInLinking=function(s,l,d){var p=Qr(Ee(s));if(Yr(Ee(s)),p){var v=p.a.providerId,y=new Yh(d,Ph(Q(s),v),function(){N5(s,y,d,p)},$t(Q(s)),Wt(Q(s)));y.render(l),Pe(s,y)}else st(s,l)};function Jh(s,l,d,p,v,y){K.call(this,jP,{email:s},y,"emailLinkSignInSent",{F:p,D:v}),this.u=l,this.i=d}u(Jh,K),Jh.prototype.v=function(){var s=this;At(this,this.l(),function(){s.i()}),At(this,je(this,"firebaseui-id-trouble-getting-email-link"),function(){s.u()}),this.l().focus(),K.prototype.v.call(this)},Jh.prototype.o=function(){this.i=this.u=null,K.prototype.o.call(this)},D(Jh.prototype,{l:en}),Ke.emailLinkSignInSent=function(s,l,d,p,v){var y=new Jh(d,function(){y.m(),de("emailNotReceived",s,l,d,p,v)},function(){y.m(),p()},$t(Q(s)),Wt(Q(s)));y.render(l),Pe(s,y)};function Xh(s,l,d,p,v,y,A){K.call(this,dR,{jc:s,Qb:l},A,"emailMismatch",{F:v,D:y}),this.l=d,this.i=p}u(Xh,K),Xh.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),K.prototype.v.call(this)},Xh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},D(Xh.prototype,{u:ln,B:en,w:_n}),Ke.emailMismatch=function(s,l,d){var p=Qr(Ee(s));if(p){var v=new Xh(d.user.email,p.g,function(){var y=v;Yr(Ee(s)),Ls(s,y,d)},function(){var y=d.credential.providerId,A=_t(v);v.m(),p.a?de("federatedLinking",s,A,p.g,y):de("federatedSignIn",s,A,p.g,y)},$t(Q(s)),Wt(Q(s)));v.render(l),Pe(s,v)}else st(s,l)};function uc(s,l,d,p,v){K.call(this,zP,void 0,v,"emailNotReceived",{F:d,D:p}),this.l=s,this.i=l}u(uc,K),uc.prototype.v=function(){var s=this;At(this,this.u(),function(){s.i()}),At(this,this.Da(),function(){s.l()}),this.u().focus(),K.prototype.v.call(this)},uc.prototype.Da=function(){return je(this,"firebaseui-id-resend-email-link")},uc.prototype.o=function(){this.i=this.l=null,K.prototype.o.call(this)},D(uc.prototype,{u:en}),Ke.emailNotReceived=function(s,l,d,p,v){var y=new uc(function(){J0(s,y,d,p,function(A){A=Ze(A),y.a(A)},v)},function(){y.m(),st(s,l,d)},$t(Q(s)),Wt(Q(s)));y.render(l),Pe(s,y)};function cc(s,l,d,p,v,y){K.call(this,QP,{email:s,ga:l},y,"federatedLinking",{F:p,D:v}),this.i=d}u(cc,K),cc.prototype.v=function(){this.u(this.i),this.l().focus(),K.prototype.v.call(this)},cc.prototype.o=function(){this.i=null,K.prototype.o.call(this)},D(cc.prototype,{l:ln,u:_n}),Ke.federatedLinking=function(s,l,d,p,v){var y=Qr(Ee(s));if(y&&y.a){var A=new cc(d,Ph(Q(s),p),function(){Bh(s,A,p,d)},$t(Q(s)),Wt(Q(s)));A.render(l),Pe(s,A),v&&A.a(v)}else st(s,l)},Ke.federatedRedirect=function(s,l,d){var p=new sv;p.render(l),Pe(s,p),l=Wu(Q(s))[0],Bh(s,p,l,d)},Ke.federatedSignIn=function(s,l,d,p,v){var y=new cc(d,Ph(Q(s),p),function(){Bh(s,y,p,d)},$t(Q(s)),Wt(Q(s)));y.render(l),Pe(s,y),v&&y.a(v)};function D5(s,l,d,p){var v=l.u();v?Se(s,l.I(O(s.Xb,s),[d,v],function(y){return y=y.user.linkWithCredential(p).then(function(A){return Ls(s,l,{user:A.user,credential:p,operationType:A.operationType,additionalUserInfo:A.additionalUserInfo})}),Se(s,y),y},function(y){if(!y.name||y.name!="cancel")switch(y.code){case"auth/wrong-password":Lt(l.i(),!1),yn(l.B(),Ze(y));break;case"auth/too-many-requests":l.a(Ze(y));break;default:Ri("signInWithEmailAndPassword: "+y.message,void 0),l.a(Ze(y))}})):l.i().focus()}Ke.passwordLinking=function(s,l,d){var p=Qr(Ee(s));Yr(Ee(s));var v=p&&p.a;if(v){var y=new sc(d,function(){D5(s,y,d,v)},function(){y.m(),de("passwordRecovery",s,l,d)},$t(Q(s)),Wt(Q(s)));y.render(l),Pe(s,y)}else st(s,l)};function Zh(s,l,d,p,v,y){K.call(this,MP,{email:d,Ta:!!l},y,"passwordRecovery",{F:p,D:v}),this.l=s,this.u=l}u(Zh,K),Zh.prototype.v=function(){this.B(),this.H(this.l,this.u),vn(this.i())||this.i().focus(),rc(this,this.i(),this.l),K.prototype.v.call(this)},Zh.prototype.o=function(){this.u=this.l=null,K.prototype.o.call(this)},D(Zh.prototype,{i:Os,w:ko,B:oc,M:ac,j:lc,U:ln,P:en,H:_n});function O5(s,l){var d=l.j();if(d){var p=_t(l);Se(s,l.I(O(Le(s).sendPasswordResetEmail,Le(s)),[d],function(){l.m();var v=new Jg(d,function(){v.m(),st(s,p)},$t(Q(s)),Wt(Q(s)));v.render(p),Pe(s,v)},function(v){Lt(l.i(),!1),yn(l.w(),Ze(v))}))}else l.i().focus()}Ke.passwordRecovery=function(s,l,d,p,v){var y=new Zh(function(){O5(s,y)},p?void 0:function(){y.m(),st(s,l)},d,$t(Q(s)),Wt(Q(s)));y.render(l),Pe(s,y),v&&y.a(v)},Ke.passwordSignIn=function(s,l,d,p){var v=new Fh(function(){T5(s,v)},function(){var y=v.M();v.m(),de("passwordRecovery",s,l,y)},d,$t(Q(s)),Wt(Q(s)),p);v.render(l),Pe(s,v)};function tE(){return je(this,"firebaseui-id-name")}function nE(){return je(this,"firebaseui-id-name-error")}function ef(s,l,d,p,v,y,A,M,q){K.call(this,LP,{email:p,Tb:s,name:v,Ta:!!d,ia:!!M},q,"passwordSignUp",{F:y,D:A}),this.w=l,this.H=d,this.B=s}u(ef,K),ef.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(Vh(this,this.i(),this.u()),Vh(this,this.u(),this.l())):Vh(this,this.i(),this.l()),this.w&&rc(this,this.l(),this.w),vn(this.i())?this.B&&!vn(this.u())?this.u().focus():this.l().focus():this.i().focus(),K.prototype.v.call(this)},ef.prototype.o=function(){this.H=this.w=null,K.prototype.o.call(this)},D(ef.prototype,{i:Os,U:ko,ea:oc,jb:ac,j:lc,u:tE,Bc:nE,Ja:function(){var s=tE.call(this),l=nE.call(this);ec(this,s,function(){tc(l)&&(Lt(s,!0),xi(l))})},M:function(){var s=tE.call(this),l=nE.call(this),d=vn(s);return d=!/^[\s\xa0]*$/.test(d==null?"":String(d)),Lt(s,d),d?(xi(l),l=!0):(yn(l,Oe("Enter your account name").toString()),l=!1),l?kn(vn(s)):null},l:$h,ba:iv,lb:nv,ua:FR,P:UR,Nb:ln,Mb:en,pa:_n});function L5(s,l){var d=JA(Q(s)),p=l.j(),v=null;d&&(v=l.M());var y=l.P();if(p){if(d)if(v)v=Br(v);else{l.u().focus();return}if(y){var A=pe.auth.EmailAuthProvider.credential(p,y);Se(s,l.I(O(s.Yb,s),[p,y],function(M){var q={user:M.user,credential:A,operationType:M.operationType,additionalUserInfo:M.additionalUserInfo};return d?(M=M.user.updateProfile({displayName:v}).then(function(){return Ls(s,l,q)}),Se(s,M),M):Ls(s,l,q)},function(M){if(!M.name||M.name!="cancel"){var q=Uh(M);switch(M=Ze(q),q.code){case"auth/email-already-in-use":return M5(s,l,p,q);case"auth/too-many-requests":M=Oe("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Lt(l.l(),!1),yn(l.ba(),M);break;case"auth/admin-restricted-operation":Za(Q(s))?(M=_t(l),l.m(),de("handleUnauthorizedUser",s,M,p,pe.auth.EmailAuthProvider.PROVIDER_ID)):l.a(M);break;default:q="setAccountInfo: "+AA(q),Ri(q,void 0),l.a(M)}}}))}else l.l().focus()}else l.i().focus()}function M5(s,l,d,p){function v(){var A=Ze(p);Lt(l.i(),!1),yn(l.U(),A),l.i().focus()}var y=Le(s).fetchSignInMethodsForEmail(d).then(function(A){A.length?v():(A=_t(l),l.m(),de("passwordRecovery",s,A,d,!1,ie().toString()))},function(){v()});return Se(s,y),y}Ke.passwordSignUp=function(s,l,d,p,v,y){function A(){M.m(),st(s,l)}var M=new ef(JA(Q(s)),function(){L5(s,M)},v?void 0:A,d,p,$t(Q(s)),Wt(Q(s)),y);M.render(l),Pe(s,M)};function iE(){return je(this,"firebaseui-id-phone-confirmation-code")}function zR(){return je(this,"firebaseui-id-phone-confirmation-code-error")}function GR(){return je(this,"firebaseui-id-resend-countdown")}function dc(s,l,d,p,v,y,A,M,q){K.call(this,pR,{phoneNumber:v},q,"phoneSignInFinish",{F:A,D:M}),this.jb=y,this.i=new Gg(1e3),this.B=y,this.P=s,this.l=l,this.H=d,this.M=p}u(dc,K),dc.prototype.v=function(){var s=this;this.U(this.jb),yr(this.i,"tick",this.w,!1,this),this.i.start(),At(this,je(this,"firebaseui-id-change-phone-number-link"),function(){s.P()}),At(this,this.Da(),function(){s.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),K.prototype.v.call(this)},dc.prototype.o=function(){this.M=this.H=this.l=this.P=null,qg(this.i),Ha(this.i,"tick",this.w),this.i=null,K.prototype.o.call(this)},dc.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(qg(this.i),Ha(this.i,"tick",this.w),this.ua(),this.lb())},D(dc.prototype,{u:iE,pa:zR,Ja:function(s){var l=iE.call(this),d=zR.call(this);ec(this,l,function(){tc(d)&&(Lt(l,!0),xi(d))}),s&&Mh(this,l,function(){s()})},ba:function(){var s=kn(vn(iE.call(this))||"");return/^\d{6}$/.test(s)?s:null},Fb:GR,U:function(s){Cu(GR.call(this),Oe("Resend code in "+((9<s?"0:":"0:0")+s)).toString())},ua:function(){xi(this.Fb())},Da:function(){return je(this,"firebaseui-id-resend-link")},lb:function(){yn(this.Da())},Nb:ln,Mb:en,ea:_n});function V5(s,l,d,p){function v(A){l.u().focus(),Lt(l.u(),!1),yn(l.pa(),A)}var y=l.ba();y?(l.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Oe("Verifying...").toString()),Se(s,l.I(O(p.confirm,p),[y],function(A){l.h(),l.$("firebaseui-icon-done",Oe("Verified!").toString());var M=setTimeout(function(){l.h(),l.m();var q={user:wr(s).currentUser,credential:null,operationType:A.operationType,additionalUserInfo:A.additionalUserInfo};Ls(s,l,q,!0)},1e3);Se(s,function(){l&&l.h(),clearTimeout(M)})},function(A){if(A.name&&A.name=="cancel")l.h();else{var M=Uh(A);switch(A=Ze(M),M.code){case"auth/credential-already-in-use":l.h();break;case"auth/code-expired":M=_t(l),l.h(),l.m(),de("phoneSignInStart",s,M,d,A);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":l.h(),v(A);break;default:l.h(),l.a(A)}}}))):v(Oe("Wrong code. Try again.").toString())}Ke.phoneSignInFinish=function(s,l,d,p,v,y){var A=new dc(function(){A.m(),de("phoneSignInStart",s,l,d)},function(){V5(s,A,d,v)},function(){A.m(),st(s,l)},function(){A.m(),de("phoneSignInStart",s,l,d)},D0(d),p,$t(Q(s)),Wt(Q(s)));A.render(l),Pe(s,A),y&&A.a(y)};var F5=!vt&&!(Ae("Safari")&&!(_u()||Ae("Coast")||Ae("Opera")||Ae("Edge")||Ae("Firefox")||Ae("FxiOS")||Ae("Silk")||Ae("Android")));function ov(s,l){return/-[a-z]/.test(l)?null:F5&&s.dataset?!Ae("Android")||_u()||Ae("Firefox")||Ae("FxiOS")||Ae("Opera")||Ae("Silk")||l in s.dataset?(s=s.dataset[l],s===void 0?null:s):null:s.getAttribute("data-"+String(l).replace(/([A-Z])/g,"-$1").toLowerCase())}function U5(s,l,d){var p=this;s=ks(AP,{items:s},null,this.s),RP.call(this,s,!0,!0),d&&(d=B5(s,d))&&(d.focus(),f5(d,s)),At(this,s,function(v){(v=(v=dh(v.target,"firebaseui-id-list-box-dialog-button"))&&ov(v,"listboxid"))&&(Kg.call(p),l(v))})}function B5(s,l){s=(s||document).getElementsByTagName("BUTTON");for(var d=0;d<s.length;d++)if(ov(s[d],"listboxid")===l)return s[d];return null}function tl(){return je(this,"firebaseui-id-phone-number")}function qR(){return je(this,"firebaseui-id-country-selector")}function rE(){return je(this,"firebaseui-id-phone-number-error")}function j5(s,l){var d=s.a,p=sE("1-US-0",d),v=null;if(l&&sE(l,d)?v=l:p?v="1-US-0":v=0<d.length?d[0].c:null,!v)throw Error("No available default country");av.call(this,v,s)}function sE(s,l){return s=Xa(s),!(!s||!Dt(l,s))}function z5(s){return s.map(function(l){return{id:l.c,Ma:"firebaseui-flag "+oE(l),label:l.name+" "+("‎+"+l.b)}})}function oE(s){return"firebaseui-flag-"+s.f}function G5(s){var l=this;U5.call(this,z5(s.a),function(d){av.call(l,d,s,!0),l.O().focus()},this.Ba)}function av(s,l,d){var p=Xa(s);p&&(d&&(d=kn(vn(tl.call(this))||""),l=Fg(l,d),l.length&&l[0].b!=p.b&&(d="+"+p.b+d.substr(l[0].b.length+1),iP(tl.call(this),d))),l=Xa(this.Ba),this.Ba=s,s=je(this,"firebaseui-id-country-selector-flag"),l&&Xr(s,oE(l)),Jr(s,oE(p)),Cu(je(this,"firebaseui-id-country-selector-code"),"‎+"+p.b))}function tf(s,l,d,p,v,y,A,M,q,X){K.call(this,fR,{Gb:l,Aa:q||null,Va:!!d,ia:!!y},X,"phoneSignInStart",{F:p,D:v}),this.H=M||null,this.M=l,this.l=s,this.w=d||null,this.pa=A||null}u(tf,K),tf.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||Vh(this,this.O(),this.i()),rc(this,this.i(),this.l),this.O().focus(),rv(this.O(),(this.O().value||"").length),K.prototype.v.call(this)},tf.prototype.o=function(){this.w=this.l=null,K.prototype.o.call(this)},D(tf.prototype,{Cb:Q0,O:tl,B:rE,ea:function(s,l,d){var p=this,v=tl.call(this),y=qR.call(this),A=rE.call(this),M=s||Ah,q=M.a;if(q.length==0)throw Error("No available countries provided.");j5.call(p,M,l),At(this,y,function(){G5.call(p,M)}),ec(this,v,function(){tc(A)&&(Lt(v,!0),xi(A));var X=kn(vn(v)||""),fe=Xa(this.Ba),Je=Fg(M,X);X=sE("1-US-0",q),Je.length&&Je[0].b!=fe.b&&(fe=Je[0],av.call(p,fe.b=="1"&&X?"1-US-0":fe.c,M))}),d&&Mh(this,v,function(){d()})},U:function(s){var l=kn(vn(tl.call(this))||"");s=s||Ah;var d=s.a,p=Fg(Ah,l);if(p.length&&!Dt(d,p[0]))throw iP(tl.call(this)),tl.call(this).focus(),yn(rE.call(this),Oe("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return d=Xa(this.Ba),p.length&&p[0].b!=d.b&&av.call(this,p[0].c,s),p.length&&(l=l.substr(p[0].b.length+1)),l?new jA(this.Ba,l):null},Ja:qR,ba:function(){return je(this,"firebaseui-recaptcha-container")},u:function(){return je(this,"firebaseui-id-recaptcha-error")},i:ln,ua:en,P:_n});function $R(s,l,d,p){try{var v=l.U(j0)}catch{return}v?kh?(l.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Oe("Verifying...").toString()),Se(s,l.I(O(s.cc,s),[D0(v),d],function(y){var A=_t(l);l.$("firebaseui-icon-done",Oe("Code sent!").toString());var M=setTimeout(function(){l.h(),l.m(),de("phoneSignInFinish",s,A,v,15,y)},1e3);Se(s,function(){l&&l.h(),clearTimeout(M)})},function(y){if(l.h(),!y.name||y.name!="cancel"){grecaptcha.reset(tP),kh=null;var A=y&&y.message||"";if(y.code)switch(y.code){case"auth/too-many-requests":A=Oe("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":l.O().focus(),yn(l.B(),x().toString());return;case"auth/admin-restricted-operation":if(Za(Q(s))){y=_t(l),l.m(),de("handleUnauthorizedUser",s,y,D0(v),pe.auth.PhoneAuthProvider.PROVIDER_ID);return}A=Ze(y);break;default:A=Ze(y)}l.a(A)}}))):Ku?yn(l.u(),Oe("Solve the reCAPTCHA").toString()):!Ku&&p&&l.i().click():(l.O().focus(),yn(l.B(),x().toString()))}Ke.phoneSignInStart=function(s,l,d,p){var v=ZU(Q(s))||{};kh=null,Ku=!(v&&v.size==="invisible");var y=NR(s),A=s5(Q(s)),M=y?r5(Q(s)):null;A=d&&d.a||A&&A.c||null,d=d&&d.Aa||M,(M=O0(Q(s)))&&BA(M),j0=M?new VA(O0(Q(s))):Ah;var q=new tf(function(fe){$R(s,q,X,!(!fe||!fe.keyCode))},Ku,y?null:function(){X.clear(),q.m(),st(s,l)},$t(Q(s)),Wt(Q(s)),y,j0,A,d);q.render(l),Pe(s,q),p&&q.a(p),v.callback=function(fe){q.u()&&xi(q.u()),kh=fe,Ku||$R(s,q,X)},v["expired-callback"]=function(){kh=null};var X=new pe.auth.RecaptchaVerifier(Ku?q.ba():q.i(),v,wr(s).app);Se(s,q.I(O(X.render,X),[],function(fe){tP=fe},function(fe){fe.name&&fe.name=="cancel"||(fe=Ze(fe),q.m(),st(s,l,void 0,fe))}))},Ke.prefilledEmailSignIn=function(s,l,d){var p=new sv;p.render(l),Pe(s,p),Se(s,p.I(O(Le(s).fetchSignInMethodsForEmail,Le(s)),[d],function(v){p.m();var y=!(!Zg(s)||!KR(s));OR(s,l,v,d,void 0,y)},function(v){v=Ze(v),p.m(),de("signIn",s,l,d,v)}))};function nf(s,l,d,p,v){K.call(this,hR,{Sb:l},v,"providerSignIn",{F:d,D:p}),this.i=s}u(nf,K),nf.prototype.v=function(){this.l(this.i),K.prototype.v.call(this)},nf.prototype.o=function(){this.i=null,K.prototype.o.call(this)},D(nf.prototype,{l:function(s){function l(A){s(A)}for(var d=this.g?As("firebaseui-id-idp-button",this.g||this.s.a):[],p=0;p<d.length;p++){var v=d[p],y=ov(v,"providerId");At(this,v,U(l,y))}}}),Ke.providerSignIn=function(s,l,d,p){var v=new nf(function(y){y==pe.auth.EmailAuthProvider.PROVIDER_ID?(v.m(),X0(s,l,p)):y==pe.auth.PhoneAuthProvider.PROVIDER_ID?(v.m(),de("phoneSignInStart",s,l)):y=="anonymous"?E5(s,v):Bh(s,v,y,p),ze(s),s.l.cancel()},$A(Q(s)),$t(Q(s)),Wt(Q(s)));v.render(l),Pe(s,v),d&&v.a(d),W5(s)},Ke.sendEmailLinkForSignIn=function(s,l,d,p){var v=new ev;v.render(l),Pe(s,v),J0(s,v,d,p,function(y){v.m(),y&&y.code=="auth/admin-restricted-operation"&&Za(Q(s))?de("handleUnauthorizedUser",s,l,d,pe.auth.EmailAuthProvider.PROVIDER_ID):(y=Ze(y),de("signIn",s,l,d,y))})};function rf(s,l,d,p,v,y,A){K.call(this,DP,{email:d,Va:!!l,ia:!!y},A,"signIn",{F:p,D:v}),this.i=s,this.u=l}u(rf,K),rf.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),rv(this.l(),(this.l().value||"").length),K.prototype.v.call(this)},rf.prototype.o=function(){this.u=this.i=null,K.prototype.o.call(this)},D(rf.prototype,{l:Os,M:ko,w:oc,H:ac,j:lc,U:ln,P:en,B:_n}),Ke.signIn=function(s,l,d,p){var v=Zg(s),y=new rf(function(){var A=y,M=A.j()||"";M&&DR(s,A,M)},v?null:function(){y.m(),st(s,l,d)},d,$t(Q(s)),Wt(Q(s)),v);y.render(l),Pe(s,y),p&&y.a(p)};function sf(s,l,d,p,v,y,A){K.call(this,YP,{kc:s,yb:d,Eb:!!p},A,"unauthorizedUser",{F:v,D:y}),this.l=l,this.i=p}u(sf,K),sf.prototype.v=function(){var s=this,l=je(this,"firebaseui-id-unauthorized-user-help-link");this.i&&l&&At(this,l,function(){s.i()}),At(this,this.u(),function(){s.l()}),this.u().focus(),K.prototype.v.call(this)},sf.prototype.o=function(){this.i=this.l=null,K.prototype.o.call(this)},D(sf.prototype,{u:en}),Ke.handleUnauthorizedUser=function(s,l,d,p){function v(){st(s,l)}p===pe.auth.EmailAuthProvider.PROVIDER_ID?v=function(){X0(s,l)}:p===pe.auth.PhoneAuthProvider.PROVIDER_ID&&(v=function(){de("phoneSignInStart",s,l)});var y=null,A=null;p===pe.auth.EmailAuthProvider.PROVIDER_ID&&HA(Q(s))?(y=n5(Q(s)),A=i5(Q(s))):Za(Q(s))&&(y=e5(Q(s)),A=t5(Q(s)));var M=new sf(d,function(){M.m(),v()},y,A,$t(Q(s)),Wt(Q(s)));M.render(l),Pe(s,M)};function of(s,l,d,p,v,y){K.call(this,JP,{email:s},y,"unsupportedProvider",{F:p,D:v}),this.l=l,this.i=d}u(of,K),of.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),K.prototype.v.call(this)},of.prototype.o=function(){this.i=this.l=null,K.prototype.o.call(this)},D(of.prototype,{u:ln,B:en,w:_n}),Ke.unsupportedProvider=function(s,l,d){var p=new of(d,function(){p.m(),de("passwordRecovery",s,l,d)},function(){p.m(),st(s,l,d)},$t(Q(s)),Wt(Q(s)));p.render(l),Pe(s,p)};function Zr(s,l){this.$=!1;var d=aE(l);if(af[d])throw Error('An AuthUI instance already exists for the key "'+d+'"');af[d]=this,this.a=s,this.u=null,this.Y=!1,WR(this.a),this.h=pe.initializeApp({apiKey:s.app.options.apiKey,authDomain:s.app.options.authDomain},s.app.name+"-firebaseui-temp").auth(),(s=s.emulatorConfig)&&(d=s.port,this.h.useEmulator(s.protocol+"://"+s.host+(d===null?"":":"+d),s.options)),WR(this.h),this.h.setPersistence&&this.h.setPersistence(pe.auth.Auth.Persistence.SESSION),this.oa=l,this.ca=new XU,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=h0.Xa(),this.j=this.C=null,this.da=this.A=!1}function WR(s){s&&s.INTERNAL&&s.INTERNAL.logFramework&&s.INTERNAL.logFramework("FirebaseUI-web")}var af={};function aE(s){return s||"[DEFAULT]"}function HR(s){return ze(s),s.i||(s.i=Ms(s,function(l){return l&&!Qr(Ee(s))?Ot(wr(s).getRedirectResult().then(function(d){return d},function(d){if(d&&d.code=="auth/email-already-in-use"&&d.email&&d.credential)throw d;return No(s,d)})):Ot(Le(s).getRedirectResult().then(function(d){return Ug(Q(s))&&!d.user&&s.j&&!s.j.isAnonymous?wr(s).getRedirectResult():d}))})),s.i}function Pe(s,l){ze(s),s.g=l}var hc=null;function Le(s){return ze(s),s.h}function wr(s){return ze(s),s.a}function Ee(s){return ze(s),s.oa}function KR(s){return ze(s),s.O?s.O.emailHint:void 0}t=Zr.prototype,t.nb=function(){return ze(this),!!P0(Ee(this))||QR(Ds())};function QR(s){return s=new jn(s),(s.a.a.get(bt.ub)||null)==="signIn"&&!!s.a.a.get(bt.$a)}t.start=function(s,l){YR(this,s,l)};function YR(s,l,d,p){ze(s),typeof s.a.languageCode<"u"&&(s.u=s.a.languageCode);var v="en".replace(/_/g,"-");s.a.languageCode=v,s.h.languageCode=v,s.Y=!0,typeof s.a.tenantId<"u"&&(s.h.tenantId=s.a.tenantId),s.ib(d),s.O=p||null;var y=g.document;s.C?s.C.then(function(){y.readyState=="complete"?lv(s,l):vh(window,"load",function(){lv(s,l)})}):y.readyState=="complete"?lv(s,l):vh(window,"load",function(){lv(s,l)})}function lv(s,l){var d=vg(l,"Could not find the FirebaseUI widget element on the page.");if(d.setAttribute("lang","en".replace(/_/g,"-")),hc){var p=hc;ze(p),Qr(Ee(p))&&Po("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),hc.reset()}if(hc=s,s.T=d,$5(s,d),Vg(new S0)&&Vg(new b0)){l=vg(l,"Could not find the FirebaseUI widget element on the page."),d=Ds(),p=x0(Q(s).a,"queryParameterForSignInSuccessUrl"),d=(d=zr(d,p))?$r(Su(d)).toString():null;e:{p=Ds();var v=YA(Q(s));p=zr(p,v)||"";for(y in B0)if(B0[y].toLowerCase()==p.toLowerCase()){var y=B0[y];break e}y="callback"}switch(y){case"callback":d&&(y=Ee(s),qu(bh,d,y)),s.nb()?de("callback",s,l):st(s,l,KR(s));break;case"resetPassword":de("passwordReset",s,l,jh(),Z0());break;case"recoverEmail":de("emailChangeRevocation",s,l,jh());break;case"revertSecondFactorAddition":de("revertSecondFactorAddition",s,l,jh());break;case"verifyEmail":de("emailVerification",s,l,jh(),Z0());break;case"verifyAndChangeEmail":de("verifyAndChangeEmail",s,l,jh(),Z0());break;case"signIn":de("emailLinkSignInCallback",s,l,Ds()),ek();break;case"select":d&&(y=Ee(s),qu(bh,d,y)),st(s,l);break;default:throw Error("Unhandled widget operation.")}l=Q(s),(l=Rh(l).uiShown||null)&&l()}else l=vg(l,"Could not find the FirebaseUI widget element on the page."),y=new kR(Oe("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),y.render(l),Pe(s,y);l=s.g&&s.g.Ga=="blank"&&L0(Q(s)),P0(Ee(s))&&!l&&(l=P0(Ee(s)),ZR(s,l.a),fi(Ja,Ee(s)))}function Ms(s,l){if(s.A)return l(JR(s));if(Se(s,function(){s.A=!1}),Ug(Q(s))){var d=new Zt(function(p){Se(s,s.a.onAuthStateChanged(function(v){s.j=v,s.A||(s.A=!0,p(l(JR(s))))}))});return Se(s,d),d}return s.A=!0,l(null)}function JR(s){return ze(s),Ug(Q(s))&&s.j&&s.j.isAnonymous?s.j:null}function Se(s,l){if(ze(s),l){s.s.push(l);var d=function(){du(s.s,function(p){return p==l})};typeof l!="function"&&l.then(d,d)}}t.Db=function(){ze(this),this.Z=!0};function q5(s){ze(s);var l;return(l=s.Z)||(s=Q(s),s=QA(s,pe.auth.GoogleAuthProvider.PROVIDER_ID),l=!(!s||s.prompt!=="select_account")),l}function XR(s){typeof s.a.languageCode<"u"&&s.Y&&(s.Y=!1,s.a.languageCode=s.u)}function ZR(s,l){s.a.tenantId=l,s.h.tenantId=l}t.reset=function(){ze(this);var s=this;this.T&&this.T.removeAttribute("lang"),this.J&&bU(this.J),XR(this),this.O=null,ek(),fi(Ja,Ee(this)),ze(this),this.l.cancel(),this.i=Ot({user:null,credential:null}),hc==this&&(hc=null),this.T=null;for(var l=0;l<this.s.length;l++)typeof this.s[l]=="function"?this.s[l]():this.s[l].cancel&&this.s[l].cancel();this.s=[],Yr(Ee(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=xo(this).then(function(){s.C=null},function(){s.C=null}))};function $5(s,l){s.L=null,s.J=new mg(l),s.J.register(),yr(s.J,"pageEnter",function(d){if(d=d&&d.pageId,s.L!=d){var p=Q(s);(p=Rh(p).uiChanged||null)&&p(s.L,d),s.L=d}})}t.ib=function(s){ze(this);var l=this.ca,d;for(d in s)try{k0(l.a,d,s[d])}catch{Ri('Invalid config: "'+d+'"',void 0)}rh&&k0(l.a,"popupMode",!1),O0(l),!this.da&&M0(Q(this))&&(Po("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)};function Q(s){return ze(s),s.ca}t.Wb=function(){ze(this);var s=Q(this),l=x0(s.a,"widgetUrl");s=YA(s);for(var d=l.search(eh),p=0,v,y=[];0<=(v=Zd(l,p,s,d));)y.push(l.substring(p,v)),p=Math.min(l.indexOf("&",v)+1||d,d);y.push(l.substr(p)),l=y.join("").replace(th,"$1"),d="="+encodeURIComponent("select"),(s+=d)?(d=l.indexOf("#"),0>d&&(d=l.length),p=l.indexOf("?"),0>p||p>d?(p=d,v=""):v=l.substring(p+1,d),l=[l.substr(0,p),v,l.substr(d)],d=l[1],l[1]=s?d?d+"&"+s:s:d,d=l[0]+(l[1]?"?"+l[1]:"")+l[2]):d=l,Q(this).a.get("popupMode")?(s=(window.screen.availHeight-600)/2,l=(window.screen.availWidth-500)/2,d=d||"about:blank",s={width:500,height:600,top:0<s?s:0,left:0<l?l:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},s.target=s.target||d.target||"google_popup",s.width=s.width||690,s.height=s.height||500,(s=JC(d,s))&&s.focus()):_o(window.location,d)};function ze(s){if(s.$)throw Error("AuthUI instance is deleted!")}t.Wa=function(){var s=this;return ze(this),this.h.app.delete().then(function(){var l=aE(Ee(s));delete af[l],s.reset(),s.$=!0})};function W5(s){ze(s);try{iA(s.l,WA(Q(s)),q5(s)).then(function(l){return s.g?I5(s,s.g,l):!1})}catch{}}t.Ib=function(s,l){ze(this);var d=this,p=NU();if(!Hu(Q(this)))return Ou(Error("Email link sign-in should be enabled to trigger email sending."));var v=a5(Q(this)),y=new jn(v.url);return Xm(y,p),l&&l.a&&(JU(p,l,Ee(this)),yu(y,l.a.providerId)),Zm(y,o5(Q(this))),Ms(this,function(A){return A&&((A=A.uid)?y.a.a.set(bt.Pa,A):Is(y.a.a,bt.Pa)),v.url=y.toString(),Le(d).sendSignInLinkToEmail(s,v)}).then(function(){var A=Ee(d),M={};M.email=s,qu(zu,SA(p,JSON.stringify(M)),A)},function(A){throw fi(Ch,Ee(d)),fi(zu,Ee(d)),A})};function H5(s,l){var d=vu(new jn(l));return d?(l=new Zt(function(p,v){var y=wr(s).onAuthStateChanged(function(A){y(),A&&A.isAnonymous&&A.uid===d?p(A):A&&A.isAnonymous&&A.uid!==d?v(Error("anonymous-user-mismatch")):v(Error("anonymous-user-not-found"))});Se(s,y)}),Se(s,l),l):Ot(null)}function K5(s,l,d,p,v){ze(s);var y=v||null,A=pe.auth.EmailAuthProvider.credentialWithLink(d,p);return d=y?Le(s).signInWithEmailLink(d,p).then(function(M){return M.user.linkWithCredential(y)}).then(function(){return xo(s)}).then(function(){return No(s,{code:"auth/email-already-in-use"},y)}):Le(s).fetchSignInMethodsForEmail(d).then(function(M){return M.length?No(s,{code:"auth/email-already-in-use"},A):l.linkWithCredential(A)}),Se(s,d),d}function Q5(s,l,d,p){ze(s);var v=p||null,y;return l=Le(s).signInWithEmailLink(l,d).then(function(A){if(y={user:A.user,credential:null,operationType:A.operationType,additionalUserInfo:A.additionalUserInfo},v)return A.user.linkWithCredential(v).then(function(M){y={user:M.user,credential:v,operationType:y.operationType,additionalUserInfo:M.additionalUserInfo}})}).then(function(){xo(s)}).then(function(){return wr(s).updateCurrentUser(y.user)}).then(function(){return y.user=wr(s).currentUser,y}),Se(s,l),l}function ek(){var s=Ds();if(QR(s)){s=new jn(s);for(var l in bt)bt.hasOwnProperty(l)&&Is(s.a.a,bt[l]);l={state:"signIn",mode:"emailLink",operation:"clear"};var d=g.document.title;g.history&&g.history.replaceState&&g.history.replaceState(l,d,s.toString())}}t.bc=function(s,l){ze(this);var d=this;return Le(this).signInWithEmailAndPassword(s,l).then(function(p){return Ms(d,function(v){return v?xo(d).then(function(){return No(d,{code:"auth/email-already-in-use"},pe.auth.EmailAuthProvider.credential(s,l))}):p})})},t.Yb=function(s,l){ze(this);var d=this;return Ms(this,function(p){if(p){var v=pe.auth.EmailAuthProvider.credential(s,l);return p.linkWithCredential(v)}return Le(d).createUserWithEmailAndPassword(s,l)})},t.ac=function(s){ze(this);var l=this;return Ms(this,function(d){return d?d.linkWithCredential(s).then(function(p){return p},function(p){if(p&&p.code=="auth/email-already-in-use"&&p.email&&p.credential)throw p;return No(l,p,s)}):Le(l).signInWithCredential(s)})};function Y5(s,l){return ze(s),Ms(s,function(d){return d&&!Qr(Ee(s))?d.linkWithPopup(l).then(function(p){return p},function(p){if(p&&p.code=="auth/email-already-in-use"&&p.email&&p.credential)throw p;return No(s,p)}):Le(s).signInWithPopup(l)})}t.dc=function(s){ze(this);var l=this,d=this.i;return this.i=null,Ms(this,function(p){return p&&!Qr(Ee(l))?p.linkWithRedirect(s):Le(l).signInWithRedirect(s)}).then(function(){},function(p){throw l.i=d,p})},t.cc=function(s,l){ze(this);var d=this;return Ms(this,function(p){return p?p.linkWithPhoneNumber(s,l).then(function(v){return new p0(v,function(y){if(y.code=="auth/credential-already-in-use")return No(d,y);throw y})}):wr(d).signInWithPhoneNumber(s,l).then(function(v){return new p0(v)})})},t.$b=function(){return ze(this),wr(this).signInAnonymously()};function J5(s,l){return ze(s),Ms(s,function(d){if(s.j&&!s.j.isAnonymous&&Ug(Q(s))&&!Le(s).currentUser)return xo(s).then(function(){return l.credential.providerId=="password"&&(l.credential=null),l});if(d)return xo(s).then(function(){return d.linkWithCredential(l.credential)}).then(function(p){return l.user=p.user,l.credential=p.credential,l.operationType=p.operationType,l.additionalUserInfo=p.additionalUserInfo,l},function(p){if(p&&p.code=="auth/email-already-in-use"&&p.email&&p.credential)throw p;return No(s,p,l.credential)});if(!l.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return xo(s).then(function(){return wr(s).updateCurrentUser(l.user)}).then(function(){return l.user=wr(s).currentUser,l.operationType="signIn",l.credential&&l.credential.providerId&&l.credential.providerId=="password"&&(l.credential=null),l})})}t.Xb=function(s,l){return ze(this),Le(this).signInWithEmailAndPassword(s,l)};function xo(s){return ze(s),Le(s).signOut()}function No(s,l,d){if(ze(s),l&&l.code&&(l.code=="auth/email-already-in-use"||l.code=="auth/credential-already-in-use")){var p=eP(Q(s));return Ot().then(function(){return p(new ke("anonymous-upgrade-merge-conflict",null,d||l.credential))}).then(function(){throw s.g&&(s.g.m(),s.g=null),l})}return Ou(l)}function lf(s,l,d,p){K.call(this,vR,void 0,p,"providerMatchByEmail",{F:l,D:d}),this.i=s}u(lf,K),lf.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),rv(this.l(),(this.l().value||"").length),K.prototype.v.call(this)},lf.prototype.o=function(){this.i=null,K.prototype.o.call(this)},D(lf.prototype,{l:Os,H:ko,u:oc,B:ac,j:lc,M:ln,w:_n});function uv(s,l,d,p,v){K.call(this,gR,{ec:l},v,"selectTenant",{F:d,D:p}),this.i=s}u(uv,K),uv.prototype.v=function(){X5(this,this.i),K.prototype.v.call(this)},uv.prototype.o=function(){this.i=null,K.prototype.o.call(this)};function X5(s,l){function d(M){l(M)}for(var p=s.g?As("firebaseui-id-tenant-selection-button",s.g||s.s.a):[],v=0;v<p.length;v++){var y=p[v],A=ov(y,"tenantId");At(s,y,U(d,A))}}function lE(s){K.call(this,UP,void 0,s,"spinner")}u(lE,K);function Z5(s){this.a=new R0,qt(this.a,"authDomain"),qt(this.a,"displayMode",dv),qt(this.a,"tenants"),qt(this.a,"callbacks"),qt(this.a,"tosUrl"),qt(this.a,"privacyPolicyUrl");for(var l in s)if(s.hasOwnProperty(l))try{k0(this.a,l,s[l])}catch{Ri('Invalid config: "'+l+'"',void 0)}}function e6(s){s=s.a.get("displayMode");for(var l in cE)if(cE[l]===s)return cE[l];return dv}function cv(s){return s.a.get("callbacks")||{}}function tk(s){var l=s.a.get("tosUrl")||null;if(s=s.a.get("privacyPolicyUrl")||null,l&&!s&&Po("Privacy Policy URL is missing, the link will not be displayed."),l&&s){if(typeof l=="function")return l;if(typeof l=="string")return function(){Mu(l)}}return null}function nk(s){var l=s.a.get("tosUrl")||null,d=s.a.get("privacyPolicyUrl")||null;if(d&&!l&&Po("Terms of Service URL is missing, the link will not be displayed."),l&&d){if(typeof d=="function")return d;if(typeof d=="string")return function(){Mu(d)}}return null}function uE(s,l){if(s=s.a.get("tenants"),!s||!s.hasOwnProperty(l)&&!s.hasOwnProperty(hv))throw Error("Invalid tenant configuration!")}function ik(s,l,d){if(s=s.a.get("tenants"),!s)throw Error("Invalid tenant configuration!");var p=[];if(s=s[l]||s[hv],!s)return Ri("Invalid tenant configuration: "+(l+" is not configured!"),void 0),p;if(l=s.signInOptions,!l)throw Error("Invalid tenant configuration: signInOptions are invalid!");return l.forEach(function(v){if(typeof v=="string")p.push(v);else if(typeof v.provider=="string"){var y=v.hd;y&&d?(y instanceof RegExp?y:new RegExp("@"+y.replace(".","\\.")+"$")).test(d)&&p.push(v.provider):p.push(v.provider)}else v="Invalid tenant configuration: signInOption "+(JSON.stringify(v)+" is invalid!"),Ri(v,void 0)}),p}function t6(s,l,d){return s=n6(s,l),(l=s.signInOptions)&&d&&(l=l.filter(function(p){return typeof p=="string"?d.includes(p):d.includes(p.provider)}),s.signInOptions=l),s}function n6(s,l){var d=i6,p=p===void 0?{}:p;return uE(s,l),s=s.a.get("tenants"),DU(s[l]||s[hv],d,p)}var i6=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],dv="optionFirst",cE={pc:dv,oc:"identifierFirst"},hv="*";function Er(s,l){var d=this;this.s=vg(s),this.a={},Object.keys(l).forEach(function(p){d.a[p]=new Z5(l[p])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(p){this.ob=p||null},enumerable:!1})}t=Er.prototype,t.Ub=function(s,l){var d=this;Do(this);var p=s.apiKey;return new Zt(function(v,y){if(d.a.hasOwnProperty(p)){var A=cv(d.a[p]).selectTenantUiHidden||null;if(e6(d.a[p])===dv){var M=[];l.forEach(function(fe){fe=fe||"_";var Je=d.a[p].a.get("tenants");if(!Je)throw Error("Invalid tenant configuration!");(Je=Je[fe]||Je[hv])?fe={tenantId:fe!=="_"?fe:null,V:Je.fullLabel||null,displayName:Je.displayName,za:Je.iconUrl,ta:Je.buttonColor}:(Ri("Invalid tenant configuration: "+(fe+" is not configured!"),void 0),fe=null),fe&&M.push(fe)});var q=function(fe){fe={tenantId:fe,providerIds:ik(d.a[p],fe||"_")},v(fe)};if(M.length===1){q(M[0].tenantId);return}d.g=new uv(function(fe){Do(d),A&&A(),q(fe)},M,tk(d.a[p]),nk(d.a[p]))}else d.g=new lf(function(){var fe=d.g.j();if(fe){for(var Je=0;Je<l.length;Je++){var Ir=ik(d.a[p],l[Je]||"_",fe);if(Ir.length!==0){fe={tenantId:l[Je],providerIds:Ir,email:fe},Do(d),A&&A(),v(fe);return}}d.g.a(Qe({code:"no-matching-tenant-for-email"}).toString())}},tk(d.a[p]),nk(d.a[p]));d.g.render(d.s),(y=cv(d.a[p]).selectTenantUiShown||null)&&y()}else{var X=Error("Invalid project configuration: API key is invalid!");X.code="invalid-configuration",d.pb(X),y(X)}})},t.Pb=function(s,l){if(!this.a.hasOwnProperty(s))throw Error("Invalid project configuration: API key is invalid!");var d=l||void 0;uE(this.a[s],l||"_");try{this.i=pe.app(d).auth()}catch{var p=this.a[s].a.get("authDomain");if(!p)throw Error("Invalid project configuration: authDomain is required!");s=pe.initializeApp({apiKey:s,authDomain:p},d),s.auth().tenantId=l,this.i=s.auth()}return this.i},t.Zb=function(s,l){var d=this;return new Zt(function(p,v){function y(Je,Ir){d.j=new Zr(s),YR(d.j,d.s,Je,Ir)}var A=s.app.options.apiKey;d.a.hasOwnProperty(A)||v(Error("Invalid project configuration: API key is invalid!"));var M=t6(d.a[A],s.tenantId||"_",l&&l.providerIds);Do(d),v={signInSuccessWithAuthResult:function(Je){return p(Je),!1}};var q=cv(d.a[A]).signInUiShown||null,X=!1;v.uiChanged=function(Je,Ir){Je===null&&Ir==="callback"?((Je=Ps("firebaseui-id-page-callback",d.s))&&xi(Je),d.h=new lE,d.h.render(d.s)):X||Je===null&&Ir==="spinner"||Ir==="blank"||(d.h&&(d.h.m(),d.h=null),X=!0,q&&q(s.tenantId))},M.callbacks=v,M.credentialHelper="none";var fe;l&&l.email&&(fe={emailHint:l.email}),d.j?d.j.Wa().then(function(){y(M,fe)}):y(M,fe)})},t.reset=function(){var s=this;return Ot().then(function(){s.j&&s.j.Wa()}).then(function(){s.j=null,Do(s)})},t.Vb=function(){var s=this;this.h||this.A||(this.A=window.setTimeout(function(){Do(s),s.h=new lE,s.g=s.h,s.h.render(s.s),s.A=null},500))},t.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},t.Bb=function(){return Do(this),this.g=new bR,this.g.render(this.s),Ot()};function Do(s){s.j&&s.j.reset(),s.mb(),s.g&&s.g.m()}t.pb=function(s){var l=this,d=Qe({code:s.code}).toString()||s.message;Do(this);var p;s.retry&&typeof s.retry=="function"&&(p=function(){l.reset(),s.retry()}),this.g=new RR(d,p),this.g.render(this.s)},t.Rb=function(s){var l=this;return Ot().then(function(){var d=l.i&&l.i.app.options.apiKey;if(!l.a.hasOwnProperty(d))throw Error("Invalid project configuration: API key is invalid!");if(uE(l.a[d],s.tenantId||"_"),!l.i.currentUser||l.i.currentUser.uid!==s.uid)throw Error("The user being processed does not match the signed in user!");return(d=cv(l.a[d]).beforeSignInSuccess||null)?d(s):s}).then(function(d){if(d.uid!==s.uid)throw Error("User with mismatching UID returned.");return d})},Re("firebaseui.auth.FirebaseUiHandler",Er),Re("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Er.prototype.Ub),Re("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Er.prototype.Pb),Re("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Er.prototype.Zb),Re("firebaseui.auth.FirebaseUiHandler.prototype.reset",Er.prototype.reset),Re("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Er.prototype.Vb),Re("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Er.prototype.mb),Re("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Er.prototype.Bb),Re("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Er.prototype.pb),Re("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Er.prototype.Rb),Re("firebaseui.auth.AuthUI",Zr),Re("firebaseui.auth.AuthUI.getInstance",function(s){return s=aE(s),af[s]?af[s]:null}),Re("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Zr.prototype.Db),Re("firebaseui.auth.AuthUI.prototype.start",Zr.prototype.start),Re("firebaseui.auth.AuthUI.prototype.setConfig",Zr.prototype.ib),Re("firebaseui.auth.AuthUI.prototype.signIn",Zr.prototype.Wb),Re("firebaseui.auth.AuthUI.prototype.reset",Zr.prototype.reset),Re("firebaseui.auth.AuthUI.prototype.delete",Zr.prototype.Wa),Re("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Zr.prototype.nb),Re("firebaseui.auth.AuthUIError",ke),Re("firebaseui.auth.AuthUIError.prototype.toJSON",ke.prototype.toJSON),Re("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",V0),Re("firebaseui.auth.CredentialHelper.NONE",jg),Re("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Zt.prototype.catch=Zt.prototype.Ca,Zt.prototype.finally=Zt.prototype.fc}).apply(typeof global<"u"?global:typeof self<"u"?self:window)}).apply(typeof global<"u"?global:typeof self<"u"?self:window);typeof window<"u"&&(window.dialogPolyfill=Wee);var Hee=firebaseui.auth;const Kee={callbacks:{uiShown:()=>{const t=document.getElementById("loader");t&&(t.style.display="none")}},signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[pe.auth.EmailAuthProvider.PROVIDER_ID],tosUrl:"<your-tos-url>",privacyPolicyUrl:"<your-privacy-policy-url>"},Qee=new Hee.AuthUI(Al),Yee=t=>{Qee.start(t,Kee),console.log("FirebaseUI started.")},Jee=()=>(we.useEffect(()=>{Yee("#firebaseui-auth-container")}),te.jsxs("div",{className:"container",children:[te.jsx("h1",{children:"Card Generator"}),te.jsx("div",{id:"firebaseui-auth-container"})]})),Xee=()=>{const[t,e]=we.useState(0);return we.useEffect(()=>{const n=rp(),i=Al.currentUser;if(i){const r=i.uid,o=Hc(n,`users/${r}/balance`),a=uV(o,u=>{const c=u.val();e(c)});return()=>a()}},[]),t},Zee=({setActiveSection:t,activeSection:e})=>{const[n,i]=we.useState("dark"),r=Xee(),o=()=>{pe.auth().signOut()},a=()=>{const c=n==="light"?"dark":"light";i(c),document.documentElement.setAttribute("data-theme",c)},u=()=>{t(e==="game"?"market":"game")};return te.jsxs("nav",{className:"navbar",children:[te.jsx("div",{className:"balance",children:te.jsxs("h3",{className:"pokemon-count",children:["$",r||0]})}),te.jsxs("div",{className:"btns",children:[te.jsx(pp,{onClick:u,text:e==="game"?"Market":"Game",className:"signout"}),te.jsx(pp,{onClick:a,text:n==="light"?"Dark":"Light",className:"signout"}),te.jsx(pp,{onClick:o,text:"Signout",className:"signout"})]})]})},ete=()=>{const[t,e]=we.useState(null),[n,i]=we.useState(!0),[r,o]=we.useState("game");return we.useEffect(()=>{const a=Al.onAuthStateChanged(u=>{e(u),i(!1)});return()=>a()},[]),n?te.jsx(Uw,{message:"Loading cards..."}):te.jsxs("div",{className:"App",children:[t?te.jsx(Zee,{setActiveSection:o,activeSection:r}):null,t?te.jsx(qee,{activeSection:r}):te.jsx(Jee,{})]})};gI.createRoot(document.getElementById("root")).render(te.jsx(nn.StrictMode,{children:te.jsx(ete,{})}));
