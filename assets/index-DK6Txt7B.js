(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function ZN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eD={exports:{}},w_={},tD={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm=Symbol.for("react.element"),X6=Symbol.for("react.portal"),Z6=Symbol.for("react.fragment"),e9=Symbol.for("react.strict_mode"),t9=Symbol.for("react.profiler"),n9=Symbol.for("react.provider"),i9=Symbol.for("react.context"),r9=Symbol.for("react.forward_ref"),s9=Symbol.for("react.suspense"),o9=Symbol.for("react.memo"),a9=Symbol.for("react.lazy"),tk=Symbol.iterator;function l9(t){return t===null||typeof t!="object"?null:(t=tk&&t[tk]||t["@@iterator"],typeof t=="function"?t:null)}var nD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iD=Object.assign,rD={};function Cd(t,e,n){this.props=t,this.context=e,this.refs=rD,this.updater=n||nD}Cd.prototype.isReactComponent={};Cd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sD(){}sD.prototype=Cd.prototype;function fT(t,e,n){this.props=t,this.context=e,this.refs=rD,this.updater=n||nD}var pT=fT.prototype=new sD;pT.constructor=fT;iD(pT,Cd.prototype);pT.isPureReactComponent=!0;var nk=Array.isArray,oD=Object.prototype.hasOwnProperty,mT={current:null},aD={key:!0,ref:!0,__self:!0,__source:!0};function lD(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)oD.call(e,i)&&!aD.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:lm,type:t,key:o,ref:a,props:r,_owner:mT.current}}function u9(t,e){return{$$typeof:lm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gT(t){return typeof t=="object"&&t!==null&&t.$$typeof===lm}function c9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ik=/\/+/g;function sE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?c9(""+t.key):e.toString(36)}function Lv(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case lm:case X6:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+sE(a,0):i,nk(r)?(n="",t!=null&&(n=t.replace(ik,"$&/")+"/"),Lv(r,e,n,"",function(h){return h})):r!=null&&(gT(r)&&(r=u9(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(ik,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",nk(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+sE(o,u);a+=Lv(o,e,n,c,r)}else if(c=l9(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+sE(o,u++),a+=Lv(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function av(t,e,n){if(t==null)return t;var i=[],r=0;return Lv(t,i,"","",function(o){return e.call(n,o,r++)}),i}function d9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ai={current:null},Mv={transition:null},h9={ReactCurrentDispatcher:ai,ReactCurrentBatchConfig:Mv,ReactCurrentOwner:mT};function uD(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:av,forEach:function(t,e,n){av(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return av(t,function(){e++}),e},toArray:function(t){return av(t,function(e){return e})||[]},only:function(t){if(!gT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=Cd;Fe.Fragment=Z6;Fe.Profiler=t9;Fe.PureComponent=fT;Fe.StrictMode=e9;Fe.Suspense=s9;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h9;Fe.act=uD;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=iD({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=mT.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)oD.call(e,c)&&!aD.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:lm,type:t.type,key:r,ref:o,props:i,_owner:a}};Fe.createContext=function(t){return t={$$typeof:i9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:n9,_context:t},t.Consumer=t};Fe.createElement=lD;Fe.createFactory=function(t){var e=lD.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:r9,render:t}};Fe.isValidElement=gT;Fe.lazy=function(t){return{$$typeof:a9,_payload:{_status:-1,_result:t},_init:d9}};Fe.memo=function(t,e){return{$$typeof:o9,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=Mv.transition;Mv.transition={};try{t()}finally{Mv.transition=e}};Fe.unstable_act=uD;Fe.useCallback=function(t,e){return ai.current.useCallback(t,e)};Fe.useContext=function(t){return ai.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return ai.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return ai.current.useEffect(t,e)};Fe.useId=function(){return ai.current.useId()};Fe.useImperativeHandle=function(t,e,n){return ai.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return ai.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return ai.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return ai.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return ai.current.useReducer(t,e,n)};Fe.useRef=function(t){return ai.current.useRef(t)};Fe.useState=function(t){return ai.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return ai.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return ai.current.useTransition()};Fe.version="18.3.1";tD.exports=Fe;var Se=tD.exports;const nn=ZN(Se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f9=Se,p9=Symbol.for("react.element"),m9=Symbol.for("react.fragment"),g9=Object.prototype.hasOwnProperty,v9=f9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y9={key:!0,ref:!0,__self:!0,__source:!0};function cD(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)g9.call(e,i)&&!y9.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:p9,type:t,key:o,ref:a,props:r,_owner:v9.current}}w_.Fragment=m9;w_.jsx=cD;w_.jsxs=cD;eD.exports=w_;var he=eD.exports,uI={},dD={exports:{}},$i={},hD={exports:{}},fD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,le){var de=re.length;re.push(le);e:for(;0<de;){var Xe=de-1>>>1,je=re[Xe];if(0<r(je,le))re[Xe]=le,re[de]=je,de=Xe;else break e}}function n(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var le=re[0],de=re.pop();if(de!==le){re[0]=de;e:for(var Xe=0,je=re.length,ct=je>>>1;Xe<ct;){var ar=2*(Xe+1)-1,lr=re[ar],ur=ar+1,Dt=re[ur];if(0>r(lr,de))ur<je&&0>r(Dt,lr)?(re[Xe]=Dt,re[ur]=de,Xe=ur):(re[Xe]=lr,re[ar]=de,Xe=ar);else if(ur<je&&0>r(Dt,de))re[Xe]=Dt,re[ur]=de,Xe=ur;else break e}}return le}function r(re,le){var de=re.sortIndex-le.sortIndex;return de!==0?de:re.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],h=[],m=1,g=null,_=3,S=!1,P=!1,I=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(re){for(var le=n(h);le!==null;){if(le.callback===null)i(h);else if(le.startTime<=re)i(h),le.sortIndex=le.expirationTime,e(c,le);else break;le=n(h)}}function M(re){if(I=!1,A(re),!P)if(n(c)!==null)P=!0,_e(B);else{var le=n(h);le!==null&&rt(M,le.startTime-re)}}function B(re,le){P=!1,I&&(I=!1,E(C),C=-1),S=!0;var de=_;try{for(A(le),g=n(c);g!==null&&(!(g.expirationTime>le)||re&&!O());){var Xe=g.callback;if(typeof Xe=="function"){g.callback=null,_=g.priorityLevel;var je=Xe(g.expirationTime<=le);le=t.unstable_now(),typeof je=="function"?g.callback=je:g===n(c)&&i(c),A(le)}else i(c);g=n(c)}if(g!==null)var ct=!0;else{var ar=n(h);ar!==null&&rt(M,ar.startTime-le),ct=!1}return ct}finally{g=null,_=de,S=!1}}var j=!1,D=null,C=-1,L=5,F=-1;function O(){return!(t.unstable_now()-F<L)}function V(){if(D!==null){var re=t.unstable_now();F=re;var le=!0;try{le=D(!0,re)}finally{le?N():(j=!1,D=null)}}else j=!1}var N;if(typeof b=="function")N=function(){b(V)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Te=we.port2;we.port1.onmessage=V,N=function(){Te.postMessage(null)}}else N=function(){k(V,0)};function _e(re){D=re,j||(j=!0,N())}function rt(re,le){C=k(function(){re(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,_e(B))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(re){switch(_){case 1:case 2:case 3:var le=3;break;default:le=_}var de=_;_=le;try{return re()}finally{_=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,le){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var de=_;_=re;try{return le()}finally{_=de}},t.unstable_scheduleCallback=function(re,le,de){var Xe=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Xe+de:Xe):de=Xe,re){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=de+je,re={id:m++,callback:le,priorityLevel:re,startTime:de,expirationTime:je,sortIndex:-1},de>Xe?(re.sortIndex=de,e(h,re),n(c)===null&&re===n(h)&&(I?(E(C),C=-1):I=!0,rt(M,de-Xe))):(re.sortIndex=je,e(c,re),P||S||(P=!0,_e(B))),re},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(re){var le=_;return function(){var de=_;_=le;try{return re.apply(this,arguments)}finally{_=de}}}})(fD);hD.exports=fD;var _9=hD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w9=Se,ji=_9;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pD=new Set,fp={};function Ql(t,e){Xc(t,e),Xc(t+"Capture",e)}function Xc(t,e){for(fp[t]=e,t=0;t<e.length;t++)pD.add(e[t])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cI=Object.prototype.hasOwnProperty,E9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rk={},sk={};function I9(t){return cI.call(sk,t)?!0:cI.call(rk,t)?!1:E9.test(t)?sk[t]=!0:(rk[t]=!0,!1)}function T9(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function S9(t,e,n,i){if(e===null||typeof e>"u"||T9(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function li(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Un[t]=new li(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Un[e]=new li(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Un[t]=new li(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Un[t]=new li(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Un[t]=new li(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Un[t]=new li(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Un[t]=new li(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Un[t]=new li(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Un[t]=new li(t,5,!1,t.toLowerCase(),null,!1,!1)});var vT=/[\-:]([a-z])/g;function yT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vT,yT);Un[e]=new li(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vT,yT);Un[e]=new li(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vT,yT);Un[e]=new li(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Un[t]=new li(t,1,!1,t.toLowerCase(),null,!1,!1)});Un.xlinkHref=new li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Un[t]=new li(t,1,!1,t.toLowerCase(),null,!0,!0)});function _T(t,e,n,i){var r=Un.hasOwnProperty(e)?Un[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S9(e,n,r,i)&&(n=null),i||r===null?I9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var so=w9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lv=Symbol.for("react.element"),Tc=Symbol.for("react.portal"),Sc=Symbol.for("react.fragment"),wT=Symbol.for("react.strict_mode"),dI=Symbol.for("react.profiler"),mD=Symbol.for("react.provider"),gD=Symbol.for("react.context"),ET=Symbol.for("react.forward_ref"),hI=Symbol.for("react.suspense"),fI=Symbol.for("react.suspense_list"),IT=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),vD=Symbol.for("react.offscreen"),ok=Symbol.iterator;function uf(t){return t===null||typeof t!="object"?null:(t=ok&&t[ok]||t["@@iterator"],typeof t=="function"?t:null)}var Nt=Object.assign,oE;function xf(t){if(oE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oE=e&&e[1]||""}return`
`+oE+t}var aE=!1;function lE(t,e){if(!t||aE)return"";aE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{aE=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xf(t):""}function b9(t){switch(t.tag){case 5:return xf(t.type);case 16:return xf("Lazy");case 13:return xf("Suspense");case 19:return xf("SuspenseList");case 0:case 2:case 15:return t=lE(t.type,!1),t;case 11:return t=lE(t.type.render,!1),t;case 1:return t=lE(t.type,!0),t;default:return""}}function pI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sc:return"Fragment";case Tc:return"Portal";case dI:return"Profiler";case wT:return"StrictMode";case hI:return"Suspense";case fI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gD:return(t.displayName||"Context")+".Consumer";case mD:return(t._context.displayName||"Context")+".Provider";case ET:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case IT:return e=t.displayName||null,e!==null?e:pI(t.type)||"Memo";case Uo:e=t._payload,t=t._init;try{return pI(t(e))}catch{}}return null}function C9(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pI(e);case 8:return e===wT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function la(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function A9(t){var e=yD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uv(t){t._valueTracker||(t._valueTracker=A9(t))}function _D(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=yD(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function dy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mI(t,e){var n=e.checked;return Nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ak(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=la(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wD(t,e){e=e.checked,e!=null&&_T(t,"checked",e,!1)}function gI(t,e){wD(t,e);var n=la(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vI(t,e.type,n):e.hasOwnProperty("defaultValue")&&vI(t,e.type,la(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vI(t,e,n){(e!=="number"||dy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nf=Array.isArray;function Vc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+la(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function yI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Nf(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:la(n)}}function ED(t,e){var n=la(e.value),i=la(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function ck(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ID(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _I(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ID(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cv,TD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cv=cv||document.createElement("div"),cv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $f={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R9=["Webkit","ms","Moz","O"];Object.keys($f).forEach(function(t){R9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$f[e]=$f[t]})});function SD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$f.hasOwnProperty(t)&&$f[t]?(""+e).trim():e+"px"}function bD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=SD(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var P9=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wI(t,e){if(e){if(P9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function EI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var II=null;function TT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var TI=null,Fc=null,Uc=null;function dk(t){if(t=dm(t)){if(typeof TI!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=b_(e),TI(t.stateNode,t.type,e))}}function CD(t){Fc?Uc?Uc.push(t):Uc=[t]:Fc=t}function AD(){if(Fc){var t=Fc,e=Uc;if(Uc=Fc=null,dk(t),e)for(t=0;t<e.length;t++)dk(e[t])}}function RD(t,e){return t(e)}function PD(){}var uE=!1;function kD(t,e,n){if(uE)return t(e,n);uE=!0;try{return RD(t,e,n)}finally{uE=!1,(Fc!==null||Uc!==null)&&(PD(),AD())}}function mp(t,e){var n=t.stateNode;if(n===null)return null;var i=b_(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var SI=!1;if(Qs)try{var cf={};Object.defineProperty(cf,"passive",{get:function(){SI=!0}}),window.addEventListener("test",cf,cf),window.removeEventListener("test",cf,cf)}catch{SI=!1}function k9(t,e,n,i,r,o,a,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var qf=!1,hy=null,fy=!1,bI=null,x9={onError:function(t){qf=!0,hy=t}};function N9(t,e,n,i,r,o,a,u,c){qf=!1,hy=null,k9.apply(x9,arguments)}function D9(t,e,n,i,r,o,a,u,c){if(N9.apply(this,arguments),qf){if(qf){var h=hy;qf=!1,hy=null}else throw Error(Z(198));fy||(fy=!0,bI=h)}}function Yl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hk(t){if(Yl(t)!==t)throw Error(Z(188))}function O9(t){var e=t.alternate;if(!e){if(e=Yl(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return hk(r),t;if(o===i)return hk(r),e;o=o.sibling}throw Error(Z(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(Z(189))}}if(n.alternate!==i)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function ND(t){return t=O9(t),t!==null?DD(t):null}function DD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=DD(t);if(e!==null)return e;t=t.sibling}return null}var OD=ji.unstable_scheduleCallback,fk=ji.unstable_cancelCallback,L9=ji.unstable_shouldYield,M9=ji.unstable_requestPaint,Ht=ji.unstable_now,V9=ji.unstable_getCurrentPriorityLevel,ST=ji.unstable_ImmediatePriority,LD=ji.unstable_UserBlockingPriority,py=ji.unstable_NormalPriority,F9=ji.unstable_LowPriority,MD=ji.unstable_IdlePriority,E_=null,hs=null;function U9(t){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(E_,t,void 0,(t.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:z9,B9=Math.log,j9=Math.LN2;function z9(t){return t>>>=0,t===0?32:31-(B9(t)/j9|0)|0}var dv=64,hv=4194304;function Df(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function my(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Df(u):(o&=a,o!==0&&(i=Df(o)))}else a=n&~r,a!==0?i=Df(a):o!==0&&(i=Df(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-kr(e),r=1<<n,i|=t[n],e&=~r;return i}function $9(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q9(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-kr(o),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=$9(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function CI(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VD(){var t=dv;return dv<<=1,!(dv&4194240)&&(dv=64),t}function cE(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function um(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kr(e),t[e]=n}function G9(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-kr(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function bT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-kr(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var tt=0;function FD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UD,CT,BD,jD,zD,AI=!1,fv=[],Jo=null,Xo=null,Zo=null,gp=new Map,vp=new Map,jo=[],W9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pk(t,e){switch(t){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":gp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vp.delete(e.pointerId)}}function df(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=dm(e),e!==null&&CT(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function H9(t,e,n,i,r){switch(e){case"focusin":return Jo=df(Jo,t,e,n,i,r),!0;case"dragenter":return Xo=df(Xo,t,e,n,i,r),!0;case"mouseover":return Zo=df(Zo,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return gp.set(o,df(gp.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,vp.set(o,df(vp.get(o)||null,t,e,n,i,r)),!0}return!1}function $D(t){var e=dl(t.target);if(e!==null){var n=Yl(e);if(n!==null){if(e=n.tag,e===13){if(e=xD(n),e!==null){t.blockedOn=e,zD(t.priority,function(){BD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=RI(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);II=i,n.target.dispatchEvent(i),II=null}else return e=dm(n),e!==null&&CT(e),t.blockedOn=n,!1;e.shift()}return!0}function mk(t,e,n){Vv(t)&&n.delete(e)}function K9(){AI=!1,Jo!==null&&Vv(Jo)&&(Jo=null),Xo!==null&&Vv(Xo)&&(Xo=null),Zo!==null&&Vv(Zo)&&(Zo=null),gp.forEach(mk),vp.forEach(mk)}function hf(t,e){t.blockedOn===e&&(t.blockedOn=null,AI||(AI=!0,ji.unstable_scheduleCallback(ji.unstable_NormalPriority,K9)))}function yp(t){function e(r){return hf(r,t)}if(0<fv.length){hf(fv[0],t);for(var n=1;n<fv.length;n++){var i=fv[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Jo!==null&&hf(Jo,t),Xo!==null&&hf(Xo,t),Zo!==null&&hf(Zo,t),gp.forEach(e),vp.forEach(e),n=0;n<jo.length;n++)i=jo[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<jo.length&&(n=jo[0],n.blockedOn===null);)$D(n),n.blockedOn===null&&jo.shift()}var Bc=so.ReactCurrentBatchConfig,gy=!0;function Q9(t,e,n,i){var r=tt,o=Bc.transition;Bc.transition=null;try{tt=1,AT(t,e,n,i)}finally{tt=r,Bc.transition=o}}function Y9(t,e,n,i){var r=tt,o=Bc.transition;Bc.transition=null;try{tt=4,AT(t,e,n,i)}finally{tt=r,Bc.transition=o}}function AT(t,e,n,i){if(gy){var r=RI(t,e,n,i);if(r===null)wE(t,e,i,vy,n),pk(t,i);else if(H9(r,t,e,n,i))i.stopPropagation();else if(pk(t,i),e&4&&-1<W9.indexOf(t)){for(;r!==null;){var o=dm(r);if(o!==null&&UD(o),o=RI(t,e,n,i),o===null&&wE(t,e,i,vy,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else wE(t,e,i,null,n)}}var vy=null;function RI(t,e,n,i){if(vy=null,t=TT(i),t=dl(t),t!==null)if(e=Yl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vy=t,null}function qD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V9()){case ST:return 1;case LD:return 4;case py:case F9:return 16;case MD:return 536870912;default:return 16}default:return 16}}var Go=null,RT=null,Fv=null;function GD(){if(Fv)return Fv;var t,e=RT,n=e.length,i,r="value"in Go?Go.value:Go.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Fv=r.slice(t,1<i?1-i:void 0)}function Uv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pv(){return!0}function gk(){return!1}function qi(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?pv:gk,this.isPropagationStopped=gk,this}return Nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pv)},persist:function(){},isPersistent:pv}),e}var Ad={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PT=qi(Ad),cm=Nt({},Ad,{view:0,detail:0}),J9=qi(cm),dE,hE,ff,I_=Nt({},cm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ff&&(ff&&t.type==="mousemove"?(dE=t.screenX-ff.screenX,hE=t.screenY-ff.screenY):hE=dE=0,ff=t),dE)},movementY:function(t){return"movementY"in t?t.movementY:hE}}),vk=qi(I_),X9=Nt({},I_,{dataTransfer:0}),Z9=qi(X9),e5=Nt({},cm,{relatedTarget:0}),fE=qi(e5),t5=Nt({},Ad,{animationName:0,elapsedTime:0,pseudoElement:0}),n5=qi(t5),i5=Nt({},Ad,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),r5=qi(i5),s5=Nt({},Ad,{data:0}),yk=qi(s5),o5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=l5[t])?!!e[t]:!1}function kT(){return u5}var c5=Nt({},cm,{key:function(t){if(t.key){var e=o5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kT,charCode:function(t){return t.type==="keypress"?Uv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d5=qi(c5),h5=Nt({},I_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_k=qi(h5),f5=Nt({},cm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kT}),p5=qi(f5),m5=Nt({},Ad,{propertyName:0,elapsedTime:0,pseudoElement:0}),g5=qi(m5),v5=Nt({},I_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y5=qi(v5),_5=[9,13,27,32],xT=Qs&&"CompositionEvent"in window,Gf=null;Qs&&"documentMode"in document&&(Gf=document.documentMode);var w5=Qs&&"TextEvent"in window&&!Gf,WD=Qs&&(!xT||Gf&&8<Gf&&11>=Gf),wk=" ",Ek=!1;function HD(t,e){switch(t){case"keyup":return _5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bc=!1;function E5(t,e){switch(t){case"compositionend":return KD(e);case"keypress":return e.which!==32?null:(Ek=!0,wk);case"textInput":return t=e.data,t===wk&&Ek?null:t;default:return null}}function I5(t,e){if(bc)return t==="compositionend"||!xT&&HD(t,e)?(t=GD(),Fv=RT=Go=null,bc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WD&&e.locale!=="ko"?null:e.data;default:return null}}var T5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ik(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!T5[t.type]:e==="textarea"}function QD(t,e,n,i){CD(i),e=yy(e,"onChange"),0<e.length&&(n=new PT("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Wf=null,_p=null;function S5(t){oO(t,0)}function T_(t){var e=Rc(t);if(_D(e))return t}function b5(t,e){if(t==="change")return e}var YD=!1;if(Qs){var pE;if(Qs){var mE="oninput"in document;if(!mE){var Tk=document.createElement("div");Tk.setAttribute("oninput","return;"),mE=typeof Tk.oninput=="function"}pE=mE}else pE=!1;YD=pE&&(!document.documentMode||9<document.documentMode)}function Sk(){Wf&&(Wf.detachEvent("onpropertychange",JD),_p=Wf=null)}function JD(t){if(t.propertyName==="value"&&T_(_p)){var e=[];QD(e,_p,t,TT(t)),kD(S5,e)}}function C5(t,e,n){t==="focusin"?(Sk(),Wf=e,_p=n,Wf.attachEvent("onpropertychange",JD)):t==="focusout"&&Sk()}function A5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return T_(_p)}function R5(t,e){if(t==="click")return T_(e)}function P5(t,e){if(t==="input"||t==="change")return T_(e)}function k5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Or=typeof Object.is=="function"?Object.is:k5;function wp(t,e){if(Or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!cI.call(e,r)||!Or(t[r],e[r]))return!1}return!0}function bk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ck(t,e){var n=bk(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bk(n)}}function XD(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XD(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZD(){for(var t=window,e=dy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dy(t.document)}return e}function NT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function x5(t){var e=ZD(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XD(n.ownerDocument.documentElement,n)){if(i!==null&&NT(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Ck(n,o);var a=Ck(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N5=Qs&&"documentMode"in document&&11>=document.documentMode,Cc=null,PI=null,Hf=null,kI=!1;function Ak(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kI||Cc==null||Cc!==dy(i)||(i=Cc,"selectionStart"in i&&NT(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Hf&&wp(Hf,i)||(Hf=i,i=yy(PI,"onSelect"),0<i.length&&(e=new PT("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Cc)))}function mv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ac={animationend:mv("Animation","AnimationEnd"),animationiteration:mv("Animation","AnimationIteration"),animationstart:mv("Animation","AnimationStart"),transitionend:mv("Transition","TransitionEnd")},gE={},eO={};Qs&&(eO=document.createElement("div").style,"AnimationEvent"in window||(delete Ac.animationend.animation,delete Ac.animationiteration.animation,delete Ac.animationstart.animation),"TransitionEvent"in window||delete Ac.transitionend.transition);function S_(t){if(gE[t])return gE[t];if(!Ac[t])return t;var e=Ac[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eO)return gE[t]=e[n];return t}var tO=S_("animationend"),nO=S_("animationiteration"),iO=S_("animationstart"),rO=S_("transitionend"),sO=new Map,Rk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ia(t,e){sO.set(t,e),Ql(e,[t])}for(var vE=0;vE<Rk.length;vE++){var yE=Rk[vE],D5=yE.toLowerCase(),O5=yE[0].toUpperCase()+yE.slice(1);Ia(D5,"on"+O5)}Ia(tO,"onAnimationEnd");Ia(nO,"onAnimationIteration");Ia(iO,"onAnimationStart");Ia("dblclick","onDoubleClick");Ia("focusin","onFocus");Ia("focusout","onBlur");Ia(rO,"onTransitionEnd");Xc("onMouseEnter",["mouseout","mouseover"]);Xc("onMouseLeave",["mouseout","mouseover"]);Xc("onPointerEnter",["pointerout","pointerover"]);Xc("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Of));function Pk(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,D9(i,e,void 0,t),t.currentTarget=null}function oO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;Pk(r,u,h),o=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,h=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;Pk(r,u,h),o=c}}}if(fy)throw t=bI,fy=!1,bI=null,t}function ft(t,e){var n=e[LI];n===void 0&&(n=e[LI]=new Set);var i=t+"__bubble";n.has(i)||(aO(e,t,2,!1),n.add(i))}function _E(t,e,n){var i=0;e&&(i|=4),aO(n,t,i,e)}var gv="_reactListening"+Math.random().toString(36).slice(2);function Ep(t){if(!t[gv]){t[gv]=!0,pD.forEach(function(n){n!=="selectionchange"&&(L5.has(n)||_E(n,!1,t),_E(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gv]||(e[gv]=!0,_E("selectionchange",!1,e))}}function aO(t,e,n,i){switch(qD(e)){case 1:var r=Q9;break;case 4:r=Y9;break;default:r=AT}n=r.bind(null,e,n,t),r=void 0,!SI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function wE(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=dl(u),a===null)return;if(c=a.tag,c===5||c===6){i=o=a;continue e}u=u.parentNode}}i=i.return}kD(function(){var h=o,m=TT(n),g=[];e:{var _=sO.get(t);if(_!==void 0){var S=PT,P=t;switch(t){case"keypress":if(Uv(n)===0)break e;case"keydown":case"keyup":S=d5;break;case"focusin":P="focus",S=fE;break;case"focusout":P="blur",S=fE;break;case"beforeblur":case"afterblur":S=fE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=vk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Z9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=p5;break;case tO:case nO:case iO:S=n5;break;case rO:S=g5;break;case"scroll":S=J9;break;case"wheel":S=y5;break;case"copy":case"cut":case"paste":S=r5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=_k}var I=(e&4)!==0,k=!I&&t==="scroll",E=I?_!==null?_+"Capture":null:_;I=[];for(var b=h,A;b!==null;){A=b;var M=A.stateNode;if(A.tag===5&&M!==null&&(A=M,E!==null&&(M=mp(b,E),M!=null&&I.push(Ip(b,M,A)))),k)break;b=b.return}0<I.length&&(_=new S(_,P,null,n,m),g.push({event:_,listeners:I}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",_&&n!==II&&(P=n.relatedTarget||n.fromElement)&&(dl(P)||P[Ys]))break e;if((S||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,S?(P=n.relatedTarget||n.toElement,S=h,P=P?dl(P):null,P!==null&&(k=Yl(P),P!==k||P.tag!==5&&P.tag!==6)&&(P=null)):(S=null,P=h),S!==P)){if(I=vk,M="onMouseLeave",E="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(I=_k,M="onPointerLeave",E="onPointerEnter",b="pointer"),k=S==null?_:Rc(S),A=P==null?_:Rc(P),_=new I(M,b+"leave",S,n,m),_.target=k,_.relatedTarget=A,M=null,dl(m)===h&&(I=new I(E,b+"enter",P,n,m),I.target=A,I.relatedTarget=k,M=I),k=M,S&&P)t:{for(I=S,E=P,b=0,A=I;A;A=dc(A))b++;for(A=0,M=E;M;M=dc(M))A++;for(;0<b-A;)I=dc(I),b--;for(;0<A-b;)E=dc(E),A--;for(;b--;){if(I===E||E!==null&&I===E.alternate)break t;I=dc(I),E=dc(E)}I=null}else I=null;S!==null&&kk(g,_,S,I,!1),P!==null&&k!==null&&kk(g,k,P,I,!0)}}e:{if(_=h?Rc(h):window,S=_.nodeName&&_.nodeName.toLowerCase(),S==="select"||S==="input"&&_.type==="file")var B=b5;else if(Ik(_))if(YD)B=P5;else{B=A5;var j=C5}else(S=_.nodeName)&&S.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(B=R5);if(B&&(B=B(t,h))){QD(g,B,n,m);break e}j&&j(t,_,h),t==="focusout"&&(j=_._wrapperState)&&j.controlled&&_.type==="number"&&vI(_,"number",_.value)}switch(j=h?Rc(h):window,t){case"focusin":(Ik(j)||j.contentEditable==="true")&&(Cc=j,PI=h,Hf=null);break;case"focusout":Hf=PI=Cc=null;break;case"mousedown":kI=!0;break;case"contextmenu":case"mouseup":case"dragend":kI=!1,Ak(g,n,m);break;case"selectionchange":if(N5)break;case"keydown":case"keyup":Ak(g,n,m)}var D;if(xT)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else bc?HD(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(WD&&n.locale!=="ko"&&(bc||C!=="onCompositionStart"?C==="onCompositionEnd"&&bc&&(D=GD()):(Go=m,RT="value"in Go?Go.value:Go.textContent,bc=!0)),j=yy(h,C),0<j.length&&(C=new yk(C,t,null,n,m),g.push({event:C,listeners:j}),D?C.data=D:(D=KD(n),D!==null&&(C.data=D)))),(D=w5?E5(t,n):I5(t,n))&&(h=yy(h,"onBeforeInput"),0<h.length&&(m=new yk("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:h}),m.data=D))}oO(g,e)})}function Ip(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yy(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=mp(t,n),o!=null&&i.unshift(Ip(t,o,r)),o=mp(t,e),o!=null&&i.push(Ip(t,o,r))),t=t.return}return i}function dc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kk(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&h!==null&&(u=h,r?(c=mp(n,o),c!=null&&a.unshift(Ip(n,c,u))):r||(c=mp(n,o),c!=null&&a.push(Ip(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var M5=/\r\n?/g,V5=/\u0000|\uFFFD/g;function xk(t){return(typeof t=="string"?t:""+t).replace(M5,`
`).replace(V5,"")}function vv(t,e,n){if(e=xk(e),xk(t)!==e&&n)throw Error(Z(425))}function _y(){}var xI=null,NI=null;function DI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var OI=typeof setTimeout=="function"?setTimeout:void 0,F5=typeof clearTimeout=="function"?clearTimeout:void 0,Nk=typeof Promise=="function"?Promise:void 0,U5=typeof queueMicrotask=="function"?queueMicrotask:typeof Nk<"u"?function(t){return Nk.resolve(null).then(t).catch(B5)}:OI;function B5(t){setTimeout(function(){throw t})}function EE(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),yp(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);yp(e)}function ea(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rd=Math.random().toString(36).slice(2),ns="__reactFiber$"+Rd,Tp="__reactProps$"+Rd,Ys="__reactContainer$"+Rd,LI="__reactEvents$"+Rd,j5="__reactListeners$"+Rd,z5="__reactHandles$"+Rd;function dl(t){var e=t[ns];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ys]||n[ns]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dk(t);t!==null;){if(n=t[ns])return n;t=Dk(t)}return e}t=n,n=t.parentNode}return null}function dm(t){return t=t[ns]||t[Ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function b_(t){return t[Tp]||null}var MI=[],Pc=-1;function Ta(t){return{current:t}}function gt(t){0>Pc||(t.current=MI[Pc],MI[Pc]=null,Pc--)}function lt(t,e){Pc++,MI[Pc]=t.current,t.current=e}var ua={},Kn=Ta(ua),Ii=Ta(!1),bl=ua;function Zc(t,e){var n=t.type.contextTypes;if(!n)return ua;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ti(t){return t=t.childContextTypes,t!=null}function wy(){gt(Ii),gt(Kn)}function Ok(t,e,n){if(Kn.current!==ua)throw Error(Z(168));lt(Kn,e),lt(Ii,n)}function lO(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Z(108,C9(t)||"Unknown",r));return Nt({},n,i)}function Ey(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ua,bl=Kn.current,lt(Kn,t),lt(Ii,Ii.current),!0}function Lk(t,e,n){var i=t.stateNode;if(!i)throw Error(Z(169));n?(t=lO(t,e,bl),i.__reactInternalMemoizedMergedChildContext=t,gt(Ii),gt(Kn),lt(Kn,t)):gt(Ii),lt(Ii,n)}var Us=null,C_=!1,IE=!1;function uO(t){Us===null?Us=[t]:Us.push(t)}function $5(t){C_=!0,uO(t)}function Sa(){if(!IE&&Us!==null){IE=!0;var t=0,e=tt;try{var n=Us;for(tt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Us=null,C_=!1}catch(r){throw Us!==null&&(Us=Us.slice(t+1)),OD(ST,Sa),r}finally{tt=e,IE=!1}}return null}var kc=[],xc=0,Iy=null,Ty=0,Ji=[],Xi=0,Cl=null,Bs=1,js="";function tl(t,e){kc[xc++]=Ty,kc[xc++]=Iy,Iy=t,Ty=e}function cO(t,e,n){Ji[Xi++]=Bs,Ji[Xi++]=js,Ji[Xi++]=Cl,Cl=t;var i=Bs;t=js;var r=32-kr(i)-1;i&=~(1<<r),n+=1;var o=32-kr(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Bs=1<<32-kr(e)+r|n<<r|i,js=o+t}else Bs=1<<o|n<<r|i,js=t}function DT(t){t.return!==null&&(tl(t,1),cO(t,1,0))}function OT(t){for(;t===Iy;)Iy=kc[--xc],kc[xc]=null,Ty=kc[--xc],kc[xc]=null;for(;t===Cl;)Cl=Ji[--Xi],Ji[Xi]=null,js=Ji[--Xi],Ji[Xi]=null,Bs=Ji[--Xi],Ji[Xi]=null}var Ui=null,Vi=null,wt=!1,Cr=null;function dO(t,e){var n=Zi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ui=t,Vi=ea(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ui=t,Vi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cl!==null?{id:Bs,overflow:js}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ui=t,Vi=null,!0):!1;default:return!1}}function VI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function FI(t){if(wt){var e=Vi;if(e){var n=e;if(!Mk(t,e)){if(VI(t))throw Error(Z(418));e=ea(n.nextSibling);var i=Ui;e&&Mk(t,e)?dO(i,n):(t.flags=t.flags&-4097|2,wt=!1,Ui=t)}}else{if(VI(t))throw Error(Z(418));t.flags=t.flags&-4097|2,wt=!1,Ui=t}}}function Vk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ui=t}function yv(t){if(t!==Ui)return!1;if(!wt)return Vk(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!DI(t.type,t.memoizedProps)),e&&(e=Vi)){if(VI(t))throw hO(),Error(Z(418));for(;e;)dO(t,e),e=ea(e.nextSibling)}if(Vk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vi=ea(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vi=null}}else Vi=Ui?ea(t.stateNode.nextSibling):null;return!0}function hO(){for(var t=Vi;t;)t=ea(t.nextSibling)}function ed(){Vi=Ui=null,wt=!1}function LT(t){Cr===null?Cr=[t]:Cr.push(t)}var q5=so.ReactCurrentBatchConfig;function pf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var i=n.stateNode}if(!i)throw Error(Z(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function _v(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fk(t){var e=t._init;return e(t._payload)}function fO(t){function e(E,b){if(t){var A=E.deletions;A===null?(E.deletions=[b],E.flags|=16):A.push(b)}}function n(E,b){if(!t)return null;for(;b!==null;)e(E,b),b=b.sibling;return null}function i(E,b){for(E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function r(E,b){return E=ra(E,b),E.index=0,E.sibling=null,E}function o(E,b,A){return E.index=A,t?(A=E.alternate,A!==null?(A=A.index,A<b?(E.flags|=2,b):A):(E.flags|=2,b)):(E.flags|=1048576,b)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function u(E,b,A,M){return b===null||b.tag!==6?(b=PE(A,E.mode,M),b.return=E,b):(b=r(b,A),b.return=E,b)}function c(E,b,A,M){var B=A.type;return B===Sc?m(E,b,A.props.children,M,A.key):b!==null&&(b.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Uo&&Fk(B)===b.type)?(M=r(b,A.props),M.ref=pf(E,b,A),M.return=E,M):(M=Wv(A.type,A.key,A.props,null,E.mode,M),M.ref=pf(E,b,A),M.return=E,M)}function h(E,b,A,M){return b===null||b.tag!==4||b.stateNode.containerInfo!==A.containerInfo||b.stateNode.implementation!==A.implementation?(b=kE(A,E.mode,M),b.return=E,b):(b=r(b,A.children||[]),b.return=E,b)}function m(E,b,A,M,B){return b===null||b.tag!==7?(b=wl(A,E.mode,M,B),b.return=E,b):(b=r(b,A),b.return=E,b)}function g(E,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return b=PE(""+b,E.mode,A),b.return=E,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lv:return A=Wv(b.type,b.key,b.props,null,E.mode,A),A.ref=pf(E,null,b),A.return=E,A;case Tc:return b=kE(b,E.mode,A),b.return=E,b;case Uo:var M=b._init;return g(E,M(b._payload),A)}if(Nf(b)||uf(b))return b=wl(b,E.mode,A,null),b.return=E,b;_v(E,b)}return null}function _(E,b,A,M){var B=b!==null?b.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return B!==null?null:u(E,b,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case lv:return A.key===B?c(E,b,A,M):null;case Tc:return A.key===B?h(E,b,A,M):null;case Uo:return B=A._init,_(E,b,B(A._payload),M)}if(Nf(A)||uf(A))return B!==null?null:m(E,b,A,M,null);_v(E,A)}return null}function S(E,b,A,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return E=E.get(A)||null,u(b,E,""+M,B);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case lv:return E=E.get(M.key===null?A:M.key)||null,c(b,E,M,B);case Tc:return E=E.get(M.key===null?A:M.key)||null,h(b,E,M,B);case Uo:var j=M._init;return S(E,b,A,j(M._payload),B)}if(Nf(M)||uf(M))return E=E.get(A)||null,m(b,E,M,B,null);_v(b,M)}return null}function P(E,b,A,M){for(var B=null,j=null,D=b,C=b=0,L=null;D!==null&&C<A.length;C++){D.index>C?(L=D,D=null):L=D.sibling;var F=_(E,D,A[C],M);if(F===null){D===null&&(D=L);break}t&&D&&F.alternate===null&&e(E,D),b=o(F,b,C),j===null?B=F:j.sibling=F,j=F,D=L}if(C===A.length)return n(E,D),wt&&tl(E,C),B;if(D===null){for(;C<A.length;C++)D=g(E,A[C],M),D!==null&&(b=o(D,b,C),j===null?B=D:j.sibling=D,j=D);return wt&&tl(E,C),B}for(D=i(E,D);C<A.length;C++)L=S(D,E,C,A[C],M),L!==null&&(t&&L.alternate!==null&&D.delete(L.key===null?C:L.key),b=o(L,b,C),j===null?B=L:j.sibling=L,j=L);return t&&D.forEach(function(O){return e(E,O)}),wt&&tl(E,C),B}function I(E,b,A,M){var B=uf(A);if(typeof B!="function")throw Error(Z(150));if(A=B.call(A),A==null)throw Error(Z(151));for(var j=B=null,D=b,C=b=0,L=null,F=A.next();D!==null&&!F.done;C++,F=A.next()){D.index>C?(L=D,D=null):L=D.sibling;var O=_(E,D,F.value,M);if(O===null){D===null&&(D=L);break}t&&D&&O.alternate===null&&e(E,D),b=o(O,b,C),j===null?B=O:j.sibling=O,j=O,D=L}if(F.done)return n(E,D),wt&&tl(E,C),B;if(D===null){for(;!F.done;C++,F=A.next())F=g(E,F.value,M),F!==null&&(b=o(F,b,C),j===null?B=F:j.sibling=F,j=F);return wt&&tl(E,C),B}for(D=i(E,D);!F.done;C++,F=A.next())F=S(D,E,C,F.value,M),F!==null&&(t&&F.alternate!==null&&D.delete(F.key===null?C:F.key),b=o(F,b,C),j===null?B=F:j.sibling=F,j=F);return t&&D.forEach(function(V){return e(E,V)}),wt&&tl(E,C),B}function k(E,b,A,M){if(typeof A=="object"&&A!==null&&A.type===Sc&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case lv:e:{for(var B=A.key,j=b;j!==null;){if(j.key===B){if(B=A.type,B===Sc){if(j.tag===7){n(E,j.sibling),b=r(j,A.props.children),b.return=E,E=b;break e}}else if(j.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Uo&&Fk(B)===j.type){n(E,j.sibling),b=r(j,A.props),b.ref=pf(E,j,A),b.return=E,E=b;break e}n(E,j);break}else e(E,j);j=j.sibling}A.type===Sc?(b=wl(A.props.children,E.mode,M,A.key),b.return=E,E=b):(M=Wv(A.type,A.key,A.props,null,E.mode,M),M.ref=pf(E,b,A),M.return=E,E=M)}return a(E);case Tc:e:{for(j=A.key;b!==null;){if(b.key===j)if(b.tag===4&&b.stateNode.containerInfo===A.containerInfo&&b.stateNode.implementation===A.implementation){n(E,b.sibling),b=r(b,A.children||[]),b.return=E,E=b;break e}else{n(E,b);break}else e(E,b);b=b.sibling}b=kE(A,E.mode,M),b.return=E,E=b}return a(E);case Uo:return j=A._init,k(E,b,j(A._payload),M)}if(Nf(A))return P(E,b,A,M);if(uf(A))return I(E,b,A,M);_v(E,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,b!==null&&b.tag===6?(n(E,b.sibling),b=r(b,A),b.return=E,E=b):(n(E,b),b=PE(A,E.mode,M),b.return=E,E=b),a(E)):n(E,b)}return k}var td=fO(!0),pO=fO(!1),Sy=Ta(null),by=null,Nc=null,MT=null;function VT(){MT=Nc=by=null}function FT(t){var e=Sy.current;gt(Sy),t._currentValue=e}function UI(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function jc(t,e){by=t,MT=Nc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vi=!0),t.firstContext=null)}function rr(t){var e=t._currentValue;if(MT!==t)if(t={context:t,memoizedValue:e,next:null},Nc===null){if(by===null)throw Error(Z(308));Nc=t,by.dependencies={lanes:0,firstContext:t}}else Nc=Nc.next=t;return e}var hl=null;function UT(t){hl===null?hl=[t]:hl.push(t)}function mO(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,UT(e)):(n.next=r.next,r.next=n),e.interleaved=n,Js(t,i)}function Js(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bo=!1;function BT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ta(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Js(t,n)}return r=i.interleaved,r===null?(e.next=e,UT(i)):(e.next=r.next,r.next=e),i.interleaved=e,Js(t,n)}function Bv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,bT(t,n)}}function Uk(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cy(t,e,n,i){var r=t.updateQueue;Bo=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,h=c.next;c.next=null,a===null?o=h:a.next=h,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(o!==null){var g=r.baseState;a=0,m=h=c=null,u=o;do{var _=u.lane,S=u.eventTime;if((i&_)===_){m!==null&&(m=m.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=t,I=u;switch(_=e,S=n,I.tag){case 1:if(P=I.payload,typeof P=="function"){g=P.call(S,g,_);break e}g=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=I.payload,_=typeof P=="function"?P.call(S,g,_):P,_==null)break e;g=Nt({},g,_);break e;case 2:Bo=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=r.effects,_===null?r.effects=[u]:_.push(u))}else S={eventTime:S,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=S,c=g):m=m.next=S,a|=_;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;_=u,u=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);if(m===null&&(c=g),r.baseState=c,r.firstBaseUpdate=h,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Rl|=a,t.lanes=a,t.memoizedState=g}}function Bk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Z(191,r));r.call(i)}}}var hm={},fs=Ta(hm),Sp=Ta(hm),bp=Ta(hm);function fl(t){if(t===hm)throw Error(Z(174));return t}function jT(t,e){switch(lt(bp,e),lt(Sp,t),lt(fs,hm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_I(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_I(e,t)}gt(fs),lt(fs,e)}function nd(){gt(fs),gt(Sp),gt(bp)}function vO(t){fl(bp.current);var e=fl(fs.current),n=_I(e,t.type);e!==n&&(lt(Sp,t),lt(fs,n))}function zT(t){Sp.current===t&&(gt(fs),gt(Sp))}var Rt=Ta(0);function Ay(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var TE=[];function $T(){for(var t=0;t<TE.length;t++)TE[t]._workInProgressVersionPrimary=null;TE.length=0}var jv=so.ReactCurrentDispatcher,SE=so.ReactCurrentBatchConfig,Al=0,Pt=null,un=null,En=null,Ry=!1,Kf=!1,Cp=0,G5=0;function $n(){throw Error(Z(321))}function qT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Or(t[n],e[n]))return!1;return!0}function GT(t,e,n,i,r,o){if(Al=o,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jv.current=t===null||t.memoizedState===null?Q5:Y5,t=n(i,r),Kf){o=0;do{if(Kf=!1,Cp=0,25<=o)throw Error(Z(301));o+=1,En=un=null,e.updateQueue=null,jv.current=J5,t=n(i,r)}while(Kf)}if(jv.current=Py,e=un!==null&&un.next!==null,Al=0,En=un=Pt=null,Ry=!1,e)throw Error(Z(300));return t}function WT(){var t=Cp!==0;return Cp=0,t}function ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Pt.memoizedState=En=t:En=En.next=t,En}function sr(){if(un===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=un.next;var e=En===null?Pt.memoizedState:En.next;if(e!==null)En=e,un=t;else{if(t===null)throw Error(Z(310));un=t,t={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},En===null?Pt.memoizedState=En=t:En=En.next=t}return En}function Ap(t,e){return typeof e=="function"?e(t):e}function bE(t){var e=sr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var i=un,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,c=null,h=o;do{var m=h.lane;if((Al&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var g={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,Pt.lanes|=m,Rl|=m}h=h.next}while(h!==null&&h!==o);c===null?a=i:c.next=u,Or(i,e.memoizedState)||(vi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Pt.lanes|=o,Rl|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function CE(t){var e=sr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);Or(o,e.memoizedState)||(vi=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function yO(){}function _O(t,e){var n=Pt,i=sr(),r=e(),o=!Or(i.memoizedState,r);if(o&&(i.memoizedState=r,vi=!0),i=i.queue,HT(IO.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||En!==null&&En.memoizedState.tag&1){if(n.flags|=2048,Rp(9,EO.bind(null,n,i,r,e),void 0,null),Sn===null)throw Error(Z(349));Al&30||wO(n,e,r)}return r}function wO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EO(t,e,n,i){e.value=n,e.getSnapshot=i,TO(e)&&SO(t)}function IO(t,e,n){return n(function(){TO(e)&&SO(t)})}function TO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Or(t,n)}catch{return!0}}function SO(t){var e=Js(t,1);e!==null&&xr(e,t,1,-1)}function jk(t){var e=ts();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:t},e.queue=t,t=t.dispatch=K5.bind(null,Pt,t),[e.memoizedState,t]}function Rp(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function bO(){return sr().memoizedState}function zv(t,e,n,i){var r=ts();Pt.flags|=t,r.memoizedState=Rp(1|e,n,void 0,i===void 0?null:i)}function A_(t,e,n,i){var r=sr();i=i===void 0?null:i;var o=void 0;if(un!==null){var a=un.memoizedState;if(o=a.destroy,i!==null&&qT(i,a.deps)){r.memoizedState=Rp(e,n,o,i);return}}Pt.flags|=t,r.memoizedState=Rp(1|e,n,o,i)}function zk(t,e){return zv(8390656,8,t,e)}function HT(t,e){return A_(2048,8,t,e)}function CO(t,e){return A_(4,2,t,e)}function AO(t,e){return A_(4,4,t,e)}function RO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PO(t,e,n){return n=n!=null?n.concat([t]):null,A_(4,4,RO.bind(null,e,t),n)}function KT(){}function kO(t,e){var n=sr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&qT(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function xO(t,e){var n=sr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&qT(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function NO(t,e,n){return Al&21?(Or(n,e)||(n=VD(),Pt.lanes|=n,Rl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vi=!0),t.memoizedState=n)}function W5(t,e){var n=tt;tt=n!==0&&4>n?n:4,t(!0);var i=SE.transition;SE.transition={};try{t(!1),e()}finally{tt=n,SE.transition=i}}function DO(){return sr().memoizedState}function H5(t,e,n){var i=ia(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},OO(t))LO(e,n);else if(n=mO(t,e,n,i),n!==null){var r=ni();xr(n,t,i,r),MO(n,e,i)}}function K5(t,e,n){var i=ia(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(OO(t))LO(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,Or(u,a)){var c=e.interleaved;c===null?(r.next=r,UT(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=mO(t,e,r,i),n!==null&&(r=ni(),xr(n,t,i,r),MO(n,e,i))}}function OO(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function LO(t,e){Kf=Ry=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MO(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,bT(t,n)}}var Py={readContext:rr,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},Q5={readContext:rr,useCallback:function(t,e){return ts().memoizedState=[t,e===void 0?null:e],t},useContext:rr,useEffect:zk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zv(4194308,4,RO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zv(4194308,4,t,e)},useInsertionEffect:function(t,e){return zv(4,2,t,e)},useMemo:function(t,e){var n=ts();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ts();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=H5.bind(null,Pt,t),[i.memoizedState,t]},useRef:function(t){var e=ts();return t={current:t},e.memoizedState=t},useState:jk,useDebugValue:KT,useDeferredValue:function(t){return ts().memoizedState=t},useTransition:function(){var t=jk(!1),e=t[0];return t=W5.bind(null,t[1]),ts().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Pt,r=ts();if(wt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Sn===null)throw Error(Z(349));Al&30||wO(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,zk(IO.bind(null,i,o,t),[t]),i.flags|=2048,Rp(9,EO.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ts(),e=Sn.identifierPrefix;if(wt){var n=js,i=Bs;n=(i&~(1<<32-kr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Cp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=G5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Y5={readContext:rr,useCallback:kO,useContext:rr,useEffect:HT,useImperativeHandle:PO,useInsertionEffect:CO,useLayoutEffect:AO,useMemo:xO,useReducer:bE,useRef:bO,useState:function(){return bE(Ap)},useDebugValue:KT,useDeferredValue:function(t){var e=sr();return NO(e,un.memoizedState,t)},useTransition:function(){var t=bE(Ap)[0],e=sr().memoizedState;return[t,e]},useMutableSource:yO,useSyncExternalStore:_O,useId:DO,unstable_isNewReconciler:!1},J5={readContext:rr,useCallback:kO,useContext:rr,useEffect:HT,useImperativeHandle:PO,useInsertionEffect:CO,useLayoutEffect:AO,useMemo:xO,useReducer:CE,useRef:bO,useState:function(){return CE(Ap)},useDebugValue:KT,useDeferredValue:function(t){var e=sr();return un===null?e.memoizedState=t:NO(e,un.memoizedState,t)},useTransition:function(){var t=CE(Ap)[0],e=sr().memoizedState;return[t,e]},useMutableSource:yO,useSyncExternalStore:_O,useId:DO,unstable_isNewReconciler:!1};function Sr(t,e){if(t&&t.defaultProps){e=Nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function BI(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var R_={isMounted:function(t){return(t=t._reactInternals)?Yl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ni(),r=ia(t),o=Ws(i,r);o.payload=e,n!=null&&(o.callback=n),e=ta(t,o,r),e!==null&&(xr(e,t,r,i),Bv(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ni(),r=ia(t),o=Ws(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ta(t,o,r),e!==null&&(xr(e,t,r,i),Bv(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ni(),i=ia(t),r=Ws(n,i);r.tag=2,e!=null&&(r.callback=e),e=ta(t,r,i),e!==null&&(xr(e,t,i,n),Bv(e,t,i))}};function $k(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!wp(n,i)||!wp(r,o):!0}function VO(t,e,n){var i=!1,r=ua,o=e.contextType;return typeof o=="object"&&o!==null?o=rr(o):(r=Ti(e)?bl:Kn.current,i=e.contextTypes,o=(i=i!=null)?Zc(t,r):ua),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=R_,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function qk(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&R_.enqueueReplaceState(e,e.state,null)}function jI(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},BT(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=rr(o):(o=Ti(e)?bl:Kn.current,r.context=Zc(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(BI(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&R_.enqueueReplaceState(r,r.state,null),Cy(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function id(t,e){try{var n="",i=e;do n+=b9(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function AE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var X5=typeof WeakMap=="function"?WeakMap:Map;function FO(t,e,n){n=Ws(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){xy||(xy=!0,XI=i),zI(t,e)},n}function UO(t,e,n){n=Ws(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){zI(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){zI(t,e),typeof i!="function"&&(na===null?na=new Set([this]):na.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Gk(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new X5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=hB.bind(null,t,e,n),e.then(t,t))}function Wk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hk(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ws(-1,1),e.tag=2,ta(n,e,1))),n.lanes|=1),t)}var Z5=so.ReactCurrentOwner,vi=!1;function Zn(t,e,n,i){e.child=t===null?pO(e,null,n,i):td(e,t.child,n,i)}function Kk(t,e,n,i,r){n=n.render;var o=e.ref;return jc(e,r),i=GT(t,e,n,i,o,r),n=WT(),t!==null&&!vi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xs(t,e,r)):(wt&&n&&DT(e),e.flags|=1,Zn(t,e,i,r),e.child)}function Qk(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!nS(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,BO(t,e,o,i,r)):(t=Wv(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:wp,n(a,i)&&t.ref===e.ref)return Xs(t,e,r)}return e.flags|=1,t=ra(o,i),t.ref=e.ref,t.return=e,e.child=t}function BO(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(wp(o,i)&&t.ref===e.ref)if(vi=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(vi=!0);else return e.lanes=t.lanes,Xs(t,e,r)}return $I(t,e,n,i,r)}function jO(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Oc,Di),Di|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(Oc,Di),Di|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,lt(Oc,Di),Di|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,lt(Oc,Di),Di|=i;return Zn(t,e,r,n),e.child}function zO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $I(t,e,n,i,r){var o=Ti(n)?bl:Kn.current;return o=Zc(e,o),jc(e,r),n=GT(t,e,n,i,o,r),i=WT(),t!==null&&!vi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Xs(t,e,r)):(wt&&i&&DT(e),e.flags|=1,Zn(t,e,n,r),e.child)}function Yk(t,e,n,i,r){if(Ti(n)){var o=!0;Ey(e)}else o=!1;if(jc(e,r),e.stateNode===null)$v(t,e),VO(e,n,i),jI(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=rr(h):(h=Ti(n)?bl:Kn.current,h=Zc(e,h));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==h)&&qk(e,a,i,h),Bo=!1;var _=e.memoizedState;a.state=_,Cy(e,i,a,r),c=e.memoizedState,u!==i||_!==c||Ii.current||Bo?(typeof m=="function"&&(BI(e,n,m,i),c=e.memoizedState),(u=Bo||$k(e,n,u,i,_,c,h))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=h,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,gO(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Sr(e.type,u),a.props=h,g=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=rr(c):(c=Ti(n)?bl:Kn.current,c=Zc(e,c));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||_!==c)&&qk(e,a,i,c),Bo=!1,_=e.memoizedState,a.state=_,Cy(e,i,a,r);var P=e.memoizedState;u!==g||_!==P||Ii.current||Bo?(typeof S=="function"&&(BI(e,n,S,i),P=e.memoizedState),(h=Bo||$k(e,n,h,i,_,P,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,P,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,P,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=P),a.props=i,a.state=P,a.context=c,i=h):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),i=!1)}return qI(t,e,n,i,o,r)}function qI(t,e,n,i,r,o){zO(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Lk(e,n,!1),Xs(t,e,o);i=e.stateNode,Z5.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=td(e,t.child,null,o),e.child=td(e,null,u,o)):Zn(t,e,u,o),e.memoizedState=i.state,r&&Lk(e,n,!0),e.child}function $O(t){var e=t.stateNode;e.pendingContext?Ok(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ok(t,e.context,!1),jT(t,e.containerInfo)}function Jk(t,e,n,i,r){return ed(),LT(r),e.flags|=256,Zn(t,e,n,i),e.child}var GI={dehydrated:null,treeContext:null,retryLane:0};function WI(t){return{baseLanes:t,cachePool:null,transitions:null}}function qO(t,e,n){var i=e.pendingProps,r=Rt.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),lt(Rt,r&1),t===null)return FI(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=x_(a,i,0,null),t=wl(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=WI(n),e.memoizedState=GI,t):QT(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return eB(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=ra(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=ra(u,o):(o=wl(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?WI(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=GI,i}return o=t.child,t=o.sibling,i=ra(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function QT(t,e){return e=x_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wv(t,e,n,i){return i!==null&&LT(i),td(e,t.child,null,n),t=QT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eB(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=AE(Error(Z(422))),wv(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=x_({mode:"visible",children:i.children},r,0,null),o=wl(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&td(e,t.child,null,a),e.child.memoizedState=WI(a),e.memoizedState=GI,o);if(!(e.mode&1))return wv(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(Z(419)),i=AE(o,i,void 0),wv(t,e,a,i)}if(u=(a&t.childLanes)!==0,vi||u){if(i=Sn,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Js(t,r),xr(i,t,r,-1))}return tS(),i=AE(Error(Z(421))),wv(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=fB.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,Vi=ea(r.nextSibling),Ui=e,wt=!0,Cr=null,t!==null&&(Ji[Xi++]=Bs,Ji[Xi++]=js,Ji[Xi++]=Cl,Bs=t.id,js=t.overflow,Cl=e),e=QT(e,i.children),e.flags|=4096,e)}function Xk(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),UI(t.return,e,n)}function RE(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function GO(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Zn(t,e,i.children,n),i=Rt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xk(t,n,e);else if(t.tag===19)Xk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(lt(Rt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ay(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),RE(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ay(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}RE(e,!0,n,null,o);break;case"together":RE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $v(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tB(t,e,n){switch(e.tag){case 3:$O(e),ed();break;case 5:vO(e);break;case 1:Ti(e.type)&&Ey(e);break;case 4:jT(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;lt(Sy,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(lt(Rt,Rt.current&1),e.flags|=128,null):n&e.child.childLanes?qO(t,e,n):(lt(Rt,Rt.current&1),t=Xs(t,e,n),t!==null?t.sibling:null);lt(Rt,Rt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return GO(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(Rt,Rt.current),i)break;return null;case 22:case 23:return e.lanes=0,jO(t,e,n)}return Xs(t,e,n)}var WO,HI,HO,KO;WO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};HI=function(){};HO=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,fl(fs.current);var o=null;switch(n){case"input":r=mI(t,r),i=mI(t,i),o=[];break;case"select":r=Nt({},r,{value:void 0}),i=Nt({},i,{value:void 0}),o=[];break;case"textarea":r=yI(t,r),i=yI(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=_y)}wI(n,i);var a;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var u=r[h];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(fp.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var c=i[h];if(u=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(fp.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ft("scroll",t),o||u===c||(o=[])):(o=o||[]).push(h,c))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};KO=function(t,e,n,i){n!==i&&(e.flags|=4)};function mf(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function nB(t,e,n){var i=e.pendingProps;switch(OT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(e),null;case 1:return Ti(e.type)&&wy(),qn(e),null;case 3:return i=e.stateNode,nd(),gt(Ii),gt(Kn),$T(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(yv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cr!==null&&(t1(Cr),Cr=null))),HI(t,e),qn(e),null;case 5:zT(e);var r=fl(bp.current);if(n=e.type,t!==null&&e.stateNode!=null)HO(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Z(166));return qn(e),null}if(t=fl(fs.current),yv(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ns]=e,i[Tp]=o,t=(e.mode&1)!==0,n){case"dialog":ft("cancel",i),ft("close",i);break;case"iframe":case"object":case"embed":ft("load",i);break;case"video":case"audio":for(r=0;r<Of.length;r++)ft(Of[r],i);break;case"source":ft("error",i);break;case"img":case"image":case"link":ft("error",i),ft("load",i);break;case"details":ft("toggle",i);break;case"input":ak(i,o),ft("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ft("invalid",i);break;case"textarea":uk(i,o),ft("invalid",i)}wI(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&vv(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&vv(i.textContent,u,t),r=["children",""+u]):fp.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&ft("scroll",i)}switch(n){case"input":uv(i),lk(i,o,!0);break;case"textarea":uv(i),ck(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=_y)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ID(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[ns]=e,t[Tp]=i,WO(t,e,!1,!1),e.stateNode=t;e:{switch(a=EI(n,i),n){case"dialog":ft("cancel",t),ft("close",t),r=i;break;case"iframe":case"object":case"embed":ft("load",t),r=i;break;case"video":case"audio":for(r=0;r<Of.length;r++)ft(Of[r],t);r=i;break;case"source":ft("error",t),r=i;break;case"img":case"image":case"link":ft("error",t),ft("load",t),r=i;break;case"details":ft("toggle",t),r=i;break;case"input":ak(t,i),r=mI(t,i),ft("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Nt({},i,{value:void 0}),ft("invalid",t);break;case"textarea":uk(t,i),r=yI(t,i),ft("invalid",t);break;default:r=i}wI(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?bD(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&TD(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&pp(t,c):typeof c=="number"&&pp(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(fp.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ft("scroll",t):c!=null&&_T(t,o,c,a))}switch(n){case"input":uv(t),lk(t,i,!1);break;case"textarea":uv(t),ck(t);break;case"option":i.value!=null&&t.setAttribute("value",""+la(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Vc(t,!!i.multiple,o,!1):i.defaultValue!=null&&Vc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=_y)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qn(e),null;case 6:if(t&&e.stateNode!=null)KO(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Z(166));if(n=fl(bp.current),fl(fs.current),yv(e)){if(i=e.stateNode,n=e.memoizedProps,i[ns]=e,(o=i.nodeValue!==n)&&(t=Ui,t!==null))switch(t.tag){case 3:vv(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vv(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ns]=e,e.stateNode=i}return qn(e),null;case 13:if(gt(Rt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&Vi!==null&&e.mode&1&&!(e.flags&128))hO(),ed(),e.flags|=98560,o=!1;else if(o=yv(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[ns]=e}else ed(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qn(e),o=!1}else Cr!==null&&(t1(Cr),Cr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Rt.current&1?dn===0&&(dn=3):tS())),e.updateQueue!==null&&(e.flags|=4),qn(e),null);case 4:return nd(),HI(t,e),t===null&&Ep(e.stateNode.containerInfo),qn(e),null;case 10:return FT(e.type._context),qn(e),null;case 17:return Ti(e.type)&&wy(),qn(e),null;case 19:if(gt(Rt),o=e.memoizedState,o===null)return qn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)mf(o,!1);else{if(dn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ay(t),a!==null){for(e.flags|=128,mf(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(Rt,Rt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ht()>rd&&(e.flags|=128,i=!0,mf(o,!1),e.lanes=4194304)}else{if(!i)if(t=Ay(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mf(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!wt)return qn(e),null}else 2*Ht()-o.renderingStartTime>rd&&n!==1073741824&&(e.flags|=128,i=!0,mf(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ht(),e.sibling=null,n=Rt.current,lt(Rt,i?n&1|2:n&1),e):(qn(e),null);case 22:case 23:return eS(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Di&1073741824&&(qn(e),e.subtreeFlags&6&&(e.flags|=8192)):qn(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function iB(t,e){switch(OT(e),e.tag){case 1:return Ti(e.type)&&wy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nd(),gt(Ii),gt(Kn),$T(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zT(e),null;case 13:if(gt(Rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));ed()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(Rt),null;case 4:return nd(),null;case 10:return FT(e.type._context),null;case 22:case 23:return eS(),null;case 24:return null;default:return null}}var Ev=!1,Wn=!1,rB=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Dc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Mt(t,e,i)}else n.current=null}function KI(t,e,n){try{n()}catch(i){Mt(t,e,i)}}var Zk=!1;function sB(t,e){if(xI=gy,t=ZD(),NT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,h=0,m=0,g=t,_=null;t:for(;;){for(var S;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==o||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(S=g.firstChild)!==null;)_=g,g=S;for(;;){if(g===t)break t;if(_===n&&++h===r&&(u=a),_===o&&++m===i&&(c=a),(S=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=S}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(NI={focusedElem:t,selectionRange:n},gy=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var I=P.memoizedProps,k=P.memoizedState,E=e.stateNode,b=E.getSnapshotBeforeUpdate(e.elementType===e.type?I:Sr(e.type,I),k);E.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(M){Mt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return P=Zk,Zk=!1,P}function Qf(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&KI(e,n,o)}r=r.next}while(r!==i)}}function P_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function QI(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QO(t){var e=t.alternate;e!==null&&(t.alternate=null,QO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ns],delete e[Tp],delete e[LI],delete e[j5],delete e[z5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YO(t){return t.tag===5||t.tag===3||t.tag===4}function ex(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function YI(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_y));else if(i!==4&&(t=t.child,t!==null))for(YI(t,e,n),t=t.sibling;t!==null;)YI(t,e,n),t=t.sibling}function JI(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(JI(t,e,n),t=t.sibling;t!==null;)JI(t,e,n),t=t.sibling}var On=null,br=!1;function Do(t,e,n){for(n=n.child;n!==null;)JO(t,e,n),n=n.sibling}function JO(t,e,n){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(E_,n)}catch{}switch(n.tag){case 5:Wn||Dc(n,e);case 6:var i=On,r=br;On=null,Do(t,e,n),On=i,br=r,On!==null&&(br?(t=On,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):On.removeChild(n.stateNode));break;case 18:On!==null&&(br?(t=On,n=n.stateNode,t.nodeType===8?EE(t.parentNode,n):t.nodeType===1&&EE(t,n),yp(t)):EE(On,n.stateNode));break;case 4:i=On,r=br,On=n.stateNode.containerInfo,br=!0,Do(t,e,n),On=i,br=r;break;case 0:case 11:case 14:case 15:if(!Wn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&KI(n,e,a),r=r.next}while(r!==i)}Do(t,e,n);break;case 1:if(!Wn&&(Dc(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){Mt(n,e,u)}Do(t,e,n);break;case 21:Do(t,e,n);break;case 22:n.mode&1?(Wn=(i=Wn)||n.memoizedState!==null,Do(t,e,n),Wn=i):Do(t,e,n);break;default:Do(t,e,n)}}function tx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rB),e.forEach(function(i){var r=pB.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Tr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:On=u.stateNode,br=!1;break e;case 3:On=u.stateNode.containerInfo,br=!0;break e;case 4:On=u.stateNode.containerInfo,br=!0;break e}u=u.return}if(On===null)throw Error(Z(160));JO(o,a,r),On=null,br=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(h){Mt(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XO(e,t),e=e.sibling}function XO(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tr(e,t),es(t),i&4){try{Qf(3,t,t.return),P_(3,t)}catch(I){Mt(t,t.return,I)}try{Qf(5,t,t.return)}catch(I){Mt(t,t.return,I)}}break;case 1:Tr(e,t),es(t),i&512&&n!==null&&Dc(n,n.return);break;case 5:if(Tr(e,t),es(t),i&512&&n!==null&&Dc(n,n.return),t.flags&32){var r=t.stateNode;try{pp(r,"")}catch(I){Mt(t,t.return,I)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&wD(r,o),EI(u,a);var h=EI(u,o);for(a=0;a<c.length;a+=2){var m=c[a],g=c[a+1];m==="style"?bD(r,g):m==="dangerouslySetInnerHTML"?TD(r,g):m==="children"?pp(r,g):_T(r,m,g,h)}switch(u){case"input":gI(r,o);break;case"textarea":ED(r,o);break;case"select":var _=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Vc(r,!!o.multiple,S,!1):_!==!!o.multiple&&(o.defaultValue!=null?Vc(r,!!o.multiple,o.defaultValue,!0):Vc(r,!!o.multiple,o.multiple?[]:"",!1))}r[Tp]=o}catch(I){Mt(t,t.return,I)}}break;case 6:if(Tr(e,t),es(t),i&4){if(t.stateNode===null)throw Error(Z(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(I){Mt(t,t.return,I)}}break;case 3:if(Tr(e,t),es(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{yp(e.containerInfo)}catch(I){Mt(t,t.return,I)}break;case 4:Tr(e,t),es(t);break;case 13:Tr(e,t),es(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(XT=Ht())),i&4&&tx(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Wn=(h=Wn)||m,Tr(e,t),Wn=h):Tr(e,t),es(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(ue=t,m=t.child;m!==null;){for(g=ue=m;ue!==null;){switch(_=ue,S=_.child,_.tag){case 0:case 11:case 14:case 15:Qf(4,_,_.return);break;case 1:Dc(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){i=_,n=_.return;try{e=i,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(I){Mt(i,n,I)}}break;case 5:Dc(_,_.return);break;case 22:if(_.memoizedState!==null){ix(g);continue}}S!==null?(S.return=_,ue=S):ix(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{r=g.stateNode,h?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=SD("display",a))}catch(I){Mt(t,t.return,I)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(I){Mt(t,t.return,I)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Tr(e,t),es(t),i&4&&tx(t);break;case 21:break;default:Tr(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YO(n)){var i=n;break e}n=n.return}throw Error(Z(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(pp(r,""),i.flags&=-33);var o=ex(t);JI(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=ex(t);YI(t,u,a);break;default:throw Error(Z(161))}}catch(c){Mt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oB(t,e,n){ue=t,ZO(t)}function ZO(t,e,n){for(var i=(t.mode&1)!==0;ue!==null;){var r=ue,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Ev;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Wn;u=Ev;var h=Wn;if(Ev=a,(Wn=c)&&!h)for(ue=r;ue!==null;)a=ue,c=a.child,a.tag===22&&a.memoizedState!==null?rx(r):c!==null?(c.return=a,ue=c):rx(r);for(;o!==null;)ue=o,ZO(o),o=o.sibling;ue=r,Ev=u,Wn=h}nx(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ue=o):nx(t)}}function nx(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wn||P_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Wn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Sr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Bk(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bk(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&yp(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Wn||e.flags&512&&QI(e)}catch(_){Mt(e,e.return,_)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function ix(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function rx(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{P_(4,e)}catch(c){Mt(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){Mt(e,r,c)}}var o=e.return;try{QI(e)}catch(c){Mt(e,o,c)}break;case 5:var a=e.return;try{QI(e)}catch(c){Mt(e,a,c)}}}catch(c){Mt(e,e.return,c)}if(e===t){ue=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ue=u;break}ue=e.return}}var aB=Math.ceil,ky=so.ReactCurrentDispatcher,YT=so.ReactCurrentOwner,tr=so.ReactCurrentBatchConfig,Ge=0,Sn=null,sn=null,Fn=0,Di=0,Oc=Ta(0),dn=0,Pp=null,Rl=0,k_=0,JT=0,Yf=null,gi=null,XT=0,rd=1/0,Fs=null,xy=!1,XI=null,na=null,Iv=!1,Wo=null,Ny=0,Jf=0,ZI=null,qv=-1,Gv=0;function ni(){return Ge&6?Ht():qv!==-1?qv:qv=Ht()}function ia(t){return t.mode&1?Ge&2&&Fn!==0?Fn&-Fn:q5.transition!==null?(Gv===0&&(Gv=VD()),Gv):(t=tt,t!==0||(t=window.event,t=t===void 0?16:qD(t.type)),t):1}function xr(t,e,n,i){if(50<Jf)throw Jf=0,ZI=null,Error(Z(185));um(t,n,i),(!(Ge&2)||t!==Sn)&&(t===Sn&&(!(Ge&2)&&(k_|=n),dn===4&&zo(t,Fn)),Si(t,i),n===1&&Ge===0&&!(e.mode&1)&&(rd=Ht()+500,C_&&Sa()))}function Si(t,e){var n=t.callbackNode;q9(t,e);var i=my(t,t===Sn?Fn:0);if(i===0)n!==null&&fk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&fk(n),e===1)t.tag===0?$5(sx.bind(null,t)):uO(sx.bind(null,t)),U5(function(){!(Ge&6)&&Sa()}),n=null;else{switch(FD(i)){case 1:n=ST;break;case 4:n=LD;break;case 16:n=py;break;case 536870912:n=MD;break;default:n=py}n=aL(n,eL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eL(t,e){if(qv=-1,Gv=0,Ge&6)throw Error(Z(327));var n=t.callbackNode;if(zc()&&t.callbackNode!==n)return null;var i=my(t,t===Sn?Fn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Dy(t,i);else{e=i;var r=Ge;Ge|=2;var o=nL();(Sn!==t||Fn!==e)&&(Fs=null,rd=Ht()+500,_l(t,e));do try{cB();break}catch(u){tL(t,u)}while(!0);VT(),ky.current=o,Ge=r,sn!==null?e=0:(Sn=null,Fn=0,e=dn)}if(e!==0){if(e===2&&(r=CI(t),r!==0&&(i=r,e=e1(t,r))),e===1)throw n=Pp,_l(t,0),zo(t,i),Si(t,Ht()),n;if(e===6)zo(t,i);else{if(r=t.current.alternate,!(i&30)&&!lB(r)&&(e=Dy(t,i),e===2&&(o=CI(t),o!==0&&(i=o,e=e1(t,o))),e===1))throw n=Pp,_l(t,0),zo(t,i),Si(t,Ht()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Z(345));case 2:nl(t,gi,Fs);break;case 3:if(zo(t,i),(i&130023424)===i&&(e=XT+500-Ht(),10<e)){if(my(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ni(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=OI(nl.bind(null,t,gi,Fs),e);break}nl(t,gi,Fs);break;case 4:if(zo(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-kr(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=Ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*aB(i/1960))-i,10<i){t.timeoutHandle=OI(nl.bind(null,t,gi,Fs),i);break}nl(t,gi,Fs);break;case 5:nl(t,gi,Fs);break;default:throw Error(Z(329))}}}return Si(t,Ht()),t.callbackNode===n?eL.bind(null,t):null}function e1(t,e){var n=Yf;return t.current.memoizedState.isDehydrated&&(_l(t,e).flags|=256),t=Dy(t,e),t!==2&&(e=gi,gi=n,e!==null&&t1(e)),t}function t1(t){gi===null?gi=t:gi.push.apply(gi,t)}function lB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Or(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zo(t,e){for(e&=~JT,e&=~k_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kr(e),i=1<<n;t[n]=-1,e&=~i}}function sx(t){if(Ge&6)throw Error(Z(327));zc();var e=my(t,0);if(!(e&1))return Si(t,Ht()),null;var n=Dy(t,e);if(t.tag!==0&&n===2){var i=CI(t);i!==0&&(e=i,n=e1(t,i))}if(n===1)throw n=Pp,_l(t,0),zo(t,e),Si(t,Ht()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,nl(t,gi,Fs),Si(t,Ht()),null}function ZT(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(rd=Ht()+500,C_&&Sa())}}function Pl(t){Wo!==null&&Wo.tag===0&&!(Ge&6)&&zc();var e=Ge;Ge|=1;var n=tr.transition,i=tt;try{if(tr.transition=null,tt=1,t)return t()}finally{tt=i,tr.transition=n,Ge=e,!(Ge&6)&&Sa()}}function eS(){Di=Oc.current,gt(Oc)}function _l(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,F5(n)),sn!==null)for(n=sn.return;n!==null;){var i=n;switch(OT(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wy();break;case 3:nd(),gt(Ii),gt(Kn),$T();break;case 5:zT(i);break;case 4:nd();break;case 13:gt(Rt);break;case 19:gt(Rt);break;case 10:FT(i.type._context);break;case 22:case 23:eS()}n=n.return}if(Sn=t,sn=t=ra(t.current,null),Fn=Di=e,dn=0,Pp=null,JT=k_=Rl=0,gi=Yf=null,hl!==null){for(e=0;e<hl.length;e++)if(n=hl[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}hl=null}return t}function tL(t,e){do{var n=sn;try{if(VT(),jv.current=Py,Ry){for(var i=Pt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ry=!1}if(Al=0,En=un=Pt=null,Kf=!1,Cp=0,YT.current=null,n===null||n.return===null){dn=1,Pp=e,sn=null;break}e:{var o=t,a=n.return,u=n,c=e;if(e=Fn,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=Wk(a);if(S!==null){S.flags&=-257,Hk(S,a,u,o,e),S.mode&1&&Gk(o,h,e),e=S,c=h;var P=e.updateQueue;if(P===null){var I=new Set;I.add(c),e.updateQueue=I}else P.add(c);break e}else{if(!(e&1)){Gk(o,h,e),tS();break e}c=Error(Z(426))}}else if(wt&&u.mode&1){var k=Wk(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Hk(k,a,u,o,e),LT(id(c,u));break e}}o=c=id(c,u),dn!==4&&(dn=2),Yf===null?Yf=[o]:Yf.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var E=FO(o,c,e);Uk(o,E);break e;case 1:u=c;var b=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(na===null||!na.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var M=UO(o,u,e);Uk(o,M);break e}}o=o.return}while(o!==null)}rL(n)}catch(B){e=B,sn===n&&n!==null&&(sn=n=n.return);continue}break}while(!0)}function nL(){var t=ky.current;return ky.current=Py,t===null?Py:t}function tS(){(dn===0||dn===3||dn===2)&&(dn=4),Sn===null||!(Rl&268435455)&&!(k_&268435455)||zo(Sn,Fn)}function Dy(t,e){var n=Ge;Ge|=2;var i=nL();(Sn!==t||Fn!==e)&&(Fs=null,_l(t,e));do try{uB();break}catch(r){tL(t,r)}while(!0);if(VT(),Ge=n,ky.current=i,sn!==null)throw Error(Z(261));return Sn=null,Fn=0,dn}function uB(){for(;sn!==null;)iL(sn)}function cB(){for(;sn!==null&&!L9();)iL(sn)}function iL(t){var e=oL(t.alternate,t,Di);t.memoizedProps=t.pendingProps,e===null?rL(t):sn=e,YT.current=null}function rL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iB(n,e),n!==null){n.flags&=32767,sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dn=6,sn=null;return}}else if(n=nB(n,e,Di),n!==null){sn=n;return}if(e=e.sibling,e!==null){sn=e;return}sn=e=t}while(e!==null);dn===0&&(dn=5)}function nl(t,e,n){var i=tt,r=tr.transition;try{tr.transition=null,tt=1,dB(t,e,n,i)}finally{tr.transition=r,tt=i}return null}function dB(t,e,n,i){do zc();while(Wo!==null);if(Ge&6)throw Error(Z(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(G9(t,o),t===Sn&&(sn=Sn=null,Fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Iv||(Iv=!0,aL(py,function(){return zc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=tr.transition,tr.transition=null;var a=tt;tt=1;var u=Ge;Ge|=4,YT.current=null,sB(t,n),XO(n,t),x5(NI),gy=!!xI,NI=xI=null,t.current=n,oB(n),M9(),Ge=u,tt=a,tr.transition=o}else t.current=n;if(Iv&&(Iv=!1,Wo=t,Ny=r),o=t.pendingLanes,o===0&&(na=null),U9(n.stateNode),Si(t,Ht()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(xy)throw xy=!1,t=XI,XI=null,t;return Ny&1&&t.tag!==0&&zc(),o=t.pendingLanes,o&1?t===ZI?Jf++:(Jf=0,ZI=t):Jf=0,Sa(),null}function zc(){if(Wo!==null){var t=FD(Ny),e=tr.transition,n=tt;try{if(tr.transition=null,tt=16>t?16:t,Wo===null)var i=!1;else{if(t=Wo,Wo=null,Ny=0,Ge&6)throw Error(Z(331));var r=Ge;for(Ge|=4,ue=t.current;ue!==null;){var o=ue,a=o.child;if(ue.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(ue=h;ue!==null;){var m=ue;switch(m.tag){case 0:case 11:case 15:Qf(8,m,o)}var g=m.child;if(g!==null)g.return=m,ue=g;else for(;ue!==null;){m=ue;var _=m.sibling,S=m.return;if(QO(m),m===h){ue=null;break}if(_!==null){_.return=S,ue=_;break}ue=S}}}var P=o.alternate;if(P!==null){var I=P.child;if(I!==null){P.child=null;do{var k=I.sibling;I.sibling=null,I=k}while(I!==null)}}ue=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ue=a;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qf(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,ue=E;break e}ue=o.return}}var b=t.current;for(ue=b;ue!==null;){a=ue;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,ue=A;else e:for(a=b;ue!==null;){if(u=ue,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:P_(9,u)}}catch(B){Mt(u,u.return,B)}if(u===a){ue=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,ue=M;break e}ue=u.return}}if(Ge=r,Sa(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(E_,t)}catch{}i=!0}return i}finally{tt=n,tr.transition=e}}return!1}function ox(t,e,n){e=id(n,e),e=FO(t,e,1),t=ta(t,e,1),e=ni(),t!==null&&(um(t,1,e),Si(t,e))}function Mt(t,e,n){if(t.tag===3)ox(t,t,n);else for(;e!==null;){if(e.tag===3){ox(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(na===null||!na.has(i))){t=id(n,t),t=UO(e,t,1),e=ta(e,t,1),t=ni(),e!==null&&(um(e,1,t),Si(e,t));break}}e=e.return}}function hB(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ni(),t.pingedLanes|=t.suspendedLanes&n,Sn===t&&(Fn&n)===n&&(dn===4||dn===3&&(Fn&130023424)===Fn&&500>Ht()-XT?_l(t,0):JT|=n),Si(t,e)}function sL(t,e){e===0&&(t.mode&1?(e=hv,hv<<=1,!(hv&130023424)&&(hv=4194304)):e=1);var n=ni();t=Js(t,e),t!==null&&(um(t,e,n),Si(t,n))}function fB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sL(t,n)}function pB(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Z(314))}i!==null&&i.delete(e),sL(t,n)}var oL;oL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ii.current)vi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vi=!1,tB(t,e,n);vi=!!(t.flags&131072)}else vi=!1,wt&&e.flags&1048576&&cO(e,Ty,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;$v(t,e),t=e.pendingProps;var r=Zc(e,Kn.current);jc(e,n),r=GT(null,e,i,t,r,n);var o=WT();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ti(i)?(o=!0,Ey(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,BT(e),r.updater=R_,e.stateNode=r,r._reactInternals=e,jI(e,i,t,n),e=qI(null,e,i,!0,o,n)):(e.tag=0,wt&&o&&DT(e),Zn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch($v(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=gB(i),t=Sr(i,t),r){case 0:e=$I(null,e,i,t,n);break e;case 1:e=Yk(null,e,i,t,n);break e;case 11:e=Kk(null,e,i,t,n);break e;case 14:e=Qk(null,e,i,Sr(i.type,t),n);break e}throw Error(Z(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Sr(i,r),$I(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Sr(i,r),Yk(t,e,i,r,n);case 3:e:{if($O(e),t===null)throw Error(Z(387));i=e.pendingProps,o=e.memoizedState,r=o.element,gO(t,e),Cy(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=id(Error(Z(423)),e),e=Jk(t,e,i,n,r);break e}else if(i!==r){r=id(Error(Z(424)),e),e=Jk(t,e,i,n,r);break e}else for(Vi=ea(e.stateNode.containerInfo.firstChild),Ui=e,wt=!0,Cr=null,n=pO(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ed(),i===r){e=Xs(t,e,n);break e}Zn(t,e,i,n)}e=e.child}return e;case 5:return vO(e),t===null&&FI(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,DI(i,r)?a=null:o!==null&&DI(i,o)&&(e.flags|=32),zO(t,e),Zn(t,e,a,n),e.child;case 6:return t===null&&FI(e),null;case 13:return qO(t,e,n);case 4:return jT(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=td(e,null,i,n):Zn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Sr(i,r),Kk(t,e,i,r,n);case 7:return Zn(t,e,e.pendingProps,n),e.child;case 8:return Zn(t,e,e.pendingProps.children,n),e.child;case 12:return Zn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,lt(Sy,i._currentValue),i._currentValue=a,o!==null)if(Or(o.value,a)){if(o.children===r.children&&!Ii.current){e=Xs(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=Ws(-1,n&-n),c.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),UI(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Z(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),UI(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Zn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,jc(e,n),r=rr(r),i=i(r),e.flags|=1,Zn(t,e,i,n),e.child;case 14:return i=e.type,r=Sr(i,e.pendingProps),r=Sr(i.type,r),Qk(t,e,i,r,n);case 15:return BO(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Sr(i,r),$v(t,e),e.tag=1,Ti(i)?(t=!0,Ey(e)):t=!1,jc(e,n),VO(e,i,r),jI(e,i,r,n),qI(null,e,i,!0,t,n);case 19:return GO(t,e,n);case 22:return jO(t,e,n)}throw Error(Z(156,e.tag))};function aL(t,e){return OD(t,e)}function mB(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(t,e,n,i){return new mB(t,e,n,i)}function nS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gB(t){if(typeof t=="function")return nS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ET)return 11;if(t===IT)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=Zi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wv(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")nS(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Sc:return wl(n.children,r,o,e);case wT:a=8,r|=8;break;case dI:return t=Zi(12,n,e,r|2),t.elementType=dI,t.lanes=o,t;case hI:return t=Zi(13,n,e,r),t.elementType=hI,t.lanes=o,t;case fI:return t=Zi(19,n,e,r),t.elementType=fI,t.lanes=o,t;case vD:return x_(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mD:a=10;break e;case gD:a=9;break e;case ET:a=11;break e;case IT:a=14;break e;case Uo:a=16,i=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Zi(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function wl(t,e,n,i){return t=Zi(7,t,i,e),t.lanes=n,t}function x_(t,e,n,i){return t=Zi(22,t,i,e),t.elementType=vD,t.lanes=n,t.stateNode={isHidden:!1},t}function PE(t,e,n){return t=Zi(6,t,null,e),t.lanes=n,t}function kE(t,e,n){return e=Zi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vB(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cE(0),this.expirationTimes=cE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cE(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function iS(t,e,n,i,r,o,a,u,c){return t=new vB(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Zi(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},BT(o),t}function yB(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function lL(t){if(!t)return ua;t=t._reactInternals;e:{if(Yl(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ti(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Ti(n))return lO(t,n,e)}return e}function uL(t,e,n,i,r,o,a,u,c){return t=iS(n,i,!0,t,r,o,a,u,c),t.context=lL(null),n=t.current,i=ni(),r=ia(n),o=Ws(i,r),o.callback=e??null,ta(n,o,r),t.current.lanes=r,um(t,r,i),Si(t,i),t}function N_(t,e,n,i){var r=e.current,o=ni(),a=ia(r);return n=lL(n),e.context===null?e.context=n:e.pendingContext=n,e=Ws(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ta(r,e,a),t!==null&&(xr(t,r,a,o),Bv(t,r,a)),a}function Oy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ax(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rS(t,e){ax(t,e),(t=t.alternate)&&ax(t,e)}function _B(){return null}var cL=typeof reportError=="function"?reportError:function(t){console.error(t)};function sS(t){this._internalRoot=t}D_.prototype.render=sS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));N_(t,e,null,null)};D_.prototype.unmount=sS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pl(function(){N_(null,t,null,null)}),e[Ys]=null}};function D_(t){this._internalRoot=t}D_.prototype.unstable_scheduleHydration=function(t){if(t){var e=jD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jo.length&&e!==0&&e<jo[n].priority;n++);jo.splice(n,0,t),n===0&&$D(t)}};function oS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function O_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lx(){}function wB(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var h=Oy(a);o.call(h)}}var a=uL(e,i,t,0,null,!1,!1,"",lx);return t._reactRootContainer=a,t[Ys]=a.current,Ep(t.nodeType===8?t.parentNode:t),Pl(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var h=Oy(c);u.call(h)}}var c=iS(t,0,!1,null,null,!1,!1,"",lx);return t._reactRootContainer=c,t[Ys]=c.current,Ep(t.nodeType===8?t.parentNode:t),Pl(function(){N_(e,c,n,i)}),c}function L_(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var c=Oy(a);u.call(c)}}N_(e,a,t,r)}else a=wB(n,e,t,r,i);return Oy(a)}UD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Df(e.pendingLanes);n!==0&&(bT(e,n|1),Si(e,Ht()),!(Ge&6)&&(rd=Ht()+500,Sa()))}break;case 13:Pl(function(){var i=Js(t,1);if(i!==null){var r=ni();xr(i,t,1,r)}}),rS(t,1)}};CT=function(t){if(t.tag===13){var e=Js(t,134217728);if(e!==null){var n=ni();xr(e,t,134217728,n)}rS(t,134217728)}};BD=function(t){if(t.tag===13){var e=ia(t),n=Js(t,e);if(n!==null){var i=ni();xr(n,t,e,i)}rS(t,e)}};jD=function(){return tt};zD=function(t,e){var n=tt;try{return tt=t,e()}finally{tt=n}};TI=function(t,e,n){switch(e){case"input":if(gI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=b_(i);if(!r)throw Error(Z(90));_D(i),gI(i,r)}}}break;case"textarea":ED(t,n);break;case"select":e=n.value,e!=null&&Vc(t,!!n.multiple,e,!1)}};RD=ZT;PD=Pl;var EB={usingClientEntryPoint:!1,Events:[dm,Rc,b_,CD,AD,ZT]},gf={findFiberByHostInstance:dl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IB={bundleType:gf.bundleType,version:gf.version,rendererPackageName:gf.rendererPackageName,rendererConfig:gf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:so.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ND(t),t===null?null:t.stateNode},findFiberByHostInstance:gf.findFiberByHostInstance||_B,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tv.isDisabled&&Tv.supportsFiber)try{E_=Tv.inject(IB),hs=Tv}catch{}}$i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EB;$i.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oS(e))throw Error(Z(200));return yB(t,e,null,n)};$i.createRoot=function(t,e){if(!oS(t))throw Error(Z(299));var n=!1,i="",r=cL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=iS(t,1,!1,null,null,n,!1,i,r),t[Ys]=e.current,Ep(t.nodeType===8?t.parentNode:t),new sS(e)};$i.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=ND(e),t=t===null?null:t.stateNode,t};$i.flushSync=function(t){return Pl(t)};$i.hydrate=function(t,e,n){if(!O_(e))throw Error(Z(200));return L_(null,t,e,!0,n)};$i.hydrateRoot=function(t,e,n){if(!oS(t))throw Error(Z(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=cL;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=uL(e,null,t,1,n??null,r,!1,o,a),t[Ys]=e.current,Ep(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new D_(e)};$i.render=function(t,e,n){if(!O_(e))throw Error(Z(200));return L_(null,t,e,!1,n)};$i.unmountComponentAtNode=function(t){if(!O_(t))throw Error(Z(40));return t._reactRootContainer?(Pl(function(){L_(null,null,t,!1,function(){t._reactRootContainer=null,t[Ys]=null})}),!0):!1};$i.unstable_batchedUpdates=ZT;$i.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!O_(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return L_(t,e,n,!1,i)};$i.version="18.3.1-next-f1338f8080-20240426";function dL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dL)}catch(t){console.error(t)}}dL(),dD.exports=$i;var TB=dD.exports,ux=TB;uI.createRoot=ux.createRoot,uI.hydrateRoot=ux.hydrateRoot;var cx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te=function(t,e){if(!t)throw Pd(e)},Pd=function(t){return new Error("Firebase Database ("+hL.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},SB=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},aS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,h=c?t[r+2]:0,m=o>>2,g=(o&3)<<4|u>>4;let _=(u&15)<<2|h>>6,S=h&63;c||(S=64,a||(_=64)),i.push(n[m],n[g],n[_],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||h==null||g==null)throw new bB;const _=o<<2|u>>4;if(i.push(_),h!==64){const S=u<<4&240|h>>2;if(i.push(S),g!==64){const P=h<<6&192|g;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pL=function(t){const e=fL(t);return aS.encodeByteArray(e,!0)},Ly=function(t){return pL(t).replace(/\./g,"")},My=function(t){try{return aS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t){return kp(void 0,t)}function kp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!AB(n)||(t[n]=kp(t[n],e[n]));return t}function AB(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=()=>RB().__FIREBASE_DEFAULTS__,kB=()=>{if(typeof process>"u"||typeof cx>"u")return;const t=cx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&My(t[1]);return e&&JSON.parse(e)},M_=()=>{try{return PB()||kB()||xB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NB=t=>{var e,n;return(n=(e=M_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},DB=t=>{const e=NB(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},mL=()=>{var t;return(t=M_())===null||t===void 0?void 0:t.config},OB=t=>{var e;return(e=M_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ly(JSON.stringify(n)),Ly(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function uS(){var t;const e=(t=M_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vL(){return typeof self=="object"&&self.self===self}function yL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _L(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wL(){return hL.NODE_ADMIN===!0}function EL(){return!uS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xp(){try{return typeof indexedDB=="object"}catch{return!1}}function LB(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB="FirebaseError";class ii extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=MB,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jl.prototype.create)}}class Jl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?VB(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new ii(r,u,i)}}function VB(t,e){return t.replace(FB,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const FB=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){return JSON.parse(t)}function Tn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=Np(My(o[0])||""),n=Np(My(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},UB=function(t){const e=IL(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},BB=function(t){const e=IL(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sd(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function n1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vy(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Dp(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(dx(o)&&dx(a)){if(!Dp(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function dx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Lc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Lf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)i[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)i[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const _=i[g-3]^i[g-8]^i[g-14]^i[g-16];i[g]=(_<<1|_>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],a=this.chain_[2],u=this.chain_[3],c=this.chain_[4],h,m;for(let g=0;g<80;g++){g<40?g<20?(h=u^o&(a^u),m=1518500249):(h=o^a^u,m=1859775393):g<60?(h=o&a|u&(o|a),m=2400959708):(h=o^a^u,m=3395469782);const _=(r<<5|r>>>27)+h+c+m+i[g]&4294967295;c=u,u=a,a=(o<<30|o>>>2)&4294967295,o=r,r=_}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let a=this.inbuf_;for(;r<n;){if(a===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(o),a=0;break}}else for(;r<n;)if(o[a]=e[r],++a,++r,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function TL(t,e){const n=new zB(t,e);return n.subscribe.bind(n)}class zB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");$B(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=xE),r.error===void 0&&(r.error=xE),r.complete===void 0&&(r.complete=xE);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $B(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xE(){}function cS(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,te(i<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(i)-56320;r=65536+(o<<10)+a}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},U_=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new V_;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HB(e))try{this.getOrInitializeService({instanceIdentifier:il})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=il){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=il){return this.instances.has(e)}getOptions(e=il){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WB(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=il){return this.component?this.component.multipleInstances?e:il:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WB(t){return t===il?void 0:t}function HB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=[];var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const bL={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},KB=Ne.INFO,QB={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},YB=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=QB[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=KB,this._logHandler=YB,this._userLogHandler=null,dS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}function JB(t){dS.forEach(e=>{e.setLogLevel(t)})}function XB(t,e){for(const n of dS){let i=null;e&&e.level&&(i=bL[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,o,...a)=>{const u=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");o>=(i??r.logLevel)&&t({level:Ne[o].toLowerCase(),message:u,args:a,type:r.name})}}}const ZB=(t,e)=>e.some(n=>t instanceof n);let hx,fx;function ej(){return hx||(hx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tj(){return fx||(fx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CL=new WeakMap,i1=new WeakMap,AL=new WeakMap,NE=new WeakMap,hS=new WeakMap;function nj(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(sa(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&CL.set(n,t)}).catch(()=>{}),hS.set(e,t),e}function ij(t){if(i1.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});i1.set(t,e)}let r1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return i1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rj(t){r1=t(r1)}function sj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(DE(this),e,...n);return AL.set(i,e.sort?e.sort():[e]),sa(i)}:tj().includes(t)?function(...e){return t.apply(DE(this),e),sa(CL.get(this))}:function(...e){return sa(t.apply(DE(this),e))}}function oj(t){return typeof t=="function"?sj(t):(t instanceof IDBTransaction&&ij(t),ZB(t,ej())?new Proxy(t,r1):t)}function sa(t){if(t instanceof IDBRequest)return nj(t);if(NE.has(t))return NE.get(t);const e=oj(t);return e!==t&&(NE.set(t,e),hS.set(e,t)),e}const DE=t=>hS.get(t);function aj(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=sa(a);return i&&a.addEventListener("upgradeneeded",c=>{i(sa(a.result),c.oldVersion,c.newVersion,sa(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const lj=["get","getKey","getAll","getAllKeys","count"],uj=["put","add","delete","clear"],OE=new Map;function px(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(OE.get(e))return OE.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=uj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||lj.includes(n)))return;const o=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let h=c.store;return i&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),r&&c.done]))[0]};return OE.set(e,o),o}rj(t=>({...t,get:(e,n,i)=>px(e,n)||t.get(e,n,i),has:(e,n)=>!!px(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function dj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fy="@firebase/app",s1="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new fm("@firebase/app"),hj="@firebase/app-compat",fj="@firebase/analytics-compat",pj="@firebase/analytics",mj="@firebase/app-check-compat",gj="@firebase/app-check",vj="@firebase/auth",yj="@firebase/auth-compat",_j="@firebase/database",wj="@firebase/database-compat",Ej="@firebase/functions",Ij="@firebase/functions-compat",Tj="@firebase/installations",Sj="@firebase/installations-compat",bj="@firebase/messaging",Cj="@firebase/messaging-compat",Aj="@firebase/performance",Rj="@firebase/performance-compat",Pj="@firebase/remote-config",kj="@firebase/remote-config-compat",xj="@firebase/storage",Nj="@firebase/storage-compat",Dj="@firebase/firestore",Oj="@firebase/vertexai-preview",Lj="@firebase/firestore-compat",Mj="firebase",Vj="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]",Fj={[Fy]:"fire-core",[hj]:"fire-core-compat",[pj]:"fire-analytics",[fj]:"fire-analytics-compat",[gj]:"fire-app-check",[mj]:"fire-app-check-compat",[vj]:"fire-auth",[yj]:"fire-auth-compat",[_j]:"fire-rtdb",[wj]:"fire-rtdb-compat",[Ej]:"fire-fn",[Ij]:"fire-fn-compat",[Tj]:"fire-iid",[Sj]:"fire-iid-compat",[bj]:"fire-fcm",[Cj]:"fire-fcm-compat",[Aj]:"fire-perf",[Rj]:"fire-perf-compat",[Pj]:"fire-rc",[kj]:"fire-rc-compat",[xj]:"fire-gcs",[Nj]:"fire-gcs-compat",[Dj]:"fire-fst",[Lj]:"fire-fst-compat",[Oj]:"fire-vertex","fire-js":"fire-js",[Mj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new Map,od=new Map,ad=new Map;function Op(t,e){try{t.container.addComponent(e)}catch(n){kl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function RL(t,e){t.container.addOrOverwriteComponent(e)}function Zs(t){const e=t.name;if(ad.has(e))return kl.debug(`There were multiple attempts to register component ${e}.`),!1;ad.set(e,t);for(const n of da.values())Op(n,t);for(const n of od.values())Op(n,t);return!0}function fS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Uj(t,e,n=ca){fS(t,e).clearInstance(n)}function PL(t){return t.options!==void 0}function Ft(t){return t.settings!==void 0}function Bj(){ad.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new Jl("app","Firebase",jj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kL=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj extends kL{constructor(e,n,i,r){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,a={name:i,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,a,r);else{const u=e;super(u.options,a,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},n),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Bi(Fy,s1,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){mS(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=Vj;function pS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ca,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw nr.create("bad-app-name",{appName:String(r)});if(n||(n=mL()),!n)throw nr.create("no-options");const o=da.get(r);if(o){if(Dp(n,o.options)&&Dp(i,o.config))return o;throw nr.create("duplicate-app",{appName:r})}const a=new SL(r);for(const c of ad.values())a.addComponent(c);const u=new kL(n,i,a);return da.set(r,u),u}function $j(t,e){if(vL())throw nr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;PL(t)?n=t.options:n=t;const i=Object.assign(Object.assign({},e),n);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const r=h=>[...h].reduce((m,g)=>Math.imul(31,m)+g.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw nr.create("finalization-registry-not-supported",{});const o=""+r(JSON.stringify(i)),a=od.get(o);if(a)return a.incRefCount(e.releaseOnDeref),a;const u=new SL(o);for(const h of ad.values())u.addComponent(h);const c=new zj(n,e,o,u);return od.set(o,c),c}function xL(t=ca){const e=da.get(t);if(!e&&t===ca&&mL())return pS();if(!e)throw nr.create("no-app",{appName:t});return e}function qj(){return Array.from(da.values())}async function mS(t){let e=!1;const n=t.name;da.has(n)?(e=!0,da.delete(n)):od.has(n)&&t.decRefCount()<=0&&(od.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function Bi(t,e,n){var i;let r=(i=Fj[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kl.warn(u.join(" "));return}Zs(new Mr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function NL(t,e){if(t!==null&&typeof t!="function")throw nr.create("invalid-log-argument");XB(t,e)}function DL(t){JB(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="firebase-heartbeat-database",Wj=1,Lp="firebase-heartbeat-store";let LE=null;function OL(){return LE||(LE=aj(Gj,Wj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lp)}catch(n){console.warn(n)}}}}).catch(t=>{throw nr.create("idb-open",{originalErrorMessage:t.message})})),LE}async function Hj(t){try{const n=(await OL()).transaction(Lp),i=await n.objectStore(Lp).get(LL(t));return await n.done,i}catch(e){if(e instanceof ii)kl.warn(e.message);else{const n=nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kl.warn(n.message)}}}async function mx(t,e){try{const i=(await OL()).transaction(Lp,"readwrite");await i.objectStore(Lp).put(e,LL(t)),await i.done}catch(n){if(n instanceof ii)kl.warn(n.message);else{const i=nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kl.warn(i.message)}}}function LL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=1024,Qj=30*24*60*60*1e3;class Yj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xj(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gx();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=Qj}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gx(),{heartbeatsToSend:i,unsentEntries:r}=Jj(this._heartbeatsCache.heartbeats),o=Ly(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function gx(){return new Date().toISOString().substring(0,10)}function Jj(t,e=Kj){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),vx(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),vx(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Xj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xp()?LB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Hj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return mx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return mx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vx(t){return Ly(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){Zs(new Mr("platform-logger",e=>new cj(e),"PRIVATE")),Zs(new Mr("heartbeat",e=>new Yj(e),"PRIVATE")),Bi(Fy,s1,t),Bi(Fy,s1,"esm2017"),Bi("fire-js","")}Zj("");const ez=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ii,SDK_VERSION:oo,_DEFAULT_ENTRY_NAME:ca,_addComponent:Op,_addOrOverwriteComponent:RL,_apps:da,_clearComponents:Bj,_components:ad,_getProvider:fS,_isFirebaseApp:PL,_isFirebaseServerApp:Ft,_registerComponent:Zs,_removeServiceInstance:Uj,_serverApps:od,deleteApp:mS,getApp:xL,getApps:qj,initializeApp:pS,initializeServerApp:$j,onLog:NL,registerVersion:Bi,setLogLevel:DL},Symbol.toStringTag,{value:"Module"}));var yx={};const _x="@firebase/database",wx="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ML="";function tz(t){ML=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Tn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Np(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nz(e)}}catch{}return new iz},pl=VL("localStorage"),rz=VL("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new fm("@firebase/database"),sz=function(){let t=1;return function(){return t++}}(),FL=function(t){const e=qB(t),n=new jB;n.update(e);const i=n.digest();return aS.encodeByteArray(i)},pm=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=pm.apply(null,i):typeof i=="object"?e+=Tn(i):e+=i,e+=" "}return e};let Xf=null,Ex=!0;const oz=function(t,e){te(!e,"Can't turn on custom loggers persistently."),$c.logLevel=Ne.VERBOSE,Xf=$c.log.bind($c)},Hn=function(...t){if(Ex===!0&&(Ex=!1,Xf===null&&rz.get("logging_enabled")===!0&&oz()),Xf){const e=pm.apply(null,t);Xf(e)}},mm=function(t){return function(...e){Hn(t,...e)}},o1=function(...t){const e="FIREBASE INTERNAL ERROR: "+pm(...t);$c.error(e)},eo=function(...t){const e=`FIREBASE FATAL ERROR: ${pm(...t)}`;throw $c.error(e),new Error(e)},bi=function(...t){const e="FIREBASE WARNING: "+pm(...t);$c.warn(e)},az=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},UL=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},lz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ld="[MIN_NAME]",xl="[MAX_NAME]",kd=function(t,e){if(t===e)return 0;if(t===ld||e===xl)return-1;if(e===ld||t===xl)return 1;{const n=Ix(t),i=Ix(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},uz=function(t,e){return t===e?0:t<e?-1:1},vf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Tn(e))},gS=function(t){if(typeof t!="object"||t===null)return Tn(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Tn(e[i]),n+=":",n+=gS(t[e[i]]);return n+="}",n},BL=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Ai(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const jL=function(t){te(!UL(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,a,u,c;t===0?(o=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=u+i,a=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(o=0,a=Math.round(t/Math.pow(2,1-i-n))));const h=[];for(c=n;c;c-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)h.push(o%2?1:0),o=Math.floor(o/2);h.push(r?1:0),h.reverse();const m=h.join("");let g="";for(c=0;c<64;c+=8){let _=parseInt(m.substr(c,8),2).toString(16);_.length===1&&(_="0"+_),g=g+_}return g.toLowerCase()},cz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},dz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function hz(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const fz=new RegExp("^-?(0*)\\d{1,10}$"),pz=-2147483648,mz=2147483647,Ix=function(t){if(fz.test(t)){const e=Number(t);if(e>=pz&&e<=mz)return e}return null},xd=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw bi("Exception was thrown by user callback.",n),e},Math.floor(0))}},gz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zf=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){bi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bi(e)}}class Hv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Hv.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="5",zL="v",$L="s",qL="r",GL="f",WL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,HL="ls",KL="p",a1="ac",QL="websocket",YL="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,n,i,r,o=!1,a="",u=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function _z(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function XL(t,e,n){te(typeof e=="string","typeof type must == string"),te(typeof n=="object","typeof params must == object");let i;if(e===QL)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===YL)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);_z(t)&&(n.ns=t.namespace);const r=[];return Ai(n,(o,a)=>{r.push(o+"="+a)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(){this.counters_={}}incrementCounter(e,n=1){Lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return CB(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME={},VE={};function yS(t){const e=t.toString();return ME[e]||(ME[e]=new wz),ME[e]}function Ez(t,e){const n=t.toString();return VE[n]||(VE[n]=e()),VE[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&xd(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="start",Tz="close",Sz="pLPCommand",bz="pRTLPCB",ZL="id",eM="pw",tM="ser",Cz="cb",Az="seg",Rz="ts",Pz="d",kz="dframe",nM=1870,iM=30,xz=nM-iM,Nz=25e3,Dz=3e4;class Mc{constructor(e,n,i,r,o,a,u){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=a,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mm(e),this.stats_=yS(n),this.urlFn=c=>(this.appCheckToken&&(c[a1]=this.appCheckToken),XL(n,YL,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Iz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Dz)),lz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _S((...o)=>{const[a,u,c,h,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===Tx)this.id=u,this.password=c;else if(a===Tz)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{const[a,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[Tx]="t",i[tM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Cz]=this.scriptTagHolder.uniqueCallbackIdentifier),i[zL]=vS,this.transportSessionId&&(i[$L]=this.transportSessionId),this.lastSessionId&&(i[HL]=this.lastSessionId),this.applicationId&&(i[KL]=this.applicationId),this.appCheckToken&&(i[a1]=this.appCheckToken),typeof location<"u"&&location.hostname&&WL.test(location.hostname)&&(i[qL]=GL);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mc.forceAllow_=!0}static forceDisallow(){Mc.forceDisallow_=!0}static isAvailable(){return Mc.forceAllow_?!0:!Mc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cz()&&!dz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Tn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=pL(n),r=BL(i,xz);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[kz]="t",i[ZL]=e,i[eM]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Tn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class _S{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sz(),window[Sz+this.uniqueCallbackIdentifier]=e,window[bz+this.uniqueCallbackIdentifier]=n,this.myIFrame=_S.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){Hn("frame writing exception"),u.stack&&Hn(u.stack),Hn(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Hn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ZL]=this.myID,e[eM]=this.myPW,e[tM]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iM+i.length<=nM;){const a=this.pendingSegs.shift();i=i+"&"+Az+r+"="+a.seg+"&"+Rz+r+"="+a.ts+"&"+Pz+r+"="+a.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(Nz)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Hn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=16384,Lz=45e3;let Uy=null;typeof MozWebSocket<"u"?Uy=MozWebSocket:typeof WebSocket<"u"&&(Uy=WebSocket);class Ar{constructor(e,n,i,r,o,a,u){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mm(this.connId),this.stats_=yS(n),this.connURL=Ar.connectionURL_(n,a,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const a={};return a[zL]=vS,typeof location<"u"&&location.hostname&&WL.test(location.hostname)&&(a[qL]=GL),n&&(a[$L]=n),i&&(a[HL]=i),r&&(a[a1]=r),o&&(a[KL]=o),XL(e,QL,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pl.set("previous_websocket_failure",!0);try{let i;wL(),this.mySock=new Uy(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Ar.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Uy!==null&&!Ar.forceDisallow_}static previouslyFailed(){return pl.isInMemoryStorage||pl.get("previous_websocket_failure")===!0}markConnectionHealthy(){pl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Np(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(te(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Tn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=BL(n,Oz);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Lz))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ar.responsesRequiredToBeHealthy=2;Ar.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Mc,Ar]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ar&&Ar.isAvailable();let i=n&&!Ar.previouslyFailed();if(e.webSocketOnly&&(n||bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ar];else{const r=this.transports_=[];for(const o of Mp.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);Mp.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Mp.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=6e4,Vz=5e3,Fz=10*1024,Uz=100*1024,FE="t",Sx="d",Bz="s",bx="r",jz="e",Cx="o",Ax="a",Rx="n",Px="p",zz="h";class $z{constructor(e,n,i,r,o,a,u,c,h,m){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=a,this.onReady_=u,this.onDisconnect_=c,this.onKill_=h,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mm("c:"+this.id+":"),this.transportManager_=new Mp(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Zf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Uz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Fz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(FE in e){const n=e[FE];n===Ax?this.upgradeIfSecondaryHealthy_():n===bx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Cx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=vf("t",e),i=vf("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Px,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ax,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Rx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=vf("t",e),i=vf("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=vf(FE,e);if(Sx in e){const i=e[Sx];if(n===zz){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Rx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Bz?this.onConnectionShutdown_(i):n===bx?this.onReset_(i):n===jz?o1("Server Error: "+i):n===Cx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):o1("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),vS!==i&&bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Zf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Mz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Vz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Px,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.allowedEvents_=e,this.listeners_={},te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){te(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By extends sM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new By}getInitialEvent(e){return te(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=32,xx=768;class ot{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ke(){return new ot("")}function De(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ha(t){return t.pieces_.length-t.pieceNum_}function at(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ot(t.pieces_,e)}function oM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function qz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function aM(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function lM(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ot(e,0)}function cn(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ot)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ot(n,0)}function Ve(t){return t.pieceNum_>=t.pieces_.length}function yi(t,e){const n=De(t),i=De(e);if(n===null)return e;if(n===i)return yi(at(t),at(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wS(t,e){if(ha(t)!==ha(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Rr(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(ha(t)>ha(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class Gz{constructor(e,n){this.errorPrefix_=n,this.parts_=aM(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=U_(this.parts_[i]);uM(this)}}function Wz(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=U_(e),uM(t)}function Hz(t){const e=t.parts_.pop();t.byteLength_-=U_(e),t.parts_.length>0&&(t.byteLength_-=1)}function uM(t){if(t.byteLength_>xx)throw new Error(t.errorPrefix_+"has a key path longer than "+xx+" bytes ("+t.byteLength_+").");if(t.parts_.length>kx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kx+") or object contains a cycle "+rl(t))}function rl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends sM{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new ES}getInitialEvent(e){return te(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=1e3,Kz=60*5*1e3,Nx=30*1e3,Qz=1.3,Yz=3e4,Jz="server_kill",Dx=3;class Hs extends rM{constructor(e,n,i,r,o,a,u,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=Hs.nextPersistentConnectionId_++,this.log_=mm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yf,this.maxReconnectDelay_=Kz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!wL())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ES.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&By.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(Tn(o)),te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new V_,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const u=a.d;a.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),te(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},a="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,u=>{const c=u.d,h=u.s;Hs.warnOnListenWarnings_(c,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",u),h!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(h,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Lr(e,"w")){const i=sd(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||BB(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Nx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=UB(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,a=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},a="n";r&&(o.q=i,o.t=r),this.sendRequest(a,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const a={p:n,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Tn(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):o1("Unrecognized action received from server: "+Tn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=yf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Yz&&(this.reconnectDelay_=yf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Qz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Hs.nextConnectionId_++,o=this.lastSessionId;let a=!1,u=null;const c=function(){u?u.close():(a=!0,i())},h=function(g){te(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:c,sendRequest:h};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,_]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?Hn("getToken() completed but was canceled"):(Hn("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,u=new $z(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,S=>{bi(S+" ("+this.repoInfo_.toString()+")"),this.interrupt(Jz)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&bi(g),c())}}}interrupt(e){Hn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],n1(this.interruptReasons_)&&(this.reconnectDelay_=yf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>gS(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new ot(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Hn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Dx&&(this.reconnectDelay_=Nx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Hn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Dx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ML.replace(/\./g,"-")]=1,lS()?e["framework.cordova"]=1:F_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=By.getInstance().currentlyOnline();return n1(this.interruptReasons_)&&e}}Hs.nextPersistentConnectionId_=0;Hs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Oe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Oe(ld,e),r=new Oe(ld,n);return this.compare(i,r)!==0}minPost(){return Oe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sv;class cM extends B_{static get __EMPTY_NODE(){return Sv}static set __EMPTY_NODE(e){Sv=e}compare(e,n){return kd(e.name,n.name)}isDefinedOn(e){throw Pd("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(xl,Sv)}makePost(e,n){return te(typeof e=="string","KeyIndex indexValue must always be a string."),new Oe(e,Sv)}toString(){return".key"}}const qc=new cM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bv=class{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?i(e.key,n):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Oi=class Mf{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Mf.RED,this.left=r??as.EMPTY_NODE,this.right=o??as.EMPTY_NODE}copy(e,n,i,r,o){return new Mf(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return as.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return as.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Mf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Mf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Oi.RED=!0;Oi.BLACK=!1;class Xz{copy(e,n,i,r,o){return this}insert(e,n,i){return new Oi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let as=class Kv{constructor(e,n=Kv.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Kv(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Oi.BLACK,null,null))}remove(e){return new Kv(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oi.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new bv(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new bv(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new bv(this.root_,null,this.comparator_,!0,e)}};as.EMPTY_NODE=new Xz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(t,e){return kd(t.name,e.name)}function IS(t,e){return kd(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l1;function e8(t){l1=t}const dM=function(t){return typeof t=="number"?"number:"+jL(t):"string:"+t},hM=function(t){if(t.isLeafNode()){const e=t.val();te(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lr(e,".sv"),"Priority must be a string or number.")}else te(t===l1||t.isEmpty(),"priority of unexpected type.");te(t===l1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ox;class _n{constructor(e,n=_n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hM(this.priorityNode_)}static set __childrenNodeConstructor(e){Ox=e}static get __childrenNodeConstructor(){return Ox}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new _n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:_n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ve(e)?this:De(e)===".priority"?this.priorityNode_:_n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:_n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=De(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(te(i!==".priority"||ha(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,_n.__childrenNodeConstructor.EMPTY_NODE.updateChild(at(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+dM(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=jL(this.value_):e+=this.value_,this.lazyHash_=FL(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===_n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof _n.__childrenNodeConstructor?-1:(te(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=_n.VALUE_TYPE_ORDER.indexOf(n),o=_n.VALUE_TYPE_ORDER.indexOf(i);return te(r>=0,"Unknown leaf type: "+n),te(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}_n.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fM,pM;function t8(t){fM=t}function n8(t){pM=t}class i8 extends B_{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?kd(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(xl,new _n("[PRIORITY-POST]",pM))}makePost(e,n){const i=fM(e);return new Oe(n,new _n("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ut=new i8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=Math.log(2);class s8{constructor(e){const n=o=>parseInt(Math.log(o)/r8,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const jy=function(t,e,n,i){t.sort(e);const r=function(c,h){const m=h-c;let g,_;if(m===0)return null;if(m===1)return g=t[c],_=n?n(g):g,new Oi(_,g.node,Oi.BLACK,null,null);{const S=parseInt(m/2,10)+c,P=r(c,S),I=r(S+1,h);return g=t[S],_=n?n(g):g,new Oi(_,g.node,Oi.BLACK,P,I)}},o=function(c){let h=null,m=null,g=t.length;const _=function(P,I){const k=g-P,E=g;g-=P;const b=r(k+1,E),A=t[k],M=n?n(A):A;S(new Oi(M,A.node,I,null,b))},S=function(P){h?(h.left=P,h=P):(m=P,h=P)};for(let P=0;P<c.count;++P){const I=c.nextBitIsOne(),k=Math.pow(2,c.count-(P+1));I?_(k,Oi.BLACK):(_(k,Oi.BLACK),_(k,Oi.RED))}return m},a=new s8(t.length),u=o(a);return new as(i||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UE;const hc={};class zs{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return te(hc&&Ut,"ChildrenNode.ts has not been loaded"),UE=UE||new zs({".priority":hc},{".priority":Ut}),UE}get(e){const n=sd(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof as?n:null}hasIndex(e){return Lr(this.indexSet_,e.toString())}addIndex(e,n){te(e!==qc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(Oe.Wrap);let a=o.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=o.getNext();let u;r?u=jy(i,e.getCompare()):u=hc;const c=e.toString(),h=Object.assign({},this.indexSet_);h[c]=e;const m=Object.assign({},this.indexes_);return m[c]=u,new zs(m,h)}addToIndexes(e,n){const i=Vy(this.indexes_,(r,o)=>{const a=sd(this.indexSet_,o);if(te(a,"Missing index implementation for "+o),r===hc)if(a.isDefinedOn(e.node)){const u=[],c=n.getIterator(Oe.Wrap);let h=c.getNext();for(;h;)h.name!==e.name&&u.push(h),h=c.getNext();return u.push(e),jy(u,a.getCompare())}else return hc;else{const u=n.get(e.name);let c=r;return u&&(c=c.remove(new Oe(e.name,u))),c.insert(e,e.node)}});return new zs(i,this.indexSet_)}removeFromIndexes(e,n){const i=Vy(this.indexes_,r=>{if(r===hc)return r;{const o=n.get(e.name);return o?r.remove(new Oe(e.name,o)):r}});return new zs(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f;class Ie{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&hM(this.priorityNode_),this.children_.isEmpty()&&te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _f||(_f=new Ie(new as(IS),null,zs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_f}updatePriority(e){return this.children_.isEmpty()?this:new Ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_f:n}}getChild(e){const n=De(e);return n===null?this:this.getImmediateChild(n).getChild(at(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(te(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Oe(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const a=r.isEmpty()?_f:this.priorityNode_;return new Ie(r,a,o)}}updateChild(e,n){const i=De(e);if(i===null)return n;{te(De(e)!==".priority"||ha(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(at(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(Ut,(a,u)=>{n[a]=u.val(e),i++,o&&Ie.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!e&&o&&r<2*i){const a=[];for(const u in n)a[u]=n[u];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+dM(this.getPriority().val())+":"),this.forEachChild(Ut,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":FL(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new Oe(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Oe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Oe(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Oe.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Oe.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gm?-1:0}withIndex(e){if(e===qc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ie(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===qc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Ut),r=n.getIterator(Ut);let o=i.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===qc?null:this.indexMap_.get(e.toString())}}Ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class o8 extends Ie{constructor(){super(new as(IS),Ie.EMPTY_NODE,zs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ie.EMPTY_NODE}isEmpty(){return!1}}const gm=new o8;Object.defineProperties(Oe,{MIN:{value:new Oe(ld,Ie.EMPTY_NODE)},MAX:{value:new Oe(xl,gm)}});cM.__EMPTY_NODE=Ie.EMPTY_NODE;_n.__childrenNodeConstructor=Ie;e8(gm);n8(gm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=!0;function Mn(t,e=null){if(t===null)return Ie.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),te(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new _n(n,Mn(e))}if(!(t instanceof Array)&&a8){const n=[];let i=!1;if(Ai(t,(a,u)=>{if(a.substring(0,1)!=="."){const c=Mn(u);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new Oe(a,c)))}}),n.length===0)return Ie.EMPTY_NODE;const o=jy(n,Zz,a=>a.name,IS);if(i){const a=jy(n,Ut.getCompare());return new Ie(o,Mn(e),new zs({".priority":a},{".priority":Ut}))}else return new Ie(o,Mn(e),zs.Default)}else{let n=Ie.EMPTY_NODE;return Ai(t,(i,r)=>{if(Lr(t,i)&&i.substring(0,1)!=="."){const o=Mn(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(Mn(e))}}t8(Mn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8 extends B_{constructor(e){super(),this.indexPath_=e,te(!Ve(e)&&De(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?kd(e.name,n.name):o}makePost(e,n){const i=Mn(e),r=Ie.EMPTY_NODE.updateChild(this.indexPath_,i);return new Oe(n,r)}maxPost(){const e=Ie.EMPTY_NODE.updateChild(this.indexPath_,gm);return new Oe(xl,e)}toString(){return aM(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8 extends B_{compare(e,n){const i=e.node.compareTo(n.node);return i===0?kd(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(e,n){const i=Mn(e);return new Oe(n,i)}toString(){return".value"}}const c8=new u8;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t){return{type:"value",snapshotNode:t}}function ud(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Vp(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Fp(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function d8(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.index_=e}updateChild(e,n,i,r,o,a){te(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(n);return u.getChild(r).equals(i.getChild(r))&&u.isEmpty()===i.isEmpty()||(a!=null&&(i.isEmpty()?e.hasChild(n)?a.trackChildChange(Vp(n,u)):te(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?a.trackChildChange(ud(n,i)):a.trackChildChange(Fp(n,i,u))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ut,(r,o)=>{n.hasChild(r)||i.trackChildChange(Vp(r,o))}),n.isLeafNode()||n.forEachChild(Ut,(r,o)=>{if(e.hasChild(r)){const a=e.getImmediateChild(r);a.equals(o)||i.trackChildChange(Fp(r,o,a))}else i.trackChildChange(ud(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ie.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.indexedFilter_=new TS(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Up.getStartPost_(e),this.endPost_=Up.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,a){return this.matches(new Oe(n,i))||(i=Ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,a)}updateFullNode(e,n,i){n.isLeafNode()&&(n=Ie.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(Ie.EMPTY_NODE);const o=this;return n.forEachChild(Ut,(a,u)=>{o.matches(new Oe(a,u))||(r=r.updateImmediateChild(a,Ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Up(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,a){return this.rangedFilter_.matches(new Oe(n,i))||(i=Ie.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,a):this.fullLimitUpdateChild_(e,n,i,o,a)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=Ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=Ie.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;o.hasNext()&&a<this.limit_;){const u=o.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))r=r.updateImmediateChild(u.name,u.node),a++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(Ie.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let a=0;for(;o.hasNext();){const u=o.getNext();a<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?a++:r=r.updateImmediateChild(u.name,Ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let a;if(this.reverse_){const g=this.index_.getCompare();a=(_,S)=>g(S,_)}else a=this.index_.getCompare();const u=e;te(u.numChildren()===this.limit_,"");const c=new Oe(n,i),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),m=this.rangedFilter_.matches(c);if(u.hasChild(n)){const g=u.getImmediateChild(n);let _=r.getChildAfterChild(this.index_,h,this.reverse_);for(;_!=null&&(_.name===n||u.hasChild(_.name));)_=r.getChildAfterChild(this.index_,_,this.reverse_);const S=_==null?1:a(_,c);if(m&&!i.isEmpty()&&S>=0)return o!=null&&o.trackChildChange(Fp(n,i,g)),u.updateImmediateChild(n,i);{o!=null&&o.trackChildChange(Vp(n,g));const I=u.updateImmediateChild(n,Ie.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(o!=null&&o.trackChildChange(ud(_.name,_.node)),I.updateImmediateChild(_.name,_.node)):I}}else return i.isEmpty()?e:m&&a(h,c)>=0?(o!=null&&(o.trackChildChange(Vp(h.name,h.node)),o.trackChildChange(ud(n,i))),u.updateImmediateChild(n,i).updateImmediateChild(h.name,Ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ut}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ld}hasEnd(){return this.endSet_}getIndexEndValue(){return te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ut}copy(){const e=new SS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function f8(t){return t.loadsAllData()?new TS(t.getIndex()):t.hasLimit()?new h8(t):new Up(t)}function Lx(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ut?n="$priority":t.index_===c8?n="$value":t.index_===qc?n="$key":(te(t.index_ instanceof l8,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Tn(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Tn(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Tn(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Tn(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Tn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Mx(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ut&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends rM{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=mm("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const a=zy.getListenId_(e,i),u={};this.listens_[a]=u;const c=Lx(e._queryParams);this.restRequest_(o+".json",c,(h,m)=>{let g=m;if(h===404&&(g=null,h=null),h===null&&this.onDataUpdate_(o,g,!1,i),sd(this.listens_,a)===u){let _;h?h===401?_="permission_denied":_="rest_error:"+h:_="ok",r(_,null)}})}unlisten(e,n){const i=zy.getListenId_(e,n);delete this.listens_[i]}get(e){const n=Lx(e._queryParams),i=e._path.toString(),r=new V_;return this.restRequest_(i+".json",n,(o,a)=>{let u=a;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xl(n);this.log_("Sending REST request for "+a);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);let c=null;if(u.status>=200&&u.status<300){try{c=Np(u.responseText)}catch{bi("Failed to parse JSON response for "+a+": "+u.responseText)}i(null,c)}else u.status!==401&&u.status!==404&&bi("Got unsuccessful REST response for "+a+" Status: "+u.status),i(u.status);i=null}},u.open("GET",a,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(){this.rootNode_=Ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(){return{value:null,children:new Map}}function gM(t,e,n){if(Ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=De(e);t.children.has(i)||t.children.set(i,$y());const r=t.children.get(i);e=at(e),gM(r,e,n)}}function u1(t,e,n){t.value!==null?n(e,t.value):m8(t,(i,r)=>{const o=new ot(e.toString()+"/"+i);u1(r,o,n)})}function m8(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ai(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=10*1e3,v8=30*1e3,y8=5*60*1e3;class _8{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new g8(e);const i=Vx+(v8-Vx)*Math.random();Zf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Ai(e,(r,o)=>{o>0&&Lr(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Zf(this.reportStats_.bind(this),Math.floor(Math.random()*2*y8))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Pr||(Pr={}));function vM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function CS(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Pr.ACK_USER_WRITE,this.source=vM()}operationForChild(e){if(Ve(this.path)){if(this.affectedTree.value!=null)return te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ot(e));return new qy(Ke(),n,this.revert)}}else return te(De(this.path)===e,"operationForChild called for unrelated child."),new qy(at(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this.source=e,this.path=n,this.type=Pr.LISTEN_COMPLETE}operationForChild(e){return Ve(this.path)?new Bp(this.source,Ke()):new Bp(this.source,at(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Pr.OVERWRITE}operationForChild(e){return Ve(this.path)?new Nl(this.source,Ke(),this.snap.getImmediateChild(e)):new Nl(this.source,at(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Pr.MERGE}operationForChild(e){if(Ve(this.path)){const n=this.children.subtree(new ot(e));return n.isEmpty()?null:n.value?new Nl(this.source,Ke(),n.value):new jp(this.source,Ke(),n)}else return te(De(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new jp(this.source,at(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ve(e))return this.isFullyInitialized()&&!this.filtered_;const n=De(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function E8(t,e,n,i){const r=[],o=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(d8(a.childName,a.snapshotNode))}),wf(t,r,"child_removed",e,i,n),wf(t,r,"child_added",e,i,n),wf(t,r,"child_moved",o,i,n),wf(t,r,"child_changed",e,i,n),wf(t,r,"value",e,i,n),r}function wf(t,e,n,i,r,o){const a=i.filter(u=>u.type===n);a.sort((u,c)=>T8(t,u,c)),a.forEach(u=>{const c=I8(t,u,o);r.forEach(h=>{h.respondsTo(u.type)&&e.push(h.createEvent(c,t.query_))})})}function I8(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function T8(t,e,n){if(e.childName==null||n.childName==null)throw Pd("Should only compare child_ events.");const i=new Oe(e.childName,e.snapshotNode),r=new Oe(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t,e){return{eventCache:t,serverCache:e}}function ep(t,e,n,i){return j_(new Dl(e,n,i),t.serverCache)}function yM(t,e,n,i){return j_(t.eventCache,new Dl(e,n,i))}function c1(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ol(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BE;const S8=()=>(BE||(BE=new as(uz)),BE);class pt{constructor(e,n=S8()){this.value=e,this.children=n}static fromObject(e){let n=new pt(null);return Ai(e,(i,r)=>{n=n.set(new ot(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ke(),value:this.value};if(Ve(e))return null;{const i=De(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(at(e),n);return o!=null?{path:cn(new ot(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ve(e))return this;{const n=De(e),i=this.children.get(n);return i!==null?i.subtree(at(e)):new pt(null)}}set(e,n){if(Ve(e))return new pt(n,this.children);{const i=De(e),o=(this.children.get(i)||new pt(null)).set(at(e),n),a=this.children.insert(i,o);return new pt(this.value,a)}}remove(e){if(Ve(e))return this.children.isEmpty()?new pt(null):new pt(null,this.children);{const n=De(e),i=this.children.get(n);if(i){const r=i.remove(at(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new pt(null):new pt(this.value,o)}else return this}}get(e){if(Ve(e))return this.value;{const n=De(e),i=this.children.get(n);return i?i.get(at(e)):null}}setTree(e,n){if(Ve(e))return n;{const i=De(e),o=(this.children.get(i)||new pt(null)).setTree(at(e),n);let a;return o.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,o),new pt(this.value,a)}}fold(e){return this.fold_(Ke(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(cn(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Ke(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(Ve(e))return null;{const o=De(e),a=this.children.get(o);return a?a.findOnPath_(at(e),cn(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ke(),n)}foreachOnPath_(e,n,i){if(Ve(e))return this;{this.value&&i(n,this.value);const r=De(e),o=this.children.get(r);return o?o.foreachOnPath_(at(e),cn(n,r),i):new pt(null)}}foreach(e){this.foreach_(Ke(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(cn(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.writeTree_=e}static empty(){return new Nr(new pt(null))}}function tp(t,e,n){if(Ve(e))return new Nr(new pt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const a=yi(r,e);return o=o.updateChild(a,n),new Nr(t.writeTree_.set(r,o))}else{const r=new pt(n),o=t.writeTree_.setTree(e,r);return new Nr(o)}}}function Fx(t,e,n){let i=t;return Ai(n,(r,o)=>{i=tp(i,cn(e,r),o)}),i}function Ux(t,e){if(Ve(e))return Nr.empty();{const n=t.writeTree_.setTree(e,new pt(null));return new Nr(n)}}function d1(t,e){return Zl(t,e)!=null}function Zl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(yi(n.path,e)):null}function Bx(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ut,(i,r)=>{e.push(new Oe(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Oe(i,r.value))}),e}function oa(t,e){if(Ve(e))return t;{const n=Zl(t,e);return n!=null?new Nr(new pt(n)):new Nr(t.writeTree_.subtree(e))}}function h1(t){return t.writeTree_.isEmpty()}function cd(t,e){return _M(Ke(),t.writeTree_,e)}function _M(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(te(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=_M(cn(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(cn(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t,e){return TM(e,t)}function b8(t,e,n,i,r){te(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=tp(t.visibleWrites,e,n)),t.lastWriteId=i}function C8(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function A8(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);te(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const u=t.allWrites[a];u.visible&&(a>=n&&R8(u,i.path)?r=!1:Rr(i.path,u.path)&&(o=!0)),a--}if(r){if(o)return P8(t),!0;if(i.snap)t.visibleWrites=Ux(t.visibleWrites,i.path);else{const u=i.children;Ai(u,c=>{t.visibleWrites=Ux(t.visibleWrites,cn(i.path,c))})}return!0}else return!1}function R8(t,e){if(t.snap)return Rr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Rr(cn(t.path,n),e))return!0;return!1}function P8(t){t.visibleWrites=wM(t.allWrites,k8,Ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function k8(t){return t.visible}function wM(t,e,n){let i=Nr.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const a=o.path;let u;if(o.snap)Rr(n,a)?(u=yi(n,a),i=tp(i,u,o.snap)):Rr(a,n)&&(u=yi(a,n),i=tp(i,Ke(),o.snap.getChild(u)));else if(o.children){if(Rr(n,a))u=yi(n,a),i=Fx(i,u,o.children);else if(Rr(a,n))if(u=yi(a,n),Ve(u))i=Fx(i,Ke(),o.children);else{const c=sd(o.children,De(u));if(c){const h=c.getChild(at(u));i=tp(i,Ke(),h)}}}else throw Pd("WriteRecord should have .snap or .children")}}return i}function EM(t,e,n,i,r){if(!i&&!r){const o=Zl(t.visibleWrites,e);if(o!=null)return o;{const a=oa(t.visibleWrites,e);if(h1(a))return n;if(n==null&&!d1(a,Ke()))return null;{const u=n||Ie.EMPTY_NODE;return cd(a,u)}}}else{const o=oa(t.visibleWrites,e);if(!r&&h1(o))return n;if(!r&&n==null&&!d1(o,Ke()))return null;{const a=function(h){return(h.visible||r)&&(!i||!~i.indexOf(h.writeId))&&(Rr(h.path,e)||Rr(e,h.path))},u=wM(t.allWrites,a,e),c=n||Ie.EMPTY_NODE;return cd(u,c)}}}function x8(t,e,n){let i=Ie.EMPTY_NODE;const r=Zl(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ut,(o,a)=>{i=i.updateImmediateChild(o,a)}),i;if(n){const o=oa(t.visibleWrites,e);return n.forEachChild(Ut,(a,u)=>{const c=cd(oa(o,new ot(a)),u);i=i.updateImmediateChild(a,c)}),Bx(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const o=oa(t.visibleWrites,e);return Bx(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function N8(t,e,n,i,r){te(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=cn(e,n);if(d1(t.visibleWrites,o))return null;{const a=oa(t.visibleWrites,o);return h1(a)?r.getChild(n):cd(a,r.getChild(n))}}function D8(t,e,n,i){const r=cn(e,n),o=Zl(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const a=oa(t.visibleWrites,r);return cd(a,i.getNode().getImmediateChild(n))}else return null}function O8(t,e){return Zl(t.visibleWrites,e)}function L8(t,e,n,i,r,o,a){let u;const c=oa(t.visibleWrites,e),h=Zl(c,Ke());if(h!=null)u=h;else if(n!=null)u=cd(c,n);else return[];if(u=u.withIndex(a),!u.isEmpty()&&!u.isLeafNode()){const m=[],g=a.getCompare(),_=o?u.getReverseIteratorFrom(i,a):u.getIteratorFrom(i,a);let S=_.getNext();for(;S&&m.length<r;)g(S,i)!==0&&m.push(S),S=_.getNext();return m}else return[]}function M8(){return{visibleWrites:Nr.empty(),allWrites:[],lastWriteId:-1}}function Gy(t,e,n,i){return EM(t.writeTree,t.treePath,e,n,i)}function RS(t,e){return x8(t.writeTree,t.treePath,e)}function jx(t,e,n,i){return N8(t.writeTree,t.treePath,e,n,i)}function Wy(t,e){return O8(t.writeTree,cn(t.treePath,e))}function V8(t,e,n,i,r,o){return L8(t.writeTree,t.treePath,e,n,i,r,o)}function PS(t,e,n){return D8(t.writeTree,t.treePath,e,n)}function IM(t,e){return TM(cn(t.treePath,e),t.writeTree)}function TM(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),te(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,Fp(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Vp(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,ud(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,Fp(i,e.snapshotNode,r.oldSnap));else throw Pd("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const SM=new U8;class kS{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Dl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PS(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ol(this.viewCache_),o=V8(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){return{filter:t}}function j8(t,e){te(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),te(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function z8(t,e,n,i,r){const o=new F8;let a,u;if(n.type===Pr.OVERWRITE){const h=n;h.source.fromUser?a=f1(t,e,h.path,h.snap,i,r,o):(te(h.source.fromServer,"Unknown source."),u=h.source.tagged||e.serverCache.isFiltered()&&!Ve(h.path),a=Hy(t,e,h.path,h.snap,i,r,u,o))}else if(n.type===Pr.MERGE){const h=n;h.source.fromUser?a=q8(t,e,h.path,h.children,i,r,o):(te(h.source.fromServer,"Unknown source."),u=h.source.tagged||e.serverCache.isFiltered(),a=p1(t,e,h.path,h.children,i,r,u,o))}else if(n.type===Pr.ACK_USER_WRITE){const h=n;h.revert?a=H8(t,e,h.path,i,r,o):a=G8(t,e,h.path,h.affectedTree,i,r,o)}else if(n.type===Pr.LISTEN_COMPLETE)a=W8(t,e,n.path,i,o);else throw Pd("Unknown operation type: "+n.type);const c=o.getChanges();return $8(e,a,c),{viewCache:a,changes:c}}function $8(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=c1(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(mM(c1(e)))}}function bM(t,e,n,i,r,o){const a=e.eventCache;if(Wy(i,n)!=null)return e;{let u,c;if(Ve(n))if(te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=Ol(e),m=h instanceof Ie?h:Ie.EMPTY_NODE,g=RS(i,m);u=t.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{const h=Gy(i,Ol(e));u=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{const h=De(n);if(h===".priority"){te(ha(n)===1,"Can't have a priority with additional path components");const m=a.getNode();c=e.serverCache.getNode();const g=jx(i,n,m,c);g!=null?u=t.filter.updatePriority(m,g):u=a.getNode()}else{const m=at(n);let g;if(a.isCompleteForChild(h)){c=e.serverCache.getNode();const _=jx(i,n,a.getNode(),c);_!=null?g=a.getNode().getImmediateChild(h).updateChild(m,_):g=a.getNode().getImmediateChild(h)}else g=PS(i,h,e.serverCache);g!=null?u=t.filter.updateChild(a.getNode(),h,g,m,r,o):u=a.getNode()}}return ep(e,u,a.isFullyInitialized()||Ve(n),t.filter.filtersNodes())}}function Hy(t,e,n,i,r,o,a,u){const c=e.serverCache;let h;const m=a?t.filter:t.filter.getIndexedFilter();if(Ve(n))h=m.updateFullNode(c.getNode(),i,null);else if(m.filtersNodes()&&!c.isFiltered()){const S=c.getNode().updateChild(n,i);h=m.updateFullNode(c.getNode(),S,null)}else{const S=De(n);if(!c.isCompleteForPath(n)&&ha(n)>1)return e;const P=at(n),k=c.getNode().getImmediateChild(S).updateChild(P,i);S===".priority"?h=m.updatePriority(c.getNode(),k):h=m.updateChild(c.getNode(),S,k,P,SM,null)}const g=yM(e,h,c.isFullyInitialized()||Ve(n),m.filtersNodes()),_=new kS(r,g,o);return bM(t,g,n,r,_,u)}function f1(t,e,n,i,r,o,a){const u=e.eventCache;let c,h;const m=new kS(r,e,o);if(Ve(n))h=t.filter.updateFullNode(e.eventCache.getNode(),i,a),c=ep(e,h,!0,t.filter.filtersNodes());else{const g=De(n);if(g===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),i),c=ep(e,h,u.isFullyInitialized(),u.isFiltered());else{const _=at(n),S=u.getNode().getImmediateChild(g);let P;if(Ve(_))P=i;else{const I=m.getCompleteChild(g);I!=null?oM(_)===".priority"&&I.getChild(lM(_)).isEmpty()?P=I:P=I.updateChild(_,i):P=Ie.EMPTY_NODE}if(S.equals(P))c=e;else{const I=t.filter.updateChild(u.getNode(),g,P,_,m,a);c=ep(e,I,u.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function zx(t,e){return t.eventCache.isCompleteForChild(e)}function q8(t,e,n,i,r,o,a){let u=e;return i.foreach((c,h)=>{const m=cn(n,c);zx(e,De(m))&&(u=f1(t,u,m,h,r,o,a))}),i.foreach((c,h)=>{const m=cn(n,c);zx(e,De(m))||(u=f1(t,u,m,h,r,o,a))}),u}function $x(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function p1(t,e,n,i,r,o,a,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,h;Ve(n)?h=i:h=new pt(null).setTree(n,i);const m=e.serverCache.getNode();return h.children.inorderTraversal((g,_)=>{if(m.hasChild(g)){const S=e.serverCache.getNode().getImmediateChild(g),P=$x(t,S,_);c=Hy(t,c,new ot(g),P,r,o,a,u)}}),h.children.inorderTraversal((g,_)=>{const S=!e.serverCache.isCompleteForChild(g)&&_.value===null;if(!m.hasChild(g)&&!S){const P=e.serverCache.getNode().getImmediateChild(g),I=$x(t,P,_);c=Hy(t,c,new ot(g),I,r,o,a,u)}}),c}function G8(t,e,n,i,r,o,a){if(Wy(r,n)!=null)return e;const u=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(Ve(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Hy(t,e,n,c.getNode().getChild(n),r,o,u,a);if(Ve(n)){let h=new pt(null);return c.getNode().forEachChild(qc,(m,g)=>{h=h.set(new ot(m),g)}),p1(t,e,n,h,r,o,u,a)}else return e}else{let h=new pt(null);return i.foreach((m,g)=>{const _=cn(n,m);c.isCompleteForPath(_)&&(h=h.set(m,c.getNode().getChild(_)))}),p1(t,e,n,h,r,o,u,a)}}function W8(t,e,n,i,r){const o=e.serverCache,a=yM(e,o.getNode(),o.isFullyInitialized()||Ve(n),o.isFiltered());return bM(t,a,n,i,SM,r)}function H8(t,e,n,i,r,o){let a;if(Wy(i,n)!=null)return e;{const u=new kS(i,e,r),c=e.eventCache.getNode();let h;if(Ve(n)||De(n)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Gy(i,Ol(e));else{const g=e.serverCache.getNode();te(g instanceof Ie,"serverChildren would be complete if leaf node"),m=RS(i,g)}m=m,h=t.filter.updateFullNode(c,m,o)}else{const m=De(n);let g=PS(i,m,e.serverCache);g==null&&e.serverCache.isCompleteForChild(m)&&(g=c.getImmediateChild(m)),g!=null?h=t.filter.updateChild(c,m,g,at(n),u,o):e.eventCache.getNode().hasChild(m)?h=t.filter.updateChild(c,m,Ie.EMPTY_NODE,at(n),u,o):h=c,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Gy(i,Ol(e)),a.isLeafNode()&&(h=t.filter.updateFullNode(h,a,o)))}return a=e.serverCache.isFullyInitialized()||Wy(i,Ke())!=null,ep(e,h,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new TS(i.getIndex()),o=f8(i);this.processor_=B8(o);const a=n.serverCache,u=n.eventCache,c=r.updateFullNode(Ie.EMPTY_NODE,a.getNode(),null),h=o.updateFullNode(Ie.EMPTY_NODE,u.getNode(),null),m=new Dl(c,a.isFullyInitialized(),r.filtersNodes()),g=new Dl(h,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=j_(g,m),this.eventGenerator_=new w8(this.query_)}get query(){return this.query_}}function Q8(t){return t.viewCache_.serverCache.getNode()}function Y8(t,e){const n=Ol(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ve(e)&&!n.getImmediateChild(De(e)).isEmpty())?n.getChild(e):null}function qx(t){return t.eventRegistrations_.length===0}function J8(t,e){t.eventRegistrations_.push(e)}function Gx(t,e,n){const i=[];if(n){te(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const a=o.createCancelEvent(n,r);a&&i.push(a)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const a=t.eventRegistrations_[o];if(!a.matches(e))r.push(a);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function Wx(t,e,n,i){e.type===Pr.MERGE&&e.source.queryId!==null&&(te(Ol(t.viewCache_),"We should always have a full cache before handling merges"),te(c1(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=z8(t.processor_,r,e,n,i);return j8(t.processor_,o.viewCache),te(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,CM(t,o.changes,o.viewCache.eventCache.getNode(),null)}function X8(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ut,(o,a)=>{i.push(ud(o,a))}),n.isFullyInitialized()&&i.push(mM(n.getNode())),CM(t,i,n.getNode(),e)}function CM(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return E8(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ky;class Z8{constructor(){this.views=new Map}}function e7(t){te(!Ky,"__referenceConstructor has already been defined"),Ky=t}function t7(){return te(Ky,"Reference.ts has not been loaded"),Ky}function n7(t){return t.views.size===0}function xS(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return te(o!=null,"SyncTree gave us an op for an invalid query."),Wx(o,e,n,i)}else{let o=[];for(const a of t.views.values())o=o.concat(Wx(a,e,n,i));return o}}function i7(t,e,n,i,r){const o=e._queryIdentifier,a=t.views.get(o);if(!a){let u=Gy(n,r?i:null),c=!1;u?c=!0:i instanceof Ie?(u=RS(n,i),c=!1):(u=Ie.EMPTY_NODE,c=!1);const h=j_(new Dl(u,c,!1),new Dl(i,r,!1));return new K8(e,h)}return a}function r7(t,e,n,i,r,o){const a=i7(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),J8(a,n),X8(a,n)}function s7(t,e,n,i){const r=e._queryIdentifier,o=[];let a=[];const u=fa(t);if(r==="default")for(const[c,h]of t.views.entries())a=a.concat(Gx(h,n,i)),qx(h)&&(t.views.delete(c),h.query._queryParams.loadsAllData()||o.push(h.query));else{const c=t.views.get(r);c&&(a=a.concat(Gx(c,n,i)),qx(c)&&(t.views.delete(r),c.query._queryParams.loadsAllData()||o.push(c.query)))}return u&&!fa(t)&&o.push(new(t7())(e._repo,e._path)),{removed:o,events:a}}function AM(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Gc(t,e){let n=null;for(const i of t.views.values())n=n||Y8(i,e);return n}function RM(t,e){if(e._queryParams.loadsAllData())return z_(t);{const i=e._queryIdentifier;return t.views.get(i)}}function PM(t,e){return RM(t,e)!=null}function fa(t){return z_(t)!=null}function z_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qy;function o7(t){te(!Qy,"__referenceConstructor has already been defined"),Qy=t}function a7(){return te(Qy,"Reference.ts has not been loaded"),Qy}let l7=1;class Hx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pt(null),this.pendingWriteTree_=M8(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kM(t,e,n,i,r){return b8(t.pendingWriteTree_,e,n,i,r),r?vm(t,new Nl(vM(),e,n)):[]}function ml(t,e,n=!1){const i=C8(t.pendingWriteTree_,e);if(A8(t.pendingWriteTree_,e)){let o=new pt(null);return i.snap!=null?o=o.set(Ke(),!0):Ai(i.children,a=>{o=o.set(new ot(a),!0)}),vm(t,new qy(i.path,o,n))}else return[]}function $_(t,e,n){return vm(t,new Nl(bS(),e,n))}function u7(t,e,n){const i=pt.fromObject(n);return vm(t,new jp(bS(),e,i))}function c7(t,e){return vm(t,new Bp(bS(),e))}function d7(t,e,n){const i=DS(t,n);if(i){const r=OS(i),o=r.path,a=r.queryId,u=yi(o,e),c=new Bp(CS(a),u);return LS(t,o,c)}else return[]}function m1(t,e,n,i,r=!1){const o=e._path,a=t.syncPointTree_.get(o);let u=[];if(a&&(e._queryIdentifier==="default"||PM(a,e))){const c=s7(a,e,n,i);n7(a)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const h=c.removed;if(u=c.events,!r){const m=h.findIndex(_=>_._queryParams.loadsAllData())!==-1,g=t.syncPointTree_.findOnPath(o,(_,S)=>fa(S));if(m&&!g){const _=t.syncPointTree_.subtree(o);if(!_.isEmpty()){const S=p7(_);for(let P=0;P<S.length;++P){const I=S[P],k=I.query,E=DM(t,I);t.listenProvider_.startListening(np(k),Yy(t,k),E.hashFn,E.onComplete)}}}!g&&h.length>0&&!i&&(m?t.listenProvider_.stopListening(np(e),null):h.forEach(_=>{const S=t.queryToTagMap.get(q_(_));t.listenProvider_.stopListening(np(_),S)}))}m7(t,h)}return u}function h7(t,e,n,i){const r=DS(t,i);if(r!=null){const o=OS(r),a=o.path,u=o.queryId,c=yi(a,e),h=new Nl(CS(u),c,n);return LS(t,a,h)}else return[]}function f7(t,e,n,i){const r=DS(t,i);if(r){const o=OS(r),a=o.path,u=o.queryId,c=yi(a,e),h=pt.fromObject(n),m=new jp(CS(u),c,h);return LS(t,a,m)}else return[]}function Kx(t,e,n,i=!1){const r=e._path;let o=null,a=!1;t.syncPointTree_.foreachOnPath(r,(_,S)=>{const P=yi(_,r);o=o||Gc(S,P),a=a||fa(S)});let u=t.syncPointTree_.get(r);u?(a=a||fa(u),o=o||Gc(u,Ke())):(u=new Z8,t.syncPointTree_=t.syncPointTree_.set(r,u));let c;o!=null?c=!0:(c=!1,o=Ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((S,P)=>{const I=Gc(P,Ke());I&&(o=o.updateImmediateChild(S,I))}));const h=PM(u,e);if(!h&&!e._queryParams.loadsAllData()){const _=q_(e);te(!t.queryToTagMap.has(_),"View does not exist, but we have a tag");const S=g7();t.queryToTagMap.set(_,S),t.tagToQueryMap.set(S,_)}const m=AS(t.pendingWriteTree_,r);let g=r7(u,e,n,m,o,c);if(!h&&!a&&!i){const _=RM(u,e);g=g.concat(v7(t,e,_))}return g}function NS(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(a,u)=>{const c=yi(a,e),h=Gc(u,c);if(h)return h});return EM(r,e,o,n,!0)}function vm(t,e){return xM(e,t.syncPointTree_,null,AS(t.pendingWriteTree_,Ke()))}function xM(t,e,n,i){if(Ve(t.path))return NM(t,e,n,i);{const r=e.get(Ke());n==null&&r!=null&&(n=Gc(r,Ke()));let o=[];const a=De(t.path),u=t.operationForChild(a),c=e.children.get(a);if(c&&u){const h=n?n.getImmediateChild(a):null,m=IM(i,a);o=o.concat(xM(u,c,h,m))}return r&&(o=o.concat(xS(r,t,i,n))),o}}function NM(t,e,n,i){const r=e.get(Ke());n==null&&r!=null&&(n=Gc(r,Ke()));let o=[];return e.children.inorderTraversal((a,u)=>{const c=n?n.getImmediateChild(a):null,h=IM(i,a),m=t.operationForChild(a);m&&(o=o.concat(NM(m,u,c,h)))}),r&&(o=o.concat(xS(r,t,i,n))),o}function DM(t,e){const n=e.query,i=Yy(t,n);return{hashFn:()=>(Q8(e)||Ie.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?d7(t,n._path,i):c7(t,n._path);{const o=hz(r,n);return m1(t,n,null,o)}}}}function Yy(t,e){const n=q_(e);return t.queryToTagMap.get(n)}function q_(t){return t._path.toString()+"$"+t._queryIdentifier}function DS(t,e){return t.tagToQueryMap.get(e)}function OS(t){const e=t.indexOf("$");return te(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ot(t.substr(0,e))}}function LS(t,e,n){const i=t.syncPointTree_.get(e);te(i,"Missing sync point for query tag that we're tracking");const r=AS(t.pendingWriteTree_,e);return xS(i,n,r,null)}function p7(t){return t.fold((e,n,i)=>{if(n&&fa(n))return[z_(n)];{let r=[];return n&&(r=AM(n)),Ai(i,(o,a)=>{r=r.concat(a)}),r}})}function np(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(a7())(t._repo,t._path):t}function m7(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=q_(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function g7(){return l7++}function v7(t,e,n){const i=e._path,r=Yy(t,e),o=DM(t,n),a=t.listenProvider_.startListening(np(e),r,o.hashFn,o.onComplete),u=t.syncPointTree_.subtree(i);if(r)te(!fa(u.value),"If we're adding a query, it shouldn't be shadowed");else{const c=u.fold((h,m,g)=>{if(!Ve(h)&&m&&fa(m))return[z_(m).query];{let _=[];return m&&(_=_.concat(AM(m).map(S=>S.query))),Ai(g,(S,P)=>{_=_.concat(P)}),_}});for(let h=0;h<c.length;++h){const m=c[h];t.listenProvider_.stopListening(np(m),Yy(t,m))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new MS(n)}node(){return this.node_}}class VS{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=cn(this.path_,e);return new VS(this.syncTree_,n)}node(){return NS(this.syncTree_,this.path_)}}const y7=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Qx=function(t,e,n){if(!t||typeof t!="object")return t;if(te(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return _7(t[".sv"],e,n);if(typeof t[".sv"]=="object")return w7(t[".sv"],e);te(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},_7=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:te(!1,"Unexpected server value: "+t)}},w7=function(t,e,n){t.hasOwnProperty("increment")||te(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&te(!1,"Unexpected increment value: "+i);const r=e.node();if(te(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return typeof a!="number"?i:a+i},E7=function(t,e,n,i){return FS(e,new VS(n,t),i)},OM=function(t,e,n){return FS(t,new MS(e),n)};function FS(t,e,n){const i=t.getPriority().val(),r=Qx(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const a=t,u=Qx(a.getValue(),e,n);return u!==a.getValue()||r!==a.getPriority().val()?new _n(u,Mn(r)):t}else{const a=t;return o=a,r!==a.getPriority().val()&&(o=o.updatePriority(new _n(r))),a.forEachChild(Ut,(u,c)=>{const h=FS(c,e.getImmediateChild(u),n);h!==c&&(o=o.updateImmediateChild(u,h))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function BS(t,e){let n=e instanceof ot?e:new ot(e),i=t,r=De(n);for(;r!==null;){const o=sd(i.node.children,r)||{children:{},childCount:0};i=new US(r,i,o),n=at(n),r=De(n)}return i}function Nd(t){return t.node.value}function LM(t,e){t.node.value=e,g1(t)}function MM(t){return t.node.childCount>0}function I7(t){return Nd(t)===void 0&&!MM(t)}function G_(t,e){Ai(t.node.children,(n,i)=>{e(new US(n,t,i))})}function VM(t,e,n,i){n&&!i&&e(t),G_(t,r=>{VM(r,e,!0,i)}),n&&i&&e(t)}function T7(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ym(t){return new ot(t.parent===null?t.name:ym(t.parent)+"/"+t.name)}function g1(t){t.parent!==null&&S7(t.parent,t.name,t)}function S7(t,e,n){const i=I7(n),r=Lr(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,g1(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,g1(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=/[\[\].#$\/\u0000-\u001F\u007F]/,C7=/[\[\].#$\u0000-\u001F\u007F]/,jE=10*1024*1024,FM=function(t){return typeof t=="string"&&t.length!==0&&!b7.test(t)},UM=function(t){return typeof t=="string"&&t.length!==0&&!C7.test(t)},A7=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),UM(t)},BM=function(t,e,n,i){i&&e===void 0||jS(cS(t,"value"),e,n)},jS=function(t,e,n){const i=n instanceof ot?new Gz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+rl(i));if(typeof e=="function")throw new Error(t+"contains a function "+rl(i)+" with contents = "+e.toString());if(UL(e))throw new Error(t+"contains "+e.toString()+" "+rl(i));if(typeof e=="string"&&e.length>jE/3&&U_(e)>jE)throw new Error(t+"contains a string greater than "+jE+" utf8 bytes "+rl(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(Ai(e,(a,u)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!FM(a)))throw new Error(t+" contains an invalid key ("+a+") "+rl(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Wz(i,a),jS(t,u,i),Hz(i)}),r&&o)throw new Error(t+' contains ".value" child '+rl(i)+" in addition to actual children.")}},jM=function(t,e,n,i){if(!UM(n))throw new Error(cS(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},R7=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jM(t,e,n)},zM=function(t,e){if(De(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},P7=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!FM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!A7(n))throw new Error(cS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zS(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!wS(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function $M(t,e,n){zS(t,n),qM(t,i=>wS(i,e))}function to(t,e,n){zS(t,n),qM(t,i=>Rr(i,e)||Rr(e,i))}function qM(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(x7(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function x7(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Xf&&Hn("event: "+n.toString()),xd(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7="repo_interrupt",D7=25;class O7{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new k7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$y(),this.transactionQueueTree_=new US,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function L7(t,e,n){if(t.stats_=yS(t.repoInfo_),t.forceRestClient_||gz())t.server_=new zy(t.repoInfo_,(i,r,o,a)=>{Yx(t,i,r,o,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Jx(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Tn(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Hs(t.repoInfo_,e,(i,r,o,a)=>{Yx(t,i,r,o,a)},i=>{Jx(t,i)},i=>{M7(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Ez(t.repoInfo_,()=>new _8(t.stats_,t.server_)),t.infoData_=new p8,t.infoSyncTree_=new Hx({startListening:(i,r,o,a)=>{let u=[];const c=t.infoData_.getNode(i._path);return c.isEmpty()||(u=$_(t.infoSyncTree_,i._path,c),setTimeout(()=>{a("ok")},0)),u},stopListening:()=>{}}),qS(t,"connected",!1),t.serverSyncTree_=new Hx({startListening:(i,r,o,a)=>(t.server_.listen(i,o,r,(u,c)=>{const h=a(u,c);to(t.eventQueue_,i._path,h)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function GM(t){const n=t.infoData_.getNode(new ot(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function $S(t){return y7({timestamp:GM(t)})}function Yx(t,e,n,i,r){t.dataUpdateCount++;const o=new ot(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(i){const c=Vy(n,h=>Mn(h));a=f7(t.serverSyncTree_,o,c,r)}else{const c=Mn(n);a=h7(t.serverSyncTree_,o,c,r)}else if(i){const c=Vy(n,h=>Mn(h));a=u7(t.serverSyncTree_,o,c)}else{const c=Mn(n);a=$_(t.serverSyncTree_,o,c)}let u=o;a.length>0&&(u=W_(t,o)),to(t.eventQueue_,u,a)}function Jx(t,e){qS(t,"connected",e),e===!1&&F7(t)}function M7(t,e){Ai(e,(n,i)=>{qS(t,n,i)})}function qS(t,e,n){const i=new ot("/.info/"+e),r=Mn(n);t.infoData_.updateSnapshot(i,r);const o=$_(t.infoSyncTree_,i,r);to(t.eventQueue_,i,o)}function WM(t){return t.nextWriteId_++}function V7(t,e,n,i,r){GS(t,"set",{path:e.toString(),value:n,priority:i});const o=$S(t),a=Mn(n,i),u=NS(t.serverSyncTree_,e),c=OM(a,u,o),h=WM(t),m=kM(t.serverSyncTree_,e,c,h,!0);zS(t.eventQueue_,m),t.server_.put(e.toString(),a.val(!0),(_,S)=>{const P=_==="ok";P||bi("set at "+e+" failed: "+_);const I=ml(t.serverSyncTree_,h,!P);to(t.eventQueue_,e,I),j7(t,r,_,S)});const g=XM(t,e);W_(t,g),to(t.eventQueue_,g,[])}function F7(t){GS(t,"onDisconnectEvents");const e=$S(t),n=$y();u1(t.onDisconnect_,Ke(),(r,o)=>{const a=E7(r,o,t.serverSyncTree_,e);gM(n,r,a)});let i=[];u1(n,Ke(),(r,o)=>{i=i.concat($_(t.serverSyncTree_,r,o));const a=XM(t,r);W_(t,a)}),t.onDisconnect_=$y(),to(t.eventQueue_,Ke(),i)}function U7(t,e,n){let i;De(e._path)===".info"?i=Kx(t.infoSyncTree_,e,n):i=Kx(t.serverSyncTree_,e,n),$M(t.eventQueue_,e._path,i)}function HM(t,e,n){let i;De(e._path)===".info"?i=m1(t.infoSyncTree_,e,n):i=m1(t.serverSyncTree_,e,n),$M(t.eventQueue_,e._path,i)}function B7(t){t.persistentConnection_&&t.persistentConnection_.interrupt(N7)}function GS(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Hn(n,...e)}function j7(t,e,n,i){e&&xd(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const a=new Error(o);a.code=r,e(a)}})}function KM(t,e,n){return NS(t.serverSyncTree_,e,n)||Ie.EMPTY_NODE}function WS(t,e=t.transactionQueueTree_){if(e||H_(t,e),Nd(e)){const n=YM(t,e);te(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&z7(t,ym(e),n)}else MM(e)&&G_(e,n=>{WS(t,n)})}function z7(t,e,n){const i=n.map(h=>h.currentWriteId),r=KM(t,e,i);let o=r;const a=r.hash();for(let h=0;h<n.length;h++){const m=n[h];te(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const g=yi(e,m.path);o=o.updateChild(g,m.currentOutputSnapshotRaw)}const u=o.val(!0),c=e;t.server_.put(c.toString(),u,h=>{GS(t,"transaction put response",{path:c.toString(),status:h});let m=[];if(h==="ok"){const g=[];for(let _=0;_<n.length;_++)n[_].status=2,m=m.concat(ml(t.serverSyncTree_,n[_].currentWriteId)),n[_].onComplete&&g.push(()=>n[_].onComplete(null,!0,n[_].currentOutputSnapshotResolved)),n[_].unwatcher();H_(t,BS(t.transactionQueueTree_,e)),WS(t,t.transactionQueueTree_),to(t.eventQueue_,e,m);for(let _=0;_<g.length;_++)xd(g[_])}else{if(h==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{bi("transaction at "+c.toString()+" failed: "+h);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=h}W_(t,e)}},a)}function W_(t,e){const n=QM(t,e),i=ym(n),r=YM(t,n);return $7(t,r,i),i}function $7(t,e,n){if(e.length===0)return;const i=[];let r=[];const a=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const c=e[u],h=yi(n,c.path);let m=!1,g;if(te(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)m=!0,g=c.abortReason,r=r.concat(ml(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=D7)m=!0,g="maxretry",r=r.concat(ml(t.serverSyncTree_,c.currentWriteId,!0));else{const _=KM(t,c.path,a);c.currentInputSnapshot=_;const S=e[u].update(_.val());if(S!==void 0){jS("transaction failed: Data returned ",S,c.path);let P=Mn(S);typeof S=="object"&&S!=null&&Lr(S,".priority")||(P=P.updatePriority(_.getPriority()));const k=c.currentWriteId,E=$S(t),b=OM(P,_,E);c.currentOutputSnapshotRaw=P,c.currentOutputSnapshotResolved=b,c.currentWriteId=WM(t),a.splice(a.indexOf(k),1),r=r.concat(kM(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),r=r.concat(ml(t.serverSyncTree_,k,!0))}else m=!0,g="nodata",r=r.concat(ml(t.serverSyncTree_,c.currentWriteId,!0))}to(t.eventQueue_,n,r),r=[],m&&(e[u].status=2,function(_){setTimeout(_,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(g==="nodata"?i.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):i.push(()=>e[u].onComplete(new Error(g),!1,null))))}H_(t,t.transactionQueueTree_);for(let u=0;u<i.length;u++)xd(i[u]);WS(t,t.transactionQueueTree_)}function QM(t,e){let n,i=t.transactionQueueTree_;for(n=De(e);n!==null&&Nd(i)===void 0;)i=BS(i,n),e=at(e),n=De(e);return i}function YM(t,e){const n=[];return JM(t,e,n),n.sort((i,r)=>i.order-r.order),n}function JM(t,e,n){const i=Nd(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);G_(e,r=>{JM(t,r,n)})}function H_(t,e){const n=Nd(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,LM(e,n.length>0?n:void 0)}G_(e,i=>{H_(t,i)})}function XM(t,e){const n=ym(QM(t,e)),i=BS(t.transactionQueueTree_,e);return T7(i,r=>{zE(t,r)}),zE(t,i),VM(i,r=>{zE(t,r)}),n}function zE(t,e){const n=Nd(e);if(n){const i=[];let r=[],o=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(te(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(te(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),r=r.concat(ml(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?LM(e,void 0):n.length=o+1,to(t.eventQueue_,ym(e),r);for(let a=0;a<i.length;a++)xd(i[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function G7(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):bi(`Invalid query segment '${n}' in query '${t}'`)}return e}const Xx=function(t,e){const n=W7(t),i=n.namespace;n.domain==="firebase.com"&&eo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&eo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||az();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new JL(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new ot(n.pathString)}},W7=function(t){let e="",n="",i="",r="",o="",a=!0,u="https",c=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));let m=t.indexOf("/");m===-1&&(m=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(m,g)),m<g&&(r=q7(t.substring(m,g)));const _=G7(t.substring(Math.min(t.length,g)));h=e.indexOf(":"),h>=0?(a=u==="https"||u==="wss",c=parseInt(e.substring(h+1),10)):h=e.length;const S=e.slice(0,h);if(S.toLowerCase()==="localhost")n="localhost";else if(S.split(".").length<=2)n=S;else{const P=e.indexOf(".");i=e.substring(0,P).toLowerCase(),n=e.substring(P+1),o=i}"ns"in _&&(o=_.ns)}return{host:e,port:c,domain:n,subdomain:i,secure:a,scheme:u,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",H7=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let r;const o=new Array(8);for(r=7;r>=0;r--)o[r]=Zx.charAt(n%64),n=Math.floor(n/64);te(n===0,"Cannot push at time == 0");let a=o.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)a+=Zx.charAt(e[r]);return te(a.length===20,"nextPushId: Length should be 20."),a}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Tn(this.snapshot.exportVal())}}class Q7{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return te(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return Ve(this._path)?null:oM(this._path)}get ref(){return new ba(this._repo,this._path)}get _queryIdentifier(){const e=Mx(this._queryParams),n=gS(e);return n==="{}"?"default":n}get _queryObject(){return Mx(this._queryParams)}isEqual(e){if(e=ve(e),!(e instanceof HS))return!1;const n=this._repo===e._repo,i=wS(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+qz(this._path)}}class ba extends HS{constructor(e,n){super(e,n,new SS,!1)}get parent(){const e=lM(this._path);return e===null?null:new ba(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Jy{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ot(e),i=zp(this.ref,e);return new Jy(this._node.getChild(n),i,Ut)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Jy(r,zp(this.ref,i),Ut)))}hasChild(e){const n=new ot(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function v1(t,e){return t=ve(t),t._checkNotDeleted("ref"),e!==void 0?zp(t._root,e):t._root}function zp(t,e){return t=ve(t),De(t._path)===null?R7("child","path",e):jM("child","path",e),new ba(t._repo,cn(t._path,e))}function J7(t,e){t=ve(t),zM("push",t._path),BM("push",e,t._path,!0);const n=GM(t._repo),i=H7(n),r=zp(t,i),o=zp(t,i);let a;return e!=null?a=X7(o,e).then(()=>o):a=Promise.resolve(o),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function X7(t,e){t=ve(t),zM("set",t._path),BM("set",e,t._path,!1);const n=new V_;return V7(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class KS{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new K7("value",this,new Jy(e.snapshotNode,new ba(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Q7(this,e,n):null}matches(e){return e instanceof KS?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Z7(t,e,n,i,r){const o=new Y7(n,void 0),a=new KS(o);return U7(t._repo,t,a),()=>HM(t._repo,t,a)}function e$(t,e,n,i){return Z7(t,"value",e)}function t$(t,e,n){HM(t._repo,t,null)}e7(ba);o7(ba);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$="FIREBASE_DATABASE_EMULATOR_HOST",y1={};let i$=!1;function r$(t,e,n,i){t.repoInfo_=new JL(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function s$(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||eo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hn("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=Xx(o,r),u=a.repoInfo,c;typeof process<"u"&&yx&&(c=yx[n$]),c?(o=`http://${c}?ns=${u.namespace}`,a=Xx(o,r),u=a.repoInfo):a.repoInfo.secure;const h=new yz(t.name,t.options,e);P7("Invalid Firebase Database URL",a),Ve(a.path)||eo("Database URL must point to the root of a Firebase Database (not including a child path).");const m=a$(u,t,h,new vz(t.name,n));return new l$(m,t)}function o$(t,e){const n=y1[e];(!n||n[t.key]!==t)&&eo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),B7(t),delete n[t.key]}function a$(t,e,n,i){let r=y1[e.name];r||(r={},y1[e.name]=r);let o=r[t.toURLString()];return o&&eo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new O7(t,i$,n,i),r[t.toURLString()]=o,o}class l${constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(L7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ba(this._repo,Ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(o$(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&eo("Cannot call "+e+" on a deleted database.")}}function ZM(t=xL(),e){const n=fS(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=DB("database");i&&u$(n,...i)}return n}function u$(t,e,n,i={}){t=ve(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&eo("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&eo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Hv(Hv.OWNER);else if(i.mockUserToken){const a=typeof i.mockUserToken=="string"?i.mockUserToken:gL(i.mockUserToken,t.app.options.projectId);o=new Hv(a)}r$(r,e,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$(t){tz(oo),Zs(new Mr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return s$(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Bi(_x,wx,t),Bi(_x,wx,"esm2017")}Hs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Hs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};c$();function eV(t,e){return function(){return t.apply(e,arguments)}}const{toString:d$}=Object.prototype,{getPrototypeOf:QS}=Object,K_=(t=>e=>{const n=d$.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),e=>K_(e)===t),Q_=t=>e=>typeof e===t,{isArray:Dd}=Array,$p=Q_("undefined");function h$(t){return t!==null&&!$p(t)&&t.constructor!==null&&!$p(t.constructor)&&ir(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const tV=Ur("ArrayBuffer");function f$(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&tV(t.buffer),e}const p$=Q_("string"),ir=Q_("function"),nV=Q_("number"),Y_=t=>t!==null&&typeof t=="object",m$=t=>t===!0||t===!1,Qv=t=>{if(K_(t)!=="object")return!1;const e=QS(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},g$=Ur("Date"),v$=Ur("File"),y$=Ur("Blob"),_$=Ur("FileList"),w$=t=>Y_(t)&&ir(t.pipe),E$=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ir(t.append)&&((e=K_(t))==="formdata"||e==="object"&&ir(t.toString)&&t.toString()==="[object FormData]"))},I$=Ur("URLSearchParams"),[T$,S$,b$,C$]=["ReadableStream","Request","Response","Headers"].map(Ur),A$=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _m(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),Dd(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let u;for(i=0;i<a;i++)u=o[i],e.call(null,t[u],u,t)}}function iV(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const rV=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sV=t=>!$p(t)&&t!==rV;function _1(){const{caseless:t}=sV(this)&&this||{},e={},n=(i,r)=>{const o=t&&iV(e,r)||r;Qv(e[o])&&Qv(i)?e[o]=_1(e[o],i):Qv(i)?e[o]=_1({},i):Dd(i)?e[o]=i.slice():e[o]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&_m(arguments[i],n);return e}const R$=(t,e,n,{allOwnKeys:i}={})=>(_m(e,(r,o)=>{n&&ir(r)?t[o]=eV(r,n):t[o]=r},{allOwnKeys:i}),t),P$=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),k$=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},x$=(t,e,n,i)=>{let r,o,a;const u={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)a=r[o],(!i||i(a,t,e))&&!u[a]&&(e[a]=t[a],u[a]=!0);t=n!==!1&&QS(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},N$=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},D$=t=>{if(!t)return null;if(Dd(t))return t;let e=t.length;if(!nV(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},O$=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&QS(Uint8Array)),L$=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const o=r.value;e.call(t,o[0],o[1])}},M$=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},V$=Ur("HTMLFormElement"),F$=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),e2=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),U$=Ur("RegExp"),oV=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};_m(n,(r,o)=>{let a;(a=e(r,o,t))!==!1&&(i[o]=a||r)}),Object.defineProperties(t,i)},B$=t=>{oV(t,(e,n)=>{if(ir(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(ir(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},j$=(t,e)=>{const n={},i=r=>{r.forEach(o=>{n[o]=!0})};return Dd(t)?i(t):i(String(t).split(e)),n},z$=()=>{},$$=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,$E="abcdefghijklmnopqrstuvwxyz",t2="0123456789",aV={DIGIT:t2,ALPHA:$E,ALPHA_DIGIT:$E+$E.toUpperCase()+t2},q$=(t=16,e=aV.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function G$(t){return!!(t&&ir(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const W$=t=>{const e=new Array(10),n=(i,r)=>{if(Y_(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const o=Dd(i)?[]:{};return _m(i,(a,u)=>{const c=n(a,r+1);!$p(c)&&(o[u]=c)}),e[r]=void 0,o}}return i};return n(t,0)},H$=Ur("AsyncFunction"),K$=t=>t&&(Y_(t)||ir(t))&&ir(t.then)&&ir(t.catch),H={isArray:Dd,isArrayBuffer:tV,isBuffer:h$,isFormData:E$,isArrayBufferView:f$,isString:p$,isNumber:nV,isBoolean:m$,isObject:Y_,isPlainObject:Qv,isReadableStream:T$,isRequest:S$,isResponse:b$,isHeaders:C$,isUndefined:$p,isDate:g$,isFile:v$,isBlob:y$,isRegExp:U$,isFunction:ir,isStream:w$,isURLSearchParams:I$,isTypedArray:O$,isFileList:_$,forEach:_m,merge:_1,extend:R$,trim:A$,stripBOM:P$,inherits:k$,toFlatObject:x$,kindOf:K_,kindOfTest:Ur,endsWith:N$,toArray:D$,forEachEntry:L$,matchAll:M$,isHTMLForm:V$,hasOwnProperty:e2,hasOwnProp:e2,reduceDescriptors:oV,freezeMethods:B$,toObjectSet:j$,toCamelCase:F$,noop:z$,toFiniteNumber:$$,findKey:iV,global:rV,isContextDefined:sV,ALPHABET:aV,generateString:q$,isSpecCompliantForm:G$,toJSONObject:W$,isAsyncFn:H$,isThenable:K$};function Ae(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}H.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const lV=Ae.prototype,uV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{uV[t]={value:t}});Object.defineProperties(Ae,uV);Object.defineProperty(lV,"isAxiosError",{value:!0});Ae.from=(t,e,n,i,r,o)=>{const a=Object.create(lV);return H.toFlatObject(t,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),Ae.call(a,t.message,e,n,i,r),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const Q$=null;function w1(t){return H.isPlainObject(t)||H.isArray(t)}function cV(t){return H.endsWith(t,"[]")?t.slice(0,-2):t}function n2(t,e,n){return t?t.concat(e).map(function(r,o){return r=cV(r),!n&&o?"["+r+"]":r}).join(n?".":""):e}function Y$(t){return H.isArray(t)&&!t.some(w1)}const J$=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function J_(t,e,n){if(!H.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,k){return!H.isUndefined(k[I])});const i=n.metaTokens,r=n.visitor||m,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(r))throw new TypeError("visitor must be a function");function h(P){if(P===null)return"";if(H.isDate(P))return P.toISOString();if(!c&&H.isBlob(P))throw new Ae("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(P)||H.isTypedArray(P)?c&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function m(P,I,k){let E=P;if(P&&!k&&typeof P=="object"){if(H.endsWith(I,"{}"))I=i?I:I.slice(0,-2),P=JSON.stringify(P);else if(H.isArray(P)&&Y$(P)||(H.isFileList(P)||H.endsWith(I,"[]"))&&(E=H.toArray(P)))return I=cV(I),E.forEach(function(A,M){!(H.isUndefined(A)||A===null)&&e.append(a===!0?n2([I],M,o):a===null?I:I+"[]",h(A))}),!1}return w1(P)?!0:(e.append(n2(k,I,o),h(P)),!1)}const g=[],_=Object.assign(J$,{defaultVisitor:m,convertValue:h,isVisitable:w1});function S(P,I){if(!H.isUndefined(P)){if(g.indexOf(P)!==-1)throw Error("Circular reference detected in "+I.join("."));g.push(P),H.forEach(P,function(E,b){(!(H.isUndefined(E)||E===null)&&r.call(e,E,H.isString(b)?b.trim():b,I,_))===!0&&S(E,I?I.concat(b):[b])}),g.pop()}}if(!H.isObject(t))throw new TypeError("data must be an object");return S(t),e}function i2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function YS(t,e){this._pairs=[],t&&J_(t,this,e)}const dV=YS.prototype;dV.append=function(e,n){this._pairs.push([e,n])};dV.toString=function(e){const n=e?function(i){return e.call(this,i,i2)}:i2;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function X$(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hV(t,e,n){if(!e)return t;const i=n&&n.encode||X$,r=n&&n.serialize;let o;if(r?o=r(e,n):o=H.isURLSearchParams(e)?e.toString():new YS(e,n).toString(i),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class r2{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(i){i!==null&&e(i)})}}const fV={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z$=typeof URLSearchParams<"u"?URLSearchParams:YS,eq=typeof FormData<"u"?FormData:null,tq=typeof Blob<"u"?Blob:null,nq={isBrowser:!0,classes:{URLSearchParams:Z$,FormData:eq,Blob:tq},protocols:["http","https","file","blob","url","data"]},JS=typeof window<"u"&&typeof document<"u",iq=(t=>JS&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),rq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sq=JS&&window.location.href||"http://localhost",oq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:JS,hasStandardBrowserEnv:iq,hasStandardBrowserWebWorkerEnv:rq,origin:sq},Symbol.toStringTag,{value:"Module"})),Dr={...oq,...nq};function aq(t,e){return J_(t,new Dr.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,o){return Dr.isNode&&H.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function lq(t){return H.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function uq(t){const e={},n=Object.keys(t);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],e[o]=t[o];return e}function pV(t){function e(n,i,r,o){let a=n[o++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),c=o>=n.length;return a=!a&&H.isArray(r)?r.length:a,c?(H.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!u):((!r[a]||!H.isObject(r[a]))&&(r[a]=[]),e(n,i,r[a],o)&&H.isArray(r[a])&&(r[a]=uq(r[a])),!u)}if(H.isFormData(t)&&H.isFunction(t.entries)){const n={};return H.forEachEntry(t,(i,r)=>{e(lq(i),r,n,0)}),n}return null}function cq(t,e,n){if(H.isString(t))try{return(e||JSON.parse)(t),H.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const wm={transitional:fV,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,o=H.isObject(e);if(o&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return r?JSON.stringify(pV(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return aq(e,this.formSerializer).toString();if((u=H.isFileList(e))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return J_(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),cq(e)):e}],transformResponse:[function(e){const n=this.transitional||wm.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(i&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?Ae.from(u,Ae.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dr.classes.FormData,Blob:Dr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],t=>{wm.headers[t]={}});const dq=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hq=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!n||e[n]&&dq[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},s2=Symbol("internals");function Ef(t){return t&&String(t).trim().toLowerCase()}function Yv(t){return t===!1||t==null?t:H.isArray(t)?t.map(Yv):String(t)}function fq(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const pq=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function qE(t,e,n,i,r){if(H.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!H.isString(e)){if(H.isString(i))return e.indexOf(i)!==-1;if(H.isRegExp(i))return i.test(e)}}function mq(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function gq(t,e){const n=H.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,o,a){return this[i].call(this,e,r,o,a)},configurable:!0})})}class Ci{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function o(u,c,h){const m=Ef(c);if(!m)throw new Error("header name must be a non-empty string");const g=H.findKey(r,m);(!g||r[g]===void 0||h===!0||h===void 0&&r[g]!==!1)&&(r[g||c]=Yv(u))}const a=(u,c)=>H.forEach(u,(h,m)=>o(h,m,c));if(H.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(H.isString(e)&&(e=e.trim())&&!pq(e))a(hq(e),n);else if(H.isHeaders(e))for(const[u,c]of e.entries())o(c,u,i);else e!=null&&o(n,e,i);return this}get(e,n){if(e=Ef(e),e){const i=H.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return fq(r);if(H.isFunction(n))return n.call(this,r,i);if(H.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ef(e),e){const i=H.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||qE(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function o(a){if(a=Ef(a),a){const u=H.findKey(i,a);u&&(!n||qE(i,i[u],u,n))&&(delete i[u],r=!0)}}return H.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const o=n[i];(!e||qE(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const n=this,i={};return H.forEach(this,(r,o)=>{const a=H.findKey(i,o);if(a){n[a]=Yv(r),delete n[o];return}const u=e?mq(o):String(o).trim();u!==o&&delete n[o],n[u]=Yv(r),i[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return H.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&H.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[s2]=this[s2]={accessors:{}}).accessors,r=this.prototype;function o(a){const u=Ef(a);i[u]||(gq(r,a),i[u]=!0)}return H.isArray(e)?e.forEach(o):o(e),this}}Ci.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(Ci.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});H.freezeMethods(Ci);function GE(t,e){const n=this||wm,i=e||n,r=Ci.from(i.headers);let o=i.data;return H.forEach(t,function(u){o=u.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function mV(t){return!!(t&&t.__CANCEL__)}function Od(t,e,n){Ae.call(this,t??"canceled",Ae.ERR_CANCELED,e,n),this.name="CanceledError"}H.inherits(Od,Ae,{__CANCEL__:!0});function gV(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Ae("Request failed with status code "+n.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function vq(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function yq(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,o=0,a;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),m=i[o];a||(a=h),n[r]=c,i[r]=h;let g=o,_=0;for(;g!==r;)_+=n[g++],g=g%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),h-a<e)return;const S=m&&h-m;return S?Math.round(_*1e3/S):void 0}}function _q(t,e){let n=0;const i=1e3/e;let r=null;return function(){const a=this===!0,u=Date.now();if(a||u-n>i)return r&&(clearTimeout(r),r=null),n=u,t.apply(null,arguments);r||(r=setTimeout(()=>(r=null,n=Date.now(),t.apply(null,arguments)),i-(u-n)))}}const Xy=(t,e,n=3)=>{let i=0;const r=yq(50,250);return _q(o=>{const a=o.loaded,u=o.lengthComputable?o.total:void 0,c=a-i,h=r(c),m=a<=u;i=a;const g={loaded:a,total:u,progress:u?a/u:void 0,bytes:c,rate:h||void 0,estimated:h&&u&&m?(u-a)/h:void 0,event:o,lengthComputable:u!=null};g[e?"download":"upload"]=!0,t(g)},n)},wq=Dr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(o){let a=o;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(a){const u=H.isString(a)?r(a):a;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}(),Eq=Dr.hasStandardBrowserEnv?{write(t,e,n,i,r,o){const a=[t+"="+encodeURIComponent(e)];H.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),H.isString(i)&&a.push("path="+i),H.isString(r)&&a.push("domain="+r),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Iq(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Tq(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function vV(t,e){return t&&!Iq(e)?Tq(t,e):e}const o2=t=>t instanceof Ci?{...t}:t;function Ll(t,e){e=e||{};const n={};function i(h,m,g){return H.isPlainObject(h)&&H.isPlainObject(m)?H.merge.call({caseless:g},h,m):H.isPlainObject(m)?H.merge({},m):H.isArray(m)?m.slice():m}function r(h,m,g){if(H.isUndefined(m)){if(!H.isUndefined(h))return i(void 0,h,g)}else return i(h,m,g)}function o(h,m){if(!H.isUndefined(m))return i(void 0,m)}function a(h,m){if(H.isUndefined(m)){if(!H.isUndefined(h))return i(void 0,h)}else return i(void 0,m)}function u(h,m,g){if(g in e)return i(h,m);if(g in t)return i(void 0,h)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(h,m)=>r(o2(h),o2(m),!0)};return H.forEach(Object.keys(Object.assign({},t,e)),function(m){const g=c[m]||r,_=g(t[m],e[m],m);H.isUndefined(_)&&g!==u||(n[m]=_)}),n}const yV=t=>{const e=Ll({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:u}=e;e.headers=a=Ci.from(a),e.url=hV(vV(e.baseURL,e.url),t.params,t.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(H.isFormData(n)){if(Dr.hasStandardBrowserEnv||Dr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[h,...m]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...m].join("; "))}}if(Dr.hasStandardBrowserEnv&&(i&&H.isFunction(i)&&(i=i(e)),i||i!==!1&&wq(e.url))){const h=r&&o&&Eq.read(o);h&&a.set(r,h)}return e},Sq=typeof XMLHttpRequest<"u",bq=Sq&&function(t){return new Promise(function(n,i){const r=yV(t);let o=r.data;const a=Ci.from(r.headers).normalize();let{responseType:u}=r,c;function h(){r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout;function g(){if(!m)return;const S=Ci.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),I={data:!u||u==="text"||u==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:S,config:t,request:m};gV(function(E){n(E),h()},function(E){i(E),h()},I),m=null}"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(g)},m.onabort=function(){m&&(i(new Ae("Request aborted",Ae.ECONNABORTED,r,m)),m=null)},m.onerror=function(){i(new Ae("Network Error",Ae.ERR_NETWORK,r,m)),m=null},m.ontimeout=function(){let P=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const I=r.transitional||fV;r.timeoutErrorMessage&&(P=r.timeoutErrorMessage),i(new Ae(P,I.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,r,m)),m=null},o===void 0&&a.setContentType(null),"setRequestHeader"in m&&H.forEach(a.toJSON(),function(P,I){m.setRequestHeader(I,P)}),H.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),u&&u!=="json"&&(m.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&m.addEventListener("progress",Xy(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",Xy(r.onUploadProgress)),(r.cancelToken||r.signal)&&(c=S=>{m&&(i(!S||S.type?new Od(null,t,m):S),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const _=vq(r.url);if(_&&Dr.protocols.indexOf(_)===-1){i(new Ae("Unsupported protocol "+_+":",Ae.ERR_BAD_REQUEST,t));return}m.send(o||null)})},Cq=(t,e)=>{let n=new AbortController,i;const r=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;n.abort(h instanceof Ae?h:new Od(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{r(new Ae(`timeout ${e} of ms exceeded`,Ae.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",r):c.unsubscribe(r))}),t=null)};t.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",r));const{signal:u}=n;return u.unsubscribe=a,[u,()=>{o&&clearTimeout(o),o=null}]},Aq=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},Rq=async function*(t,e,n){for await(const i of t)yield*Aq(ArrayBuffer.isView(i)?i:await n(String(i)),e)},a2=(t,e,n,i,r)=>{const o=Rq(t,e,r);let a=0;return new ReadableStream({type:"bytes",async pull(u){const{done:c,value:h}=await o.next();if(c){u.close(),i();return}let m=h.byteLength;n&&n(a+=m),u.enqueue(new Uint8Array(h))},cancel(u){return i(u),o.return()}},{highWaterMark:2})},l2=(t,e)=>{const n=t!=null;return i=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:i}))},X_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_V=X_&&typeof ReadableStream=="function",E1=X_&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Pq=_V&&(()=>{let t=!1;const e=new Request(Dr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),u2=64*1024,I1=_V&&!!(()=>{try{return H.isReadableStream(new Response("").body)}catch{}})(),Zy={stream:I1&&(t=>t.body)};X_&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Zy[e]&&(Zy[e]=H.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new Ae(`Response type '${e}' is not supported`,Ae.ERR_NOT_SUPPORT,i)})})})(new Response);const kq=async t=>{if(t==null)return 0;if(H.isBlob(t))return t.size;if(H.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(H.isArrayBufferView(t))return t.byteLength;if(H.isURLSearchParams(t)&&(t=t+""),H.isString(t))return(await E1(t)).byteLength},xq=async(t,e)=>{const n=H.toFiniteNumber(t.getContentLength());return n??kq(e)},Nq=X_&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:o,timeout:a,onDownloadProgress:u,onUploadProgress:c,responseType:h,headers:m,withCredentials:g="same-origin",fetchOptions:_}=yV(t);h=h?(h+"").toLowerCase():"text";let[S,P]=r||o||a?Cq([r,o],a):[],I,k;const E=()=>{!I&&setTimeout(()=>{S&&S.unsubscribe()}),I=!0};let b;try{if(c&&Pq&&n!=="get"&&n!=="head"&&(b=await xq(m,i))!==0){let j=new Request(e,{method:"POST",body:i,duplex:"half"}),D;H.isFormData(i)&&(D=j.headers.get("content-type"))&&m.setContentType(D),j.body&&(i=a2(j.body,u2,l2(b,Xy(c)),null,E1))}H.isString(g)||(g=g?"cors":"omit"),k=new Request(e,{..._,signal:S,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:i,duplex:"half",withCredentials:g});let A=await fetch(k);const M=I1&&(h==="stream"||h==="response");if(I1&&(u||M)){const j={};["status","statusText","headers"].forEach(C=>{j[C]=A[C]});const D=H.toFiniteNumber(A.headers.get("content-length"));A=new Response(a2(A.body,u2,u&&l2(D,Xy(u,!0)),M&&E,E1),j)}h=h||"text";let B=await Zy[H.findKey(Zy,h)||"text"](A,t);return!M&&E(),P&&P(),await new Promise((j,D)=>{gV(j,D,{data:B,headers:Ci.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:k})})}catch(A){throw E(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,t,k),{cause:A.cause||A}):Ae.from(A,A&&A.code,t,k)}}),T1={http:Q$,xhr:bq,fetch:Nq};H.forEach(T1,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const c2=t=>`- ${t}`,Dq=t=>H.isFunction(t)||t===null||t===!1,wV={getAdapter:t=>{t=H.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let o=0;o<e;o++){n=t[o];let a;if(i=n,!Dq(n)&&(i=T1[(a=String(n)).toLowerCase()],i===void 0))throw new Ae(`Unknown adapter '${a}'`);if(i)break;r[a||"#"+o]=i}if(!i){const o=Object.entries(r).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(c2).join(`
`):" "+c2(o[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:T1};function WE(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Od(null,t)}function d2(t){return WE(t),t.headers=Ci.from(t.headers),t.data=GE.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),wV.getAdapter(t.adapter||wm.adapter)(t).then(function(i){return WE(t),i.data=GE.call(t,t.transformResponse,i),i.headers=Ci.from(i.headers),i},function(i){return mV(i)||(WE(t),i&&i.response&&(i.response.data=GE.call(t,t.transformResponse,i.response),i.response.headers=Ci.from(i.response.headers))),Promise.reject(i)})}const EV="1.7.2",XS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{XS[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const h2={};XS.transitional=function(e,n,i){function r(o,a){return"[Axios v"+EV+"] Transitional option '"+o+"'"+a+(i?". "+i:"")}return(o,a,u)=>{if(e===!1)throw new Ae(r(a," has been removed"+(n?" in "+n:"")),Ae.ERR_DEPRECATED);return n&&!h2[a]&&(h2[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,u):!0}};function Oq(t,e,n){if(typeof t!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const o=i[r],a=e[o];if(a){const u=t[o],c=u===void 0||a(u,o,t);if(c!==!0)throw new Ae("option "+o+" must be "+c,Ae.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ae("Unknown option "+o,Ae.ERR_BAD_OPTION)}}const S1={assertOptions:Oq,validators:XS},Oo=S1.validators;class El{constructor(e){this.defaults=e,this.interceptors={request:new r2,response:new r2}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ll(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:o}=n;i!==void 0&&S1.assertOptions(i,{silentJSONParsing:Oo.transitional(Oo.boolean),forcedJSONParsing:Oo.transitional(Oo.boolean),clarifyTimeoutError:Oo.transitional(Oo.boolean)},!1),r!=null&&(H.isFunction(r)?n.paramsSerializer={serialize:r}:S1.assertOptions(r,{encode:Oo.function,serialize:Oo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&H.merge(o.common,o[n.method]);o&&H.forEach(["delete","get","head","post","put","patch","common"],P=>{delete o[P]}),n.headers=Ci.concat(a,o);const u=[];let c=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(n)===!1||(c=c&&I.synchronous,u.unshift(I.fulfilled,I.rejected))});const h=[];this.interceptors.response.forEach(function(I){h.push(I.fulfilled,I.rejected)});let m,g=0,_;if(!c){const P=[d2.bind(this),void 0];for(P.unshift.apply(P,u),P.push.apply(P,h),_=P.length,m=Promise.resolve(n);g<_;)m=m.then(P[g++],P[g++]);return m}_=u.length;let S=n;for(g=0;g<_;){const P=u[g++],I=u[g++];try{S=P(S)}catch(k){I.call(this,k);break}}try{m=d2.call(this,S)}catch(P){return Promise.reject(P)}for(g=0,_=h.length;g<_;)m=m.then(h[g++],h[g++]);return m}getUri(e){e=Ll(this.defaults,e);const n=vV(e.baseURL,e.url);return hV(n,e.params,e.paramsSerializer)}}H.forEach(["delete","get","head","options"],function(e){El.prototype[e]=function(n,i){return this.request(Ll(i||{},{method:e,url:n,data:(i||{}).data}))}});H.forEach(["post","put","patch"],function(e){function n(i){return function(o,a,u){return this.request(Ll(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}El.prototype[e]=n(),El.prototype[e+"Form"]=n(!0)});class ZS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(r=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](r);i._listeners=null}),this.promise.then=r=>{let o;const a=new Promise(u=>{i.subscribe(u),o=u}).then(r);return a.cancel=function(){i.unsubscribe(o)},a},e(function(o,a,u){i.reason||(i.reason=new Od(o,a,u),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new ZS(function(r){e=r}),cancel:e}}}function Lq(t){return function(n){return t.apply(null,n)}}function Mq(t){return H.isObject(t)&&t.isAxiosError===!0}const b1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(b1).forEach(([t,e])=>{b1[e]=t});function IV(t){const e=new El(t),n=eV(El.prototype.request,e);return H.extend(n,El.prototype,e,{allOwnKeys:!0}),H.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return IV(Ll(t,r))},n}const on=IV(wm);on.Axios=El;on.CanceledError=Od;on.CancelToken=ZS;on.isCancel=mV;on.VERSION=EV;on.toFormData=J_;on.AxiosError=Ae;on.Cancel=on.CanceledError;on.all=function(e){return Promise.all(e)};on.spread=Lq;on.isAxiosError=Mq;on.mergeConfig=Ll;on.AxiosHeaders=Ci;on.formToJSON=t=>pV(H.isHTMLForm(t)?new FormData(t):t);on.getAdapter=wV.getAdapter;on.HttpStatusCode=b1;on.default=on;const TV=async t=>{console.log("fetching from pokemon api");let e;return t?e=t:e=Math.floor(Math.random()*251)+1,(await on.get(`https://pokeapi.co/api/v2/pokemon/${e}`)).data},Vq=async t=>{const e=localStorage.getItem(`pokemon_${t}`);if(e)return console.log("fetching from local storage"),JSON.parse(e);const n=await TV(t);try{localStorage.setItem(`pokemon_${t}`,JSON.stringify(n))}catch{console.log("Local Storage is full, Please empty data")}return n};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(e,n){this._delegate=e,this.firebase=n,Op(e,new Mr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),mS(this._delegate)))}_getService(e,n=ca){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=ca){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Op(this._delegate,e)}_addOrOverwriteComponent(e){RL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uq={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},f2=new Jl("app-compat","Firebase",Uq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t){const e={},n={__esModule:!0,initializeApp:o,app:r,registerVersion:Bi,setLogLevel:DL,onLog:NL,apps:null,SDK_VERSION:oo,INTERNAL:{registerComponent:u,removeApp:i,useAsService:c,modularAPIs:ez}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(h){delete e[h]}function r(h){if(h=h||ca,!Lr(e,h))throw f2.create("no-app",{appName:h});return e[h]}r.App=t;function o(h,m={}){const g=pS(h,m);if(Lr(e,g.name))return e[g.name];const _=new t(g,n);return e[g.name]=_,_}function a(){return Object.keys(e).map(h=>e[h])}function u(h){const m=h.name,g=m.replace("-compat","");if(Zs(h)&&h.type==="PUBLIC"){const _=(S=r())=>{if(typeof S[g]!="function")throw f2.create("invalid-app-argument",{appName:m});return S[g]()};h.serviceProps!==void 0&&kp(_,h.serviceProps),n[g]=_,t.prototype[g]=function(...S){return this._getService.bind(this,m).apply(this,h.multipleInstances?S:[])}}return h.type==="PUBLIC"?n[g]:null}function c(h,m){return m==="serverAuth"?null:m}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(){const t=Bq(Fq);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:SV,extendNamespace:e,createSubscribe:TL,ErrorFactory:Jl,deepExtend:kp});function e(n){kp(t,n)}return t}const jq=SV();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new fm("@firebase/app-compat"),zq="@firebase/app-compat",$q="0.2.35";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(t){Bi(zq,$q,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(vL()&&self.firebase!==void 0){p2.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&p2.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const pe=jq;qq();var Gq="firebase",Wq="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pe.registerVersion(Gq,Wq,"app-compat");function eb(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}const If={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function bV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Kq=Hq,Qq=bV,CV=new Jl("auth","Firebase",bV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new fm("@firebase/auth");function Yq(t,...e){e_.logLevel<=Ne.WARN&&e_.warn(`Auth (${oo}): ${t}`,...e)}function Jv(t,...e){e_.logLevel<=Ne.ERROR&&e_.error(`Auth (${oo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw nb(t,...e)}function hn(t,...e){return nb(t,...e)}function tb(t,e,n){const i=Object.assign(Object.assign({},Qq()),{[e]:n});return new Jl("auth","Firebase",i).create(e,{appName:t.name})}function bn(t){return tb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ld(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Bn(t,"argument-error"),tb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nb(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return CV.create(t,...e)}function ee(t,e,...n){if(!t)throw nb(e,...n)}function ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jv(e),new Error(e)}function Vr(t,e){t||ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ib(){return m2()==="http:"||m2()==="https:"}function m2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ib()||yL()||"connection"in navigator)?navigator.onLine:!0}function Xq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vr(n>e,"Short delay should be less than long delay!"),this.isMobile=lS()||F_()}get(){return Jq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t,e){Vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=new Em(3e4,6e4);function zt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $t(t,e,n,i,r={}){return RV(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=Xl(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),AV.fetch()(PV(t,t.config.apiHost,n,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},o))})}async function RV(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Zq),e);try{const r=new nG(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Vf(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vf(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Vf(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Vf(t,"user-disabled",a);const m=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw tb(t,m,h);Bn(t,m)}}catch(r){if(r instanceof ii)throw r;Bn(t,"network-request-failed",{message:String(r)})}}async function ao(t,e,n,i,r={}){const o=await $t(t,e,n,i,r);return"mfaPendingCredential"in o&&Bn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function PV(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?rb(t.config,r):`${t.config.apiScheme}://${r}`}function tG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nG{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(hn(this.auth,"network-request-failed")),eG.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=hn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){return t!==void 0&&t.getResponse!==void 0}function v2(t){return t!==void 0&&t.enterprise!==void 0}class iG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tG(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rG(t){return(await $t(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function sG(t,e){return $t(t,"GET","/v2/recaptchaConfig",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oG(t,e){return $t(t,"POST","/v1/accounts:delete",e)}async function aG(t,e){return $t(t,"POST","/v1/accounts:update",e)}async function kV(t,e){return $t(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lG(t,e=!1){const n=ve(t),i=await n.getIdToken(e),r=Z_(i);ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:ip(HE(r.auth_time)),issuedAtTime:ip(HE(r.iat)),expirationTime:ip(HE(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function HE(t){return Number(t)*1e3}function Z_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Jv("JWT malformed, contained fewer than 3 sections"),null;try{const r=My(n);return r?JSON.parse(r):(Jv("Failed to decode base64 JWT payload"),null)}catch(r){return Jv("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function y2(t){const e=Z_(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ii&&uG(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function uG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ip(this.lastLoginAt),this.creationTime=ip(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await no(t,kV(n,{idToken:i}));ee(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?xV(o.providerUserInfo):[],u=hG(t.providerData,a),c=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),m=c?h:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new C1(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function dG(t){const e=ve(t);await Gp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hG(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function xV(t){return t.map(e=>{var{providerId:n}=e,i=eb(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fG(t,e){const n=await RV(t,{},async()=>{const i=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=PV(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",AV.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pG(t,e){return $t(t,"POST","/v2/accounts:revokeToken",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=y2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await fG(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new Wc;return i&&(ee(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ee(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(ee(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wc,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $s{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=eb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new C1(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await no(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lG(this,e)}reload(){return dG(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $s(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Gp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(bn(this.auth));const e=await this.getIdToken();return await no(this,oG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,a,u,c,h,m;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(r=n.email)!==null&&r!==void 0?r:void 0,S=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,P=(a=n.photoURL)!==null&&a!==void 0?a:void 0,I=(u=n.tenantId)!==null&&u!==void 0?u:void 0,k=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(h=n.createdAt)!==null&&h!==void 0?h:void 0,b=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:A,emailVerified:M,isAnonymous:B,providerData:j,stsTokenManager:D}=n;ee(A&&D,e,"internal-error");const C=Wc.fromJSON(this.name,D);ee(typeof A=="string",e,"internal-error"),Lo(g,e.name),Lo(_,e.name),ee(typeof M=="boolean",e,"internal-error"),ee(typeof B=="boolean",e,"internal-error"),Lo(S,e.name),Lo(P,e.name),Lo(I,e.name),Lo(k,e.name),Lo(E,e.name),Lo(b,e.name);const L=new $s({uid:A,auth:e,email:_,emailVerified:M,displayName:g,isAnonymous:B,photoURL:P,phoneNumber:S,tenantId:I,stsTokenManager:C,createdAt:E,lastLoginAt:b});return j&&Array.isArray(j)&&(L.providerData=j.map(F=>Object.assign({},F))),k&&(L._redirectEventId=k),L}static async _fromIdTokenResponse(e,n,i=!1){const r=new Wc;r.updateFromServerResponse(n);const o=new $s({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Gp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ee(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?xV(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Wc;u.updateFromIdToken(i);const c=new $s({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new C1(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new Map;function Fi(t){Vr(t instanceof Function,"Expected a class definition");let e=_2.get(t);return e?(Vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NV.type="NONE";const dd=NV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t,e,n){return`firebase:${t}:${e}:${n}`}class Hc{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Il(this.userKey,r.apiKey,o),this.fullPersistenceKey=Il("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$s._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Hc(Fi(dd),e,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=r[0]||Fi(dd);const a=Il(i,e.config.apiKey,e.name);let u=null;for(const h of n)try{const m=await h._get(a);if(m){const g=$s._fromJSON(e,m);h!==o&&(u=g),o=h;break}}catch{}const c=r.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Hc(o,e,i):(o=c[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(a)}catch{}})),new Hc(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MV(e))return"Blackberry";if(VV(e))return"Webos";if(sb(e))return"Safari";if((e.includes("chrome/")||OV(e))&&!e.includes("edge/"))return"Chrome";if(Im(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function DV(t=St()){return/firefox\//i.test(t)}function sb(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OV(t=St()){return/crios\//i.test(t)}function LV(t=St()){return/iemobile/i.test(t)}function Im(t=St()){return/android/i.test(t)}function MV(t=St()){return/blackberry/i.test(t)}function VV(t=St()){return/webos/i.test(t)}function Md(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mG(t=St()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function gG(t=St()){var e;return Md(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vG(){return _L()&&document.documentMode===10}function FV(t=St()){return Md(t)||Im(t)||VV(t)||MV(t)||/windows phone/i.test(t)||LV(t)}function yG(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t,e=[]){let n;switch(t){case"Browser":n=w2(St());break;case"Worker":n=`${w2(St())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const c=e(o);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wG(t,e={}){return $t(t,"GET","/v2/passwordPolicy",zt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EG=6;class IG{constructor(e){var n,i,r,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:EG,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E2(this),this.idTokenSubscription=new E2(this),this.beforeStateQueue=new _G(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Hc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kV(this,{idToken:e}),i=await $s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ft(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(r=c.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Xq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(bn(this));const n=e?ve(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wG(this),n=new IG(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await pG(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fi(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Hc.create(this,[Fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Yq(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Bt(t){return ve(t)}class E2{constructor(e){this.auth=e,this.observer=null,this.addObserver=TL(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SG(t){Tm=t}function ob(t){return Tm.loadJS(t)}function bG(){return Tm.recaptchaV2Script}function CG(){return Tm.recaptchaEnterpriseScript}function AG(){return Tm.gapiScript}function BV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const RG="recaptcha-enterprise",PG="NO_RECAPTCHA";class kG{constructor(e){this.type=RG,this.auth=Bt(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{sG(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new iG(c);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,a(h.siteKey)}}).catch(c=>{u(c)})})}function r(o,a,u){const c=window.grecaptcha;v2(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(h=>{a(h)}).catch(()=>{a(PG)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{i(this.auth).then(u=>{if(!n&&v2(window.grecaptcha))r(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CG();c.length!==0&&(c+=u),ob(c).then(()=>{r(u,o,a)}).catch(h=>{a(h)})}}).catch(u=>{a(u)})})}}async function I2(t,e,n,i=!1){const r=new kG(t);let o;try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Wp(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await I2(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await I2(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}function xG(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function NG(t,e,n){const i=Bt(t);ee(i._canInitEmulator,i,"emulator-config-failed"),ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),o=jV(e),{host:a,port:u}=DG(e),c=u===null?"":`:${u}`;i.config.emulator={url:`${o}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||OG()}function jV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DG(t){const e=jV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:T2(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:T2(a)}}}function T2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OG(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,n){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e){return $t(t,"POST","/v1/accounts:resetPassword",zt(t,e))}async function LG(t,e){return $t(t,"POST","/v1/accounts:update",e)}async function MG(t,e){return $t(t,"POST","/v1/accounts:signUp",e)}async function VG(t,e){return $t(t,"POST","/v1/accounts:update",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FG(t,e){return ao(t,"POST","/v1/accounts:signInWithPassword",zt(t,e))}async function ew(t,e){return $t(t,"POST","/v1/accounts:sendOobCode",zt(t,e))}async function UG(t,e){return ew(t,e)}async function BG(t,e){return ew(t,e)}async function jG(t,e){return ew(t,e)}async function zG(t,e){return ew(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $G(t,e){return ao(t,"POST","/v1/accounts:signInWithEmailLink",zt(t,e))}async function qG(t,e){return ao(t,"POST","/v1/accounts:signInWithEmailLink",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends Vd{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Hp(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Hp(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wp(e,n,"signInWithPassword",FG);case"emailLink":return $G(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wp(e,i,"signUpPassword",MG);case"emailLink":return qG(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t,e){return ao(t,"POST","/v1/accounts:signInWithIdp",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG="http://localhost";class gs extends Vd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=eb(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new gs(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ks(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ks(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ks(e,n)}buildRequest(){const e={requestUri:GG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WG(t,e){return $t(t,"POST","/v1/accounts:sendVerificationCode",zt(t,e))}async function HG(t,e){return ao(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,e))}async function KG(t,e){const n=await ao(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,e));if(n.temporaryProof)throw Vf(t,"account-exists-with-different-credential",n);return n}const QG={USER_NOT_FOUND:"user-not-found"};async function YG(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ao(t,"POST","/v1/accounts:signInWithPhoneNumber",zt(t,n),QG)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Vd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Tl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Tl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return HG(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return KG(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return YG(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:o}=e;return!i&&!n&&!r&&!o?null:new Tl({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XG(t){const e=Lc(Lf(t)).link,n=e?Lc(Lf(e)).deep_link_id:null,i=Lc(Lf(t)).deep_link_id;return(i?Lc(Lf(i)).link:null)||i||n||e||t}class tw{constructor(e){var n,i,r,o,a,u;const c=Lc(Lf(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,m=(i=c.oobCode)!==null&&i!==void 0?i:null,g=JG((r=c.mode)!==null&&r!==void 0?r:null);ee(h&&m&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=m,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=XG(e);try{return new tw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(e,n){return Hp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=tw.parseLink(n);return ee(i,"argument-error"),Hp._fromEmailAndCode(e,i.code,i.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends lo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kc extends Fd{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ee("providerId"in n&&"signInMethod"in n,"argument-error"),gs._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ee(e.idToken||e.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Kc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Kc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:o,nonce:a,providerId:u}=e;if(!i&&!r&&!n&&!o||!u)return null;try{return new Kc(u)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Fd{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gs._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return rs.credential(n,i)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Fd{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZG="http://localhost";class hd extends Vd{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ks(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ks(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ks(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:o}=n;return!i||!r||!o||i!==r?null:new hd(i,o)}static _create(e,n){return new hd(e,n)}buildRequest(){return{requestUri:ZG,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW="saml.";class t_ extends lo{constructor(e){ee(e.startsWith(eW),"argument-error"),super(e)}static credentialFromResult(e){return t_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return t_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=hd.fromJSON(e);return ee(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return hd._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Fd{constructor(){super("twitter.com")}static credential(e,n){return gs._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return os.credential(n,i)}catch{return null}}}os.TWITTER_SIGN_IN_METHOD="twitter.com";os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $V(t,e){return ao(t,"POST","/v1/accounts:signUp",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await $s._fromIdTokenResponse(e,i,r),a=S2(i);return new or({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=S2(i);return new or({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function S2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tW(t){var e;if(Ft(t.app))return Promise.reject(bn(t));const n=Bt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new or({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await $V(n,{returnSecureToken:!0}),r=await or._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_ extends ii{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n_.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new n_(e,n,i,r)}}function qV(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?n_._fromErrorAndOperation(t,o,e,i):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nW(t,e){const n=ve(t);await nw(!0,n,e);const{providerUserInfo:i}=await aG(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=GV(i||[]);return n.providerData=n.providerData.filter(o=>r.has(o.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ab(t,e,n=!1){const i=await no(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return or._forOperation(t,"link",i)}async function nw(t,e,n){await Gp(e);const i=GV(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";ee(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(t,e,n=!1){const{auth:i}=t;if(Ft(i.app))return Promise.reject(bn(i));const r="reauthenticate";try{const o=await no(t,qV(i,r,e,t),n);ee(o.idToken,i,"internal-error");const a=Z_(o.idToken);ee(a,i,"internal-error");const{sub:u}=a;return ee(t.uid===u,i,"user-mismatch"),or._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Bn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e,n=!1){if(Ft(t.app))return Promise.reject(bn(t));const i="signIn",r=await qV(t,i,e),o=await or._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function iw(t,e){return HV(Bt(t),e)}async function KV(t,e){const n=ve(t);return await nw(!1,n,e.providerId),ab(n,e)}async function QV(t,e){return WV(ve(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iW(t,e){return ao(t,"POST","/v1/accounts:signInWithCustomToken",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rW(t,e){if(Ft(t.app))return Promise.reject(bn(t));const n=Bt(t),i=await iW(n,{token:e,returnSecureToken:!0}),r=await or._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?lb._fromServerResponse(e,n):"totpInfo"in n?ub._fromServerResponse(e,n):Bn(e,"internal-error")}}class lb extends Sm{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new lb(n)}}class ub extends Sm{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new ub(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e,n){var i;ee(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),ee(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ee(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ee(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(t){const e=Bt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sW(t,e,n){const i=Bt(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&rw(i,r,n),await Wp(i,r,"getOobCode",BG)}async function oW(t,e,n){await zV(ve(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cb(t),i})}async function aW(t,e){await VG(ve(t),{oobCode:e})}async function YV(t,e){const n=ve(t),i=await zV(n,{oobCode:e}),r=i.requestType;switch(ee(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(i.mfaInfo,n,"internal-error");default:ee(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=Sm._fromServerResponse(Bt(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:o},operation:r}}async function lW(t,e){const{data:n}=await YV(ve(t),e);return n.email}async function uW(t,e,n){if(Ft(t.app))return Promise.reject(bn(t));const i=Bt(t),a=await Wp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$V).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&cb(t),c}),u=await or._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function cW(t,e,n){return Ft(t.app)?Promise.reject(bn(t)):iw(ve(t),Ca.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cb(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dW(t,e,n){const i=Bt(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(a,u){ee(u.handleCodeInApp,i,"argument-error"),u&&rw(i,a,u)}o(r,n),await Wp(i,r,"getOobCode",jG)}function hW(t,e){const n=tw.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function fW(t,e,n){if(Ft(t.app))return Promise.reject(bn(t));const i=ve(t),r=Ca.credentialWithLink(e,n||qp());return ee(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),iw(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pW(t,e){return $t(t,"POST","/v1/accounts:createAuthUri",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mW(t,e){const n=ib()?qp():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await pW(ve(t),i);return r||[]}async function gW(t,e){const n=ve(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&rw(n.auth,r,e);const{email:o}=await UG(n.auth,r);o!==t.email&&await t.reload()}async function vW(t,e,n){const i=ve(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&rw(i.auth,o,n);const{email:a}=await zG(i.auth,o);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yW(t,e){return $t(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _W(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ve(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await no(i,yW(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const u=i.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=i.displayName,u.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function wW(t,e){const n=ve(t);return Ft(n.auth.app)?Promise.reject(bn(n.auth)):JV(n,e,null)}function EW(t,e){return JV(ve(t),null,e)}async function JV(t,e,n){const{auth:i}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const a=await no(t,LG(i,o));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IW(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const a=(n=(e=Z_(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(a){const u=a!=="anonymous"&&a!=="custom"?a:null;return new Qc(o,u)}}if(!i)return null;switch(i){case"facebook.com":return new TW(o,r);case"github.com":return new SW(o,r);case"google.com":return new bW(o,r);case"twitter.com":return new CW(o,r,t.screenName||null);case"custom":case"anonymous":return new Qc(o,null);default:return new Qc(o,i,r)}}class Qc{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class XV extends Qc{constructor(e,n,i,r){super(e,n,i),this.username=r}}class TW extends Qc{constructor(e,n){super(e,"facebook.com",n)}}class SW extends XV{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class bW extends Qc{constructor(e,n){super(e,"google.com",n)}}class CW extends XV{constructor(e,n,i){super(e,"twitter.com",n,i)}}function AW(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:IW(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new gl("enroll",e,n)}static _fromMfaPendingCredential(e){return new gl("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return gl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return gl._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=Bt(e),r=n.customData._serverResponse,o=(r.mfaInfo||[]).map(u=>Sm._fromServerResponse(i,u));ee(r.mfaPendingCredential,i,"internal-error");const a=gl._fromMfaPendingCredential(r.mfaPendingCredential);return new db(a,o,async u=>{const c=await u._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const h=Object.assign(Object.assign({},r),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const m=await or._fromIdTokenResponse(i,n.operationType,h);return await i._updateCurrentUser(m.user),m;case"reauthenticate":return ee(n.user,i,"internal-error"),or._forOperation(n.user,n.operationType,h);default:Bn(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function RW(t,e){var n;const i=ve(t),r=e;return ee(e.customData.operationType,i,"argument-error"),ee((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),db._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(t,e){return $t(t,"POST","/v2/accounts/mfaEnrollment:start",zt(t,e))}function kW(t,e){return $t(t,"POST","/v2/accounts/mfaEnrollment:finalize",zt(t,e))}function xW(t,e){return $t(t,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(t,e))}class hb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>Sm._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new hb(e)}async getSession(){return gl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),o=await no(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await no(this.user,xW(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const KE=new WeakMap;function NW(t){const e=ve(t);return KE.has(e)||KE.set(e,hb._fromUser(e)),KE.get(e)}const i_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(i_,"1"),this.storage.removeItem(i_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(){const t=St();return sb(t)||Md(t)}const OW=1e3,LW=10;class eF extends ZV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=DW()&&yG(),this.fallbackToPolling=FV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);vG()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,LW):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},OW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eF.type="LOCAL";const fb=eF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF extends ZV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tF.type="SESSION";const Ml=tF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new sw(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async h=>h(n.origin,o)),c=await MW(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const h=bm("",20);r.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(m),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return window}function FW(t){rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function UW(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BW(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jW(){return pb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="firebaseLocalStorageDb",zW=1,r_="firebaseLocalStorage",iF="fbase_key";class Cm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ow(t,e){return t.transaction([r_],e?"readwrite":"readonly").objectStore(r_)}function $W(){const t=indexedDB.deleteDatabase(nF);return new Cm(t).toPromise()}function A1(){const t=indexedDB.open(nF,zW);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(r_,{keyPath:iF})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(r_)?e(i):(i.close(),await $W(),e(await A1()))})})}async function b2(t,e,n){const i=ow(t,!0).put({[iF]:e,value:n});return new Cm(i).toPromise()}async function qW(t,e){const n=ow(t,!1).get(e),i=await new Cm(n).toPromise();return i===void 0?null:i.value}function C2(t,e){const n=ow(t,!0).delete(e);return new Cm(n).toPromise()}const GW=800,WW=3;class rF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await A1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>WW)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sw._getInstance(jW()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await UW(),!this.activeServiceWorker)return;this.sender=new VW(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await A1();return await b2(e,i_,"1"),await C2(e,i_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>b2(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>qW(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>C2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=ow(r,!1).getAll();return new Cm(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rF.type="LOCAL";const Kp=rF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(t,e){return $t(t,"POST","/v2/accounts/mfaSignIn:start",zt(t,e))}function KW(t,e){return $t(t,"POST","/v2/accounts/mfaSignIn:finalize",zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QW=500,YW=6e4,Cv=1e12;class JW{constructor(e){this.auth=e,this.counter=Cv,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new XW(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||Cv;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||Cv;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||Cv;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class XW{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;ee(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=ZW(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},YW)},QW))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function ZW(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=BV("rcb"),eH=new Em(3e4,6e4);class tH{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=rn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ee(nH(n),e,"argument-error"),this.shouldResolveImmediately(n)&&g2(rn().grecaptcha)?Promise.resolve(rn().grecaptcha):new Promise((i,r)=>{const o=rn().setTimeout(()=>{r(hn(e,"network-request-failed"))},eH.get());rn()[QE]=()=>{rn().clearTimeout(o),delete rn()[QE];const u=rn().grecaptcha;if(!u||!g2(u)){r(hn(e,"internal-error"));return}const c=u.render;u.render=(h,m)=>{const g=c(h,m);return this.counter++,g},this.hostLanguage=n,i(u)};const a=`${bG()}?${Xl({onload:QE,render:"explicit",hl:n})}`;ob(a).catch(()=>{clearTimeout(o),r(hn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=rn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function nH(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class iH{async load(e){return new JW(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="recaptcha",rH={theme:"light",type:"image"};let sH=class{constructor(e,n,i=Object.assign({},rH)){this.parameters=i,this.type=sF,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bt(e),this.isInvisible=this.parameters.size==="invisible",ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;ee(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new iH:new tH,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const o=a=>{a&&(this.tokenChangeListeners.delete(o),r(a))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=rn()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ee(ib()&&!pb(),this.auth,"internal-error"),await oH(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await rG(this.auth);ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function oH(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Tl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function aH(t,e,n){if(Ft(t.app))return Promise.reject(bn(t));const i=Bt(t),r=await aw(i,e,ve(n));return new mb(r,o=>iw(i,o))}async function lH(t,e,n){const i=ve(t);await nw(!1,i,"phone");const r=await aw(i.auth,e,ve(n));return new mb(r,o=>KV(i,o))}async function uH(t,e,n){const i=ve(t);if(Ft(i.auth.app))return Promise.reject(bn(i.auth));const r=await aw(i.auth,e,ve(n));return new mb(r,o=>QV(i,o))}async function aw(t,e,n){var i;const r=await n.verify();try{ee(typeof r=="string",t,"argument-error"),ee(n.type===sF,t,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const a=o.session;if("phoneNumber"in o)return ee(a.type==="enroll",t,"internal-error"),(await PW(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{ee(a.type==="signin",t,"internal-error");const u=((i=o.multiFactorHint)===null||i===void 0?void 0:i.uid)||o.multiFactorUid;return ee(u,t,"missing-multi-factor-info"),(await HW(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await WG(t,{phoneNumber:o.phoneNumber,recaptchaToken:r});return a}}finally{n._reset()}}async function cH(t,e){const n=ve(t);if(Ft(n.auth.app))return Promise.reject(bn(n.auth));await ab(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl=class Xv{constructor(e){this.providerId=Xv.PROVIDER_ID,this.auth=Bt(e)}verifyPhoneNumber(e,n){return aw(this.auth,e,ve(n))}static credential(e,n){return Tl._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Xv.credentialFromTaggedObject(n)}static credentialFromError(e){return Xv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Tl._fromTokenResponse(n,i):null}};Vl.PROVIDER_ID="phone";Vl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t,e){return e?Fi(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb extends Vd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ks(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ks(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ks(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dH(t){return HV(t.auth,new gb(t),t.bypassAuthState)}function hH(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),WV(n,new gb(t),t.bypassAuthState)}async function fH(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),ab(n,new gb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dH;case"linkViaPopup":case"linkViaRedirect":return fH;case"reauthViaPopup":case"reauthViaRedirect":return hH;default:Bn(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=new Em(2e3,1e4);async function mH(t,e,n){if(Ft(t.app))return Promise.reject(hn(t,"operation-not-supported-in-this-environment"));const i=Bt(t);Ld(t,e,lo);const r=eu(i,n);return new qs(i,"signInViaPopup",e,r).executeNotNull()}async function gH(t,e,n){const i=ve(t);if(Ft(i.auth.app))return Promise.reject(hn(i.auth,"operation-not-supported-in-this-environment"));Ld(i.auth,e,lo);const r=eu(i.auth,n);return new qs(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function vH(t,e,n){const i=ve(t);Ld(i.auth,e,lo);const r=eu(i.auth,n);return new qs(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class qs extends oF{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pH.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yH="pendingRedirect",rp=new Map;class _H extends oF{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=rp.get(this.auth._key());if(!e){try{const i=await wH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}rp.set(this.auth._key(),e)}return this.bypassAuthState||rp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wH(t,e){const n=lF(e),i=aF(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function vb(t,e){return aF(t)._set(lF(e),"true")}function EH(){rp.clear()}function yb(t,e){rp.set(t._key(),e)}function aF(t){return Fi(t._redirectPersistence)}function lF(t){return Il(yH,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(t,e,n){return TH(t,e,n)}async function TH(t,e,n){if(Ft(t.app))return Promise.reject(bn(t));const i=Bt(t);Ld(t,e,lo),await i._initializationPromise;const r=eu(i,n);return await vb(r,i),r._openRedirect(i,e,"signInViaRedirect")}function SH(t,e,n){return bH(t,e,n)}async function bH(t,e,n){const i=ve(t);if(Ld(i.auth,e,lo),Ft(i.auth.app))return Promise.reject(bn(i.auth));await i.auth._initializationPromise;const r=eu(i.auth,n);await vb(r,i.auth);const o=await uF(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",o)}function CH(t,e,n){return AH(t,e,n)}async function AH(t,e,n){const i=ve(t);Ld(i.auth,e,lo),await i.auth._initializationPromise;const r=eu(i.auth,n);await nw(!1,i,e.providerId),await vb(r,i.auth);const o=await uF(i);return r._openRedirect(i.auth,e,"linkViaRedirect",o)}async function RH(t,e){return await Bt(t)._initializationPromise,lw(t,e,!1)}async function lw(t,e,n=!1){if(Ft(t.app))return Promise.reject(bn(t));const i=Bt(t),r=eu(i,e),a=await new _H(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function uF(t){const e=bm(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH=10*60*1e3;class cF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!dF(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PH&&this.cachedEventUids.clear(),this.cachedEventUids.has(A2(e))}saveEventToCache(e){this.cachedEventUids.add(A2(e)),this.lastProcessedEventTime=Date.now()}}function A2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(t,e={}){return $t(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NH=/^https?/;async function DH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hF(t);for(const n of e)try{if(OH(n))return}catch{}Bn(t,"unauthorized-domain")}function OH(t){const e=qp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!NH.test(n))return!1;if(xH.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH=new Em(3e4,6e4);function R2(){const t=rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function MH(t){return new Promise((e,n)=>{var i,r,o;function a(){R2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R2(),n(hn(t,"network-request-failed"))},timeout:LH.get()})}if(!((r=(i=rn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=rn().gapi)===null||o===void 0)&&o.load)a();else{const u=BV("iframefcb");return rn()[u]=()=>{gapi.load?a():n(hn(t,"network-request-failed"))},ob(`${AG()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Zv=null,e})}let Zv=null;function VH(t){return Zv=Zv||MH(t),Zv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH=new Em(5e3,15e3),UH="__/auth/iframe",BH="emulator/auth/iframe",jH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $H(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rb(e,BH):`https://${t.config.authDomain}/${UH}`,i={apiKey:e.apiKey,appName:t.name,v:oo},r=zH.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Xl(i).slice(1)}`}async function qH(t){const e=await VH(t),n=rn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:$H(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jH,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=hn(t,"network-request-failed"),u=rn().setTimeout(()=>{o(a)},FH.get());function c(){rn().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WH=500,HH=600,KH="_blank",QH="http://localhost";class P2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YH(t,e,n,i=WH,r=HH){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c=Object.assign(Object.assign({},GH),{width:i.toString(),height:r.toString(),top:o,left:a}),h=St().toLowerCase();n&&(u=OV(h)?KH:n),DV(h)&&(e=e||QH,c.scrollbars="yes");const m=Object.entries(c).reduce((_,[S,P])=>`${_}${S}=${P},`,"");if(gG(h)&&u!=="_self")return JH(e||"",u),new P2(null);const g=window.open(e||"",u,m);ee(g,t,"popup-blocked");try{g.focus()}catch{}return new P2(g)}function JH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH="__/auth/handler",ZH="emulator/auth/handler",eK=encodeURIComponent("fac");async function R1(t,e,n,i,r,o){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:oo,eventId:r};if(e instanceof lo){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",n1(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries(o||{}))a[m]=g}if(e instanceof Fd){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),h=c?`#${eK}=${encodeURIComponent(c)}`:"";return`${tK(t)}?${Xl(u).slice(1)}${h}`}function tK({config:t}){return t.emulator?rb(t,ZH):`https://${t.authDomain}/${XH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="webStorageSupport";class nK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ml,this._completeRedirectFn=lw,this._overrideRedirectResult=yb}async _openPopup(e,n,i,r){var o;Vr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await R1(e,n,i,qp(),r);return YH(e,a,bm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await R1(e,n,i,qp(),r);return FW(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Vr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await qH(e),i=new cF(e);return n.register("authEvent",r=>(ee(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(YE,{type:YE},r=>{var o;const a=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[YE];a!==void 0&&n(!!a),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return FV()||sb()||Md()}}const iK=nK;class rK{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return ls("unexpected MultiFactorSessionType")}}}class _b extends rK{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new _b(e)}_finalizeEnroll(e,n,i){return kW(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return KW(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class fF{constructor(){}static assertion(e){return _b._fromCredential(e)}}fF.FACTOR_ID="phone";var k2="@firebase/auth",x2="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aK(t){Zs(new Mr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UV(t)},h=new TG(i,r,o,c);return xG(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Zs(new Mr("auth-internal",e=>{const n=Bt(e.getProvider("auth").getImmediate());return(i=>new sK(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(k2,x2,oK(t)),Bi(k2,x2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK=5*60;OB("authIdTokenMaxAge");function uK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}SG({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=hn("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",uK().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aK("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=2e3;async function dK(t,e,n){var i;const{BuildInfo:r}=Fl();Vr(e.sessionId,"AuthEvent did not contain a session ID");const o=await gK(e.sessionId),a={};return Md()?a.ibi=r.packageName:Im()?a.apn=r.packageName:Bn(t,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=o,R1(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,a)}async function hK(t){const{BuildInfo:e}=Fl(),n={};Md()?n.iosBundleId=e.packageName:Im()?n.androidPackageName=e.packageName:Bn(t,"operation-not-supported-in-this-environment"),await hF(t,n)}function fK(t){const{cordova:e}=Fl();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,mG()?"_blank":"_system","location=yes"),n(r)})})}async function pK(t,e,n){const{cordova:i}=Fl();let r=()=>{};try{await new Promise((o,a)=>{let u=null;function c(){var g;o();const _=(g=i.plugins.browsertab)===null||g===void 0?void 0:g.close;typeof _=="function"&&_(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){u||(u=window.setTimeout(()=>{a(hn(t,"redirect-cancelled-by-user"))},cK))}function m(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(c),document.addEventListener("resume",h,!1),Im()&&document.addEventListener("visibilitychange",m,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",m,!1),u&&window.clearTimeout(u)}})}finally{r()}}function mK(t){var e,n,i,r,o,a,u,c,h,m;const g=Fl();ee(typeof((e=g==null?void 0:g.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(typeof((n=g==null?void 0:g.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee(typeof((o=(r=(i=g==null?void 0:g.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee(typeof((c=(u=(a=g==null?void 0:g.cordova)===null||a===void 0?void 0:a.plugins)===null||u===void 0?void 0:u.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee(typeof((m=(h=g==null?void 0:g.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||m===void 0?void 0:m.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function gK(t){const e=vK(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function vK(t){if(Vr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK=20;class _K extends cF{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function wK(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:TK(),postBody:null,tenantId:t.tenantId,error:hn(t,"no-auth-event")}}function EK(t,e){return P1()._set(k1(t),e)}async function N2(t){const e=await P1()._get(k1(t));return e&&await P1()._remove(k1(t)),e}function IK(t,e){var n,i;const r=bK(e);if(r.includes("/__/auth/callback")){const o=ey(r),a=o.firebaseError?SK(decodeURIComponent(o.firebaseError)):null,u=(i=(n=a==null?void 0:a.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],c=u?hn(u):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function TK(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<yK;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function P1(){return Fi(fb)}function k1(t){return Il("authEvent",t.config.apiKey,t.name)}function SK(t){try{return JSON.parse(t)}catch{return null}}function bK(t){const e=ey(t),n=e.link?decodeURIComponent(e.link):void 0,i=ey(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ey(r).link||r||i||n||t}function ey(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Lc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=500;class AK{constructor(){this._redirectPersistence=Ml,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lw,this._overrideRedirectResult=yb}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new _K(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Bn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){mK(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),EH(),await this._originValidation(e);const a=wK(e,i,r);await EK(e,a);const u=await dK(e,a,n),c=await fK(u);return pK(e,o,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hK(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:o}=Fl(),a=setTimeout(async()=>{await N2(e),n.onEvent(D2())},CK),u=async m=>{clearTimeout(a);const g=await N2(e);let _=null;g&&(m!=null&&m.url)&&(_=IK(g,m.url)),n.onEvent(_||D2())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,u);const c=r,h=`${o.packageName.toLowerCase()}://`;Fl().handleOpenURL=async m=>{if(m.toLowerCase().startsWith(h)&&u({url:m}),typeof c=="function")try{c(m)}catch(g){console.error(g)}}}}const RK=AK;function D2(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:hn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PK(t,e){Bt(t)._logFramework(e)}var kK="@firebase/auth-compat",xK="0.5.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK=1e3;function sp(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function DK(){return sp()==="http:"||sp()==="https:"}function pF(t=St()){return!!((sp()==="file:"||sp()==="ionic:"||sp()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function OK(){return F_()||uS()}function LK(){return _L()&&(document==null?void 0:document.documentMode)===11}function MK(t=St()){return/Edge\/\d+/.test(t)}function VK(t=St()){return LK()||MK(t)}function mF(){try{const t=self.localStorage,e=bm();if(t)return t.setItem(e,"1"),t.removeItem(e),VK()?xp():!0}catch{return wb()&&xp()}return!1}function wb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function JE(){return(DK()||yL()||pF())&&!OK()&&mF()&&!wb()}function gF(){return pF()&&typeof document<"u"}async function FK(){return gF()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},NK);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function UK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi={LOCAL:"local",NONE:"none",SESSION:"session"},Tf=ee,vF="persistence";function BK(t,e){if(Tf(Object.values(Mi).includes(e),t,"invalid-persistence-type"),F_()){Tf(e!==Mi.SESSION,t,"unsupported-persistence-type");return}if(uS()){Tf(e===Mi.NONE,t,"unsupported-persistence-type");return}if(wb()){Tf(e===Mi.NONE||e===Mi.LOCAL&&xp(),t,"unsupported-persistence-type");return}Tf(e===Mi.NONE||mF(),t,"unsupported-persistence-type")}async function x1(t){await t._initializationPromise;const e=yF(),n=Il(vF,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function jK(t,e){const n=yF();if(!n)return[];const i=Il(vF,t,e);switch(n.getItem(i)){case Mi.NONE:return[dd];case Mi.LOCAL:return[Kp,Ml];case Mi.SESSION:return[Ml];default:return[]}}function yF(){var t;try{return((t=UK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zK=ee;class Ho{constructor(){this.browserResolver=Fi(iK),this.cordovaResolver=Fi(RK),this.underlyingResolver=null,this._redirectPersistence=Ml,this._completeRedirectFn=lw,this._overrideRedirectResult=yb}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return gF()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await FK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t){return t.unwrap()}function $K(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qK(t){return wF(t)}function GK(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new WK(t,RW(t,e))}else if(i){const r=wF(e),o=e;r&&(o.credential=r,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function wF(t){const{_tokenResponse:e}=t instanceof ii?t.customData:t;if(!e)return null;if(!(t instanceof ii)&&"temporaryProof"in e&&"phoneNumber"in e)return Vl.credentialFromResult(t);const n=e.providerId;if(!n||n===If.PASSWORD)return null;let i;switch(n){case If.GOOGLE:i=rs;break;case If.FACEBOOK:i=is;break;case If.GITHUB:i=ss;break;case If.TWITTER:i=os;break;default:const{oauthIdToken:r,oauthAccessToken:o,oauthTokenSecret:a,pendingToken:u,nonce:c}=e;return!o&&!a&&!r&&!u?null:u?n.startsWith("saml.")?hd._create(n,u):gs._fromParams({providerId:n,signInMethod:n,pendingToken:u,idToken:r,accessToken:o}):new Kc(n).credential({idToken:r,accessToken:o,rawNonce:c})}return t instanceof ii?i.credentialFromError(t):i.credentialFromResult(t)}function pi(t,e){return e.catch(n=>{throw n instanceof ii&&GK(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:qK(n),additionalUserInfo:AW(n),user:uw.getOrCreate(r)}})}async function N1(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>pi(t,n.confirm(i))}}class WK{constructor(e,n){this.resolver=n,this.auth=$K(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return pi(_F(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uw=class Ff{constructor(e){this._delegate=e,this.multiFactor=NW(e)}static getOrCreate(e){return Ff.USER_MAP.has(e)||Ff.USER_MAP.set(e,new Ff(e)),Ff.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return pi(this.auth,KV(this._delegate,e))}async linkWithPhoneNumber(e,n){return N1(this.auth,lH(this._delegate,e,n))}async linkWithPopup(e){return pi(this.auth,vH(this._delegate,e,Ho))}async linkWithRedirect(e){return await x1(Bt(this.auth)),CH(this._delegate,e,Ho)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return pi(this.auth,QV(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return N1(this.auth,uH(this._delegate,e,n))}reauthenticateWithPopup(e){return pi(this.auth,gH(this._delegate,e,Ho))}async reauthenticateWithRedirect(e){return await x1(Bt(this.auth)),SH(this._delegate,e,Ho)}sendEmailVerification(e){return gW(this._delegate,e)}async unlink(e){return await nW(this._delegate,e),this}updateEmail(e){return wW(this._delegate,e)}updatePassword(e){return EW(this._delegate,e)}updatePhoneNumber(e){return cH(this._delegate,e)}updateProfile(e){return _W(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return vW(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};uw.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=ee;let D1=class{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;Sf(i,"invalid-api-key",{appName:e.name}),Sf(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?Ho:void 0;this._delegate=n.initialize({options:{persistence:HK(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Kq),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?uw.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){NG(this._delegate,e,n)}applyActionCode(e){return aW(this._delegate,e)}checkActionCode(e){return YV(this._delegate,e)}confirmPasswordReset(e,n){return oW(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return pi(this._delegate,uW(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return mW(this._delegate,e)}isSignInWithEmailLink(e){return hW(this._delegate,e)}async getRedirectResult(){Sf(JE(),this._delegate,"operation-not-supported-in-this-environment");const e=await RH(this._delegate,Ho);return e?pi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){PK(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:o,complete:a}=O2(e,n,i);return this._delegate.onAuthStateChanged(r,o,a)}onIdTokenChanged(e,n,i){const{next:r,error:o,complete:a}=O2(e,n,i);return this._delegate.onIdTokenChanged(r,o,a)}sendSignInLinkToEmail(e,n){return dW(this._delegate,e,n)}sendPasswordResetEmail(e,n){return sW(this._delegate,e,n||void 0)}async setPersistence(e){BK(this._delegate,e);let n;switch(e){case Mi.SESSION:n=Ml;break;case Mi.LOCAL:n=await Fi(Kp)._isAvailable()?Kp:fb;break;case Mi.NONE:n=dd;break;default:return Bn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return pi(this._delegate,tW(this._delegate))}signInWithCredential(e){return pi(this._delegate,iw(this._delegate,e))}signInWithCustomToken(e){return pi(this._delegate,rW(this._delegate,e))}signInWithEmailAndPassword(e,n){return pi(this._delegate,cW(this._delegate,e,n))}signInWithEmailLink(e,n){return pi(this._delegate,fW(this._delegate,e,n))}signInWithPhoneNumber(e,n){return N1(this._delegate,aH(this._delegate,e,n))}async signInWithPopup(e){return Sf(JE(),this._delegate,"operation-not-supported-in-this-environment"),pi(this._delegate,mH(this._delegate,e,Ho))}async signInWithRedirect(e){return Sf(JE(),this._delegate,"operation-not-supported-in-this-environment"),await x1(this._delegate),IH(this._delegate,e,Ho)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return lW(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}};D1.Persistence=Mi;function O2(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&uw.getOrCreate(a)),error:e,complete:n}}function HK(t,e){const n=jK(t,e);if(typeof self<"u"&&!n.includes(Kp)&&n.push(Kp),typeof window<"u")for(const i of[fb,Ml])n.includes(i)||n.push(i);return n.includes(dd)||n.push(dd),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.providerId="phone",this._delegate=new Vl(_F(pe.auth()))}static credential(e,n){return Vl.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Eb.PHONE_SIGN_IN_METHOD=Vl.PHONE_SIGN_IN_METHOD;Eb.PROVIDER_ID=Vl.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=ee;class QK{constructor(e,n,i=pe.app()){var r;KK((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new sH(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK="auth-compat";function JK(t){t.INTERNAL.registerComponent(new Mr(YK,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new D1(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fc.EMAIL_SIGNIN,PASSWORD_RESET:fc.PASSWORD_RESET,RECOVER_EMAIL:fc.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:fc.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:fc.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:fc.VERIFY_EMAIL}},EmailAuthProvider:Ca,FacebookAuthProvider:is,GithubAuthProvider:ss,GoogleAuthProvider:rs,OAuthProvider:Kc,SAMLAuthProvider:t_,PhoneAuthProvider:Eb,PhoneMultiFactorGenerator:fF,RecaptchaVerifier:QK,TwitterAuthProvider:os,Auth:D1,AuthCredential:Vd,Error:ii}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(kK,xK)}JK(pe);var L2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sl,EF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,C){function L(){}L.prototype=C.prototype,D.D=C.prototype,D.prototype=new L,D.prototype.constructor=D,D.C=function(F,O,V){for(var N=Array(arguments.length-2),we=2;we<arguments.length;we++)N[we-2]=arguments[we];return C.prototype[O].apply(F,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,C,L){L||(L=0);var F=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)F[O]=C.charCodeAt(L++)|C.charCodeAt(L++)<<8|C.charCodeAt(L++)<<16|C.charCodeAt(L++)<<24;else for(O=0;16>O;++O)F[O]=C[L++]|C[L++]<<8|C[L++]<<16|C[L++]<<24;C=D.g[0],L=D.g[1],O=D.g[2];var V=D.g[3],N=C+(V^L&(O^V))+F[0]+3614090360&4294967295;C=L+(N<<7&4294967295|N>>>25),N=V+(O^C&(L^O))+F[1]+3905402710&4294967295,V=C+(N<<12&4294967295|N>>>20),N=O+(L^V&(C^L))+F[2]+606105819&4294967295,O=V+(N<<17&4294967295|N>>>15),N=L+(C^O&(V^C))+F[3]+3250441966&4294967295,L=O+(N<<22&4294967295|N>>>10),N=C+(V^L&(O^V))+F[4]+4118548399&4294967295,C=L+(N<<7&4294967295|N>>>25),N=V+(O^C&(L^O))+F[5]+1200080426&4294967295,V=C+(N<<12&4294967295|N>>>20),N=O+(L^V&(C^L))+F[6]+2821735955&4294967295,O=V+(N<<17&4294967295|N>>>15),N=L+(C^O&(V^C))+F[7]+4249261313&4294967295,L=O+(N<<22&4294967295|N>>>10),N=C+(V^L&(O^V))+F[8]+1770035416&4294967295,C=L+(N<<7&4294967295|N>>>25),N=V+(O^C&(L^O))+F[9]+2336552879&4294967295,V=C+(N<<12&4294967295|N>>>20),N=O+(L^V&(C^L))+F[10]+4294925233&4294967295,O=V+(N<<17&4294967295|N>>>15),N=L+(C^O&(V^C))+F[11]+2304563134&4294967295,L=O+(N<<22&4294967295|N>>>10),N=C+(V^L&(O^V))+F[12]+1804603682&4294967295,C=L+(N<<7&4294967295|N>>>25),N=V+(O^C&(L^O))+F[13]+4254626195&4294967295,V=C+(N<<12&4294967295|N>>>20),N=O+(L^V&(C^L))+F[14]+2792965006&4294967295,O=V+(N<<17&4294967295|N>>>15),N=L+(C^O&(V^C))+F[15]+1236535329&4294967295,L=O+(N<<22&4294967295|N>>>10),N=C+(O^V&(L^O))+F[1]+4129170786&4294967295,C=L+(N<<5&4294967295|N>>>27),N=V+(L^O&(C^L))+F[6]+3225465664&4294967295,V=C+(N<<9&4294967295|N>>>23),N=O+(C^L&(V^C))+F[11]+643717713&4294967295,O=V+(N<<14&4294967295|N>>>18),N=L+(V^C&(O^V))+F[0]+3921069994&4294967295,L=O+(N<<20&4294967295|N>>>12),N=C+(O^V&(L^O))+F[5]+3593408605&4294967295,C=L+(N<<5&4294967295|N>>>27),N=V+(L^O&(C^L))+F[10]+38016083&4294967295,V=C+(N<<9&4294967295|N>>>23),N=O+(C^L&(V^C))+F[15]+3634488961&4294967295,O=V+(N<<14&4294967295|N>>>18),N=L+(V^C&(O^V))+F[4]+3889429448&4294967295,L=O+(N<<20&4294967295|N>>>12),N=C+(O^V&(L^O))+F[9]+568446438&4294967295,C=L+(N<<5&4294967295|N>>>27),N=V+(L^O&(C^L))+F[14]+3275163606&4294967295,V=C+(N<<9&4294967295|N>>>23),N=O+(C^L&(V^C))+F[3]+4107603335&4294967295,O=V+(N<<14&4294967295|N>>>18),N=L+(V^C&(O^V))+F[8]+1163531501&4294967295,L=O+(N<<20&4294967295|N>>>12),N=C+(O^V&(L^O))+F[13]+2850285829&4294967295,C=L+(N<<5&4294967295|N>>>27),N=V+(L^O&(C^L))+F[2]+4243563512&4294967295,V=C+(N<<9&4294967295|N>>>23),N=O+(C^L&(V^C))+F[7]+1735328473&4294967295,O=V+(N<<14&4294967295|N>>>18),N=L+(V^C&(O^V))+F[12]+2368359562&4294967295,L=O+(N<<20&4294967295|N>>>12),N=C+(L^O^V)+F[5]+4294588738&4294967295,C=L+(N<<4&4294967295|N>>>28),N=V+(C^L^O)+F[8]+2272392833&4294967295,V=C+(N<<11&4294967295|N>>>21),N=O+(V^C^L)+F[11]+1839030562&4294967295,O=V+(N<<16&4294967295|N>>>16),N=L+(O^V^C)+F[14]+4259657740&4294967295,L=O+(N<<23&4294967295|N>>>9),N=C+(L^O^V)+F[1]+2763975236&4294967295,C=L+(N<<4&4294967295|N>>>28),N=V+(C^L^O)+F[4]+1272893353&4294967295,V=C+(N<<11&4294967295|N>>>21),N=O+(V^C^L)+F[7]+4139469664&4294967295,O=V+(N<<16&4294967295|N>>>16),N=L+(O^V^C)+F[10]+3200236656&4294967295,L=O+(N<<23&4294967295|N>>>9),N=C+(L^O^V)+F[13]+681279174&4294967295,C=L+(N<<4&4294967295|N>>>28),N=V+(C^L^O)+F[0]+3936430074&4294967295,V=C+(N<<11&4294967295|N>>>21),N=O+(V^C^L)+F[3]+3572445317&4294967295,O=V+(N<<16&4294967295|N>>>16),N=L+(O^V^C)+F[6]+76029189&4294967295,L=O+(N<<23&4294967295|N>>>9),N=C+(L^O^V)+F[9]+3654602809&4294967295,C=L+(N<<4&4294967295|N>>>28),N=V+(C^L^O)+F[12]+3873151461&4294967295,V=C+(N<<11&4294967295|N>>>21),N=O+(V^C^L)+F[15]+530742520&4294967295,O=V+(N<<16&4294967295|N>>>16),N=L+(O^V^C)+F[2]+3299628645&4294967295,L=O+(N<<23&4294967295|N>>>9),N=C+(O^(L|~V))+F[0]+4096336452&4294967295,C=L+(N<<6&4294967295|N>>>26),N=V+(L^(C|~O))+F[7]+1126891415&4294967295,V=C+(N<<10&4294967295|N>>>22),N=O+(C^(V|~L))+F[14]+2878612391&4294967295,O=V+(N<<15&4294967295|N>>>17),N=L+(V^(O|~C))+F[5]+4237533241&4294967295,L=O+(N<<21&4294967295|N>>>11),N=C+(O^(L|~V))+F[12]+1700485571&4294967295,C=L+(N<<6&4294967295|N>>>26),N=V+(L^(C|~O))+F[3]+2399980690&4294967295,V=C+(N<<10&4294967295|N>>>22),N=O+(C^(V|~L))+F[10]+4293915773&4294967295,O=V+(N<<15&4294967295|N>>>17),N=L+(V^(O|~C))+F[1]+2240044497&4294967295,L=O+(N<<21&4294967295|N>>>11),N=C+(O^(L|~V))+F[8]+1873313359&4294967295,C=L+(N<<6&4294967295|N>>>26),N=V+(L^(C|~O))+F[15]+4264355552&4294967295,V=C+(N<<10&4294967295|N>>>22),N=O+(C^(V|~L))+F[6]+2734768916&4294967295,O=V+(N<<15&4294967295|N>>>17),N=L+(V^(O|~C))+F[13]+1309151649&4294967295,L=O+(N<<21&4294967295|N>>>11),N=C+(O^(L|~V))+F[4]+4149444226&4294967295,C=L+(N<<6&4294967295|N>>>26),N=V+(L^(C|~O))+F[11]+3174756917&4294967295,V=C+(N<<10&4294967295|N>>>22),N=O+(C^(V|~L))+F[2]+718787259&4294967295,O=V+(N<<15&4294967295|N>>>17),N=L+(V^(O|~C))+F[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+V&4294967295}i.prototype.u=function(D,C){C===void 0&&(C=D.length);for(var L=C-this.blockSize,F=this.B,O=this.h,V=0;V<C;){if(O==0)for(;V<=L;)r(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<C;)if(F[O++]=D.charCodeAt(V++),O==this.blockSize){r(this,F),O=0;break}}else for(;V<C;)if(F[O++]=D[V++],O==this.blockSize){r(this,F),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;var L=8*this.o;for(C=D.length-8;C<D.length;++C)D[C]=L&255,L/=256;for(this.u(D),D=Array(16),C=L=0;4>C;++C)for(var F=0;32>F;F+=8)D[L++]=this.g[C]>>>F&255;return D};function o(D,C){var L=u;return Object.prototype.hasOwnProperty.call(L,D)?L[D]:L[D]=C(D)}function a(D,C){this.h=C;for(var L=[],F=!0,O=D.length-1;0<=O;O--){var V=D[O]|0;F&&V==C||(L[O]=V,F=!1)}this.g=L}var u={};function c(D){return-128<=D&&128>D?o(D,function(C){return new a([C|0],0>C?-1:0)}):new a([D|0],0>D?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return k(h(-D));for(var C=[],L=1,F=0;D>=L;F++)C[F]=D/L|0,L*=4294967296;return new a(C,0)}function m(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return k(m(D.substring(1),C));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=h(Math.pow(C,8)),F=g,O=0;O<D.length;O+=8){var V=Math.min(8,D.length-O),N=parseInt(D.substring(O,O+V),C);8>V?(V=h(Math.pow(C,V)),F=F.j(V).add(h(N))):(F=F.j(L),F=F.add(h(N)))}return F}var g=c(0),_=c(1),S=c(16777216);t=a.prototype,t.m=function(){if(I(this))return-k(this).m();for(var D=0,C=1,L=0;L<this.g.length;L++){var F=this.i(L);D+=(0<=F?F:4294967296+F)*C,C*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(P(this))return"0";if(I(this))return"-"+k(this).toString(D);for(var C=h(Math.pow(D,6)),L=this,F="";;){var O=M(L,C).g;L=E(L,O.j(C));var V=((0<L.g.length?L.g[0]:L.h)>>>0).toString(D);if(L=O,P(L))return V+F;for(;6>V.length;)V="0"+V;F=V+F}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function P(D){if(D.h!=0)return!1;for(var C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function I(D){return D.h==-1}t.l=function(D){return D=E(this,D),I(D)?-1:P(D)?0:1};function k(D){for(var C=D.g.length,L=[],F=0;F<C;F++)L[F]=~D.g[F];return new a(L,~D.h).add(_)}t.abs=function(){return I(this)?k(this):this},t.add=function(D){for(var C=Math.max(this.g.length,D.g.length),L=[],F=0,O=0;O<=C;O++){var V=F+(this.i(O)&65535)+(D.i(O)&65535),N=(V>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);F=N>>>16,V&=65535,N&=65535,L[O]=N<<16|V}return new a(L,L[L.length-1]&-2147483648?-1:0)};function E(D,C){return D.add(k(C))}t.j=function(D){if(P(this)||P(D))return g;if(I(this))return I(D)?k(this).j(k(D)):k(k(this).j(D));if(I(D))return k(this.j(k(D)));if(0>this.l(S)&&0>D.l(S))return h(this.m()*D.m());for(var C=this.g.length+D.g.length,L=[],F=0;F<2*C;F++)L[F]=0;for(F=0;F<this.g.length;F++)for(var O=0;O<D.g.length;O++){var V=this.i(F)>>>16,N=this.i(F)&65535,we=D.i(O)>>>16,Te=D.i(O)&65535;L[2*F+2*O]+=N*Te,b(L,2*F+2*O),L[2*F+2*O+1]+=V*Te,b(L,2*F+2*O+1),L[2*F+2*O+1]+=N*we,b(L,2*F+2*O+1),L[2*F+2*O+2]+=V*we,b(L,2*F+2*O+2)}for(F=0;F<C;F++)L[F]=L[2*F+1]<<16|L[2*F];for(F=C;F<2*C;F++)L[F]=0;return new a(L,0)};function b(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function A(D,C){this.g=D,this.h=C}function M(D,C){if(P(C))throw Error("division by zero");if(P(D))return new A(g,g);if(I(D))return C=M(k(D),C),new A(k(C.g),k(C.h));if(I(C))return C=M(D,k(C)),new A(k(C.g),C.h);if(30<D.g.length){if(I(D)||I(C))throw Error("slowDivide_ only works with positive integers.");for(var L=_,F=C;0>=F.l(D);)L=B(L),F=B(F);var O=j(L,1),V=j(F,1);for(F=j(F,2),L=j(L,2);!P(F);){var N=V.add(F);0>=N.l(D)&&(O=O.add(L),V=N),F=j(F,1),L=j(L,1)}return C=E(D,O.j(C)),new A(O,C)}for(O=g;0<=D.l(C);){for(L=Math.max(1,Math.floor(D.m()/C.m())),F=Math.ceil(Math.log(L)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),V=h(L),N=V.j(C);I(N)||0<N.l(D);)L-=F,V=h(L),N=V.j(C);P(V)&&(V=_),O=O.add(V),D=E(D,N)}return new A(O,D)}t.A=function(D){return M(this,D).h},t.and=function(D){for(var C=Math.max(this.g.length,D.g.length),L=[],F=0;F<C;F++)L[F]=this.i(F)&D.i(F);return new a(L,this.h&D.h)},t.or=function(D){for(var C=Math.max(this.g.length,D.g.length),L=[],F=0;F<C;F++)L[F]=this.i(F)|D.i(F);return new a(L,this.h|D.h)},t.xor=function(D){for(var C=Math.max(this.g.length,D.g.length),L=[],F=0;F<C;F++)L[F]=this.i(F)^D.i(F);return new a(L,this.h^D.h)};function B(D){for(var C=D.g.length+1,L=[],F=0;F<C;F++)L[F]=D.i(F)<<1|D.i(F-1)>>>31;return new a(L,D.h)}function j(D,C){var L=C>>5;C%=32;for(var F=D.g.length-L,O=[],V=0;V<F;V++)O[V]=0<C?D.i(V+L)>>>C|D.i(V+L+1)<<32-C:D.i(V+L);return new a(O,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,EF=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,Sl=a}).apply(typeof L2<"u"?L2:typeof self<"u"?self:typeof window<"u"?window:{});var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IF,TF,Uf,SF,ty,O1,bF,CF,AF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,T){return f==Array.prototype||f==Object.prototype||(f[w]=T.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Av=="object"&&Av];for(var w=0;w<f.length;++w){var T=f[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function r(f,w){if(w)e:{var T=i;f=f.split(".");for(var x=0;x<f.length-1;x++){var z=f[x];if(!(z in T))break e;T=T[z]}f=f[f.length-1],x=T[f],w=w(x),w!=x&&w!=null&&e(T,f,{configurable:!0,writable:!0,value:w})}}function o(f,w){f instanceof String&&(f+="");var T=0,x=!1,z={next:function(){if(!x&&T<f.length){var W=T++;return{value:w(W,f[W]),done:!1}}return x=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}r("Array.prototype.values",function(f){return f||function(){return o(this,function(w,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function h(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function m(f,w,T){return f.call.apply(f.bind,arguments)}function g(f,w,T){if(!f)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,x),f.apply(w,z)}}return function(){return f.apply(w,arguments)}}function _(f,w,T){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,_.apply(null,arguments)}function S(f,w){var T=Array.prototype.slice.call(arguments,1);return function(){var x=T.slice();return x.push.apply(x,arguments),f.apply(this,x)}}function P(f,w){function T(){}T.prototype=w.prototype,f.aa=w.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(x,z,W){for(var ne=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)ne[Qe-2]=arguments[Qe];return w.prototype[z].apply(x,ne)}}function I(f){const w=f.length;if(0<w){const T=Array(w);for(let x=0;x<w;x++)T[x]=f[x];return T}return[]}function k(f,w){for(let T=1;T<arguments.length;T++){const x=arguments[T];if(c(x)){const z=f.length||0,W=x.length||0;f.length=z+W;for(let ne=0;ne<W;ne++)f[z+ne]=x[ne]}else f.push(x)}}class E{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function b(f){return/^[\s\xa0]*$/.test(f)}function A(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function M(f){return M[" "](f),f}M[" "]=function(){};var B=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function j(f,w,T){for(const x in f)w.call(T,f[x],x,f)}function D(f,w){for(const T in f)w.call(void 0,f[T],T,f)}function C(f){const w={};for(const T in f)w[T]=f[T];return w}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,w){let T,x;for(let z=1;z<arguments.length;z++){x=arguments[z];for(T in x)f[T]=x[T];for(let W=0;W<L.length;W++)T=L[W],Object.prototype.hasOwnProperty.call(x,T)&&(f[T]=x[T])}}function O(f){var w=1;f=f.split(":");const T=[];for(;0<w&&f.length;)T.push(f.shift()),w--;return f.length&&T.push(f.join(":")),T}function V(f){u.setTimeout(()=>{throw f},0)}function N(){var f=le;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class we{constructor(){this.h=this.g=null}add(w,T){const x=Te.get();x.set(w,T),this.h?this.h.next=x:this.g=x,this.h=x}}var Te=new E(()=>new _e,f=>f.reset());class _e{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,re=!1,le=new we,de=()=>{const f=u.Promise.resolve(void 0);rt=()=>{f.then(Xe)}};var Xe=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(T){V(T)}var w=Te;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}re=!1};function je(){this.s=this.s,this.C=this.C}je.prototype.s=!1,je.prototype.ma=function(){this.s||(this.s=!0,this.N())},je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ct(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var ar=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};u.addEventListener("test",T,w),u.removeEventListener("test",T,w)}catch{}return f}();function lr(f,w){if(ct.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,x=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(B){e:{try{M(w.nodeName);var z=!0;break e}catch{}z=!1}z||(w=null)}}else T=="mouseover"?w=f.fromElement:T=="mouseout"&&(w=f.toElement);this.relatedTarget=w,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ur[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&lr.aa.h.call(this)}}P(lr,ct);var ur={2:"touch",3:"pen",4:"mouse"};lr.prototype.h=function(){lr.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Bm=0;function au(f,w,T,x,z){this.listener=f,this.proxy=null,this.src=w,this.type=T,this.capture=!!x,this.ha=z,this.key=++Bm,this.da=this.fa=!1}function lu(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function uu(f){this.src=f,this.g={},this.h=0}uu.prototype.add=function(f,w,T,x,z){var W=f.toString();f=this.g[W],f||(f=this.g[W]=[],this.h++);var ne=du(f,w,x,z);return-1<ne?(w=f[ne],T||(w.fa=!1)):(w=new au(w,this.src,W,!!x,z),w.fa=T,f.push(w)),w};function cu(f,w){var T=w.type;if(T in f.g){var x=f.g[T],z=Array.prototype.indexOf.call(x,w,void 0),W;(W=0<=z)&&Array.prototype.splice.call(x,z,1),W&&(lu(w),f.g[T].length==0&&(delete f.g[T],f.h--))}}function du(f,w,T,x){for(var z=0;z<f.length;++z){var W=f[z];if(!W.da&&W.listener==w&&W.capture==!!T&&W.ha==x)return z}return-1}var Hd="closure_lm_"+(1e6*Math.random()|0),Pn={};function jm(f,w,T,x,z){if(Array.isArray(w)){for(var W=0;W<w.length;W++)jm(f,w[W],T,x,z);return null}return T=Qd(T),f&&f[Dt]?f.K(w,T,h(x)?!!x.capture:!!x,z):Dw(f,w,T,!1,x,z)}function Dw(f,w,T,x,z,W){if(!w)throw Error("Invalid event type");var ne=h(z)?!!z.capture:!!z,Qe=xa(f);if(Qe||(f[Hd]=Qe=new uu(f)),T=Qe.add(w,T,x,ne,W),T.proxy)return T;if(x=Ow(),T.proxy=x,x.src=f,x.listener=T,f.addEventListener)ar||(z=ne),z===void 0&&(z=!1),f.addEventListener(w.toString(),x,z);else if(f.attachEvent)f.attachEvent($m(w.toString()),x);else if(f.addListener&&f.removeListener)f.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Ow(){function f(T){return w.call(f.src,f.listener,T)}const w=Lw;return f}function zm(f,w,T,x,z){if(Array.isArray(w))for(var W=0;W<w.length;W++)zm(f,w[W],T,x,z);else x=h(x)?!!x.capture:!!x,T=Qd(T),f&&f[Dt]?(f=f.i,w=String(w).toString(),w in f.g&&(W=f.g[w],T=du(W,T,x,z),-1<T&&(lu(W[T]),Array.prototype.splice.call(W,T,1),W.length==0&&(delete f.g[w],f.h--)))):f&&(f=xa(f))&&(w=f.g[w.toString()],f=-1,w&&(f=du(w,T,x,z)),(T=-1<f?w[f]:null)&&Kd(T))}function Kd(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[Dt])cu(w.i,f);else{var T=f.type,x=f.proxy;w.removeEventListener?w.removeEventListener(T,x,f.capture):w.detachEvent?w.detachEvent($m(T),x):w.addListener&&w.removeListener&&w.removeListener(x),(T=xa(w))?(cu(T,f),T.h==0&&(T.src=null,w[Hd]=null)):lu(f)}}}function $m(f){return f in Pn?Pn[f]:Pn[f]="on"+f}function Lw(f,w){if(f.da)f=!0;else{w=new lr(w,this);var T=f.listener,x=f.ha||f.src;f.fa&&Kd(f),f=T.call(x,w)}return f}function xa(f){return f=f[Hd],f instanceof uu?f:null}var Br="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qd(f){return typeof f=="function"?f:(f[Br]||(f[Br]=function(w){return f.handleEvent(w)}),f[Br])}function Yt(){je.call(this),this.i=new uu(this),this.M=this,this.F=null}P(Yt,je),Yt.prototype[Dt]=!0,Yt.prototype.removeEventListener=function(f,w,T,x){zm(this,f,w,T,x)};function pn(f,w){var T,x=f.F;if(x)for(T=[];x;x=x.F)T.push(x);if(f=f.M,x=w.type||w,typeof w=="string")w=new ct(w,f);else if(w instanceof ct)w.target=w.target||f;else{var z=w;w=new ct(x,f),F(w,z)}if(z=!0,T)for(var W=T.length-1;0<=W;W--){var ne=w.g=T[W];z=_s(ne,x,!0,w)&&z}if(ne=w.g=f,z=_s(ne,x,!0,w)&&z,z=_s(ne,x,!1,w)&&z,T)for(W=0;W<T.length;W++)ne=w.g=T[W],z=_s(ne,x,!1,w)&&z}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var T=f.g[w],x=0;x<T.length;x++)lu(T[x]);delete f.g[w],f.h--}}this.F=null},Yt.prototype.K=function(f,w,T,x){return this.i.add(String(f),w,!1,T,x)},Yt.prototype.L=function(f,w,T,x){return this.i.add(String(f),w,!0,T,x)};function _s(f,w,T,x){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var z=!0,W=0;W<w.length;++W){var ne=w[W];if(ne&&!ne.da&&ne.capture==T){var Qe=ne.listener,Jt=ne.ha||ne.src;ne.fa&&cu(f.i,ne),z=Qe.call(Jt,x)!==!1&&z}}return z&&!x.defaultPrevented}function ws(f,w,T){if(typeof f=="function")T&&(f=_(f,T));else if(f&&typeof f.handleEvent=="function")f=_(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:u.setTimeout(f,w||0)}function jr(f){f.g=ws(()=>{f.g=null,f.i&&(f.i=!1,jr(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class qm extends je{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Na(f){je.call(this),this.h=f,this.g={}}P(Na,je);var Gm=[];function Da(f){j(f.g,function(w,T){this.g.hasOwnProperty(T)&&Kd(w)},f),f.g={}}Na.prototype.N=function(){Na.aa.N.call(this),Da(this)},Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fo=u.JSON.stringify,Es=u.JSON.parse,Mw=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Yd(){}Yd.prototype.h=null;function Jd(f){return f.h||(f.h=f.i())}function Xd(){}var zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zd(){ct.call(this,"d")}P(Zd,ct);function Wi(){ct.call(this,"c")}P(Wi,ct);var cr={},hu=null;function po(){return hu=hu||new Yt}cr.La="serverreachability";function fu(f){ct.call(this,cr.La,f)}P(fu,ct);function dr(f){const w=po();pn(w,new fu(w))}cr.STAT_EVENT="statevent";function mo(f,w){ct.call(this,cr.STAT_EVENT,f),this.stat=w}P(mo,ct);function kn(f){const w=po();pn(w,new mo(w,f))}cr.Ma="timingevent";function eh(f,w){ct.call(this,cr.Ma,f),this.size=w}P(eh,ct);function Oa(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},w)}function La(){this.g=!0}La.prototype.xa=function(){this.g=!1};function Vw(f,w,T,x,z,W){f.info(function(){if(f.g)if(W)for(var ne="",Qe=W.split("&"),Jt=0;Jt<Qe.length;Jt++){var xe=Qe[Jt].split("=");if(1<xe.length){var mn=xe[0];xe=xe[1];var yt=mn.split("_");ne=2<=yt.length&&yt[1]=="type"?ne+(mn+"="+xe+"&"):ne+(mn+"=redacted&")}}else ne=null;else ne=W;return"XMLHTTP REQ ("+x+") [attempt "+z+"]: "+w+`
`+T+`
`+ne})}function Fw(f,w,T,x,z,W,ne){f.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+z+"]: "+w+`
`+T+`
`+W+" "+ne})}function Hi(f,w,T,x){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Is(f,T)+(x?" "+x:"")})}function $r(f,w){f.info(function(){return"TIMEOUT: "+w})}La.prototype.info=function(){};function Is(f,w){if(!f.g)return w;if(!w)return null;try{var T=JSON.parse(w);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var x=T[f];if(!(2>x.length)){var z=x[1];if(Array.isArray(z)&&!(1>z.length)){var W=z[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ne=1;ne<z.length;ne++)z[ne]=""}}}}return fo(T)}catch{return w}}var Ma={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},th={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qr;function pu(){}P(pu,Yd),pu.prototype.g=function(){return new XMLHttpRequest},pu.prototype.i=function(){return{}},qr=new pu;function jn(f,w,T,x){this.j=f,this.i=w,this.l=T,this.R=x||1,this.U=new Na(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wm}function Wm(){this.i=null,this.g="",this.h=!1}var Hm={},mu={};function gu(f,w,T){f.L=1,f.v=Ki(Yn(w)),f.m=T,f.P=!0,bt(f,null)}function bt(f,w){f.F=Date.now(),Va(f),f.A=Yn(f.v);var T=f.A,x=f.R;Array.isArray(x)||(x=[String(x)]),mr(T.i,"t",x),f.C=0,T=f.j.J,f.h=new Wm,f.g=ng(f.j,T?w:null,!f.m),0<f.O&&(f.M=new qm(_(f.Y,f,f.g),f.O)),w=f.U,T=f.g,x=f.ca;var z="readystatechange";Array.isArray(z)||(z&&(Gm[0]=z.toString()),z=Gm);for(var W=0;W<z.length;W++){var ne=jm(T,z[W],x||w.handleEvent,!1,w.h||w);if(!ne)break;w.g[ne.key]=ne}w=f.H?C(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),dr(),Vw(f.i,f.u,f.A,f.l,f.R,f.m)}jn.prototype.ca=function(f){f=f.target;const w=this.M;w&&di(f)==3?w.j():this.Y(f)},jn.prototype.Y=function(f){try{if(f==this.g)e:{const yt=di(this.g);var w=this.g.Ba();const To=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||ch(this.g)))){this.J||yt!=4||w==7||(w==8||0>=To?dr(3):dr(2)),vu(this);var T=this.g.Z();this.X=T;t:if(Ts(this)){var x=ch(this.g);f="";var z=x.length,W=di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bs(this),Ss(this);var ne="";break t}this.h.i=new u.TextDecoder}for(w=0;w<z;w++)this.h.h=!0,f+=this.h.i.decode(x[w],{stream:!(W&&w==z-1)});x.length=0,this.h.g+=f,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=T==200,Fw(this.i,this.u,this.A,this.l,this.R,yt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Jt=this.g;if((Qe=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Qe)){var xe=Qe;break t}}xe=null}if(T=xe)Hi(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yu(this,T);else{this.o=!1,this.s=3,kn(12),bs(this),Ss(this);break e}}if(this.P){T=!0;let Nn;for(;!this.J&&this.C<ne.length;)if(Nn=Km(this,ne),Nn==mu){yt==4&&(this.s=4,kn(14),T=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==Hm){this.s=4,kn(15),Hi(this.i,this.l,ne,"[Invalid Chunk]"),T=!1;break}else Hi(this.i,this.l,Nn,null),yu(this,Nn);if(Ts(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||ne.length!=0||this.h.h||(this.s=1,kn(16),T=!1),this.o=this.o&&T,!T)Hi(this.i,this.l,ne,"[Invalid Chunked Response]"),bs(this),Ss(this);else if(0<ne.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),oe(mn),mn.M=!0,kn(11))}}else Hi(this.i,this.l,ne,null),yu(this,ne);yt==4&&bs(this),this.o&&!this.J&&(yt==4?ht(this.j,this):(this.o=!1,Va(this)))}else zw(this.g),T==400&&0<ne.indexOf("Unknown SID")?(this.s=3,kn(12)):(this.s=0,kn(13)),bs(this),Ss(this)}}}catch{}finally{}};function Ts(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Km(f,w){var T=f.C,x=w.indexOf(`
`,T);return x==-1?mu:(T=Number(w.substring(T,x)),isNaN(T)?Hm:(x+=1,x+T>w.length?mu:(w=w.slice(x,x+T),f.C=x+T,w)))}jn.prototype.cancel=function(){this.J=!0,bs(this)};function Va(f){f.S=Date.now()+f.I,Pe(f,f.I)}function Pe(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Oa(_(f.ba,f),w)}function vu(f){f.B&&(u.clearTimeout(f.B),f.B=null)}jn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?($r(this.i,this.A),this.L!=2&&(dr(),kn(17)),bs(this),this.s=2,Ss(this)):Pe(this,this.S-f)};function Ss(f){f.j.G==0||f.J||ht(f.j,f)}function bs(f){vu(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,Da(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function yu(f,w){try{var T=f.j;if(T.G!=0&&(T.g==f||an(T.h,f))){if(!f.K&&an(T.h,f)&&T.G==3){try{var x=T.Da.g.parse(w)}catch{x=null}if(Array.isArray(x)&&x.length==3){var z=x;if(z[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)Pu(T),Au(T);else break e;Le(T),kn(18)}}else T.za=z[1],0<T.za-T.T&&37500>z[2]&&T.F&&T.v==0&&!T.C&&(T.C=Oa(_(T.Za,T),6e3));if(1>=ui(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ct(T,11)}else if((f.K||T.g==f)&&Pu(T),!b(w))for(z=T.Da.g.parse(w),w=0;w<z.length;w++){let xe=z[w];if(T.T=xe[0],xe=xe[1],T.G==2)if(xe[0]=="c"){T.K=xe[1],T.ia=xe[2];const mn=xe[3];mn!=null&&(T.la=mn,T.j.info("VER="+T.la));const yt=xe[4];yt!=null&&(T.Aa=yt,T.j.info("SVER="+T.Aa));const To=xe[5];To!=null&&typeof To=="number"&&0<To&&(x=1.5*To,T.L=x,T.j.info("backChannelRequestTimeoutMs_="+x)),x=T;const Nn=f.g;if(Nn){const Kr=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var W=x.h;W.g||Kr.indexOf("spdy")==-1&&Kr.indexOf("quic")==-1&&Kr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(nh(W,W.h),W.h=null))}if(x.D){const fh=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;fh&&(x.ya=fh,nt(x.I,x.D,fh))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),x=T;var ne=f;if(x.qa=hh(x,x.J?x.ia:null,x.W),ne.K){fr(x.h,ne);var Qe=ne,Jt=x.L;Jt&&(Qe.I=Jt),Qe.B&&(vu(Qe),Va(Qe)),x.g=ne}else qa(x);0<T.i.length&&Ru(T)}else xe[0]!="stop"&&xe[0]!="close"||Ct(T,7);else T.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Ct(T,7):ks(T):xe[0]!="noop"&&T.l&&T.l.ta(xe),T.v=0)}}dr(4)}catch{}}var vt=class{constructor(f,w){this.g=f,this.map=w}};function hr(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qm(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ui(f){return f.h?1:f.g?f.g.size:0}function an(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function nh(f,w){f.g?f.g.add(w):f.h=w}function fr(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}hr.prototype.cancel=function(){if(this.i=ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ih(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const T of f.g.values())w=w.concat(T.D);return w}return I(f.i)}function _u(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var w=[],T=f.length,x=0;x<T;x++)w.push(f[x]);return w}w=[],T=0;for(x in f)w[T++]=f[x];return w}function rh(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var w=[];f=f.length;for(var T=0;T<f;T++)w.push(T);return w}w=[],T=0;for(const x in f)w[T++]=x;return w}}}function wu(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var T=rh(f),x=_u(f),z=x.length,W=0;W<z;W++)w.call(void 0,x[W],T&&T[W],f)}var Eu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uw(f,w){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var x=f[T].indexOf("="),z=null;if(0<=x){var W=f[T].substring(0,x);z=f[T].substring(x+1)}else W=f[T];w(W,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Qn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Qn){this.h=f.h,Fa(this,f.j),this.o=f.o,this.g=f.g,pr(this,f.s),this.l=f.l;var w=f.i,T=new vo;T.i=w.i,w.g&&(T.g=new Map(w.g),T.h=w.h),sh(this,T),this.m=f.m}else f&&(w=String(f).match(Eu))?(this.h=!1,Fa(this,w[1]||"",!0),this.o=go(w[2]||""),this.g=go(w[3]||"",!0),pr(this,w[4]),this.l=go(w[5]||"",!0),sh(this,w[6]||"",!0),this.m=go(w[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}Qn.prototype.toString=function(){var f=[],w=this.j;w&&f.push(Ua(w,zn,!0),":");var T=this.g;return(T||w=="file")&&(f.push("//"),(w=this.o)&&f.push(Ua(w,zn,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Ua(T,T.charAt(0)=="/"?Jm:Gr,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Ua(T,Xm)),f.join("")};function Yn(f){return new Qn(f)}function Fa(f,w,T){f.j=T?go(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function pr(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function sh(f,w,T){w instanceof vo?(f.i=w,Zm(f.i,f.h)):(T||(w=Ua(w,Iu)),f.i=new vo(w,f.h))}function nt(f,w,T){f.i.set(w,T)}function Ki(f){return nt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function go(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ua(f,w,T){return typeof f=="string"?(f=encodeURI(f).replace(w,Ym),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Ym(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var zn=/[#\/\?@]/g,Gr=/[#\?:]/g,Jm=/[#\?]/g,Iu=/[#\?@]/g,Xm=/#/g;function vo(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Qi(f){f.g||(f.g=new Map,f.h=0,f.i&&Uw(f.i,function(w,T){f.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}t=vo.prototype,t.add=function(f,w){Qi(this),this.i=null,f=gr(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(w),this.h+=1,this};function Cs(f,w){Qi(f),w=gr(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function oh(f,w){return Qi(f),w=gr(f,w),f.g.has(w)}t.forEach=function(f,w){Qi(this),this.g.forEach(function(T,x){T.forEach(function(z){f.call(w,z,x,this)},this)},this)},t.na=function(){Qi(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),T=[];for(let x=0;x<w.length;x++){const z=f[x];for(let W=0;W<z.length;W++)T.push(w[x])}return T},t.V=function(f){Qi(this);let w=[];if(typeof f=="string")oh(this,f)&&(w=w.concat(this.g.get(gr(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)w=w.concat(f[T])}return w},t.set=function(f,w){return Qi(this),this.i=null,f=gr(this,f),oh(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},t.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function mr(f,w,T){Cs(f,w),0<T.length&&(f.i=null,f.g.set(gr(f,w),I(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var T=0;T<w.length;T++){var x=w[T];const W=encodeURIComponent(String(x)),ne=this.V(x);for(x=0;x<ne.length;x++){var z=W;ne[x]!==""&&(z+="="+encodeURIComponent(String(ne[x]))),f.push(z)}}return this.i=f.join("&")};function gr(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function Zm(f,w){w&&!f.j&&(Qi(f),f.i=null,f.g.forEach(function(T,x){var z=x.toLowerCase();x!=z&&(Cs(this,x),mr(this,z,T))},f)),f.j=w}function Ba(f,w){const T=new La;if(u.Image){const x=new Image;x.onload=S(Wr,T,"TestLoadImage: loaded",!0,w,x),x.onerror=S(Wr,T,"TestLoadImage: error",!1,w,x),x.onabort=S(Wr,T,"TestLoadImage: abort",!1,w,x),x.ontimeout=S(Wr,T,"TestLoadImage: timeout",!1,w,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=f}else w(!1)}function Bw(f,w){const T=new La,x=new AbortController,z=setTimeout(()=>{x.abort(),Wr(T,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:x.signal}).then(W=>{clearTimeout(z),W.ok?Wr(T,"TestPingServer: ok",!0,w):Wr(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(z),Wr(T,"TestPingServer: error",!1,w)})}function Wr(f,w,T,x,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),x(T)}catch{}}function jw(){this.g=new Mw}function yo(f,w,T){const x=T||"";try{wu(f,function(z,W){let ne=z;h(z)&&(ne=fo(z)),w.push(x+W+"="+encodeURIComponent(ne))})}catch(z){throw w.push(x+"type="+encodeURIComponent("_badmap")),z}}function ci(f){this.l=f.Ub||null,this.j=f.eb||!1}P(ci,Yd),ci.prototype.g=function(){return new _o(this.l,this.j)},ci.prototype.i=function(f){return function(){return f}}({});function _o(f,w){Yt.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(_o,Yt),t=_o.prototype,t.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,Rs(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||u).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ja(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ja(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?As(this):Rs(this),this.readyState==3&&ja(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,As(this))},t.Qa=function(f){this.g&&(this.response=f,As(this))},t.ga=function(){this.g&&As(this)};function As(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Rs(f)}t.setRequestHeader=function(f,w){this.u.append(f,w)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=w.next();return f.join(`\r
`)};function Rs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ah(f){let w="";return j(f,function(T,x){w+=x,w+=":",w+=T,w+=`\r
`}),w}function lh(f,w,T){e:{for(x in T){var x=!1;break e}x=!0}x||(T=ah(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):nt(f,w,T))}function dt(f){Yt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(dt,Yt);var Tu=/^https?$/i,Ps=["POST","PUT"];t=dt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,w,T,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qr.g(),this.v=this.o?Jd(this.o):Jd(qr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(W){wo(this,W);return}if(f=T||"",T=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var z in x)T.set(z,x[z]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const W of x.keys())T.set(W,x.get(W));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(T.keys()).find(W=>W.toLowerCase()=="content-type"),z=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ps,w,void 0))||x||z||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ne]of T)this.g.setRequestHeader(W,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cu(this),this.u=!0,this.g.send(f),this.u=!1}catch(W){wo(this,W)}};function wo(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,Su(f),bu(f)}function Su(f){f.A||(f.A=!0,pn(f,"complete"),pn(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,pn(this,"complete"),pn(this,"abort"),bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bu(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?uh(this):this.bb())},t.bb=function(){uh(this)};function uh(f){if(f.h&&typeof a<"u"&&(!f.v[1]||di(f)!=4||f.Z()!=2)){if(f.u&&di(f)==4)ws(f.Ea,0,f);else if(pn(f,"readystatechange"),di(f)==4){f.h=!1;try{const ne=f.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var x;if(x=ne===0){var z=String(f.D).match(Eu)[1]||null;!z&&u.self&&u.self.location&&(z=u.self.location.protocol.slice(0,-1)),x=!Tu.test(z?z.toLowerCase():"")}T=x}if(T)pn(f,"complete"),pn(f,"success");else{f.m=6;try{var W=2<di(f)?f.g.statusText:""}catch{W=""}f.l=W+" ["+f.Z()+"]",Su(f)}}finally{bu(f)}}}}function bu(f,w){if(f.g){Cu(f);const T=f.g,x=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||pn(f,"ready");try{T.onreadystatechange=x}catch{}}}function Cu(f){f.I&&(u.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function di(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<di(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),Es(w)}};function ch(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function zw(f){const w={};f=(f.g&&2<=di(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<f.length;x++){if(b(f[x]))continue;var T=O(f[x]);const z=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const W=w[z]||[];w[z]=W,W.push(T)}D(w,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eo(f,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||w}function vr(f){this.Aa=0,this.i=[],this.j=new La,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eo("baseRetryDelayMs",5e3,f),this.cb=Eo("retryDelaySeedMs",1e4,f),this.Wa=Eo("forwardChannelMaxRetries",2,f),this.wa=Eo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new hr(f&&f.concurrentRequestLimit),this.Da=new jw,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vr.prototype,t.la=8,t.G=1,t.connect=function(f,w,T,x){kn(0),this.W=f,this.H=w||{},T&&x!==void 0&&(this.H.OSID=T,this.H.OAID=x),this.F=this.X,this.I=hh(this,null,this.W),Ru(this)};function ks(f){if(eg(f),f.G==3){var w=f.U++,T=Yn(f.I);if(nt(T,"SID",f.K),nt(T,"RID",w),nt(T,"TYPE","terminate"),ye(f,T),w=new jn(f,f.j,w),w.L=2,w.v=Ki(Yn(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(w.v.toString(),"")}catch{}!T&&u.Image&&(new Image().src=w.v,T=!0),T||(w.g=ng(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Va(w)}Hr(f)}function Au(f){f.g&&(oe(f),f.g.cancel(),f.g=null)}function eg(f){Au(f),f.u&&(u.clearTimeout(f.u),f.u=null),Pu(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Ru(f){if(!Qm(f.h)&&!f.s){f.s=!0;var w=f.Ga;rt||de(),re||(rt(),re=!0),le.add(w,f),f.B=0}}function $w(f,w){return ui(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Oa(_(f.Ga,f,w),dh(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const z=new jn(this,this.j,f);let W=this.o;if(this.S&&(W?(W=C(W),F(W,this.S)):W=this.S),this.m!==null||this.O||(z.H=W,W=null),this.P)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var x=this.i[T];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(w+=x,4096<w){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=$a(this,z,w),T=Yn(this.I),nt(T,"RID",f),nt(T,"CVER",22),this.D&&nt(T,"X-HTTP-Session-Id",this.D),ye(this,T),W&&(this.O?w="headers="+encodeURIComponent(String(ah(W)))+"&"+w:this.m&&lh(T,this.m,W)),nh(this.h,z),this.Ua&&nt(T,"TYPE","init"),this.P?(nt(T,"$req",w),nt(T,"SID","null"),z.T=!0,gu(z,T,null)):gu(z,T,w),this.G=2}}else this.G==3&&(f?za(this,f):this.i.length==0||Qm(this.h)||za(this))};function za(f,w){var T;w?T=w.l:T=f.U++;const x=Yn(f.I);nt(x,"SID",f.K),nt(x,"RID",T),nt(x,"AID",f.T),ye(f,x),f.m&&f.o&&lh(x,f.m,f.o),T=new jn(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),w&&(f.i=w.D.concat(f.i)),w=$a(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),nh(f.h,T),gu(T,x,w)}function ye(f,w){f.H&&j(f.H,function(T,x){nt(w,x,T)}),f.l&&wu({},function(T,x){nt(w,x,T)})}function $a(f,w,T){T=Math.min(f.i.length,T);var x=f.l?_(f.l.Na,f.l,f):null;e:{var z=f.i;let W=-1;for(;;){const ne=["count="+T];W==-1?0<T?(W=z[0].g,ne.push("ofs="+W)):W=0:ne.push("ofs="+W);let Qe=!0;for(let Jt=0;Jt<T;Jt++){let xe=z[Jt].g;const mn=z[Jt].map;if(xe-=W,0>xe)W=Math.max(0,z[Jt].g-100),Qe=!1;else try{yo(mn,ne,"req"+xe+"_")}catch{x&&x(mn)}}if(Qe){x=ne.join("&");break e}}}return f=f.i.splice(0,T),w.D=f,x}function qa(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;rt||de(),re||(rt(),re=!0),le.add(w,f),f.v=0}}function Le(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Oa(_(f.Fa,f),dh(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,tg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Oa(_(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kn(10),Au(this),tg(this))};function oe(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function tg(f){f.g=new jn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=Yn(f.qa);nt(w,"RID","rpc"),nt(w,"SID",f.K),nt(w,"AID",f.T),nt(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&nt(w,"TO",f.ja),nt(w,"TYPE","xmlhttp"),ye(f,w),f.m&&f.o&&lh(w,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=Ki(Yn(w)),T.m=null,T.P=!0,bt(T,f)}t.Za=function(){this.C!=null&&(this.C=null,Au(this),Le(this),kn(19))};function Pu(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function ht(f,w){var T=null;if(f.g==w){Pu(f),oe(f),f.g=null;var x=2}else if(an(f.h,w))T=w.D,fr(f.h,w),x=1;else return;if(f.G!=0){if(w.o)if(x==1){T=w.m?w.m.length:0,w=Date.now()-w.F;var z=f.B;x=po(),pn(x,new eh(x,T)),Ru(f)}else qa(f);else if(z=w.s,z==3||z==0&&0<w.X||!(x==1&&$w(f,w)||x==2&&Le(f)))switch(T&&0<T.length&&(w=f.h,w.i=w.i.concat(T)),z){case 1:Ct(f,5);break;case 4:Ct(f,10);break;case 3:Ct(f,6);break;default:Ct(f,2)}}}function dh(f,w){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*w}function Ct(f,w){if(f.j.info("Error code "+w),w==2){var T=_(f.fb,f),x=f.Xa;const z=!x;x=new Qn(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Fa(x,"https"),Ki(x),z?Ba(x.toString(),T):Bw(x.toString(),T)}else kn(2);f.G=0,f.l&&f.l.sa(w),Hr(f),eg(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),kn(2)):(this.j.info("Failed to ping google.com"),kn(1))};function Hr(f){if(f.G=0,f.ka=[],f.l){const w=ih(f.h);(w.length!=0||f.i.length!=0)&&(k(f.ka,w),k(f.ka,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.ra()}}function hh(f,w,T){var x=T instanceof Qn?Yn(T):new Qn(T);if(x.g!="")w&&(x.g=w+"."+x.g),pr(x,x.s);else{var z=u.location;x=z.protocol,w=w?w+"."+z.hostname:z.hostname,z=+z.port;var W=new Qn(null);x&&Fa(W,x),w&&(W.g=w),z&&pr(W,z),T&&(W.l=T),x=W}return T=f.D,w=f.ya,T&&w&&nt(x,T,w),nt(x,"VER",f.la),ye(f,x),x}function ng(f,w,T){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new dt(new ci({eb:T})):new dt(f.pa),w.Ha(f.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ig(){}t=ig.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ku(){}ku.prototype.g=function(f,w){return new xn(f,w)};function xn(f,w){Yt.call(this),this.g=new vr(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!b(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!b(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new Io(this)}P(xn,Yt),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){ks(this.g)},xn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=fo(f),f=T);w.i.push(new vt(w.Ya++,f)),w.G==3&&Ru(w)},xn.prototype.N=function(){this.g.l=null,delete this.j,ks(this.g),delete this.g,xn.aa.N.call(this)};function rg(f){Zd.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const T in w){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}P(rg,Zd);function xu(){Wi.call(this),this.status=1}P(xu,Wi);function Io(f){this.g=f}P(Io,ig),Io.prototype.ua=function(){pn(this.g,"a")},Io.prototype.ta=function(f){pn(this.g,new rg(f))},Io.prototype.sa=function(f){pn(this.g,new xu)},Io.prototype.ra=function(){pn(this.g,"b")},ku.prototype.createWebChannel=ku.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,AF=function(){return new ku},CF=function(){return po()},bF=cr,O1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,ty=Ma,th.COMPLETE="complete",SF=th,Xd.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,Uf=Xd,TF=ci,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,IF=dt}).apply(typeof Av<"u"?Av:typeof self<"u"?self:typeof window<"u"?window:{});const M2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ud="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new fm("@firebase/firestore");function yc(){return pa.logLevel}function XK(t){pa.setLogLevel(t)}function J(t,...e){if(pa.logLevel<=Ne.DEBUG){const n=e.map(Ib);pa.debug(`Firestore (${Ud}): ${t}`,...n)}}function Kt(t,...e){if(pa.logLevel<=Ne.ERROR){const n=e.map(Ib);pa.error(`Firestore (${Ud}): ${t}`,...n)}}function Fr(t,...e){if(pa.logLevel<=Ne.WARN){const n=e.map(Ib);pa.warn(`Firestore (${Ud}): ${t}`,...n)}}function Ib(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Ud}) INTERNAL ASSERTION FAILED: `+t;throw Kt(e),new Error(e)}function me(t,e){t||ae()}function ZK(t,e){t||ae()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(In.UNAUTHENTICATED))}shutdown(){}}class tQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nQ{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cn,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string"),new RF(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new In(e)}}class iQ{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=In.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rQ{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new iQ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?r(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new sQ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=aQ(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function be(t,e){return t<e?-1:t>e?1:0}function fd(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function kF(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Tt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Tt(0,0))}static max(){return new ge(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,i){n===void 0?n=0:n>e.length&&ae(),i===void 0?i=e.length-n:i>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Qp.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qp?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Qp{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Y(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const lQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends Qp{construct(e,n,i){return new Et(e,n,i)}static isValidIdentifier(e){return lQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Y(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new Y(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new Y(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Ue.fromString(e))}static fromName(e){return new ie(Ue.fromString(e).popFirst(5))}static empty(){return new ie(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function L1(t){return t.fields.find(e=>e.kind===2)}function sl(t){return t.fields.filter(e=>e.kind!==2)}s_.UNKNOWN_ID=-1;class ny{constructor(e,n){this.fieldPath=e,this.kind=n}}class Yp{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yp(0,zi.min())}}function xF(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(i===1e9?new Tt(n+1,0):new Tt(n,i));return new zi(r,ie.empty(),e)}function NF(t){return new zi(t.readTime,t.key,-1)}class zi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new zi(ge.min(),ie.empty(),-1)}static max(){return new zi(ge.max(),ie.empty(),-1)}}function Tb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==DF)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,i)=>{n(e)})}static reject(e){return new $((n,i)=>{i(e)})}static waitFor(e){return new $((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},c=>i(c))}),a=!0,o===r&&n()})}static or(e){let n=$.resolve(!1);for(const i of e)n=n.next(r=>r?$.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new $((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let c=0;c<o;c++){const h=c;n(e[h]).next(m=>{a[h]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new $((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Cn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new op(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=Sb(i.target.error);this.V.reject(new op(e,r))}}static open(e,n,i,r){try{return new cw(n,e.transaction(r,i))}catch(o){throw new op(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(J("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new cQ(n)}}class ps{constructor(e,n,i){this.name=e,this.version=n,this.p=i,ps.S(St())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return J("SimpleDb","Removing database:",e),ol(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xp())return!1;if(ps.C())return!0;const e=St(),n=ps.S(e),i=0<n&&n<10,r=LF(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}async M(e){return this.db||(J("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{const a=o.target.result;n(a)},r.onblocked=()=>{i(new op(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const a=o.target.error;a.name==="VersionError"?i(new Y(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new Y(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new op(e,a))},r.onupgradeneeded=o=>{J("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const a=o.target.result;this.p.O(a,r.transaction,o.oldVersion,this.version).next(()=>{J("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const o=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const u=cw.open(this.db,e,o?"readonly":"readwrite",i),c=r(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),$.reject(h))).toPromise();return c.catch(()=>{}),await u.m,c}catch(u){const c=u,h=c.name!=="FirebaseError"&&a<3;if(J("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function LF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class uQ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ol(this.B.delete())}}class op extends Y{constructor(e,n){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ra(t){return t.name==="IndexedDbTransactionError"}class cQ{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(J("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(J("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ol(i)}add(e){return J("SimpleDb","ADD",this.store.name,e,e),ol(this.store.add(e))}get(e){return ol(this.store.get(e)).next(n=>(n===void 0&&(n=null),J("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return J("SimpleDb","DELETE",this.store.name,e),ol(this.store.delete(e))}count(){return J("SimpleDb","COUNT",this.store.name),ol(this.store.count())}U(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const o=r.getAll(i.range);return new $((a,u)=>{o.onerror=c=>{u(c.target.error)},o.onsuccess=c=>{a(c.target.result)}})}{const o=this.cursor(i),a=[];return this.W(o,(u,c)=>{a.push(c)}).next(()=>a)}}G(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new $((r,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}j(e,n){J("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.H=!1;const r=this.cursor(i);return this.W(r,(o,a,u)=>u.delete())}J(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.W(r,n)}Y(e){const n=this.cursor({});return new $((i,r)=>{n.onerror=o=>{const a=Sb(o.target.error);r(a)},n.onsuccess=o=>{const a=o.target.result;a?e(a.primaryKey,a.value).next(u=>{u?a.continue():i()}):i()}})}W(e,n){const i=[];return new $((r,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{const u=a.target.result;if(!u)return void r();const c=new uQ(u),h=n(u.primaryKey,u.value,c);if(h instanceof $){const m=h.catch(g=>(c.done(),$.reject(g)));i.push(m)}c.isDone?r():c.K===null?u.continue():u.continue(c.K)}}).next(()=>$.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ol(t){return new $((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=Sb(i.target.error);n(r)}})}let V2=!1;function Sb(t){const e=ps.S(St());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return V2||(V2=!0,setTimeout(()=>{throw i},0)),i}}return t}class dQ{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){J("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{J("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ra(n)?J("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Aa(n)}await this.X(6e4)})}}class hQ{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const i=new Set;let r=n,o=!0;return $.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return J("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,r).next(u=>{r-=u,i.add(a)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{const a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(r,o)).next(u=>(J("IndexBackfiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u))).next(()=>a.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{const a=NF(o);Tb(a,i)>0&&(i=a)}),new zi(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_i.oe=-1;function Am(t){return t==null}function Jp(t){return t===0&&1/t==-1/0}function MF(t){return typeof t=="number"&&Number.isInteger(t)&&!Jp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=F2(e)),e=fQ(t.get(n),e);return F2(e)}function fQ(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function F2(t){return t+""}function us(t){const e=t.length;if(me(e>=2),e===2)return me(t.charAt(0)===""&&t.charAt(1)===""),Ue.emptyPath();const n=e-2,i=[];let r="";for(let o=0;o<e;){const a=t.indexOf("",o);switch((a<0||a>n)&&ae(),t.charAt(a+1)){case"":const u=t.substring(o,a);let c;r.length===0?c=u:(r+=u,c=r,r=""),i.push(c);break;case"":r+=t.substring(o,a),r+="\0";break;case"":r+=t.substring(o,a+1);break;default:ae()}o=a+2}return new Ue(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e){return[t,ri(e)]}function VF(t,e,n){return[t,ri(e),n]}const pQ={},mQ=["prefixPath","collectionGroup","readTime","documentId"],gQ=["prefixPath","collectionGroup","documentId"],vQ=["collectionGroup","readTime","prefixPath","documentId"],yQ=["canonicalId","targetId"],_Q=["targetId","path"],wQ=["path","targetId"],EQ=["collectionId","parent"],IQ=["indexId","uid"],TQ=["uid","sequenceNumber"],SQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bQ=["indexId","uid","orderedDocumentKey"],CQ=["userId","collectionPath","documentId"],AQ=["userId","collectionPath","largestBatchId"],RQ=["userId","collectionGroup","largestBatchId"],FF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PQ=[...FF,"documentOverlays"],UF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BF=UF,jF=[...BF,"indexConfiguration","indexState","indexEntries"],kQ=jF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends OF{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function An(t,e){const n=se(t);return ps.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function tu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Ln.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rv(this.root,e,this.comparator,!0)}}class Rv{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Ln.RED,this.left=r??Ln.EMPTY,this.right=o??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Ln(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ln.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j2(this.data.getIterator())}getIteratorFrom(e){return new j2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class j2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pc(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new wi([])}unionWith(e){let n=new it(Et.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fd(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $F("Invalid base64 string: "+o):o}}(e);return new fn(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const NQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(t){if(me(!!t),typeof t=="string"){let e=0;const n=NQ.exec(t);if(me(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ma(t){return typeof t=="string"?fn.fromBase64String(t):fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bb(t){const e=t.mapValue.fields.__previous_value__;return dw(e)?bb(e):e}function Xp(t){const e=io(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(e,n,i,r,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class ga{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ga("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ry={nullValue:"NULL_VALUE"};function Ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dw(t)?4:qF(t)?9007199254740991:10:ae()}function vs(t,e){if(t===e)return!0;const n=Ul(t);if(n!==Ul(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xp(t).isEqual(Xp(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=io(r.timestampValue),u=io(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return ma(r.bytesValue).isEqual(ma(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Vt(r.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(r.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vt(r.integerValue)===Vt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=Vt(r.doubleValue),u=Vt(o.doubleValue);return a===u?Jp(a)===Jp(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return fd(t.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(B2(a)!==B2(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!vs(a[c],u[c])))return!1;return!0}(t,e);default:return ae()}}function Zp(t,e){return(t.values||[]).find(n=>vs(n,e))!==void 0}function va(t,e){if(t===e)return 0;const n=Ul(t),i=Ul(e);if(n!==i)return be(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=Vt(o.integerValue||o.doubleValue),c=Vt(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return z2(t.timestampValue,e.timestampValue);case 4:return z2(Xp(t),Xp(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(o,a){const u=ma(o),c=ma(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),c=a.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=be(u[h],c[h]);if(m!==0)return m}return be(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=be(Vt(o.latitude),Vt(a.latitude));return u!==0?u:be(Vt(o.longitude),Vt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,a){const u=o.values||[],c=a.values||[];for(let h=0;h<u.length&&h<c.length;++h){const m=va(u[h],c[h]);if(m)return m}return be(u.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,a){if(o===Ko.mapValue&&a===Ko.mapValue)return 0;if(o===Ko.mapValue)return 1;if(a===Ko.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),h=a.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const _=be(c[g],m[g]);if(_!==0)return _;const S=va(u[c[g]],h[m[g]]);if(S!==0)return S}return be(c.length,m.length)}(t.mapValue,e.mapValue);default:throw ae()}}function z2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=io(t),i=io(e),r=be(n.seconds,i.seconds);return r!==0?r:be(n.nanos,i.nanos)}function pd(t){return V1(t)}function V1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=io(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ma(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=V1(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${V1(n.fields[a])}`;return r+"}"}(t.mapValue):ae()}function Bl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function F1(t){return!!t&&"integerValue"in t}function em(t){return!!t&&"arrayValue"in t}function $2(t){return!!t&&"nullValue"in t}function q2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sy(t){return!!t&&"mapValue"in t}function ap(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return tu(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ap(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ap(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function OQ(t){return"nullValue"in t?ry:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Bl(ga.empty(),ie.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ae()}function LQ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Bl(ga.empty(),ie.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ko:ae()}function G2(t,e){const n=va(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function W2(t,e){const n=va(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!sy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(n)}setAll(e){let n=Et.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=ap(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());sy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];sy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){tu(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Vn(ap(this.value))}}function GF(t){const e=[];return tu(t.fields,(n,i)=>{const r=new Et([n]);if(sy(i)){const o=GF(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new mt(e,0,ge.min(),ge.min(),ge.min(),Vn.empty(),0)}static newFoundDocument(e,n,i,r){return new mt(e,1,n,ge.min(),i,r,0)}static newNoDocument(e,n){return new mt(e,2,n,ge.min(),ge.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ge.min(),ge.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.position=e,this.inclusive=n}}function H2(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ie.comparator(ie.fromName(a.referenceValue),n.key):i=va(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function K2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n="asc"){this.field=e,this.dir=n}}function MQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{}class Be extends WF{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new VQ(e,n,i):n==="array-contains"?new BQ(e,i):n==="in"?new XF(e,i):n==="not-in"?new jQ(e,i):n==="array-contains-any"?new zQ(e,i):new Be(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new FQ(e,i):new UQ(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(va(n,this.value)):n!==null&&Ul(this.value)===Ul(n)&&this.matchesComparison(va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends WF{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new et(e,n)}matches(e){return md(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function md(t){return t.op==="and"}function U1(t){return t.op==="or"}function Cb(t){return HF(t)&&md(t)}function HF(t){for(const e of t.filters)if(e instanceof et)return!1;return!0}function B1(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+pd(t.value);if(Cb(t))return t.filters.map(e=>B1(e)).join(",");{const e=t.filters.map(n=>B1(n)).join(",");return`${t.op}(${e})`}}function KF(t,e){return t instanceof Be?function(i,r){return r instanceof Be&&i.op===r.op&&i.field.isEqual(r.field)&&vs(i.value,r.value)}(t,e):t instanceof et?function(i,r){return r instanceof et&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&KF(a,r.filters[u]),!0):!1}(t,e):void ae()}function QF(t,e){const n=t.filters.concat(e);return et.create(n,t.op)}function YF(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${pd(n.value)}`}(t):t instanceof et?function(n){return n.op.toString()+" {"+n.getFilters().map(YF).join(" ,")+"}"}(t):"Filter"}class VQ extends Be{constructor(e,n,i){super(e,n,i),this.key=ie.fromName(i.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class FQ extends Be{constructor(e,n){super(e,"in",n),this.keys=JF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UQ extends Be{constructor(e,n){super(e,"not-in",n),this.keys=JF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ie.fromName(i.referenceValue))}class BQ extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return em(n)&&Zp(n.arrayValue,this.value)}}class XF extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zp(this.value.arrayValue,n)}}class jQ extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zp(this.value.arrayValue,n)}}class zQ extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!em(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Zp(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function j1(t,e=null,n=[],i=[],r=null,o=null,a=null){return new $Q(t,e,n,i,r,o,a)}function jl(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>B1(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Am(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>pd(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>pd(i)).join(",")),e.ue=n}return e.ue}function Rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MQ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!K2(t.startAt,e.startAt)&&K2(t.endAt,e.endAt)}function o_(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function a_(t,e){return t.filters.filter(n=>n instanceof Be&&n.field.isEqual(e))}function Q2(t,e,n){let i=ry,r=!0;for(const o of a_(t,e)){let a=ry,u=!0;switch(o.op){case"<":case"<=":a=OQ(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,u=!1;break;case"!=":case"not-in":a=ry}G2({value:i,inclusive:r},{value:a,inclusive:u})<0&&(i=a,r=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const a=n.position[o];G2({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function Y2(t,e,n){let i=Ko,r=!0;for(const o of a_(t,e)){let a=Ko,u=!0;switch(o.op){case">=":case">":a=LQ(o.value),u=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,u=!1;break;case"!=":case"not-in":a=Ko}W2({value:i,inclusive:r},{value:a,inclusive:u})>0&&(i=a,r=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const a=n.position[o];W2({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ZF(t,e,n,i,r,o,a,u){return new uo(t,e,n,i,r,o,a,u)}function Bd(t){return new uo(t)}function J2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ab(t){return t.collectionGroup!==null}function Yc(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new it(Et.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new tm(o,i))}),n.has(Et.keyField().canonicalString())||e.ce.push(new tm(Et.keyField(),i))}return e.ce}function si(t){const e=se(t);return e.le||(e.le=qQ(e,Yc(t))),e.le}function qQ(t,e){if(t.limitType==="F")return j1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new tm(r.field,o)});const n=t.endAt?new ya(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ya(t.startAt.position,t.startAt.inclusive):null;return j1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function z1(t,e){const n=t.filters.concat([e]);return new uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function l_(t,e,n){return new uo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pm(t,e){return Rm(si(t),si(e))&&t.limitType===e.limitType}function e4(t){return`${jl(si(t))}|lt:${t.limitType}`}function _c(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>YF(r)).join(", ")}]`),Am(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>pd(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>pd(r)).join(",")),`Target(${i})`}(si(t))}; limitType=${t.limitType})`}function km(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ie.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Yc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,c){const h=H2(a,u,c);return a.inclusive?h<=0:h<0}(i.startAt,Yc(i),r)||i.endAt&&!function(a,u,c){const h=H2(a,u,c);return a.inclusive?h>=0:h>0}(i.endAt,Yc(i),r))}(t,e)}function t4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function n4(t){return(e,n)=>{let i=!1;for(const r of Yc(t)){const o=GQ(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function GQ(t,e,n){const i=t.field.isKeyField()?ie.comparator(e.key,n.key):function(o,a,u){const c=a.data.field(o),h=u.data.field(o);return c!==null&&h!==null?va(c,h):ae()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tu(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return zF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WQ=new ut(ie.comparator);function Ei(){return WQ}const i4=new ut(ie.comparator);function Bf(...t){let e=i4;for(const n of t)e=e.insert(n.key,n);return e}function r4(t){let e=i4;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function cs(){return lp()}function s4(){return lp()}function lp(){return new Pa(t=>t.toString(),(t,e)=>t.isEqual(e))}const HQ=new ut(ie.comparator),KQ=new it(ie.comparator);function Re(...t){let e=KQ;for(const n of t)e=e.add(n);return e}const QQ=new it(be);function Rb(){return QQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jp(e)?"-0":e}}function a4(t){return{integerValue:""+t}}function l4(t,e){return MF(e)?a4(e):o4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this._=void 0}}function YQ(t,e,n){return t instanceof gd?function(r,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&dw(o)&&(o=bb(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof zl?c4(t,e):t instanceof $l?d4(t,e):function(r,o){const a=u4(r,o),u=X2(a)+X2(r.Pe);return F1(a)&&F1(r.Pe)?a4(u):o4(r.serializer,u)}(t,e)}function JQ(t,e,n){return t instanceof zl?c4(t,e):t instanceof $l?d4(t,e):n}function u4(t,e){return t instanceof vd?function(i){return F1(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class gd extends hw{}class zl extends hw{constructor(e){super(),this.elements=e}}function c4(t,e){const n=h4(e);for(const i of t.elements)n.some(r=>vs(r,i))||n.push(i);return{arrayValue:{values:n}}}class $l extends hw{constructor(e){super(),this.elements=e}}function d4(t,e){let n=h4(e);for(const i of t.elements)n=n.filter(r=>!vs(r,i));return{arrayValue:{values:n}}}class vd extends hw{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function X2(t){return Vt(t.integerValue||t.doubleValue)}function h4(t){return em(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.field=e,this.transform=n}}function XQ(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof zl&&r instanceof zl||i instanceof $l&&r instanceof $l?fd(i.elements,r.elements,vs):i instanceof vd&&r instanceof vd?vs(i.Pe,r.Pe):i instanceof gd&&r instanceof gd}(t.transform,e.transform)}class ZQ{constructor(e,n){this.version=e,this.transformResults=n}}class It{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new It}static exists(e){return new It(void 0,e)}static updateTime(e){return new It(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fw{}function f4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zd(t.key,It.none()):new jd(t.key,t.data,It.none());{const n=t.data,i=Vn.empty();let r=new it(Et.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new co(t.key,i,new wi(r.toArray()),It.none())}}function eY(t,e,n){t instanceof jd?function(r,o,a){const u=r.value.clone(),c=eN(r.fieldTransforms,o,a.transformResults);u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof co?function(r,o,a){if(!oy(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=eN(r.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(p4(r)),c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function up(t,e,n,i){return t instanceof jd?function(o,a,u,c){if(!oy(o.precondition,a))return u;const h=o.value.clone(),m=tN(o.fieldTransforms,c,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof co?function(o,a,u,c){if(!oy(o.precondition,a))return u;const h=tN(o.fieldTransforms,c,a),m=a.data;return m.setAll(p4(o)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(o,a,u){return oy(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function tY(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=u4(i.transform,r||null);o!=null&&(n===null&&(n=Vn.empty()),n.set(i.field,o))}return n||null}function Z2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&fd(i,r,(o,a)=>XQ(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jd extends fw{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class co extends fw{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function p4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function eN(t,e,n){const i=new Map;me(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,JQ(a,u,n[r]))}return i}function tN(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,YQ(o,a,e))}return i}class zd extends fw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pb extends fw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&eY(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=up(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=up(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=s4();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const c=f4(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&fd(this.mutations,e.mutations,(n,i)=>Z2(n,i))&&fd(this.baseMutations,e.baseMutations,(n,i)=>Z2(n,i))}}class xb{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){me(e.mutations.length===i.length);let r=function(){return HQ}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new xb(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,qe;function m4(t){switch(t){default:return ae();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function g4(t){if(t===void 0)return Kt("GRPC error has no .code"),G.UNKNOWN;switch(t){case tn.OK:return G.OK;case tn.CANCELLED:return G.CANCELLED;case tn.UNKNOWN:return G.UNKNOWN;case tn.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case tn.INTERNAL:return G.INTERNAL;case tn.UNAVAILABLE:return G.UNAVAILABLE;case tn.UNAUTHENTICATED:return G.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case tn.NOT_FOUND:return G.NOT_FOUND;case tn.ALREADY_EXISTS:return G.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return G.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case tn.ABORTED:return G.ABORTED;case tn.OUT_OF_RANGE:return G.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return G.UNIMPLEMENTED;case tn.DATA_LOSS:return G.DATA_LOSS;default:return ae()}}(qe=tn||(tn={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iY=new Sl([4294967295,4294967295],0);function nN(t){const e=v4().encode(t),n=new EF;return n.update(e),new Uint8Array(n.digest())}function iN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Sl([n,i],0),new Sl([r,o],0)]}class Db{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new jf(`Invalid padding: ${n}`);if(i<0)throw new jf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new jf(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new jf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Sl.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Sl.fromNumber(i)));return r.compare(iY)===1&&(r=new Sl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=nN(e),[i,r]=iN(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Db(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=nN(e),[i,r]=iN(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class jf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Dm.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Nm(ge.min(),r,new ut(be),Ei(),Re())}}class Dm{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Dm(i,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class y4{constructor(e,n){this.targetId=e,this.me=n}}class _4{constructor(e,n,i=fn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class rN{constructor(){this.fe=0,this.ge=oN(),this.pe=fn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Re(),n=Re(),i=Re();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ae()}}),new Dm(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=oN()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rY{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ei(),this.qe=sN(),this.Qe=new ut(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const o=r.target;if(o_(o))if(i===0){const a=new ie(o.path);this.Ue(n,a,mt.newNoDocument(a,ge.min()))}else me(i===1);else{const a=this.Ye(n);if(a!==i){const u=this.Ze(e),c=u?this.Xe(u,e,a):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=ma(i).toUint8Array()}catch(c){if(c instanceof $F)return Fr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Db(a,r,o)}catch(c){return Fr(c instanceof jf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&o_(u.target)){const c=new ie(u.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,mt.newNoDocument(c,e))}o.be&&(n.set(a,o.Ce()),o.ve())}});let i=Re();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const r=new Nm(e,n,this.Qe,this.ke,i);return this.ke=Ei(),this.qe=sN(),this.Qe=new ut(be),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new rN,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new rN),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sN(){return new ut(ie.comparator)}function oN(){return new ut(ie.comparator)}const sY={asc:"ASCENDING",desc:"DESCENDING"},oY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aY={and:"AND",or:"OR"};class lY{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $1(t,e){return t.useProto3Json||Am(e)?e:{value:e}}function yd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uY(t,e){return yd(t,e.toTimestamp())}function Qt(t){return me(!!t),ge.fromTimestamp(function(n){const i=io(n);return new Tt(i.seconds,i.nanos)}(t))}function Ob(t,e){return q1(t,e).canonicalString()}function q1(t,e){const n=function(r){return new Ue(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function E4(t){const e=Ue.fromString(t);return me(x4(e)),e}function nm(t,e){return Ob(t.databaseId,e.path)}function ms(t,e){const n=E4(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(S4(n))}function I4(t,e){return Ob(t.databaseId,e)}function T4(t){const e=E4(t);return e.length===4?Ue.emptyPath():S4(e)}function G1(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function S4(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aN(t,e,n){return{name:nm(t,e),fields:n.value.mapValue.fields}}function b4(t,e,n){const i=ms(t,e.name),r=Qt(e.updateTime),o=e.createTime?Qt(e.createTime):ge.min(),a=new Vn({mapValue:{fields:e.fields}}),u=mt.newFoundDocument(i,r,o,a);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function cY(t,e){return"found"in e?function(i,r){me(!!r.found),r.found.name,r.found.updateTime;const o=ms(i,r.found.name),a=Qt(r.found.updateTime),u=r.found.createTime?Qt(r.found.createTime):ge.min(),c=new Vn({mapValue:{fields:r.found.fields}});return mt.newFoundDocument(o,a,u,c)}(t,e):"missing"in e?function(i,r){me(!!r.missing),me(!!r.readTime);const o=ms(i,r.missing),a=Qt(r.readTime);return mt.newNoDocument(o,a)}(t,e):ae()}function dY(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(h,m){return h.useProto3Json?(me(m===void 0||typeof m=="string"),fn.fromBase64String(m||"")):(me(m===void 0||m instanceof Buffer||m instanceof Uint8Array),fn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(h){const m=h.code===void 0?G.UNKNOWN:g4(h.code);return new Y(m,h.message||"")}(a);n=new _4(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ms(t,i.document.name),o=Qt(i.document.updateTime),a=i.document.createTime?Qt(i.document.createTime):ge.min(),u=new Vn({mapValue:{fields:i.document.fields}}),c=mt.newFoundDocument(r,o,a,u),h=i.targetIds||[],m=i.removedTargetIds||[];n=new ay(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ms(t,i.document),o=i.readTime?Qt(i.readTime):ge.min(),a=mt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new ay([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ms(t,i.document),o=i.removedTargetIds||[];n=new ay([],o,r,null)}else{if(!("filter"in e))return ae();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new nY(r,o),u=i.targetId;n=new y4(u,a)}}return n}function im(t,e){let n;if(e instanceof jd)n={update:aN(t,e.key,e.value)};else if(e instanceof zd)n={delete:nm(t,e.key)};else if(e instanceof co)n={update:aN(t,e.key,e.data),updateMask:vY(e.fieldMask)};else{if(!(e instanceof Pb))return ae();n={verify:nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof gd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof zl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof $l)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof vd)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw ae()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:uY(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae()}(t,e.precondition)),n}function W1(t,e){const n=e.currentDocument?function(o){return o.updateTime!==void 0?It.updateTime(Qt(o.updateTime)):o.exists!==void 0?It.exists(o.exists):It.none()}(e.currentDocument):It.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,u){let c=null;if("setToServerValue"in u)me(u.setToServerValue==="REQUEST_TIME"),c=new gd;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];c=new zl(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];c=new $l(m)}else"increment"in u?c=new vd(a,u.increment):ae();const h=Et.fromServerFormat(u.fieldPath);return new xm(h,c)}(t,r)):[];if(e.update){e.update.name;const r=ms(t,e.update.name),o=new Vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const h=c.fieldPaths||[];return new wi(h.map(m=>Et.fromServerFormat(m)))}(e.updateMask);return new co(r,o,a,n,i)}return new jd(r,o,n,i)}if(e.delete){const r=ms(t,e.delete);return new zd(r,n)}if(e.verify){const r=ms(t,e.verify);return new Pb(r,n)}return ae()}function hY(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?Qt(r.updateTime):Qt(o);return a.isEqual(ge.min())&&(a=Qt(o)),new ZQ(a,r.transformResults||[])}(n,e))):[]}function C4(t,e){return{documents:[I4(t,e.path)]}}function A4(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=I4(t,r);const o=function(h){if(h.length!==0)return k4(et.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(h){if(h.length!==0)return h.map(m=>function(_){return{field:wc(_.field),direction:pY(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=$1(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:r}}function R4(t){let e=T4(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){me(i===1);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(g){const _=P4(g);return _ instanceof et&&Cb(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(P){return new tm(Ec(P.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Am(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,S=g.values||[];return new ya(S,_)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const _=!g.before,S=g.values||[];return new ya(S,_)}(n.endAt)),ZF(e,r,a,o,u,"F",c,h)}function fY(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function P4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ec(n.unaryFilter.field);return Be.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ec(n.unaryFilter.field);return Be.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ec(n.unaryFilter.field);return Be.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ec(n.unaryFilter.field);return Be.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Be.create(Ec(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return et.create(n.compositeFilter.filters.map(i=>P4(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function pY(t){return sY[t]}function mY(t){return oY[t]}function gY(t){return aY[t]}function wc(t){return{fieldPath:t.canonicalString()}}function Ec(t){return Et.fromServerFormat(t.fieldPath)}function k4(t){return t instanceof Be?function(n){if(n.op==="=="){if(q2(n.value))return{unaryFilter:{field:wc(n.field),op:"IS_NAN"}};if($2(n.value))return{unaryFilter:{field:wc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(q2(n.value))return{unaryFilter:{field:wc(n.field),op:"IS_NOT_NAN"}};if($2(n.value))return{unaryFilter:{field:wc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wc(n.field),op:mY(n.op),value:n.value}}}(t):t instanceof et?function(n){const i=n.getFilters().map(r=>k4(r));return i.length===1?i[0]:{compositeFilter:{op:gY(n.op),filters:i}}}(t):ae()}function vY(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function x4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,i,r,o=ge.min(),a=ge.min(),u=fn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.ct=e}}function yY(t,e){let n;if(e.document)n=b4(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ie.fromSegments(e.noDocument.path),r=Gl(e.noDocument.readTime);n=mt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ae();{const i=ie.fromSegments(e.unknownDocument.path),r=Gl(e.unknownDocument.version);n=mt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const o=new Tt(r[0],r[1]);return ge.fromTimestamp(o)}(e.readTime)),n}function lN(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:u_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,a){return{name:nm(o,a.key),fields:a.data.value.mapValue.fields,updateTime:yd(o,a.version.toTimestamp()),createTime:yd(o,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:ql(e.version)};else{if(!e.isUnknownDocument())return ae();i.unknownDocument={path:n.path.toArray(),version:ql(e.version)}}return i}function u_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ql(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gl(t){const e=new Tt(t.seconds,t.nanoseconds);return ge.fromTimestamp(e)}function al(t,e){const n=(e.baseMutations||[]).map(o=>W1(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){const a=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];a.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map(o=>W1(t.ct,o)),r=Tt.fromMillis(e.localWriteTimeMs);return new kb(e.batchId,r,n,i)}function zf(t){const e=Gl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Gl(t.lastLimboFreeSnapshotVersion):ge.min();let i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return me(o.documents.length===1),si(Bd(T4(o.documents[0])))}(t.query):function(o){return si(R4(o))}(t.query),new Gs(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,fn.fromBase64String(t.resumeToken))}function D4(t,e){const n=ql(e.snapshotVersion),i=ql(e.lastLimboFreeSnapshotVersion);let r;r=o_(e.target)?C4(t.ct,e.target):A4(t.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jl(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Lb(t){const e=R4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?l_(e,e.limit,"L"):e}function XE(t,e){return new Nb(e.largestBatchId,W1(t.ct,e.overlayMutation))}function uN(t,e){const n=e.path.lastSegment();return[t,ri(e.path.popLast()),n]}function cN(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:ql(i.readTime),documentKey:ri(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{getBundleMetadata(e,n){return dN(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Gl(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return dN(e).put(function(r){return{bundleId:r.id,createTime:ql(Qt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return hN(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:Lb(o.bundledQuery),readTime:Gl(o.readTime)}}(i)})}saveNamedQuery(e,n){return hN(e).put(function(r){return{name:r.name,readTime:ql(Qt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function dN(t){return An(t,"bundles")}function hN(t){return An(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const i=n.uid||"";return new pw(e,i)}getOverlay(e,n){return bf(e).get(uN(this.userId,n)).next(i=>i?XE(this.serializer,i):null)}getOverlays(e,n){const i=cs();return $.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((o,a)=>{const u=new Nb(n,a);r.push(this.ht(e,u))}),$.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(ri(a.getCollectionPath())));const o=[];return r.forEach(a=>{const u=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);o.push(bf(e).j("collectionPathOverlayIndex",u))}),$.waitFor(o)}getOverlaysForCollection(e,n,i){const r=cs(),o=ri(n),a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return bf(e).U("collectionPathOverlayIndex",a).next(u=>{for(const c of u){const h=XE(this.serializer,c);r.set(h.getKey(),h)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const o=cs();let a;const u=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return bf(e).J({index:"collectionGroupOverlayIndex",range:u},(c,h,m)=>{const g=XE(this.serializer,h);o.size()<r||g.largestBatchId===a?(o.set(g.getKey(),g),a=g.largestBatchId):m.done()}).next(()=>o)}ht(e,n){return bf(e).put(function(r,o,a){const[u,c,h]=uN(o,a.mutation.key);return{userId:o,collectionPath:c,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:im(r.ct,a.mutation)}}(this.serializer,this.userId,n))}}function bf(t){return An(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Vt(e.integerValue));else if("doubleValue"in e){const i=Vt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Jp(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=io(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(ma(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?qF(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ae()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const i=e.fields||{};this.Et(n,55);for(const r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){const i=e.values||[];this.Et(n,50);for(const r of i)this.It(r,n)}gt(e,n){this.Et(n,37),ie.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}ll.bt=new ll;function wY(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function fN(t){const e=64-function(i){let r=0;for(let o=0;o<8;++o){const a=wY(255&i[o]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class EY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{const r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{const r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){const n=this.Bt(e),i=fN(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){const n=this.Bt(e),i=fN(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,o,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class IY{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class TY{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Cf{constructor(){this.Gt=new EY,this.zt=new IY(this.Gt),this.jt=new TY(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ul(this.indexId,this.documentKey,this.arrayValue,i)}}function Mo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=pN(t.arrayValue,e.arrayValue),n!==0?n:(n=pN(t.directionalValue,e.directionalValue),n!==0?n:ie.comparator(t.documentKey,e.documentKey)))}function pN(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.Yt=new it((n,i)=>Et.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(me(e.collectionGroup===this.collectionId),this.en)return!1;const n=L1(e);if(n!==void 0&&!this.nn(n))return!1;const i=sl(e);let r=new Set,o=0,a=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){const u=this.Yt.getIterator().getNext();if(!r.has(u.field.canonicalString())){const c=i[o];if(!this.rn(u,c)||!this.sn(this.Zt[a++],c))return!1}++o}for(;o<i.length;++o){const u=i[o];if(a>=this.Zt.length||!this.sn(this.Zt[a++],u))return!1}return!0}on(){if(this.en)return null;let e=new it(Et.comparator);const n=[];for(const i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new ny(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new ny(i.field,0))}for(const i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new ny(i.field,i.dir==="asc"?0:1)));return new s_(s_.UNKNOWN_ID,this.collectionId,n,Yp.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){var e,n;if(me(t instanceof Be||t instanceof et),t instanceof Be){if(t instanceof XF){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Be.create(t.field,"==",o)))||[];return et.create(r,"or")}return t}const i=t.filters.map(r=>O4(r));return et.create(i,t.op)}function SY(t){if(t.getFilters().length===0)return[];const e=Q1(O4(t));return me(L4(e)),H1(e)||K1(e)?[e]:e.getFilters()}function H1(t){return t instanceof Be}function K1(t){return t instanceof et&&Cb(t)}function L4(t){return H1(t)||K1(t)||function(n){if(n instanceof et&&U1(n)){for(const i of n.getFilters())if(!H1(i)&&!K1(i))return!1;return!0}return!1}(t)}function Q1(t){if(me(t instanceof Be||t instanceof et),t instanceof Be)return t;if(t.filters.length===1)return Q1(t.filters[0]);const e=t.filters.map(i=>Q1(i));let n=et.create(e,t.op);return n=c_(n),L4(n)?n:(me(n instanceof et),me(md(n)),me(n.filters.length>1),n.filters.reduce((i,r)=>Mb(i,r)))}function Mb(t,e){let n;return me(t instanceof Be||t instanceof et),me(e instanceof Be||e instanceof et),n=t instanceof Be?e instanceof Be?function(r,o){return et.create([r,o],"and")}(t,e):gN(t,e):e instanceof Be?gN(e,t):function(r,o){if(me(r.filters.length>0&&o.filters.length>0),md(r)&&md(o))return QF(r,o.getFilters());const a=U1(r)?r:o,u=U1(r)?o:r,c=a.filters.map(h=>Mb(h,u));return et.create(c,"or")}(t,e),c_(n)}function gN(t,e){if(md(e))return QF(e,t.getFilters());{const n=e.filters.map(i=>Mb(t,i));return et.create(n,"or")}}function c_(t){if(me(t instanceof Be||t instanceof et),t instanceof Be)return t;const e=t.getFilters();if(e.length===1)return c_(e[0]);if(HF(t))return t;const n=e.map(r=>c_(r)),i=[];return n.forEach(r=>{r instanceof Be?i.push(r):r instanceof et&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:et.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY{constructor(){this._n=new Vb}addToCollectionParentIndex(e,n){return this._n.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(zi.min())}updateCollectionGroup(e,n,i){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class Vb{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new it(Ue.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new it(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Uint8Array(0);class CY{constructor(e,n){this.databaseId=n,this.an=new Vb,this.un=new Pa(i=>jl(i),(i,r)=>Rm(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const o={collectionId:i,parent:ri(r)};return vN(e).put(o)}return $.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[kF(n),""],!1,!0);return vN(e).U(r).next(o=>{for(const a of o){if(a.collectionId!==n)break;i.push(us(a.parent))}return i})}addFieldIndex(e,n){const i=Af(e),r=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const o=i.add(r);if(n.indexState){const a=gc(e);return o.next(u=>{a.put(cN(u,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const i=Af(e),r=gc(e),o=mc(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Af(e),i=mc(e),r=gc(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return $.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const o=new mN(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const i=mc(e);let r=!0;const o=new Map;return $.forEach(this.cn(n),a=>this.ln(e,a).next(u=>{r&&(r=!!u),o.set(a,u)})).next(()=>{if(r){let a=Re();const u=[];return $.forEach(o,(c,h)=>{J("IndexedDbIndexManager",`Using index ${function(A){return`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`}(c)} to execute ${jl(n)}`);const m=function(A,M){const B=L1(M);if(B===void 0)return null;for(const j of a_(A,B.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(h,c),g=function(A,M){const B=new Map;for(const j of sl(M))for(const D of a_(A,j.fieldPath))switch(D.op){case"==":case"in":B.set(j.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return B.set(j.fieldPath.canonicalString(),D.value),Array.from(B.values())}return null}(h,c),_=function(A,M){const B=[];let j=!0;for(const D of sl(M)){const C=D.kind===0?Q2(A,D.fieldPath,A.startAt):Y2(A,D.fieldPath,A.startAt);B.push(C.value),j&&(j=C.inclusive)}return new ya(B,j)}(h,c),S=function(A,M){const B=[];let j=!0;for(const D of sl(M)){const C=D.kind===0?Y2(A,D.fieldPath,A.endAt):Q2(A,D.fieldPath,A.endAt);B.push(C.value),j&&(j=C.inclusive)}return new ya(B,j)}(h,c),P=this.hn(c,h,_),I=this.hn(c,h,S),k=this.Pn(c,h,g),E=this.In(c.indexId,m,P,_.inclusive,I,S.inclusive,k);return $.forEach(E,b=>i.G(b,n.limit).next(A=>{A.forEach(M=>{const B=ie.fromSegments(M.documentKey);a.has(B)||(a=a.add(B),u.push(B))})}))}).next(()=>u)}return $.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=SY(et.create(e.filters,"and")).map(i=>j1(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,a,u){const c=(n!=null?n.length:1)*Math.max(i.length,o.length),h=c/(n!=null?n.length:1),m=[];for(let g=0;g<c;++g){const _=n?this.Tn(n[g/h]):Pv,S=this.En(e,_,i[g%h],r),P=this.dn(e,_,o[g%h],a),I=u.map(k=>this.En(e,_,k,!0));m.push(...this.createRange(S,P,I))}return m}En(e,n,i,r){const o=new ul(e,ie.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){const o=new ul(e,ie.empty(),n,i);return r?o.Jt():o}ln(e,n){const i=new mN(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let a=null;for(const u of o)i.tn(u)&&(!a||u.fields.length>a.fields.length)&&(a=u);return a})}getIndexType(e,n){let i=2;const r=this.cn(n);return $.forEach(r,o=>this.ln(e,o).next(a=>{a?i!==0&&a.fields.length<function(c){let h=new it(Et.comparator),m=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?m=!0:h=h.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)}(o)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){const i=new Cf;for(const r of sl(e)){const o=n.data.field(r.fieldPath);if(o==null)return null;const a=i.Ht(r.kind);ll.bt.Pt(o,a)}return i.Wt()}Tn(e){const n=new Cf;return ll.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const i=new Cf;return ll.bt.Pt(Bl(this.databaseId,n),i.Ht(function(o){const a=sl(o);return a.length===0?0:a[a.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new Cf);let o=0;for(const a of sl(e)){const u=i[o++];for(const c of r)if(this.Vn(n,a.fieldPath)&&em(u))r=this.mn(r,a,u);else{const h=c.Ht(a.kind);ll.bt.Pt(u,h)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){const r=[...e],o=[];for(const a of i.arrayValue.values||[])for(const u of r){const c=new Cf;c.seed(u.Wt()),ll.bt.Pt(a,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof Be&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=Af(e),r=gc(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{const a=[];return $.forEach(o,u=>r.get([u.indexId,this.uid]).next(c=>{a.push(function(m,g){const _=g?new Yp(g.sequenceNumber,new zi(Gl(g.readTime),new ie(us(g.documentKey)),g.largestBatchId)):Yp.empty(),S=m.fields.map(([P,I])=>new ny(Et.fromServerFormat(P),I));return new s_(m.indexId,m.collectionGroup,S,_)}(u,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:be(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=Af(e),o=gc(e);return this.gn(e).next(a=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(u=>$.forEach(u,c=>o.put(cN(c.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return $.forEach(n,(r,o)=>{const a=i.get(r.collectionGroup);return(a?$.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(u=>(i.set(r.collectionGroup,u),$.forEach(u,c=>this.pn(e,r,c).next(h=>{const m=this.yn(o,c);return h.isEqual(m)?$.resolve():this.wn(e,o,c,h,m)}))))})}Sn(e,n,i,r){return mc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return mc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){const r=mc(e);let o=new it(Mo);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(a,u)=>{o=o.add(new ul(i.indexId,n,u.arrayValue,u.directionalValue))}).next(()=>o)}yn(e,n){let i=new it(Mo);const r=this.An(n,e);if(r==null)return i;const o=L1(n);if(o!=null){const a=e.data.field(o.fieldPath);if(em(a))for(const u of a.arrayValue.values||[])i=i.add(new ul(n.indexId,e.key,this.Tn(u),r))}else i=i.add(new ul(n.indexId,e.key,Pv,r));return i}wn(e,n,i,r,o){J("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const a=[];return function(c,h,m,g,_){const S=c.getIterator(),P=h.getIterator();let I=pc(S),k=pc(P);for(;I||k;){let E=!1,b=!1;if(I&&k){const A=m(I,k);A<0?b=!0:A>0&&(E=!0)}else I!=null?b=!0:E=!0;E?(g(k),k=pc(P)):b?(_(I),I=pc(S)):(I=pc(S),k=pc(P))}}(r,o,Mo,u=>{a.push(this.Sn(e,n,i,u))},u=>{a.push(this.bn(e,n,i,u))}),$.waitFor(a)}gn(e){let n=1;return gc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,u)=>Mo(a,u)).filter((a,u,c)=>!u||Mo(a,c[u-1])!==0);const r=[];r.push(e);for(const a of i){const u=Mo(a,e),c=Mo(a,n);if(u===0)r[0]=e.Jt();else if(u>0&&c<0)r.push(a),r.push(a.Jt());else if(c>0)break}r.push(n);const o=[];for(let a=0;a<r.length;a+=2){if(this.Dn(r[a],r[a+1]))return[];const u=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,Pv,[]],c=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,Pv,[]];o.push(IDBKeyRange.bound(u,c))}return o}Dn(e,n){return Mo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yN)}getMinOffset(e,n){return $.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||ae())).next(yN)}}function vN(t){return An(t,"collectionParents")}function mc(t){return An(t,"indexEntries")}function Af(t){return An(t,"indexConfiguration")}function gc(t){return An(t,"indexState")}function yN(t){me(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;Tb(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new zi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mi{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId);let u=0;const c=i.J({range:a},(m,g,_)=>(u++,_.delete()));o.push(c.next(()=>{me(u===1)}));const h=[];for(const m of n.mutations){const g=VF(e,m.key.path,n.batchId);o.push(r.delete(g)),h.push(m.key)}return $.waitFor(o).next(()=>h)}function d_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ae();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(41943040,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);class mw{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){me(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new mw(o,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vo(e).J({index:"userMutationsIndex",range:i},(r,o,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const o=Ic(e),a=Vo(e);return a.add({}).next(u=>{me(typeof u=="number");const c=new kb(u,n,i,r),h=function(S,P,I){const k=I.baseMutations.map(b=>im(S.ct,b)),E=I.mutations.map(b=>im(S.ct,b));return{userId:P,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:k,mutations:E}}(this.serializer,this.userId,c),m=[];let g=new it((_,S)=>be(_.canonicalString(),S.canonicalString()));for(const _ of r){const S=VF(this.userId,_.key.path,u);g=g.add(_.key.path.popLast()),m.push(a.put(h)),m.push(o.put(S,pQ))}return g.forEach(_=>{m.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Cn[u]=c.keys()}),$.waitFor(m).next(()=>c)})}lookupMutationBatch(e,n){return Vo(e).get(n).next(i=>i?(me(i.userId===this.userId),al(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?$.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Vo(e).J({index:"userMutationsIndex",range:r},(a,u,c)=>{u.userId===this.userId&&(me(u.batchId>=i),o=al(this.serializer,u)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Vo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,a)=>{i=o.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vo(e).U("userMutationsIndex",n).next(i=>i.map(r=>al(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=iy(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return Ic(e).J({range:r},(a,u,c)=>{const[h,m,g]=a,_=us(m);if(h===this.userId&&n.path.isEqual(_))return Vo(e).get(g).next(S=>{if(!S)throw ae();me(S.userId===this.userId),o.push(al(this.serializer,S))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new it(be);const r=[];return n.forEach(o=>{const a=iy(this.userId,o.path),u=IDBKeyRange.lowerBound(a),c=Ic(e).J({range:u},(h,m,g)=>{const[_,S,P]=h,I=us(S);_===this.userId&&o.path.isEqual(I)?i=i.add(P):g.done()});r.push(c)}),$.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,o=iy(this.userId,i),a=IDBKeyRange.lowerBound(o);let u=new it(be);return Ic(e).J({range:a},(c,h,m)=>{const[g,_,S]=c,P=us(_);g===this.userId&&i.isPrefixOf(P)?P.length===r&&(u=u.add(S)):m.done()}).next(()=>this.Fn(e,u))}Fn(e,n){const i=[],r=[];return n.forEach(o=>{r.push(Vo(e).get(o).next(a=>{if(a===null)throw ae();me(a.userId===this.userId),i.push(al(this.serializer,a))}))}),$.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return M4(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),$.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Ic(e).J({range:i},(o,a,u)=>{if(o[0]===this.userId){const c=us(o[1]);r.push(c)}else u.done()}).next(()=>{me(r.length===0)})})}containsKey(e,n){return V4(e,this.userId,n)}xn(e){return F4(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function V4(t,e,n){const i=iy(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i);let a=!1;return Ic(t).J({range:o,H:!0},(u,c,h)=>{const[m,g,_]=u;m===e&&g===r&&(a=!0),h.done()}).next(()=>a)}function Vo(t){return An(t,"mutations")}function Ic(t){return An(t,"documentMutations")}function F4(t){return An(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Wl(0)}static Ln(){return new Wl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const i=new Wl(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ge.fromTimestamp(new Tt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>vc(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(me(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0;const o=[];return vc(e).J((a,u)=>{const c=zf(u);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(e,c)))}).next(()=>$.waitFor(o)).next(()=>r)}forEachTarget(e,n){return vc(e).J((i,r)=>{const o=zf(r);n(o)})}Bn(e){return wN(e).get("targetGlobalKey").next(n=>(me(n!==null),n))}kn(e,n){return wN(e).put("targetGlobalKey",n)}qn(e,n){return vc(e).put(D4(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=jl(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return vc(e).J({range:r,index:"queryTargetsIndex"},(a,u,c)=>{const h=zf(u);Rm(n,h.target)&&(o=h,c.done())}).next(()=>o)}addMatchingKeys(e,n,i){const r=[],o=$o(e);return n.forEach(a=>{const u=ri(a.path);r.push(o.put({targetId:i,path:u})),r.push(this.referenceDelegate.addReference(e,i,a))}),$.waitFor(r)}removeMatchingKeys(e,n,i){const r=$o(e);return $.forEach(n,o=>{const a=ri(o.path);return $.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){const i=$o(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=$o(e);let o=Re();return r.J({range:i,H:!0},(a,u,c)=>{const h=us(a[1]),m=new ie(h);o=o.add(m)}).next(()=>o)}containsKey(e,n){const i=ri(n.path),r=IDBKeyRange.bound([i],[kF(i)],!1,!0);let o=0;return $o(e).J({index:"documentTargetsIndex",H:!0,range:r},([a,u],c,h)=>{a!==0&&(o++,h.done())}).next(()=>o>0)}ot(e,n){return vc(e).get(n).next(i=>i?zf(i):null)}}function vc(t){return An(t,"targets")}function wN(t){return An(t,"targetGlobal")}function $o(t){return An(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN([t,e],[n,i]){const r=be(t,n);return r===0?be(e,i):r}class RY{constructor(e){this.Kn=e,this.buffer=new it(EN),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();EN(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PY{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){J("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ra(n)?J("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Aa(n)}await this.zn(3e5)})}}class kY{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return $.resolve(_i.oe);const i=new RY(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(_N)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_N):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,a,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,u=Date.now(),this.removeTargets(e,i,n))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(h=Date.now(),yc()<=Ne.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:g})))}}function xY(t,e){return new kY(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e,n){this.db=e,this.garbageCollector=xY(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return kv(e,i)}removeReference(e,n,i){return kv(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return kv(e,n)}er(e,n){return function(r,o){let a=!1;return F4(r).Y(u=>V4(r,u,o).next(c=>(c&&(a=!0),$.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Xn(e,(a,u)=>{if(u<=n){const c=this.er(e,a).next(h=>{if(!h)return o++,i.getEntry(e,a).next(()=>(i.removeEntry(a,ge.min()),$o(e).delete(function(g){return[0,ri(g.path)]}(a))))});r.push(c)}}).next(()=>$.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return kv(e,n)}Xn(e,n){const i=$o(e);let r,o=_i.oe;return i.J({index:"documentTargetsIndex"},([a,u],{path:c,sequenceNumber:h})=>{a===0?(o!==_i.oe&&n(new ie(us(r)),o),o=h,r=c):o=_i.oe}).next(()=>{o!==_i.oe&&n(new ie(us(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kv(t,e){return $o(t).put(function(i,r){return{targetId:0,path:ri(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.changes=new Pa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?$.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return el(e).put(i)}removeEntry(e,n,i){return el(e).delete(function(o,a){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],u_(a),u[u.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=mt.newInvalidDocument(n);return el(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rf(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:mt.newInvalidDocument(n)};return el(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Rf(n))},(r,o)=>{i={document:this.nr(n,o),size:d_(o)}}).next(()=>i)}getEntries(e,n){let i=Ei();return this.ir(e,n,(r,o)=>{const a=this.nr(r,o);i=i.insert(r,a)}).next(()=>i)}sr(e,n){let i=Ei(),r=new ut(ie.comparator);return this.ir(e,n,(o,a)=>{const u=this.nr(o,a);i=i.insert(o,u),r=r.insert(o,d_(a))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return $.resolve();let r=new it(SN);n.forEach(c=>r=r.add(c));const o=IDBKeyRange.bound(Rf(r.first()),Rf(r.last())),a=r.getIterator();let u=a.getNext();return el(e).J({index:"documentKeyIndex",range:o},(c,h,m)=>{const g=ie.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&SN(u,g)<0;)i(u,null),u=a.getNext();u&&u.isEqual(g)&&(i(u,h),u=a.hasNext()?a.getNext():null),u?m.$(Rf(u)):m.done()}).next(()=>{for(;u;)i(u,null),u=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){const a=n.path,u=[a.popLast().toArray(),a.lastSegment(),u_(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return el(e).U(IDBKeyRange.bound(u,c,!0)).next(h=>{o==null||o.incrementDocumentReadCount(h.length);let m=Ei();for(const g of h){const _=this.nr(ie.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(km(n,_)||r.has(_.key))&&(m=m.insert(_.key,_))}return m})}getAllFromCollectionGroup(e,n,i,r){let o=Ei();const a=TN(n,i),u=TN(n,zi.max());return el(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,u,!0)},(c,h,m)=>{const g=this.nr(ie.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);o=o.insert(g.key,g),o.size===r&&m.done()}).next(()=>o)}newChangeBuffer(e){return new OY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return IN(e).get("remoteDocumentGlobalKey").next(n=>(me(!!n),n))}tr(e,n){return IN(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const i=yY(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(ge.min())))return i}return mt.newInvalidDocument(e)}}function B4(t){return new DY(t)}class OY extends U4{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Pa(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new it((o,a)=>be(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{const u=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,u.readTime)),a.isValidDocument()){const c=lN(this.ar.serializer,a);r=r.add(o.path.popLast());const h=d_(c);i+=h-u.size,n.push(this.ar.addEntry(e,o,c))}else if(i-=u.size,this.trackRemovals){const c=lN(this.ar.serializer,a.convertToNoDocument(ge.min()));n.push(this.ar.addEntry(e,o,c))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),$.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,a)=>{this.ur.set(o,{size:a,readTime:i.get(o).readTime})}),i))}}function IN(t){return An(t,"remoteDocumentGlobal")}function el(t){return An(t,"remoteDocumentsV14")}function Rf(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TN(t,e){const n=e.documentKey.path.toArray();return[t,u_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SN(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=be(n[o],i[o]),r)return r;return r=be(n.length,i.length),r||(r=be(n[n.length-2],i[i.length-2]),r||be(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&up(i.mutation,r,wi.empty(),Tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Re()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Re()){const r=cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Bf();return o.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Re()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=Ei();const a=lp(),u=function(){return lp()}();return n.forEach((c,h)=>{const m=i.get(h.key);r.has(h.key)&&(m===void 0||m.mutation instanceof co)?o=o.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),up(m.mutation,h,m.mutation.getFieldMask(),Tt.now())):a.set(h.key,wi.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,m)=>a.set(h,m)),n.forEach((h,m)=>{var g;return u.set(h,new LY(m,(g=a.get(h))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const i=lp();let r=new ut((a,u)=>a-u),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=i.get(c)||wi.empty();m=u.applyToLocalView(h,m),i.set(c,m);const g=(r.get(u.batchId)||Re()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,g=s4();m.forEach(_=>{if(!o.has(_)){const S=f4(n.get(_),i.get(_));S!==null&&g.set(_,S),o=o.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return $.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ie.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ab(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):$.resolve(cs());let u=-1,c=o;return a.next(h=>$.forEach(h,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(m)?$.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{c=c.insert(m,_)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,Re())).next(m=>({batchId:u,changes:r4(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(i=>{let r=Bf();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Bf();return this.indexManager.getCollectionParents(e,o).next(u=>$.forEach(u,c=>{const h=function(g,_){return new uo(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(m=>{m.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((c,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,mt.newInvalidDocument(m)))});let u=Bf();return a.forEach((c,h)=>{const m=o.get(c);m!==void 0&&up(m.mutation,h,wi.empty(),Tt.now()),km(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return $.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Qt(r.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:Lb(r.bundledQuery),readTime:Qt(r.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VY{constructor(){this.overlays=new ut(ie.comparator),this.hr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const i=cs();return $.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),$.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),$.resolve()}getOverlaysForCollection(e,n,i){const r=cs(),o=n.length+1,a=new ie(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return $.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new ut((h,m)=>h-m);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let m=o.get(h.largestBatchId);m===null&&(m=cs(),o=o.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=cs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=r)););return $.resolve(u)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Nb(n,i));let o=this.hr.get(n);o===void 0&&(o=Re(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.Pr=new it(wn.Ir),this.Tr=new it(wn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const i=new wn(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new wn(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){const n=new ie(new Ue([])),i=new wn(n,e),r=new wn(n,e+1),o=[];return this.Tr.forEachInRange([i,r],a=>{this.Ar(a),o.push(a.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ie(new Ue([])),i=new wn(n,e),r=new wn(n,e+1);let o=Re();return this.Tr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new wn(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class wn{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ie.comparator(e.key,n.key)||be(e.pr,n.pr)}static Er(e,n){return be(e.pr,n.pr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new it(wn.Ir)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kb(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.wr=this.wr.add(new wn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return $.resolve(a)}lookupMutationBatch(e,n){return $.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.br(i),o=r<0?0:r;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new wn(n,0),r=new wn(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],a=>{const u=this.Sr(a.pr);o.push(u)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new it(be);return n.forEach(r=>{const o=new wn(r,0),a=new wn(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,a],u=>{i=i.add(u.pr)})}),$.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ie.isDocumentKey(o)||(o=o.child(""));const a=new wn(new ie(o),0);let u=new it(be);return this.wr.forEachWhile(c=>{const h=c.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(u=u.add(c.pr)),!0)},a),$.resolve(this.Dr(u))}Dr(e){const n=[];return e.forEach(i=>{const r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){me(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return $.forEach(n.mutations,r=>{const o=new wn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){const i=new wn(n,0),r=this.wr.firstAfterOrEqual(i);return $.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e){this.vr=e,this.docs=function(){return new ut(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return $.resolve(i?i.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let i=Ei();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():mt.newInvalidDocument(r))}),$.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Ei();const a=n.path,u=new ie(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Tb(NF(m),i)<=0||(r.has(m.key)||km(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ae()}Fr(e,n){return $.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new BY(this)}getSize(e){return $.resolve(this.size)}}class BY extends U4{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),$.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(e){this.persistence=e,this.Mr=new Pa(n=>jl(n),Rm),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Fb,this.targetCount=0,this.Lr=Wl.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),$.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Wl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.qn(n),$.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.Mr.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),$.waitFor(o).next(()=>r)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const i=this.Mr.get(n)||null;return $.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),$.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Nr.gr(n);return $.resolve(i)}containsKey(e,n){return $.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.Br={},this.overlays={},this.kr=new _i(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new jY(this),this.indexManager=new bY,this.remoteDocumentCache=function(r){return new UY(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new N4(n),this.$r=new MY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VY,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new FY(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){J("MemoryPersistence","Starting transaction:",e);const r=new zY(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return $.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}}class zY extends OF{constructor(e){super(),this.currentSequenceNumber=e}}class gw{constructor(e){this.persistence=e,this.zr=new Fb,this.jr=null}static Hr(e){return new gw(e)}get Jr(){if(this.jr)return this.jr;throw ae()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),$.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),$.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Jr,i=>{const r=ie.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,ge.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return $.or([()=>$.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(e){this.serializer=e}O(e,n,i,r){const o=new cw("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U2,{unique:!0}),c.createObjectStore("documentMutations")}(e),bN(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=$.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),bN(e)),a=a.next(()=>function(c){const h=c.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)}(o))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(c,h){return h.store("mutations").U().next(m=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U2,{unique:!0});const g=h.store("mutations"),_=m.map(S=>g.put(S));return $.waitFor(_)})}(e,o))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Xr(o))),i<6&&r>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(a=a.next(()=>this.ti(o))),i<8&&r>=8&&(a=a.next(()=>this.ni(e,o))),i<9&&r>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ri(o))),i<11&&r>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(c){const h=c.createObjectStore("documentOverlays",{keyPath:CQ});h.createIndex("collectionPathOverlayIndex",AQ,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",RQ,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(c){const h=c.createObjectStore("remoteDocumentsV14",{keyPath:mQ});h.createIndex("documentKeyIndex",gQ),h.createIndex("collectionGroupIndex",vQ)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(e,o))),i<15&&r>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:IQ}).createIndex("sequenceNumberIndex",TQ,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:SQ}).createIndex("documentKeyIndex",bQ,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),a}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=d_(r)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>$.forEach(r,o=>{const a=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",a).next(u=>$.forEach(u,c=>{me(c.userId===o.userId);const h=al(this.serializer,c);return M4(e,o.userId,h).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.J((a,u)=>{const c=new Ue(a),h=function(g){return[0,ri(g)]}(c);o.push(n.get(h).next(m=>m?$.resolve():(g=>n.put({targetId:0,path:ri(g),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>$.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:EQ});const i=n.store("collectionParents"),r=new Vb,o=a=>{if(r.add(a)){const u=a.lastSegment(),c=a.popLast();return i.put({collectionId:u,parent:ri(c)})}};return n.store("remoteDocuments").J({H:!0},(a,u)=>{const c=new Ue(a);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([a,u,c],h)=>{const m=us(u);return o(m.popLast())}))}ri(e){const n=e.store("targets");return n.J((i,r)=>{const o=zf(r),a=D4(this.serializer,o);return n.put(a)})}ii(e,n){const i=n.store("remoteDocuments"),r=[];return i.J((o,a)=>{const u=n.store("remoteDocumentsV14"),c=function(g){return g.document?new ie(Ue.fromString(g.document.name).popFirst(5)):g.noDocument?ie.fromSegments(g.noDocument.path):g.unknownDocument?ie.fromSegments(g.unknownDocument.path):ae()}(a).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(u.put(h))}).next(()=>$.waitFor(r))}si(e,n){const i=n.store("mutations"),r=B4(this.serializer),o=new z4(gw.Hr,this.serializer.ct);return i.U().next(a=>{const u=new Map;return a.forEach(c=>{var h;let m=(h=u.get(c.userId))!==null&&h!==void 0?h:Re();al(this.serializer,c).keys().forEach(g=>m=m.add(g)),u.set(c.userId,m)}),$.forEach(u,(c,h)=>{const m=new In(h),g=pw.lt(this.serializer,m),_=o.getIndexManager(m),S=mw.lt(m,this.serializer,_,o.referenceDelegate);return new j4(r,S,g,_).recalculateAndSaveOverlaysForDocumentKeys(new M1(n,_i.oe),c).next()})})}}function bN(t){t.createObjectStore("targetDocuments",{keyPath:_Q}).createIndex("documentTargetsIndex",wQ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yQ,{unique:!0}),t.createObjectStore("targetGlobal")}const ZE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ub{constructor(e,n,i,r,o,a,u,c,h,m,g=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=a,this.document=u,this._i=h,this.ai=m,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!Ub.D())throw new Y(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NY(this,r),this.Ti=n+"main",this.serializer=new N4(c),this.Ei=new ps(this.Ti,this.ui,new $Y(this.serializer)),this.Qr=new AY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=B4(this.serializer),this.$r=new _Y,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,m===!1&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(G.FAILED_PRECONDITION,ZE);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new _i(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ra(e))return J("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Pf(e).get("owner").next(n=>$.resolve(this.Si(n)))}bi(e){return xv(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=An(n,"clientMetadata");return i.U().next(r=>{const o=this.vi(r,18e5),a=r.filter(u=>o.indexOf(u)===-1);return $.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?$.resolve(!0):Pf(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Y(G.FAILED_PRECONDITION,ZE);return!1}}return!(!this.networkEnabled||!this.inForeground)||xv(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const o=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,u=this.networkEnabled===r.networkEnabled;if(o||a&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&J("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new M1(e,_i.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>xv(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return mw.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new CY(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return pw.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){J("IndexedDbPersistence","Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?kQ:c===15?jF:c===14?BF:c===13?UF:c===12?PQ:c===11?FF:void ae()}(this.ui);let a;return this.Ei.runTransaction(e,r,o,u=>(a=new M1(u,this.kr?this.kr.next():_i.oe),n==="readwrite-primary"?this.gi(a).next(c=>!!c||this.pi(a)).next(c=>{if(!c)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Y(G.FAILED_PRECONDITION,DF);return i(a)}).next(c=>this.wi(a).next(()=>c)):this.ki(a).next(()=>i(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}ki(e){return Pf(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y(G.FAILED_PRECONDITION,ZE)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pf(e).put("owner",n)}static D(){return ps.D()}yi(e){const n=Pf(e);return n.get("owner").next(i=>this.Si(i)?(J("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Ci(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(Kt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;EL()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return J("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Kt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pf(t){return An(t,"owner")}function xv(t){return An(t,"clientMetadata")}function Bb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Re(),r=Re();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new jb(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return EL()?8:LF(St())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ji(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new qY;return this.Ji(e,n,a).next(u=>{if(o.result=u,this.Ui)return this.Yi(e,n,a,u.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(yc()<=Ne.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",_c(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$.resolve()):(yc()<=Ne.DEBUG&&J("QueryEngine","Query:",_c(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(yc()<=Ne.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",_c(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):$.resolve())}ji(e,n){if(J2(n))return $.resolve(null);let i=si(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=l_(n,null,"F"),i=si(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Re(...o);return this.zi.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const h=this.Zi(n,u);return this.Xi(n,h,a,c.readTime)?this.ji(e,l_(n,null,"F")):this.es(e,h,n,c)}))})))}Hi(e,n,i,r){return J2(n)||r.isEqual(ge.min())?$.resolve(null):this.zi.getDocuments(e,i).next(o=>{const a=this.Zi(n,o);return this.Xi(n,a,i,r)?$.resolve(null):(yc()<=Ne.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_c(n)),this.es(e,a,n,xF(r,-1)).next(u=>u))})}Zi(e,n){let i=new it(n4(e));return n.forEach((r,o)=>{km(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return yc()<=Ne.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",_c(n)),this.zi.getDocumentsMatchingQuery(e,n,zi.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GY{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new ut(be),this.rs=new Pa(o=>jl(o),Rm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j4(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function q4(t,e,n,i){return new GY(t,e,n,i)}async function G4(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let c=Re();for(const h of r){a.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of o){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(i,c).next(h=>({us:h,removedBatchIds:a,addedBatchIds:u}))})})}function WY(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const g=h.batch,_=g.keys();let S=$.resolve();return _.forEach(P=>{S=S.next(()=>m.getEntry(c,P)).next(I=>{const k=h.docVersions.get(P);me(k!==null),I.version.compareTo(k)<0&&(g.applyToRemoteDocument(I,h),I.isValidDocument()&&(I.setReadTime(h.commitVersion),m.addEntry(I)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let c=Re();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function W4(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function HY(t,e){const n=se(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const u=[];e.targetChanges.forEach((m,g)=>{const _=r.get(g);if(!_)return;u.push(n.Qr.removeMatchingKeys(o,m.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(o,m.addedDocuments,g)));let S=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(fn.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):m.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(m.resumeToken,i)),r=r.insert(g,S),function(I,k,E){return I.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(_,S,m)&&u.push(n.Qr.updateTargetData(o,S))});let c=Ei(),h=Re();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(H4(o,a,e.documentUpdates).next(m=>{c=m.cs,h=m.ls})),!i.isEqual(ge.min())){const m=n.Qr.getLastRemoteSnapshotVersion(o).next(g=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return $.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(n.ns=r,o))}function H4(t,e,n){let i=Re(),r=Re();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Ei();return n.forEach((u,c)=>{const h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):J("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{cs:a,ls:r}})}function KY(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _d(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,$.resolve(r)):n.Qr.allocateTargetId(i).next(a=>(r=new Gs(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}async function wd(t,e,n){const i=se(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Ra(a))throw a;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function h_(t,e,n){const i=se(t);let r=ge.min(),o=Re();return i.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,m){const g=se(c),_=g.rs.get(m);return _!==void 0?$.resolve(g.ns.get(_)):g.Qr.getTargetData(h,m)}(i,a,si(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,u.targetId).next(c=>{o=c})}).next(()=>i.ts.getDocumentsMatchingQuery(a,e,n?r:ge.min(),n?o:Re())).next(u=>(Y4(i,t4(e),u),{documents:u,hs:o})))}function K4(t,e){const n=se(t),i=se(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(a=>a?a.target:null))}function Q4(t,e){const n=se(t),i=n.ss.get(e)||ge.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,xF(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Y4(n,e,r),r))}function Y4(t,e,n){let i=t.ss.get(e)||ge.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}async function QY(t,e,n,i){const r=se(t);let o=Re(),a=Ei();for(const h of n){const m=e.Ps(h.metadata.name);h.document&&(o=o.add(m));const g=e.Is(h);g.setReadTime(e.Ts(h.metadata.readTime)),a=a.insert(m,g)}const u=r.os.newChangeBuffer({trackRemovals:!0}),c=await _d(r,function(m){return si(Bd(Ue.fromString(`__bundle__/docs/${m}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",h=>H4(h,u,a).next(m=>(u.apply(h),m)).next(m=>r.Qr.removeMatchingKeysForTargetId(h,c.targetId).next(()=>r.Qr.addMatchingKeys(h,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(h,m.cs,m.ls)).next(()=>m.cs)))}async function YY(t,e,n=Re()){const i=await _d(t,si(Lb(e.bundledQuery))),r=se(t);return r.persistence.runTransaction("Save named query","readwrite",o=>{const a=Qt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.$r.saveNamedQuery(o,e);const u=i.withResumeToken(fn.EMPTY_BYTE_STRING,a);return r.ns=r.ns.insert(u.targetId,u),r.Qr.updateTargetData(o,u).next(()=>r.Qr.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Qr.addMatchingKeys(o,n,i.targetId)).next(()=>r.$r.saveNamedQuery(o,e))})}function CN(t,e){return`firestore_clients_${t}_${e}`}function AN(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function eI(t,e){return`firestore_targets_${t}_${e}`}class f_{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){const r=JSON.parse(i);let o,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(o=new Y(r.error.code,r.error.message))),a?new f_(e,n,r.state,o):(Kt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cp{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){const i=JSON.parse(n);let r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new Y(i.error.code,i.error.message))),o?new cp(e,i.state,r):(Kt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class p_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=Rb();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=MF(i.activeTargetIds[a]),o=o.add(i.activeTargetIds[a]);return r?new p_(e,o):(Kt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class zb{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new zb(n.clientId,n.onlineState):(Kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Y1{constructor(){this.activeTargetIds=Rb()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tI{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ut(be),this.started=!1,this.ys=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=CN(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Y1),this.bs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const i of e){if(i===this.Vs)continue;const r=this.getItem(CN(this.persistenceKey,i));if(r){const o=p_.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const i=this.xs(n);i&&this.Os(i)}for(const i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(eI(this.persistenceKey,e));if(i){const r=cp.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eI(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J("SharedClientState","READ",e,n),n}setItem(e,n){J("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){J("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(J("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const i=this.$s(n.key);return this.Us(i,null)}{const i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){const i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){const i=function(o){let a=_i.oe;if(o!=null)try{const u=JSON.parse(o);me(typeof u=="number"),a=u}catch(u){Kt("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(n.newValue);i!==_i.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){const i=this.Js(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){const r=new f_(this.currentUser,e,n,i),o=AN(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){const n=AN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){const r=eI(this.persistenceKey,e),o=new cp(e,n,i);this.setItem(r,o.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const i=this.$s(e);return p_.Es(i,n)}Gs(e,n){const i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return f_.Es(new In(o),r,n)}js(e,n){const i=this.Cs.exec(e),r=Number(i[1]);return cp.Es(r,n)}xs(e){return zb.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);J("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),a=[],u=[];return o.forEach(c=>{r.has(c)||a.push(c)}),r.forEach(c=>{o.has(c)||u.push(c)}),this.syncEngine.eo(a,u).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Rb();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class J4{constructor(){this.no=new Y1,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Y1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nv=null;function nI(){return Nv===null?Nv=function(){return 268435456+Math.round(2147483648*Math.random())}():Nv++,"0x"+Nv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="WebChannelConnection";class eJ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,a){const u=nI(),c=this.vo(n,i.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${u}:`,c,r);const h={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(h,o,a),this.Mo(n,c,h,r).then(m=>(J("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw Fr("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",r),m})}xo(n,i,r,o,a,u){return this.Co(n,i,r,o,a)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ud}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}vo(n,i){const r=XY[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){const o=nI();return new Promise((a,u)=>{const c=new IF;c.setWithCredentials(!0),c.listenOnce(SF.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ty.NO_ERROR:const m=c.getResponseJson();J(Gn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case ty.TIMEOUT:J(Gn,`RPC '${e}' ${o} timed out`),u(new Y(G.DEADLINE_EXCEEDED,"Request time out"));break;case ty.HTTP_ERROR:const g=c.getStatus();if(J(Gn,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const S=_==null?void 0:_.error;if(S&&S.status&&S.message){const P=function(k){const E=k.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(E)>=0?E:G.UNKNOWN}(S.status);u(new Y(P,S.message))}else u(new Y(G.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Y(G.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{J(Gn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);J(Gn,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,i,15)})}Oo(e,n,i){const r=nI(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=AF(),u=CF(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.xmlHttpFactory=new TF({})),this.Fo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const m=o.join("");J(Gn,`Creating RPC '${e}' stream ${r}: ${m}`,c);const g=a.createWebChannel(m,c);let _=!1,S=!1;const P=new ZY({lo:k=>{S?J(Gn,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(_||(J(Gn,`Opening RPC '${e}' stream ${r} transport.`),g.open(),_=!0),J(Gn,`RPC '${e}' stream ${r} sending:`,k),g.send(k))},ho:()=>g.close()}),I=(k,E,b)=>{k.listen(E,A=>{try{b(A)}catch(M){setTimeout(()=>{throw M},0)}})};return I(g,Uf.EventType.OPEN,()=>{S||(J(Gn,`RPC '${e}' stream ${r} transport opened.`),P.mo())}),I(g,Uf.EventType.CLOSE,()=>{S||(S=!0,J(Gn,`RPC '${e}' stream ${r} transport closed`),P.po())}),I(g,Uf.EventType.ERROR,k=>{S||(S=!0,Fr(Gn,`RPC '${e}' stream ${r} transport errored:`,k),P.po(new Y(G.UNAVAILABLE,"The operation could not be completed")))}),I(g,Uf.EventType.MESSAGE,k=>{var E;if(!S){const b=k.data[0];me(!!b);const A=b,M=A.error||((E=A[0])===null||E===void 0?void 0:E.error);if(M){J(Gn,`RPC '${e}' stream ${r} received error:`,M);const B=M.status;let j=function(L){const F=tn[L];if(F!==void 0)return g4(F)}(B),D=M.message;j===void 0&&(j=G.INTERNAL,D="Unknown error status: "+B+" with message "+M.message),S=!0,P.po(new Y(j,D)),g.close()}else J(Gn,`RPC '${e}' stream ${r} received:`,b),P.yo(b)}}),I(u,bF.STAT_EVENT,k=>{k.stat===O1.PROXY?J(Gn,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===O1.NOPROXY&&J(Gn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.fo()},0),P}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(){return typeof window<"u"?window:null}function ly(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){return new lY(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&J("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n,i,r,o,a,u,c){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new $b(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Kt(n.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{const r=new Y(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){const i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tJ extends Z4{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=dY(this.serializer,e),i=function(o){if(!("targetChange"in o))return ge.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?Qt(a.readTime):ge.min()}(e);return this.listener.h_(n,i)}P_(e){const n={};n.database=G1(this.serializer),n.addTarget=function(o,a){let u;const c=a.target;if(u=o_(c)?{documents:C4(o,c)}:{query:A4(o,c)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=w4(o,a.resumeToken);const h=$1(o,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(ge.min())>0){u.readTime=yd(o,a.snapshotVersion.toTimestamp());const h=$1(o,a.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const i=fY(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){const n={};n.database=G1(this.serializer),n.removeTarget=e,this.i_(n)}}class nJ extends Z4{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=hY(e.writeResults,e.commitTime),i=Qt(e.commitTime);return this.listener.A_(i,n)}return me(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=G1(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>im(this.serializer,i))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Y(G.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,q1(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(G.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.xo(e,q1(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(G.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class rJ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Kt(n),this.y_=!1):J("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{i.enqueueAndForget(async()=>{ka(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=se(c);h.M_.add(4),await $d(h),h.N_.set("Unknown"),h.M_.delete(4),await Lm(h)}(this))})}),this.N_=new rJ(i,r)}}async function Lm(t){if(ka(t))for(const e of t.x_)await e(!0)}async function $d(t){for(const e of t.x_)await e(!1)}function vw(t,e){const n=se(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Wb(n)?Gb(n):Gd(n).Xo()&&qb(n,e))}function Ed(t,e){const n=se(t),i=Gd(n);n.F_.delete(e),i.Xo()&&e3(n,e),n.F_.size===0&&(i.Xo()?i.n_():ka(n)&&n.N_.set("Unknown"))}function qb(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gd(t).P_(e)}function e3(t,e){t.L_.xe(e),Gd(t).I_(e)}function Gb(t){t.L_=new rY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Gd(t).start(),t.N_.w_()}function Wb(t){return ka(t)&&!Gd(t).Zo()&&t.F_.size>0}function ka(t){return se(t).M_.size===0}function t3(t){t.L_=void 0}async function oJ(t){t.N_.set("Online")}async function aJ(t){t.F_.forEach((e,n)=>{qb(t,e)})}async function lJ(t,e){t3(t),Wb(t)?(t.N_.D_(e),Gb(t)):t.N_.set("Unknown")}async function uJ(t,e,n){if(t.N_.set("Online"),e instanceof _4&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.F_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.F_.delete(u),r.L_.removeTarget(u))}(t,e)}catch(i){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await m_(t,i)}else if(e instanceof ay?t.L_.Ke(e):e instanceof y4?t.L_.He(e):t.L_.We(e),!n.isEqual(ge.min()))try{const i=await W4(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.L_.rt(a);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=o.F_.get(h);m&&o.F_.set(h,m.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,h)=>{const m=o.F_.get(c);if(!m)return;o.F_.set(c,m.withResumeToken(fn.EMPTY_BYTE_STRING,m.snapshotVersion)),e3(o,c);const g=new Gs(m.target,c,h,m.sequenceNumber);qb(o,g)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){J("RemoteStore","Failed to raise snapshot:",i),await m_(t,i)}}async function m_(t,e,n){if(!Ra(e))throw e;t.M_.add(1),await $d(t),t.N_.set("Offline"),n||(n=()=>W4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await Lm(t)})}function n3(t,e){return e().catch(n=>m_(t,n,e))}async function qd(t){const e=se(t),n=_a(e);let i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;cJ(e);)try{const r=await KY(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,dJ(e,r)}catch(r){await m_(e,r)}i3(e)&&r3(e)}function cJ(t){return ka(t)&&t.v_.length<10}function dJ(t,e){t.v_.push(e);const n=_a(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function i3(t){return ka(t)&&!_a(t).Zo()&&t.v_.length>0}function r3(t){_a(t).start()}async function hJ(t){_a(t).V_()}async function fJ(t){const e=_a(t);for(const n of t.v_)e.d_(n.mutations)}async function pJ(t,e,n){const i=t.v_.shift(),r=xb.from(i,e,n);await n3(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await qd(t)}async function mJ(t,e){e&&_a(t).E_&&await async function(i,r){if(function(a){return m4(a)&&a!==G.ABORTED}(r.code)){const o=i.v_.shift();_a(i).t_(),await n3(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await qd(i)}}(t,e),i3(t)&&r3(t)}async function PN(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const i=ka(n);n.M_.add(3),await $d(n),i&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await Lm(n)}async function J1(t,e){const n=se(t);e?(n.M_.delete(2),await Lm(n)):e||(n.M_.add(2),await $d(n),n.N_.set("Unknown"))}function Gd(t){return t.B_||(t.B_=function(n,i,r){const o=se(n);return o.f_(),new tJ(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:oJ.bind(null,t),To:aJ.bind(null,t),Ao:lJ.bind(null,t),h_:uJ.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Wb(t)?Gb(t):t.N_.set("Unknown")):(await t.B_.stop(),t3(t))})),t.B_}function _a(t){return t.k_||(t.k_=function(n,i,r){const o=se(n);return o.f_(),new nJ(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:hJ.bind(null,t),Ao:mJ.bind(null,t),R_:fJ.bind(null,t),A_:pJ.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await qd(t)):(await t.k_.stop(),t.v_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Hb(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wd(t,e){if(Kt("AsyncQueue",`${e}: ${t}`),Ra(t))return new Y(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ie.comparator(n.key,i.key):(n,i)=>ie.comparator(n.key,i.key),this.keyedMap=Bf(),this.sortedSet=new ut(this.comparator)}static emptySet(e){return new Jc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Jc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.q_=new ut(ie.comparator)}track(e){const n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ae():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Id{constructor(e,n,i,r,o,a,u,c,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Id(e,n,Jc.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class vJ{constructor(){this.queries=new Pa(e=>e4(e),Pm),this.onlineState="Unknown",this.z_=new Set}}async function Kb(t,e){const n=se(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new gJ,i=e.G_()?0:1);try{switch(i){case 0:o.K_=await n.onListen(r,!0);break;case 1:o.K_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Wd(a,`Initialization of query '${_c(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&Yb(n)}async function Qb(t,e){const n=se(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.U_.indexOf(e);a>=0&&(o.U_.splice(a,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function yJ(t,e){const n=se(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.U_)u.H_(r)&&(i=!0);a.K_=r}}i&&Yb(n)}function _J(t,e,n){const i=se(t),r=i.queries.get(e);if(r)for(const o of r.U_)o.onError(n);i.queries.delete(e)}function Yb(t){t.z_.forEach(e=>{e.next()})}var X1,xN;(xN=X1||(X1={})).J_="default",xN.Cache="cache";class Jb{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Id(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==X1.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.serializer=e}Ps(e){return ms(this.serializer,e)}Is(e){return e.metadata.exists?b4(this.serializer,e.document,!1):mt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Qt(e)}}class EJ{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=s3(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;const i=Ue.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){const n=new Map,i=new NN(this.serializer);for(const r of e)if(r.metadata.queries){const o=i.Ps(r.metadata.name);for(const a of r.metadata.queries){const u=(n.get(a)||Re()).add(o);n.set(a,u)}}return n}async complete(){const e=await QY(this.localStore,new NN(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(const i of this.queries)await YY(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function s3(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.key=e}}class a3{constructor(e){this.key=e}}class l3{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Re(),this.mutatedKeys=Re(),this.Ia=n4(e),this.Ta=new Jc(this.Ia)}get Ea(){return this.la}da(e,n){const i=n?n.Aa:new kN,r=n?n.Ta:this.Ta;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,g)=>{const _=r.get(m),S=km(this.query,g)?g:null,P=!!_&&this.mutatedKeys.has(_.key),I=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let k=!1;_&&S?_.data.isEqual(S.data)?P!==I&&(i.track({type:3,doc:S}),k=!0):this.Ra(_,S)||(i.track({type:2,doc:S}),k=!0,(c&&this.Ia(S,c)>0||h&&this.Ia(S,h)<0)&&(u=!0)):!_&&S?(i.track({type:0,doc:S}),k=!0):_&&!S&&(i.track({type:1,doc:_}),k=!0,(c||h)&&(u=!0)),k&&(S?(a=a.add(S),o=I?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ta:a,Aa:i,Xi:u,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const a=e.Aa.Q_();a.sort((m,g)=>function(S,P){const I=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return I(S)-I(P)}(m.type,g.type)||this.Ia(m.doc,g.doc)),this.Va(i),r=r!=null&&r;const u=n&&!r?this.ma():[],c=this.Pa.size===0&&this.current&&!r?1:0,h=c!==this.ha;return this.ha=c,a.length!==0||h?{snapshot:new Id(this.query,e.Ta,o,a,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:u}:{fa:u}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new kN,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Re(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new a3(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new o3(i))}),n}pa(e){this.la=e.hs,this.Pa=Re();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Id.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class IJ{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class TJ{constructor(e){this.key=e,this.wa=!1}}class SJ{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Pa(u=>e4(u),Pm),this.Da=new Map,this.Ca=new Set,this.va=new ut(ie.comparator),this.Fa=new Map,this.Ma=new Fb,this.xa={},this.Oa=new Map,this.Na=Wl.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function bJ(t,e,n=!0){const i=yw(t);let r;const o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=await u3(i,e,n,!0),r}async function CJ(t,e){const n=yw(t);await u3(n,e,!0,!1)}async function u3(t,e,n,i){const r=await _d(t.localStore,si(e)),o=r.targetId,a=n?t.sharedClientState.addLocalQueryTarget(o):"not-current";let u;return i&&(u=await Xb(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&vw(t.remoteStore,r),u}async function Xb(t,e,n,i,r){t.Ba=(g,_,S)=>async function(I,k,E,b){let A=k.view.da(E);A.Xi&&(A=await h_(I.localStore,k.query,!1).then(({documents:D})=>k.view.da(D,A)));const M=b&&b.targetChanges.get(k.targetId),B=b&&b.targetMismatches.get(k.targetId)!=null,j=k.view.applyChanges(A,I.isPrimaryClient,M,B);return Z1(I,k.targetId,j.fa),j.snapshot}(t,g,_,S);const o=await h_(t.localStore,e,!0),a=new l3(e,o.hs),u=a.da(o.documents),c=Dm.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=a.applyChanges(u,t.isPrimaryClient,c);Z1(t,n,h.fa);const m=new IJ(e,n,a);return t.ba.set(e,m),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),h.snapshot}async function AJ(t,e,n){const i=se(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(a=>!Pm(a,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await wd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ed(i.remoteStore,r.targetId),Td(i,r.targetId)}).catch(Aa)):(Td(i,r.targetId),await wd(i.localStore,r.targetId,!0))}async function RJ(t,e){const n=se(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ed(n.remoteStore,i.targetId))}async function PJ(t,e,n){const i=nC(t);try{const r=await function(a,u){const c=se(a),h=Tt.now(),m=u.reduce((S,P)=>S.add(P.key),Re());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let P=Ei(),I=Re();return c.os.getEntries(S,m).next(k=>{P=k,P.forEach((E,b)=>{b.isValidDocument()||(I=I.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,P)).next(k=>{g=k;const E=[];for(const b of u){const A=tY(b,g.get(b.key).overlayedDocument);A!=null&&E.push(new co(b.key,A,GF(A.value.mapValue),It.exists(!0)))}return c.mutationQueue.addMutationBatch(S,h,E,u)}).next(k=>{_=k;const E=k.applyToLocalDocumentSet(g,I);return c.documentOverlayCache.saveOverlays(S,k.batchId,E)})}).then(()=>({batchId:_.batchId,changes:r4(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let h=a.xa[a.currentUser.toKey()];h||(h=new ut(be)),h=h.insert(u,c),a.xa[a.currentUser.toKey()]=h}(i,r.batchId,n),await ho(i,r.changes),await qd(i.remoteStore)}catch(r){const o=Wd(r,"Failed to persist write");n.reject(o)}}async function c3(t,e){const n=se(t);try{const i=await HY(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Fa.get(o);a&&(me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.wa=!0:r.modifiedDocuments.size>0?me(a.wa):r.removedDocuments.size>0&&(me(a.wa),a.wa=!1))}),await ho(n,i,e)}catch(i){await Aa(i)}}function DN(t,e,n){const i=se(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ba.forEach((o,a)=>{const u=a.view.j_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=se(a);c.onlineState=u;let h=!1;c.queries.forEach((m,g)=>{for(const _ of g.U_)_.j_(u)&&(h=!0)}),h&&Yb(c)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function kJ(t,e,n){const i=se(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Fa.get(e),o=r&&r.key;if(o){let a=new ut(ie.comparator);a=a.insert(o,mt.newNoDocument(o,ge.min()));const u=Re().add(o),c=new Nm(ge.min(),new Map,new ut(be),a,u);await c3(i,c),i.va=i.va.remove(o),i.Fa.delete(e),tC(i)}else await wd(i.localStore,e,!1).then(()=>Td(i,e,n)).catch(Aa)}async function xJ(t,e){const n=se(t),i=e.batch.batchId;try{const r=await WY(n.localStore,e);eC(n,i,null),Zb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ho(n,r)}catch(r){await Aa(r)}}async function NJ(t,e,n){const i=se(t);try{const r=await function(a,u){const c=se(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(g=>(me(g!==null),m=g.keys(),c.mutationQueue.removeMutationBatch(h,g))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(i.localStore,e);eC(i,e,n),Zb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await ho(i,r)}catch(r){await Aa(r)}}async function DJ(t,e){const n=se(t);ka(n.remoteStore)||J("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const u=se(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();const r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){const r=Wd(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function Zb(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function eC(t,e,n){const i=se(t);let r=i.xa[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Td(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||d3(t,i)})}function d3(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Ed(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),tC(t))}function Z1(t,e,n){for(const i of n)i instanceof o3?(t.Ma.addReference(i.key,e),OJ(t,i)):i instanceof a3?(J("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||d3(t,i.key)):ae()}function OJ(t,e){const n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(J("SyncEngine","New document in limbo: "+n),t.Ca.add(i),tC(t))}function tC(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new ie(Ue.fromString(e)),i=t.Na.next();t.Fa.set(i,new TJ(n)),t.va=t.va.insert(n,i),vw(t.remoteStore,new Gs(si(Bd(n.path)),i,"TargetPurposeLimboResolution",_i.oe))}}async function ho(t,e,n){const i=se(t),r=[],o=[],a=[];i.ba.isEmpty()||(i.ba.forEach((u,c)=>{a.push(i.Ba(c,e,n).then(h=>{if((h||n)&&i.isPrimaryClient){const m=h&&!h.fromCache;i.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){r.push(h);const m=jb.Ki(c.targetId,h);o.push(m)}}))}),await Promise.all(a),i.Sa.h_(r),await async function(c,h){const m=se(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>$.forEach(h,_=>$.forEach(_.qi,S=>m.persistence.referenceDelegate.addReference(g,_.targetId,S)).next(()=>$.forEach(_.Qi,S=>m.persistence.referenceDelegate.removeReference(g,_.targetId,S)))))}catch(g){if(!Ra(g))throw g;J("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const S=m.ns.get(_),P=S.snapshotVersion,I=S.withLastLimboFreeSnapshotVersion(P);m.ns=m.ns.insert(_,I)}}}(i.localStore,o))}async function LJ(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const i=await G4(n.localStore,e);n.currentUser=e,function(o,a){o.Oa.forEach(u=>{u.forEach(c=>{c.reject(new Y(G.CANCELLED,a))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ho(n,i.us)}}function MJ(t,e){const n=se(t),i=n.Fa.get(e);if(i&&i.wa)return Re().add(i.key);{let r=Re();const o=n.Da.get(e);if(!o)return r;for(const a of o){const u=n.ba.get(a);r=r.unionWith(u.view.Ea)}return r}}async function VJ(t,e){const n=se(t),i=await h_(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&Z1(n,e.targetId,r.fa),r}async function FJ(t,e){const n=se(t);return Q4(n.localStore,e).then(i=>ho(n,i))}async function UJ(t,e,n,i){const r=se(t),o=await function(u,c){const h=se(u),m=se(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>m.vn(g,c).next(_=>_?h.localDocuments.getDocuments(g,_):$.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?await qd(r.remoteStore):n==="acknowledged"||n==="rejected"?(eC(r,e,i||null),Zb(r,e),function(u,c){se(se(u).mutationQueue).Mn(c)}(r.localStore,e)):ae(),await ho(r,o)):J("SyncEngine","Cannot apply mutation batch with id: "+e)}async function BJ(t,e){const n=se(t);if(yw(n),nC(n),e===!0&&n.La!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await ON(n,i.toArray());n.La=!0,await J1(n.remoteStore,!0);for(const o of r)vw(n.remoteStore,o)}else if(e===!1&&n.La!==!1){const i=[];let r=Promise.resolve();n.Da.forEach((o,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Td(n,a),wd(n.localStore,a,!0))),Ed(n.remoteStore,a)}),await r,await ON(n,i),function(a){const u=se(a);u.Fa.forEach((c,h)=>{Ed(u.remoteStore,h)}),u.Ma.mr(),u.Fa=new Map,u.va=new ut(ie.comparator)}(n),n.La=!1,await J1(n.remoteStore,!1)}}async function ON(t,e,n){const i=se(t),r=[],o=[];for(const a of e){let u;const c=i.Da.get(a);if(c&&c.length!==0){u=await _d(i.localStore,si(c[0]));for(const h of c){const m=i.ba.get(h),g=await VJ(i,m);g.snapshot&&o.push(g.snapshot)}}else{const h=await K4(i.localStore,a);u=await _d(i.localStore,h),await Xb(i,h3(h),a,!1,u.resumeToken)}r.push(u)}return i.Sa.h_(o),r}function h3(t){return ZF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jJ(t){return function(n){return se(se(n).persistence).Bi()}(se(t).localStore)}async function zJ(t,e,n,i){const r=se(t);if(r.La)return void J("SyncEngine","Ignoring unexpected query state notification.");const o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const a=await Q4(r.localStore,t4(o[0])),u=Nm.createSynthesizedRemoteEventForCurrentChange(e,n==="current",fn.EMPTY_BYTE_STRING);await ho(r,a,u);break}case"rejected":await wd(r.localStore,e,!0),Td(r,e,i);break;default:ae()}}async function $J(t,e,n){const i=yw(t);if(i.La){for(const r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){J("SyncEngine","Adding an already active target "+r);continue}const o=await K4(i.localStore,r),a=await _d(i.localStore,o);await Xb(i,h3(o),a.targetId,!1,a.resumeToken),vw(i.remoteStore,a)}for(const r of n)i.Da.has(r)&&await wd(i.localStore,r,!1).then(()=>{Ed(i.remoteStore,r),Td(i,r)}).catch(Aa)}}function yw(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=c3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kJ.bind(null,e),e.Sa.h_=yJ.bind(null,e.eventManager),e.Sa.ka=_J.bind(null,e.eventManager),e}function nC(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NJ.bind(null,e),e}function qJ(t,e,n){const i=se(t);(async function(o,a,u){try{const c=await a.getMetadata();if(await function(S,P){const I=se(S),k=Qt(P.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",E=>I.$r.getBundleMetadata(E,P.id)).then(E=>!!E&&E.createTime.compareTo(k)>=0)}(o.localStore,c))return await a.close(),u._completeWith(function(S){return{taskState:"Success",documentsLoaded:S.totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(s3(c));const h=new EJ(c,o.localStore,a.serializer);let m=await a.qa();for(;m;){const _=await h._a(m);_&&u._updateProgress(_),m=await a.qa()}const g=await h.complete();return await ho(o,g.ca,void 0),await function(S,P){const I=se(S);return I.persistence.runTransaction("Save bundle","readwrite",k=>I.$r.saveBundleMetadata(k,P))}(o.localStore,c),u._completeWith(g.progress),Promise.resolve(g.ua)}catch(c){return Fr("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class eT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Om(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return q4(this.persistence,new $4,e.initialUser,this.serializer)}createPersistence(e){return new z4(gw.Hr,this.serializer)}createSharedClientState(e){return new J4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class f3 extends eT{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await nC(this.Qa.syncEngine),await qd(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return q4(this.persistence,new $4,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new PY(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const i=new hQ(n,this.persistence);return new dQ(e.asyncQueue,i)}createPersistence(e){const n=Bb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new Ub(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,X4(),ly(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new J4}}class GJ extends f3{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Qa.syncEngine;this.sharedClientState instanceof tI&&(this.sharedClientState.syncEngine={Zs:UJ.bind(null,n),Xs:zJ.bind(null,n),eo:$J.bind(null,n),Bi:jJ.bind(null,n),Ys:FJ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async i=>{await BJ(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=X4();if(!tI.D(n))throw new Y(G.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Bb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tI(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class iC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>DN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=LJ.bind(null,this.syncEngine),await J1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vJ}()}createDatastore(e){const n=Om(e.databaseInfo.databaseId),i=function(o){return new eJ(o)}(e.databaseInfo);return function(o,a,u,c){return new iJ(o,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new sJ(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>DN(this.syncEngine,n,0),function(){return RN.D()?new RN:new JY}())}createSyncEngine(e,n){return function(r,o,a,u,c,h,m){const g=new SJ(r,o,a,u,c,h);return m&&(g.La=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(i){const r=se(i);J("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await $d(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Cn,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);const r=await this.Ha(i);return new wJ(JSON.parse(r),e.length+i)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,o){const a=se(r),u={documents:o.map(g=>nm(a.serializer,g))},c=await a.xo("BatchGetDocuments",a.serializer.databaseId,Ue.emptyPath(),u,o.length),h=new Map;c.forEach(g=>{const _=cY(a.serializer,g);h.set(_.key.toString(),_)});const m=[];return o.forEach(g=>{const _=h.get(g.toString());me(!!_),m.push(_)}),m}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new zd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=ie.fromPath(i);this.mutations.push(new Pb(r,this.precondition(r)))}),await async function(i,r){const o=se(i),a={writes:r.map(u=>im(o.serializer,u))};await o.Co("Commit",o.serializer.databaseId,Ue.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ae();n=ge.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new Y(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ge.min())?It.exists(!1):It.updateTime(n):It.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ge.min()))throw new Y(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return It.updateTime(n)}return It.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new $b(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new HJ(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})})}tu(e){try{const n=this.updateFunction(e);return!Am(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!m4(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=In.UNAUTHENTICATED,this.clientId=PF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Wd(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function uy(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await G4(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function tT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rC(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>PN(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>PN(e.remoteStore,r)),t._onlineComponents=e}function p3(t){return t.name==="FirebaseError"?t.code===G.FAILED_PRECONDITION||t.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function rC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await uy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!p3(n))throw n;Fr("Error using user provided cache. Falling back to memory cache: "+n),await uy(t,new eT)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await uy(t,new eT);return t._offlineComponents}async function ww(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await tT(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await tT(t,new iC))),t._onlineComponents}function m3(t){return rC(t).then(e=>e.persistence)}function sC(t){return rC(t).then(e=>e.localStore)}function g3(t){return ww(t).then(e=>e.remoteStore)}function oC(t){return ww(t).then(e=>e.syncEngine)}function YJ(t){return ww(t).then(e=>e.datastore)}async function Sd(t){const e=await ww(t),n=e.eventManager;return n.onListen=bJ.bind(null,e.syncEngine),n.onUnlisten=AJ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CJ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RJ.bind(null,e.syncEngine),n}function JJ(t){return t.asyncQueue.enqueue(async()=>{const e=await m3(t),n=await g3(t);return e.setNetworkEnabled(!0),function(r){const o=se(r);return o.M_.delete(0),Lm(o)}(n)})}function XJ(t){return t.asyncQueue.enqueue(async()=>{const e=await m3(t),n=await g3(t);return e.setNetworkEnabled(!1),async function(r){const o=se(r);o.M_.add(0),await $d(o),o.N_.set("Offline")}(n)})}function ZJ(t,e){const n=new Cn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,o,a){try{const u=await function(h,m){const g=se(h);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,m))}(r,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new Y(G.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=Wd(u,`Failed to get document '${o} from cache`);a.reject(c)}}(await sC(t),e,n)),n.promise}function v3(t,e,n={}){const i=new Cn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,h){const m=new _w({next:_=>{a.enqueueAndForget(()=>Qb(o,g));const S=_.docs.has(u);!S&&_.fromCache?h.reject(new Y(G.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&_.fromCache&&c&&c.source==="server"?h.reject(new Y(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new Jb(Bd(u.path),m,{includeMetadataChanges:!0,ra:!0});return Kb(o,g)}(await Sd(t),t.asyncQueue,e,n,i)),i.promise}function eX(t,e){const n=new Cn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,o,a){try{const u=await h_(r,o,!0),c=new l3(o,u.hs),h=c.da(u.documents),m=c.applyChanges(h,!1);a.resolve(m.snapshot)}catch(u){const c=Wd(u,`Failed to execute query '${o} against cache`);a.reject(c)}}(await sC(t),e,n)),n.promise}function y3(t,e,n={}){const i=new Cn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,c,h){const m=new _w({next:_=>{a.enqueueAndForget(()=>Qb(o,g)),_.fromCache&&c.source==="server"?h.reject(new Y(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new Jb(u,m,{includeMetadataChanges:!0,ra:!0});return Kb(o,g)}(await Sd(t),t.asyncQueue,e,n,i)),i.promise}function tX(t,e){const n=new _w(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,o){se(r).z_.add(o),o.next()}(await Sd(t),n)),()=>{n.$a(),t.asyncQueue.enqueueAndForget(async()=>function(r,o){se(r).z_.delete(o)}(await Sd(t),n))}}function nX(t,e,n,i){const r=function(a,u){let c;return c=typeof a=="string"?v4().encode(a):a,function(m,g){return new WJ(m,g)}(function(m,g){if(m instanceof Uint8Array)return LN(m,g);if(m instanceof ArrayBuffer)return LN(new Uint8Array(m),g);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(n,Om(e));t.asyncQueue.enqueueAndForget(async()=>{qJ(await oC(t),r,i)})}function iX(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const o=se(i);return o.persistence.runTransaction("Get named query","readonly",a=>o.$r.getNamedQuery(a,r))}(await sC(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t,e,n){if(!n)throw new Y(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function w3(t,e,n,i){if(e===!0&&i===!0)throw new Y(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VN(t){if(!ie.isDocumentKey(t))throw new Y(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FN(t){if(ie.isDocumentKey(t))throw new Y(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ew(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function We(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ew(t);throw new Y(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function E3(t,e){if(e<=0)throw new Y(G.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_3((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UN(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new eQ;switch(i.type){case"firstParty":return new rQ(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=MN.get(n);i&&(J("ComponentProvider","Removing Datastore"),MN.delete(n),i.terminate())}(this),Promise.resolve()}}function rX(t,e,n,i={}){var r;const o=(t=We(t,Mm))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let u,c;if(typeof i.mockUserToken=="string")u=i.mockUserToken,c=In.MOCK_USER;else{u=gL(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new Y(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new In(h)}t._authCredentials=new tQ(new RF(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi=class I3{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new I3(this.firestore,e,this._query)}},kt=class T3{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new T3(this.firestore,e,this._key)}},aa=class S3 extends oi{constructor(e,n,i){super(e,n,Bd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new ie(e))}withConverter(e){return new S3(this.firestore,e,this._path)}};function b3(t,e,...n){if(t=ve(t),aC("collection","path",e),t instanceof Mm){const i=Ue.fromString(e,...n);return FN(i),new aa(t,null,i)}{if(!(t instanceof kt||t instanceof aa))throw new Y(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return FN(i),new aa(t.firestore,null,i)}}function sX(t,e){if(t=We(t,Mm),aC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Y(G.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new oi(t,null,function(i){return new uo(Ue.emptyPath(),i)}(e))}function g_(t,e,...n){if(t=ve(t),arguments.length===1&&(e=PF.newId()),aC("doc","path",e),t instanceof Mm){const i=Ue.fromString(e,...n);return VN(i),new kt(t,null,new ie(i))}{if(!(t instanceof kt||t instanceof aa))throw new Y(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return VN(i),new kt(t.firestore,t instanceof aa?t.converter:null,new ie(i))}}function C3(t,e){return t=ve(t),e=ve(e),(t instanceof kt||t instanceof aa)&&(e instanceof kt||e instanceof aa)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function A3(t,e){return t=ve(t),e=ve(e),t instanceof oi&&e instanceof oi&&t.firestore===e.firestore&&Pm(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new $b(this,"async_queue_retry"),this.hu=()=>{const n=ly();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=ly();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=ly();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Cn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Ra(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(i);throw Kt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const r=Hb.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&ae()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function nT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class aX{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lX=-1;let jt=class extends Mm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new oX}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||R3(this),this._firestoreClient.terminate()}};function Rn(t){return t._firestoreClient||R3(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function R3(t){var e,n,i;const r=t._freezeSettings(),o=function(u,c,h,m){return new DQ(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,_3(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new QJ(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function uX(t,e){k3(t=We(t,jt));const n=Rn(t);if(n._uninitializedComponentsProvider)throw new Y(G.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new iC;return P3(n,r,new f3(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function cX(t){k3(t=We(t,jt));const e=Rn(t);if(e._uninitializedComponentsProvider)throw new Y(G.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new iC;return P3(e,i,new GJ(i,n.cacheSizeBytes))}function P3(t,e,n){const i=new Cn;return t.asyncQueue.enqueue(async()=>{try{await uy(t,n),await tT(t,e),i.resolve()}catch(r){const o=r;if(!p3(o))throw o;Fr("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}}).then(()=>i.promise)}function dX(t){if(t._initialized&&!t._terminated)throw new Y(G.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!ps.D())return Promise.resolve();const r=i+"main";await ps.delete(r)}(Bb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function hX(t){return function(n){const i=new Cn;return n.asyncQueue.enqueueAndForget(async()=>DJ(await oC(n),i)),i.promise}(Rn(t=We(t,jt)))}function fX(t){return JJ(Rn(t=We(t,jt)))}function pX(t){return XJ(Rn(t=We(t,jt)))}function mX(t,e){const n=Rn(t=We(t,jt)),i=new aX;return nX(n,t._databaseId,e,i),i}function gX(t,e){return iX(Rn(t=We(t,jt)),e).then(n=>n?new oi(t,null,n.query):null)}function k3(t){if(t._initialized||t._terminated)throw new Y(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ys(fn.fromBase64String(e))}catch(n){throw new Y(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ys(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vX=/^__.*__$/;class yX{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,n,this.fieldTransforms):new jd(e,this.data,n,this.fieldTransforms)}}class x3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function N3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Tw{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Tw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return v_(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(N3(this.fu)&&vX.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class _X{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Om(e)}Fu(e,n,i,r=!1){return new Tw({fu:e,methodName:n,vu:i,path:Et.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iu(t){const e=t._freezeSettings(),n=Om(t._databaseId);return new _X(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sw(t,e,n,i,r,o={}){const a=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);pC("Data must be an object, but it was:",a,i);const u=L3(i,a);let c,h;if(o.merge)c=new wi(a.fieldMask),h=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const g of o.mergeFields){const _=iT(e,g,n);if(!a.contains(_))throw new Y(G.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);V3(m,_)||m.push(_)}c=new wi(m),h=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,h=a.fieldTransforms;return new yX(new Vn(u),c,h)}class Vm extends nu{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vm}}function D3(t,e,n){return new Tw({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lC extends nu{_toFieldTransform(e){return new xm(e.path,new gd)}isEqual(e){return e instanceof lC}}class uC extends nu{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=D3(this,e,!0),i=this.Mu.map(o=>ru(o,n)),r=new zl(i);return new xm(e.path,r)}isEqual(e){return e instanceof uC&&Dp(this.Mu,e.Mu)}}class cC extends nu{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=D3(this,e,!0),i=this.Mu.map(o=>ru(o,n)),r=new $l(i);return new xm(e.path,r)}isEqual(e){return e instanceof cC&&Dp(this.Mu,e.Mu)}}class dC extends nu{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new vd(e.serializer,l4(e.serializer,this.xu));return new xm(e.path,n)}isEqual(e){return e instanceof dC&&this.xu===e.xu}}function hC(t,e,n,i){const r=t.Fu(1,e,n);pC("Data must be an object, but it was:",r,i);const o=[],a=Vn.empty();tu(i,(c,h)=>{const m=mC(e,c,n);h=ve(h);const g=r.Su(m);if(h instanceof Vm)o.push(m);else{const _=ru(h,g);_!=null&&(o.push(m),a.set(m,_))}});const u=new wi(o);return new x3(a,u,r.fieldTransforms)}function fC(t,e,n,i,r,o){const a=t.Fu(1,e,n),u=[iT(e,i,n)],c=[r];if(o.length%2!=0)throw new Y(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(iT(e,o[_])),c.push(o[_+1]);const h=[],m=Vn.empty();for(let _=u.length-1;_>=0;--_)if(!V3(h,u[_])){const S=u[_];let P=c[_];P=ve(P);const I=a.Su(S);if(P instanceof Vm)h.push(S);else{const k=ru(P,I);k!=null&&(h.push(S),m.set(S,k))}}const g=new wi(h);return new x3(m,g,a.fieldTransforms)}function O3(t,e,n,i=!1){return ru(n,t.Fu(i?4:3,e))}function ru(t,e){if(M3(t=ve(t)))return pC("Unsupported field value:",e,t),L3(t,e);if(t instanceof nu)return function(i,r){if(!N3(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let c=ru(u,r.bu(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=ve(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return l4(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Tt.fromDate(i);return{timestampValue:yd(r.serializer,o)}}if(i instanceof Tt){const o=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yd(r.serializer,o)}}if(i instanceof Iw)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ys)return{bytesValue:w4(r.serializer,i._byteString)};if(i instanceof kt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ob(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${Ew(i)}`)}(t,e)}function L3(t,e){const n={};return zF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tu(t,(i,r)=>{const o=ru(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function M3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Iw||t instanceof ys||t instanceof kt||t instanceof nu)}function pC(t,e,n){if(!M3(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Ew(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function iT(t,e,n){if((e=ve(e))instanceof wa)return e._internalPath;if(typeof e=="string")return mC(t,e);throw v_("Field path arguments must be of type string or ",t,!1,void 0,n)}const wX=new RegExp("[~\\*/\\[\\]]");function mC(t,e,n){if(e.search(wX)>=0)throw v_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wa(...e.split("."))._internalPath}catch{throw v_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function v_(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new Y(G.INVALID_ARGUMENT,u+t+c)}function V3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EX extends rm{data(){return super.data()}}function bw(t,e){return typeof e=="string"?mC(t,e):e instanceof wa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gC{}class Fm extends gC{}function Fo(t,e,...n){let i=[];e instanceof gC&&i.push(e),i=i.concat(n),function(o){const a=o.filter(c=>c instanceof vC).length,u=o.filter(c=>c instanceof Cw).length;if(a>1||a>0&&u>0)throw new Y(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Cw extends Fm{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Cw(e,n,i)}_apply(e){const n=this._parse(e);return B3(e._query,n),new oi(e.firestore,e.converter,z1(e._query,n))}_parse(e){const n=iu(e.firestore);return function(o,a,u,c,h,m,g){let _;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Y(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){jN(g,m);const S=[];for(const P of g)S.push(BN(c,o,P));_={arrayValue:{values:S}}}else _=BN(c,o,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||jN(g,m),_=O3(u,a,g,m==="in"||m==="not-in");return Be.create(h,m,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function IX(t,e,n){const i=e,r=bw("where",t);return Cw._create(r,i,n)}class vC extends gC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vC(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:et.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r;const u=o.getFlattenedFilters();for(const c of u)B3(a,c),a=z1(a,c)}(e._query,n),new oi(e.firestore,e.converter,z1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yC extends Fm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yC(e,n)}_apply(e){const n=function(r,o,a){if(r.startAt!==null)throw new Y(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Y(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tm(o,a)}(e._query,this._field,this._direction);return new oi(e.firestore,e.converter,function(r,o){const a=r.explicitOrderBy.concat([o]);return new uo(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function TX(t,e="asc"){const n=e,i=bw("orderBy",t);return yC._create(i,n)}class Aw extends Fm{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Aw(e,n,i)}_apply(e){return new oi(e.firestore,e.converter,l_(e._query,this._limit,this._limitType))}}function SX(t){return E3("limit",t),Aw._create("limit",t,"F")}function bX(t){return E3("limitToLast",t),Aw._create("limitToLast",t,"L")}class Rw extends Fm{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Rw(e,n,i)}_apply(e){const n=U3(e,this.type,this._docOrFields,this._inclusive);return new oi(e.firestore,e.converter,function(r,o){return new uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}}function CX(...t){return Rw._create("startAt",t,!0)}function AX(...t){return Rw._create("startAfter",t,!1)}class Pw extends Fm{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Pw(e,n,i)}_apply(e){const n=U3(e,this.type,this._docOrFields,this._inclusive);return new oi(e.firestore,e.converter,function(r,o){return new uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}}function RX(...t){return Pw._create("endBefore",t,!1)}function PX(...t){return Pw._create("endAt",t,!0)}function U3(t,e,n,i){if(n[0]=ve(n[0]),n[0]instanceof rm)return function(o,a,u,c,h){if(!c)throw new Y(G.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const m=[];for(const g of Yc(o))if(g.field.isKeyField())m.push(Bl(a,c.key));else{const _=c.data.field(g.field);if(dw(_))throw new Y(G.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const S=g.field.canonicalString();throw new Y(G.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}m.push(_)}return new ya(m,h)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=iu(t.firestore);return function(a,u,c,h,m,g){const _=a.explicitOrderBy;if(m.length>_.length)throw new Y(G.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let P=0;P<m.length;P++){const I=m[P];if(_[P].field.isKeyField()){if(typeof I!="string")throw new Y(G.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof I}`);if(!Ab(a)&&I.indexOf("/")!==-1)throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${I}' contains a slash.`);const k=a.path.child(Ue.fromString(I));if(!ie.isDocumentKey(k))throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const E=new ie(k);S.push(Bl(u,E))}else{const k=O3(c,h,I);S.push(k)}}return new ya(S,g)}(t._query,t.firestore._databaseId,r,e,n,i)}}function BN(t,e,n){if(typeof(n=ve(n))=="string"){if(n==="")throw new Y(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ab(e)&&n.indexOf("/")!==-1)throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!ie.isDocumentKey(i))throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Bl(t,new ie(i))}if(n instanceof kt)return Bl(t,n._key);throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ew(n)}.`)}function jN(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B3(t,e){const n=function(r,o){for(const a of r)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _C{convertValue(e,n="none"){switch(Ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return tu(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Iw(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=bb(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Xp(e));default:return null}}convertTimestamp(e){const n=io(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);me(x4(i));const r=new ga(i.get(1),i.get(3)),o=new ie(i.popFirst(5));return r.isEqual(n)||Kt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class kX extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ro=class extends rm{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(bw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},dp=class extends ro{data(e={}){return super.data(e)}},Ea=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new vl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new dp(this._firestore,this._userDataWriter,i.key,i,new vl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new dp(r._firestore,r._userDataWriter,u.doc.key,u.doc,new vl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new dp(r._firestore,r._userDataWriter,u.doc.key,u.doc,new vl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,m=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:xX(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function xX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}function j3(t,e){return t instanceof ro&&e instanceof ro?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ea&&e instanceof Ea&&t._firestore===e._firestore&&A3(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NX(t){t=We(t,kt);const e=We(t.firestore,jt);return v3(Rn(e),t._key).then(n=>wC(e,t,n))}class su extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function DX(t){t=We(t,kt);const e=We(t.firestore,jt),n=Rn(e),i=new su(e);return ZJ(n,t._key).then(r=>new ro(e,i,t._key,r,new vl(r!==null&&r.hasLocalMutations,!0),t.converter))}function OX(t){t=We(t,kt);const e=We(t.firestore,jt);return v3(Rn(e),t._key,{source:"server"}).then(n=>wC(e,t,n))}function LX(t){t=We(t,oi);const e=We(t.firestore,jt),n=Rn(e),i=new su(e);return F3(t._query),y3(n,t._query).then(r=>new Ea(e,i,t,r))}function MX(t){t=We(t,oi);const e=We(t.firestore,jt),n=Rn(e),i=new su(e);return eX(n,t._query).then(r=>new Ea(e,i,t,r))}function VX(t){t=We(t,oi);const e=We(t.firestore,jt),n=Rn(e),i=new su(e);return y3(n,t._query,{source:"server"}).then(r=>new Ea(e,i,t,r))}function zN(t,e,n){t=We(t,kt);const i=We(t.firestore,jt),r=kw(t.converter,e,n);return Um(i,[Sw(iu(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,It.none())])}function $N(t,e,n,...i){t=We(t,kt);const r=We(t.firestore,jt),o=iu(r);let a;return a=typeof(e=ve(e))=="string"||e instanceof wa?fC(o,"updateDoc",t._key,e,n,i):hC(o,"updateDoc",t._key,e),Um(r,[a.toMutation(t._key,It.exists(!0))])}function FX(t){return Um(We(t.firestore,jt),[new zd(t._key,It.none())])}function UX(t,e){const n=We(t.firestore,jt),i=g_(t),r=kw(t.converter,e);return Um(n,[Sw(iu(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,It.exists(!1))]).then(()=>i)}function z3(t,...e){var n,i,r;t=ve(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||nT(e[a])||(o=e[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(nT(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(i=g.error)===null||i===void 0?void 0:i.bind(g),e[a+2]=(r=g.complete)===null||r===void 0?void 0:r.bind(g)}let c,h,m;if(t instanceof kt)h=We(t.firestore,jt),m=Bd(t._key.path),c={next:g=>{e[a]&&e[a](wC(h,t,g))},error:e[a+1],complete:e[a+2]};else{const g=We(t,oi);h=We(g.firestore,jt),m=g._query;const _=new su(h);c={next:S=>{e[a]&&e[a](new Ea(h,_,g,S))},error:e[a+1],complete:e[a+2]},F3(t._query)}return function(_,S,P,I){const k=new _w(I),E=new Jb(S,k,P);return _.asyncQueue.enqueueAndForget(async()=>Kb(await Sd(_),E)),()=>{k.$a(),_.asyncQueue.enqueueAndForget(async()=>Qb(await Sd(_),E))}}(Rn(h),m,u,c)}function BX(t,e){return tX(Rn(t=We(t,jt)),nT(e)?e:{next:e})}function Um(t,e){return function(i,r){const o=new Cn;return i.asyncQueue.enqueueAndForget(async()=>PJ(await oC(i),r,o)),o.promise}(Rn(t),e)}function wC(t,e,n){const i=n.docs.get(e._key),r=new su(t);return new ro(t,r,e._key,i,new vl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jX={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zX=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=iu(e)}set(e,n,i){this._verifyNotCommitted();const r=qo(e,this._firestore),o=kw(r.converter,n,i),a=Sw(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,It.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const o=qo(e,this._firestore);let a;return a=typeof(n=ve(n))=="string"||n instanceof wa?fC(this._dataReader,"WriteBatch.update",o._key,n,i,r):hC(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,It.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qo(e,this._firestore);return this._mutations=this._mutations.concat(new zd(n._key,It.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qo(t,e){if((t=ve(t)).firestore!==e)throw new Y(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $X=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=iu(n)}get(n){const i=qo(n,this._firestore),r=new kX(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return ae();const a=o[0];if(a.isFoundDocument())return new rm(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new rm(this._firestore,r,i._key,null,i.converter);throw ae()})}set(n,i,r){const o=qo(n,this._firestore),a=kw(o.converter,i,r),u=Sw(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,r);return this._transaction.set(o._key,u),this}update(n,i,r,...o){const a=qo(n,this._firestore);let u;return u=typeof(i=ve(i))=="string"||i instanceof wa?fC(this._dataReader,"Transaction.update",a._key,i,r,o):hC(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,u),this}delete(n){const i=qo(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=qo(e,this._firestore),i=new su(this._firestore);return super.get(e).then(r=>new ro(this._firestore,i,n._key,r._document,new vl(!1,!1),n.converter))}};function qX(t,e,n){t=We(t,jt);const i=Object.assign(Object.assign({},jX),n);return function(o){if(o.maxAttempts<1)throw new Y(G.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,a,u){const c=new Cn;return o.asyncQueue.enqueueAndForget(async()=>{const h=await YJ(o);new KJ(o.asyncQueue,h,u,a,c).Xa()}),c.promise}(Rn(t),r=>e(new $X(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GX(){return new Vm("deleteField")}function WX(){return new lC("serverTimestamp")}function HX(...t){return new uC("arrayUnion",t)}function KX(...t){return new cC("arrayRemove",t)}function QX(t){return new dC("increment",t)}(function(e,n=!0){(function(r){Ud=r})(oo),Zs(new Mr("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new jt(new nQ(i.getProvider("auth-internal")),new oQ(i.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(h.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Bi(M2,"4.6.3",e),Bi(M2,"4.6.3","esm2017")})();const YX="@firebase/firestore-compat",JX="0.3.32";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Y("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){if(typeof Uint8Array>"u")throw new Y("unimplemented","Uint8Arrays are not available in this environment.")}function GN(){if(!xQ())throw new Y("unimplemented","Blobs are unavailable in Firestore in this environment.")}let $3=class rT{constructor(e){this._delegate=e}static fromBase64String(e){return GN(),new rT(ys.fromBase64String(e))}static fromUint8Array(e){return qN(),new rT(ys.fromUint8Array(e))}toBase64(){return GN(),this._delegate.toBase64()}toUint8Array(){return qN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){return XX(t,["next","error","complete"])}function XX(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{enableIndexedDbPersistence(e,n){return uX(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return cX(e._delegate)}clearIndexedDbPersistence(e){return dX(e._delegate)}}class q3{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ga||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){rX(this._delegate,e,n,i)}enableNetwork(){return fX(this._delegate)}disableNetwork(){return pX(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,w3("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hX(this._delegate)}onSnapshotsInSync(e){return BX(this._delegate,e)}get app(){if(!this._appCompat)throw new Y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bd(this,b3(this._delegate,e))}catch(n){throw ti(n,"collection()","Firestore.collection()")}}doc(e){try{return new er(this,g_(this._delegate,e))}catch(n){throw ti(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ei(this,sX(this._delegate,e))}catch(n){throw ti(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return qX(this._delegate,n=>e(new G3(this,n)))}batch(){return Rn(this._delegate),new W3(new zX(this._delegate,e=>Um(this._delegate,e)))}loadBundle(e){return mX(this._delegate,e)}namedQuery(e){return gX(this._delegate,e).then(n=>n?new ei(this,n):null)}}class xw extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new $3(new ys(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return er.forKey(n,this.firestore,null)}}function eZ(t){XK(t)}class G3{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new xw(e)}get(e){const n=yl(e);return this._delegate.get(n).then(i=>new sm(this._firestore,new ro(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=yl(e);return i?(EC("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const o=yl(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){const n=yl(e);return this._delegate.delete(n),this}}class W3{constructor(e){this._delegate=e}set(e,n,i){const r=yl(e);return i?(EC("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const o=yl(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){const n=yl(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Hl{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new dp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new om(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=Hl.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new Hl(e,new xw(e),n),r.set(n,o)),o}}Hl.INSTANCES=new WeakMap;class er{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new xw(e)}static forPath(e,n,i){if(e.length%2!==0)throw new Y("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new er(n,new kt(n._delegate,i,new ie(e)))}static forKey(e,n,i){return new er(n,new kt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new bd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bd(this.firestore,b3(this._delegate,e))}catch(n){throw ti(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ve(e),e instanceof kt?C3(this._delegate,e):!1}set(e,n){n=EC("DocumentReference.set",n);try{return n?zN(this._delegate,e,n):zN(this._delegate,e)}catch(i){throw ti(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?$N(this._delegate,e):$N(this._delegate,e,n,...i)}catch(r){throw ti(r,"updateDoc()","DocumentReference.update()")}}delete(){return FX(this._delegate)}onSnapshot(...e){const n=H3(e),i=K3(e,r=>new sm(this.firestore,new ro(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return z3(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=DX(this._delegate):(e==null?void 0:e.source)==="server"?n=OX(this._delegate):n=NX(this._delegate),n.then(i=>new sm(this.firestore,new ro(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new er(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ti(t,e,n){return t.message=t.message.replace(e,n),t}function H3(t){for(const e of t)if(typeof e=="object"&&!sT(e))return e;return{}}function K3(t,e){var n,i;let r;return sT(t[0])?r=t[0]:sT(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class sm{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new er(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return j3(this._delegate,e._delegate)}}class om extends sm{data(e){const n=this._delegate.data(e);return this._delegate._converter||ZK(n!==void 0),n}}class ei{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new xw(e)}where(e,n,i){try{return new ei(this.firestore,Fo(this._delegate,IX(e,n,i)))}catch(r){throw ti(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ei(this.firestore,Fo(this._delegate,TX(e,n)))}catch(i){throw ti(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ei(this.firestore,Fo(this._delegate,SX(e)))}catch(n){throw ti(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ei(this.firestore,Fo(this._delegate,bX(e)))}catch(n){throw ti(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ei(this.firestore,Fo(this._delegate,CX(...e)))}catch(n){throw ti(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ei(this.firestore,Fo(this._delegate,AX(...e)))}catch(n){throw ti(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ei(this.firestore,Fo(this._delegate,RX(...e)))}catch(n){throw ti(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ei(this.firestore,Fo(this._delegate,PX(...e)))}catch(n){throw ti(n,"endAt()","Query.endAt()")}}isEqual(e){return A3(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=MX(this._delegate):(e==null?void 0:e.source)==="server"?n=VX(this._delegate):n=LX(this._delegate),n.then(i=>new oT(this.firestore,new Ea(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=H3(e),i=K3(e,r=>new oT(this.firestore,new Ea(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return z3(this._delegate,n,i)}withConverter(e){return new ei(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class tZ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new om(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oT{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ei(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new om(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new tZ(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new om(this._firestore,i))})}isEqual(e){return j3(this._delegate,e._delegate)}}class bd extends ei{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new er(this.firestore,e):null}doc(e){try{return e===void 0?new er(this.firestore,g_(this._delegate)):new er(this.firestore,g_(this._delegate,e))}catch(n){throw ti(n,"doc()","CollectionReference.doc()")}}add(e){return UX(this._delegate,e).then(n=>new er(this.firestore,n))}isEqual(e){return C3(this._delegate,e._delegate)}withConverter(e){return new bd(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function yl(t){return We(t,kt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(...e){this._delegate=new wa(...e)}static documentId(){return new IC(Et.keyField().canonicalString())}isEqual(e){return e=ve(e),e instanceof wa?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this._delegate=e}static serverTimestamp(){const e=WX();return e._methodName="FieldValue.serverTimestamp",new cl(e)}static delete(){const e=GX();return e._methodName="FieldValue.delete",new cl(e)}static arrayUnion(...e){const n=HX(...e);return n._methodName="FieldValue.arrayUnion",new cl(n)}static arrayRemove(...e){const n=KX(...e);return n._methodName="FieldValue.arrayRemove",new cl(n)}static increment(e){const n=QX(e);return n._methodName="FieldValue.increment",new cl(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ={Firestore:q3,GeoPoint:Iw,Timestamp:Tt,Blob:$3,Transaction:G3,WriteBatch:W3,DocumentReference:er,DocumentSnapshot:sm,Query:ei,QueryDocumentSnapshot:om,QuerySnapshot:oT,CollectionReference:bd,FieldPath:IC,FieldValue:cl,setLogLevel:eZ,CACHE_SIZE_UNLIMITED:lX};function iZ(t,e){t.INTERNAL.registerComponent(new Mr("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},nZ)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(t){iZ(t,(e,n)=>new q3(e,n,new ZX)),t.registerVersion(YX,JX)}rZ(pe);const sZ={apiKey:"AIzaSyB3V82mH6Ydl_hlMbB6b7ioLFT_1Gcz8Bc",authDomain:"exercise-d4c15.firebaseapp.com",projectId:"exercise-d4c15",storageBucket:"exercise-d4c15.appspot.com",messagingSenderId:"833031562012",appId:"1:833031562012:web:e44d878e820e3a7c3690d9"},oZ=pe.initializeApp(sZ),Nw=pe.auth(),aT=({onClick:t,text:e,className:n})=>he.jsx("div",{className:n,children:he.jsx("button",{className:`btn ${n}`,onClick:t,children:e})}),WN=t=>t.length===0?"":t[0].toUpperCase()+t.substring(1),aZ=t=>({normal:"#A8A878",fighting:"#C03028",flying:"#A890F0",poison:"#e63ce6",ground:"#E0C068",rock:"#B8A038",bug:"#A8B820",ghost:"#705898",steel:"#B8B8D0",fire:"#F08030",water:"#6890F0",grass:"#78C850",electric:"#F8D030",psychic:"#F85888",ice:"#98D8D8",dragon:"#7038F8",dark:"#705848",fairy:"#EE99AC",stellar:"#FFD700",unknown:"#FFFFFF"})[t],lZ=({hp:t,imgSrc:e,pokeName:n,statAttack:i,statDefense:r,statSpeed:o,types:a})=>{const[u,c]=Se.useState("#242424");Se.useEffect(()=>{a.length>0&&h(a[0].type.name)},[a]);const h=g=>{const _=aZ(g)||"#ffffff";c(_)},m=()=>a.map((g,_)=>he.jsx("span",{style:{color:u},children:WN(g.type.name)},_));return he.jsxs("div",{id:"card",style:{background:`radial-gradient(circle at 50% 0%, ${u} 36%, #404060 36%)`},children:[he.jsxs("p",{className:"hp",children:[he.jsx("span",{children:"HP"}),t]}),he.jsx("img",{src:e,alt:n}),he.jsx("h2",{className:"poke-name",children:WN(n)}),he.jsx("div",{className:"types",children:m()}),he.jsxs("div",{className:"stats",children:[he.jsxs("div",{children:[he.jsx("h3",{children:i}),he.jsx("p",{style:{color:u},children:"Attack"})]}),he.jsxs("div",{children:[he.jsx("h3",{children:r}),he.jsx("p",{style:{color:u},children:"Defense"})]}),he.jsxs("div",{children:[he.jsx("h3",{children:o}),he.jsx("p",{style:{color:u},children:"Speed"})]})]})]})};function HN(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function TC(t={},e={}){Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:HN(e[n])&&HN(t[n])&&Object.keys(e[n]).length>0&&TC(t[n],e[n])})}const Q3={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ou(){const t=typeof document<"u"?document:{};return TC(t,Q3),t}const uZ={document:Q3,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Gi(){const t=typeof window<"u"?window:{};return TC(t,uZ),t}function cZ(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function lT(t,e=0){return setTimeout(t,e)}function y_(){return Date.now()}function dZ(t){const e=Gi();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function hZ(t,e="x"){const n=Gi();let i,r,o;const a=dZ(t);return n.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(u=>u.replace(",",".")).join(", ")),o=new n.WebKitCSSMatrix(r==="none"?"":r)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?r=o.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(n.WebKitCSSMatrix?r=o.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Dv(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function fZ(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Li(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<t.length;i+=1){const r=t[i];if(r!=null&&!fZ(r)){const o=Object.keys(Object(r)).filter(a=>n.indexOf(a)<0);for(let a=0,u=o.length;a<u;a+=1){const c=o[a],h=Object.getOwnPropertyDescriptor(r,c);h!==void 0&&h.enumerable&&(Dv(e[c])&&Dv(r[c])?r[c].__swiper__?e[c]=r[c]:Li(e[c],r[c]):!Dv(e[c])&&Dv(r[c])?(e[c]={},r[c].__swiper__?e[c]=r[c]:Li(e[c],r[c])):e[c]=r[c])}}}return e}function Ov(t,e,n){t.style.setProperty(e,n)}function Y3({swiper:t,targetPosition:e,side:n}){const i=Gi(),r=-t.translate;let o=null,a;const u=t.params.speed;t.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(t.cssModeFrameID);const c=e>r?"next":"prev",h=(g,_)=>c==="next"&&g>=_||c==="prev"&&g<=_,m=()=>{a=new Date().getTime(),o===null&&(o=a);const g=Math.max(Math.min((a-o)/u,1),0),_=.5-Math.cos(g*Math.PI)/2;let S=r+_*(e-r);if(h(S,e)&&(S=e),t.wrapperEl.scrollTo({[n]:S}),h(S,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:S})}),i.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=i.requestAnimationFrame(m)};m()}function ds(t,e=""){return[...t.children].filter(n=>n.matches(e))}function J3(t,e=[]){const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:[e]),n}function pZ(t,e){const n=[];for(;t.previousElementSibling;){const i=t.previousElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function mZ(t,e){const n=[];for(;t.nextElementSibling;){const i=t.nextElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function Qo(t,e){return Gi().getComputedStyle(t,null).getPropertyValue(e)}function __(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function X3(t,e){const n=[];let i=t.parentElement;for(;i;)e?i.matches(e)&&n.push(i):n.push(i),i=i.parentElement;return n}function uT(t,e,n){const i=Gi();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}let iI;function gZ(){const t=Gi(),e=ou();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function Z3(){return iI||(iI=gZ()),iI}let rI;function vZ({userAgent:t}={}){const e=Z3(),n=Gi(),i=n.navigator.platform,r=t||n.navigator.userAgent,o={ios:!1,android:!1},a=n.screen.width,u=n.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/);let h=r.match(/(iPad).*OS\s([\d_]+)/);const m=r.match(/(iPod)(.*OS\s([\d_]+))?/),g=!h&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),_=i==="Win32";let S=i==="MacIntel";const P=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&S&&e.touch&&P.indexOf(`${a}x${u}`)>=0&&(h=r.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),S=!1),c&&!_&&(o.os="android",o.android=!0),(h||g||m)&&(o.os="ios",o.ios=!0),o}function yZ(t={}){return rI||(rI=vZ(t)),rI}let sI;function _Z(){const t=Gi();let e=!1;function n(){const i=t.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}if(n()){const i=String(t.navigator.userAgent);if(i.includes("Version/")){const[r,o]=i.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=r<16||r===16&&o<2}}return{isSafari:e||n(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function wZ(){return sI||(sI=_Z()),sI}function EZ({swiper:t,on:e,emit:n}){const i=Gi();let r=null,o=null;const a=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},u=()=>{!t||t.destroyed||!t.initialized||(r=new ResizeObserver(m=>{o=i.requestAnimationFrame(()=>{const{width:g,height:_}=t;let S=g,P=_;m.forEach(({contentBoxSize:I,contentRect:k,target:E})=>{E&&E!==t.el||(S=k?k.width:(I[0]||I).inlineSize,P=k?k.height:(I[0]||I).blockSize)}),(S!==g||P!==_)&&a()})}),r.observe(t.el))},c=()=>{o&&i.cancelAnimationFrame(o),r&&r.unobserve&&t.el&&(r.unobserve(t.el),r=null)},h=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof i.ResizeObserver<"u"){u();return}i.addEventListener("resize",a),i.addEventListener("orientationchange",h)}),e("destroy",()=>{c(),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",h)})}function IZ({swiper:t,extendParams:e,on:n,emit:i}){const r=[],o=Gi(),a=(h,m={})=>{const g=o.MutationObserver||o.WebkitMutationObserver,_=new g(S=>{if(t.__preventObserver__)return;if(S.length===1){i("observerUpdate",S[0]);return}const P=function(){i("observerUpdate",S[0])};o.requestAnimationFrame?o.requestAnimationFrame(P):o.setTimeout(P,0)});_.observe(h,{attributes:typeof m.attributes>"u"?!0:m.attributes,childList:typeof m.childList>"u"?!0:m.childList,characterData:typeof m.characterData>"u"?!0:m.characterData}),r.push(_)},u=()=>{if(t.params.observer){if(t.params.observeParents){const h=X3(t.el);for(let m=0;m<h.length;m+=1)a(h[m])}a(t.el,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(h=>{h.disconnect()}),r.splice(0,r.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",u),n("destroy",c)}const TZ={on(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=n?"unshift":"push";return t.split(" ").forEach(o=>{i.eventsListeners[o]||(i.eventsListeners[o]=[]),i.eventsListeners[o][r](e)}),i},once(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(...o){i.off(t,r),r.__emitterProxy&&delete r.__emitterProxy,e.apply(i,o)}return r.__emitterProxy=e,i.on(t,r,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(i=>{typeof e>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((r,o)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&n.eventsListeners[i].splice(o,1)})}),n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let n,i,r;return typeof t[0]=="string"||Array.isArray(t[0])?(n=t[0],i=t.slice(1,t.length),r=e):(n=t[0].events,i=t[0].data,r=t[0].context||e),i.unshift(r),(Array.isArray(n)?n:n.split(" ")).forEach(a=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(u=>{u.apply(r,[a,...i])}),e.eventsListeners&&e.eventsListeners[a]&&e.eventsListeners[a].forEach(u=>{u.apply(r,i)})}),e}};function SZ(){const t=this;let e,n;const i=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=i.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=i.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(Qo(i,"padding-left")||0,10)-parseInt(Qo(i,"padding-right")||0,10),n=n-parseInt(Qo(i,"padding-top")||0,10)-parseInt(Qo(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function bZ(){const t=this;function e(O){return t.isHorizontal()?O:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[O]}function n(O,V){return parseFloat(O.getPropertyValue(e(V))||0)}const i=t.params,{wrapperEl:r,slidesEl:o,size:a,rtlTranslate:u,wrongRTL:c}=t,h=t.virtual&&i.virtual.enabled,m=h?t.virtual.slides.length:t.slides.length,g=ds(o,`.${t.params.slideClass}, swiper-slide`),_=h?t.virtual.slides.length:g.length;let S=[];const P=[],I=[];let k=i.slidesOffsetBefore;typeof k=="function"&&(k=i.slidesOffsetBefore.call(t));let E=i.slidesOffsetAfter;typeof E=="function"&&(E=i.slidesOffsetAfter.call(t));const b=t.snapGrid.length,A=t.slidesGrid.length;let M=i.spaceBetween,B=-k,j=0,D=0;if(typeof a>"u")return;typeof M=="string"&&M.indexOf("%")>=0?M=parseFloat(M.replace("%",""))/100*a:typeof M=="string"&&(M=parseFloat(M)),t.virtualSize=-M,g.forEach(O=>{u?O.style.marginLeft="":O.style.marginRight="",O.style.marginBottom="",O.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(Ov(r,"--swiper-centered-offset-before",""),Ov(r,"--swiper-centered-offset-after",""));const C=i.grid&&i.grid.rows>1&&t.grid;C&&t.grid.initSlides(_);let L;const F=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(O=>typeof i.breakpoints[O].slidesPerView<"u").length>0;for(let O=0;O<_;O+=1){L=0;let V;if(g[O]&&(V=g[O]),C&&t.grid.updateSlide(O,V,_,e),!(g[O]&&Qo(V,"display")==="none")){if(i.slidesPerView==="auto"){F&&(g[O].style[e("width")]="");const N=getComputedStyle(V),we=V.style.transform,Te=V.style.webkitTransform;if(we&&(V.style.transform="none"),Te&&(V.style.webkitTransform="none"),i.roundLengths)L=t.isHorizontal()?uT(V,"width"):uT(V,"height");else{const _e=n(N,"width"),rt=n(N,"padding-left"),re=n(N,"padding-right"),le=n(N,"margin-left"),de=n(N,"margin-right"),Xe=N.getPropertyValue("box-sizing");if(Xe&&Xe==="border-box")L=_e+le+de;else{const{clientWidth:je,offsetWidth:ct}=V;L=_e+rt+re+le+de+(ct-je)}}we&&(V.style.transform=we),Te&&(V.style.webkitTransform=Te),i.roundLengths&&(L=Math.floor(L))}else L=(a-(i.slidesPerView-1)*M)/i.slidesPerView,i.roundLengths&&(L=Math.floor(L)),g[O]&&(g[O].style[e("width")]=`${L}px`);g[O]&&(g[O].swiperSlideSize=L),I.push(L),i.centeredSlides?(B=B+L/2+j/2+M,j===0&&O!==0&&(B=B-a/2-M),O===0&&(B=B-a/2-M),Math.abs(B)<1/1e3&&(B=0),i.roundLengths&&(B=Math.floor(B)),D%i.slidesPerGroup===0&&S.push(B),P.push(B)):(i.roundLengths&&(B=Math.floor(B)),(D-Math.min(t.params.slidesPerGroupSkip,D))%t.params.slidesPerGroup===0&&S.push(B),P.push(B),B=B+L+M),t.virtualSize+=L+M,j=L,D+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+E,u&&c&&(i.effect==="slide"||i.effect==="coverflow")&&(r.style.width=`${t.virtualSize+M}px`),i.setWrapperSize&&(r.style[e("width")]=`${t.virtualSize+M}px`),C&&t.grid.updateWrapperSize(L,S,e),!i.centeredSlides){const O=[];for(let V=0;V<S.length;V+=1){let N=S[V];i.roundLengths&&(N=Math.floor(N)),S[V]<=t.virtualSize-a&&O.push(N)}S=O,Math.floor(t.virtualSize-a)-Math.floor(S[S.length-1])>1&&S.push(t.virtualSize-a)}if(h&&i.loop){const O=I[0]+M;if(i.slidesPerGroup>1){const V=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/i.slidesPerGroup),N=O*i.slidesPerGroup;for(let we=0;we<V;we+=1)S.push(S[S.length-1]+N)}for(let V=0;V<t.virtual.slidesBefore+t.virtual.slidesAfter;V+=1)i.slidesPerGroup===1&&S.push(S[S.length-1]+O),P.push(P[P.length-1]+O),t.virtualSize+=O}if(S.length===0&&(S=[0]),M!==0){const O=t.isHorizontal()&&u?"marginLeft":e("marginRight");g.filter((V,N)=>!i.cssMode||i.loop?!0:N!==g.length-1).forEach(V=>{V.style[O]=`${M}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let O=0;I.forEach(N=>{O+=N+(M||0)}),O-=M;const V=O-a;S=S.map(N=>N<=0?-k:N>V?V+E:N)}if(i.centerInsufficientSlides){let O=0;if(I.forEach(V=>{O+=V+(M||0)}),O-=M,O<a){const V=(a-O)/2;S.forEach((N,we)=>{S[we]=N-V}),P.forEach((N,we)=>{P[we]=N+V})}}if(Object.assign(t,{slides:g,snapGrid:S,slidesGrid:P,slidesSizesGrid:I}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){Ov(r,"--swiper-centered-offset-before",`${-S[0]}px`),Ov(r,"--swiper-centered-offset-after",`${t.size/2-I[I.length-1]/2}px`);const O=-t.snapGrid[0],V=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(N=>N+O),t.slidesGrid=t.slidesGrid.map(N=>N+V)}if(_!==m&&t.emit("slidesLengthChange"),S.length!==b&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),P.length!==A&&t.emit("slidesGridLengthChange"),i.watchSlidesProgress&&t.updateSlidesOffset(),!h&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const O=`${i.containerModifierClass}backface-hidden`,V=t.el.classList.contains(O);_<=i.maxBackfaceHiddenSlides?V||t.el.classList.add(O):V&&t.el.classList.remove(O)}}function CZ(t){const e=this,n=[],i=e.virtual&&e.params.virtual.enabled;let r=0,o;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const a=u=>i?e.slides[e.getSlideIndexByData(u)]:e.slides[u];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(u=>{n.push(u)});else for(o=0;o<Math.ceil(e.params.slidesPerView);o+=1){const u=e.activeIndex+o;if(u>e.slides.length&&!i)break;n.push(a(u))}else n.push(a(e.activeIndex));for(o=0;o<n.length;o+=1)if(typeof n[o]<"u"){const u=n[o].offsetHeight;r=u>r?u:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function AZ(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(t.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-n-t.cssOverflowAdjustment()}function RZ(t=this&&this.translate||0){const e=this,n=e.params,{slides:i,rtlTranslate:r,snapGrid:o}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-t;r&&(a=t),i.forEach(c=>{c.classList.remove(n.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let u=n.spaceBetween;typeof u=="string"&&u.indexOf("%")>=0?u=parseFloat(u.replace("%",""))/100*e.size:typeof u=="string"&&(u=parseFloat(u));for(let c=0;c<i.length;c+=1){const h=i[c];let m=h.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(m-=i[0].swiperSlideOffset);const g=(a+(n.centeredSlides?e.minTranslate():0)-m)/(h.swiperSlideSize+u),_=(a-o[0]+(n.centeredSlides?e.minTranslate():0)-m)/(h.swiperSlideSize+u),S=-(a-m),P=S+e.slidesSizesGrid[c];(S>=0&&S<e.size-1||P>1&&P<=e.size||S<=0&&P>=e.size)&&(e.visibleSlides.push(h),e.visibleSlidesIndexes.push(c),i[c].classList.add(n.slideVisibleClass)),h.progress=r?-g:g,h.originalProgress=r?-_:_}}function PZ(t){const e=this;if(typeof t>"u"){const m=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*m||0}const n=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:o,isEnd:a,progressLoop:u}=e;const c=o,h=a;if(i===0)r=0,o=!0,a=!0;else{r=(t-e.minTranslate())/i;const m=Math.abs(t-e.minTranslate())<1,g=Math.abs(t-e.maxTranslate())<1;o=m||r<=0,a=g||r>=1,m&&(r=0),g&&(r=1)}if(n.loop){const m=e.getSlideIndexByData(0),g=e.getSlideIndexByData(e.slides.length-1),_=e.slidesGrid[m],S=e.slidesGrid[g],P=e.slidesGrid[e.slidesGrid.length-1],I=Math.abs(t);I>=_?u=(I-_)/P:u=(I+P-S)/P,u>1&&(u-=1)}Object.assign(e,{progress:r,progressLoop:u,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),o&&!c&&e.emit("reachBeginning toEdge"),a&&!h&&e.emit("reachEnd toEdge"),(c&&!o||h&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}function kZ(){const t=this,{slides:e,params:n,slidesEl:i,activeIndex:r}=t,o=t.virtual&&n.virtual.enabled,a=c=>ds(i,`.${n.slideClass}${c}, swiper-slide${c}`)[0];e.forEach(c=>{c.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)});let u;if(o)if(n.loop){let c=r-t.virtual.slidesBefore;c<0&&(c=t.virtual.slides.length+c),c>=t.virtual.slides.length&&(c-=t.virtual.slides.length),u=a(`[data-swiper-slide-index="${c}"]`)}else u=a(`[data-swiper-slide-index="${r}"]`);else u=e[r];if(u){u.classList.add(n.slideActiveClass);let c=mZ(u,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!c&&(c=e[0]),c&&c.classList.add(n.slideNextClass);let h=pZ(u,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!h===0&&(h=e[e.length-1]),h&&h.classList.add(n.slidePrevClass)}t.emitSlidesClasses()}const cy=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,i=e.closest(n());if(i){const r=i.querySelector(`.${t.params.lazyPreloaderClass}`);r&&r.remove()}},oI=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},cT=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const i=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),r=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const a=r,u=[a-e];u.push(...Array.from({length:e}).map((c,h)=>a+i+h)),t.slides.forEach((c,h)=>{u.includes(c.column)&&oI(t,h)});return}const o=r+i-1;if(t.params.rewind||t.params.loop)for(let a=r-e;a<=o+e;a+=1){const u=(a%n+n)%n;(u<r||u>o)&&oI(t,u)}else for(let a=Math.max(r-e,0);a<=Math.min(o+e,n-1);a+=1)a!==r&&(a>o||a<r)&&oI(t,a)};function xZ(t){const{slidesGrid:e,params:n}=t,i=t.rtlTranslate?t.translate:-t.translate;let r;for(let o=0;o<e.length;o+=1)typeof e[o+1]<"u"?i>=e[o]&&i<e[o+1]-(e[o+1]-e[o])/2?r=o:i>=e[o]&&i<e[o+1]&&(r=o+1):i>=e[o]&&(r=o);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function NZ(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:o,realIndex:a,snapIndex:u}=e;let c=t,h;const m=_=>{let S=_-e.virtual.slidesBefore;return S<0&&(S=e.virtual.slides.length+S),S>=e.virtual.slides.length&&(S-=e.virtual.slides.length),S};if(typeof c>"u"&&(c=xZ(e)),i.indexOf(n)>=0)h=i.indexOf(n);else{const _=Math.min(r.slidesPerGroupSkip,c);h=_+Math.floor((c-_)/r.slidesPerGroup)}if(h>=i.length&&(h=i.length-1),c===o){h!==u&&(e.snapIndex=h,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=m(c));return}let g;e.virtual&&r.virtual.enabled&&r.loop?g=m(c):e.slides[c]?g=parseInt(e.slides[c].getAttribute("data-swiper-slide-index")||c,10):g=c,Object.assign(e,{previousSnapIndex:u,snapIndex:h,previousRealIndex:a,realIndex:g,previousIndex:o,activeIndex:c}),e.initialized&&cT(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),a!==g&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function DZ(t){const e=this,n=e.params,i=t.closest(`.${n.slideClass}, swiper-slide`);let r=!1,o;if(i){for(let a=0;a<e.slides.length;a+=1)if(e.slides[a]===i){r=!0,o=a;break}}if(i&&r)e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=o;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const OZ={updateSize:SZ,updateSlides:bZ,updateAutoHeight:CZ,updateSlidesOffset:AZ,updateSlidesProgress:RZ,updateProgress:PZ,updateSlidesClasses:kZ,updateActiveIndex:NZ,updateClickedSlide:DZ};function LZ(t=this.isHorizontal()?"x":"y"){const e=this,{params:n,rtlTranslate:i,translate:r,wrapperEl:o}=e;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;let a=hZ(o,t);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function MZ(t,e){const n=this,{rtlTranslate:i,params:r,wrapperEl:o,progress:a}=n;let u=0,c=0;const h=0;n.isHorizontal()?u=i?-t:t:c=t,r.roundLengths&&(u=Math.floor(u),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:c,r.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-c:r.virtualTranslate||(n.isHorizontal()?u-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),o.style.transform=`translate3d(${u}px, ${c}px, ${h}px)`);let m;const g=n.maxTranslate()-n.minTranslate();g===0?m=0:m=(t-n.minTranslate())/g,m!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function VZ(){return-this.snapGrid[0]}function FZ(){return-this.snapGrid[this.snapGrid.length-1]}function UZ(t=0,e=this.params.speed,n=!0,i=!0,r){const o=this,{params:a,wrapperEl:u}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;const c=o.minTranslate(),h=o.maxTranslate();let m;if(i&&t>c?m=c:i&&t<h?m=h:m=t,o.updateProgress(m),a.cssMode){const g=o.isHorizontal();if(e===0)u[g?"scrollLeft":"scrollTop"]=-m;else{if(!o.support.smoothScroll)return Y3({swiper:o,targetPosition:-m,side:g?"left":"top"}),!0;u.scrollTo({[g?"left":"top"]:-m,behavior:"smooth"})}return!0}return e===0?(o.setTransition(0),o.setTranslate(m),n&&(o.emit("beforeTransitionStart",e,r),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(m),n&&(o.emit("beforeTransitionStart",e,r),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(_){!o||o.destroyed||_.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}const BZ={getTranslate:LZ,setTranslate:MZ,minTranslate:VZ,maxTranslate:FZ,translateTo:UZ};function jZ(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`),n.emit("setTransition",t,e)}function eU({swiper:t,runCallbacks:e,direction:n,step:i}){const{activeIndex:r,previousIndex:o}=t;let a=n;if(a||(r>o?a="next":r<o?a="prev":a="reset"),t.emit(`transition${i}`),e&&r!==o){if(a==="reset"){t.emit(`slideResetTransition${i}`);return}t.emit(`slideChangeTransition${i}`),a==="next"?t.emit(`slideNextTransition${i}`):t.emit(`slidePrevTransition${i}`)}}function zZ(t=!0,e){const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),eU({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function $Z(t=!0,e){const n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),eU({swiper:n,runCallbacks:t,direction:e,step:"End"}))}const qZ={setTransition:jZ,transitionStart:zZ,transitionEnd:$Z};function GZ(t=0,e=this.params.speed,n=!0,i,r){typeof t=="string"&&(t=parseInt(t,10));const o=this;let a=t;a<0&&(a=0);const{params:u,snapGrid:c,slidesGrid:h,previousIndex:m,activeIndex:g,rtlTranslate:_,wrapperEl:S,enabled:P}=o;if(o.animating&&u.preventInteractionOnTransition||!P&&!i&&!r)return!1;const I=Math.min(o.params.slidesPerGroupSkip,a);let k=I+Math.floor((a-I)/o.params.slidesPerGroup);k>=c.length&&(k=c.length-1);const E=-c[k];if(u.normalizeSlideIndex)for(let A=0;A<h.length;A+=1){const M=-Math.floor(E*100),B=Math.floor(h[A]*100),j=Math.floor(h[A+1]*100);typeof h[A+1]<"u"?M>=B&&M<j-(j-B)/2?a=A:M>=B&&M<j&&(a=A+1):M>=B&&(a=A)}if(o.initialized&&a!==g&&(!o.allowSlideNext&&(_?E>o.translate&&E>o.minTranslate():E<o.translate&&E<o.minTranslate())||!o.allowSlidePrev&&E>o.translate&&E>o.maxTranslate()&&(g||0)!==a))return!1;a!==(m||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(E);let b;if(a>g?b="next":a<g?b="prev":b="reset",_&&-E===o.translate||!_&&E===o.translate)return o.updateActiveIndex(a),u.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),u.effect!=="slide"&&o.setTranslate(E),b!=="reset"&&(o.transitionStart(n,b),o.transitionEnd(n,b)),!1;if(u.cssMode){const A=o.isHorizontal(),M=_?E:-E;if(e===0){const B=o.virtual&&o.params.virtual.enabled;B&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),B&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{S[A?"scrollLeft":"scrollTop"]=M})):S[A?"scrollLeft":"scrollTop"]=M,B&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1})}else{if(!o.support.smoothScroll)return Y3({swiper:o,targetPosition:M,side:A?"left":"top"}),!0;S.scrollTo({[A?"left":"top"]:M,behavior:"smooth"})}return!0}return o.setTransition(e),o.setTranslate(E),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,i),o.transitionStart(n,b),e===0?o.transitionEnd(n,b):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(M){!o||o.destroyed||M.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,b))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function WZ(t=0,e=this.params.speed,n=!0,i){typeof t=="string"&&(t=parseInt(t,10));const r=this;let o=t;return r.params.loop&&(r.virtual&&r.params.virtual.enabled?o=o+r.virtual.slidesBefore:o=r.getSlideIndexByData(o)),r.slideTo(o,e,n,i)}function HZ(t=this.params.speed,e=!0,n){const i=this,{enabled:r,params:o,animating:a}=i;if(!r)return i;let u=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(u=Math.max(i.slidesPerViewDynamic("current",!0),1));const c=i.activeIndex<o.slidesPerGroupSkip?1:u,h=i.virtual&&o.virtual.enabled;if(o.loop){if(a&&!h&&o.loopPreventsSliding)return!1;i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft}return o.rewind&&i.isEnd?i.slideTo(0,t,e,n):i.slideTo(i.activeIndex+c,t,e,n)}function KZ(t=this.params.speed,e=!0,n){const i=this,{params:r,snapGrid:o,slidesGrid:a,rtlTranslate:u,enabled:c,animating:h}=i;if(!c)return i;const m=i.virtual&&r.virtual.enabled;if(r.loop){if(h&&!m&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const g=u?i.translate:-i.translate;function _(E){return E<0?-Math.floor(Math.abs(E)):Math.floor(E)}const S=_(g),P=o.map(E=>_(E));let I=o[P.indexOf(S)-1];if(typeof I>"u"&&r.cssMode){let E;o.forEach((b,A)=>{S>=b&&(E=A)}),typeof E<"u"&&(I=o[E>0?E-1:E])}let k=0;if(typeof I<"u"&&(k=a.indexOf(I),k<0&&(k=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(k=k-i.slidesPerViewDynamic("previous",!0)+1,k=Math.max(k,0))),r.rewind&&i.isBeginning){const E=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(E,t,e,n)}return i.slideTo(k,t,e,n)}function QZ(t=this.params.speed,e=!0,n){const i=this;return i.slideTo(i.activeIndex,t,e,n)}function YZ(t=this.params.speed,e=!0,n,i=.5){const r=this;let o=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,o),u=a+Math.floor((o-a)/r.params.slidesPerGroup),c=r.rtlTranslate?r.translate:-r.translate;if(c>=r.snapGrid[u]){const h=r.snapGrid[u],m=r.snapGrid[u+1];c-h>(m-h)*i&&(o+=r.params.slidesPerGroup)}else{const h=r.snapGrid[u-1],m=r.snapGrid[u];c-h<=(m-h)*i&&(o-=r.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,r.slidesGrid.length-1),r.slideTo(o,t,e,n)}function JZ(){const t=this,{params:e,slidesEl:n}=t,i=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let r=t.clickedIndex,o;const a=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;o=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<t.loopedSlides-i/2||r>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),r=t.getSlideIndex(ds(n,`${a}[data-swiper-slide-index="${o}"]`)[0]),lT(()=>{t.slideTo(r)})):t.slideTo(r):r>t.slides.length-i?(t.loopFix(),r=t.getSlideIndex(ds(n,`${a}[data-swiper-slide-index="${o}"]`)[0]),lT(()=>{t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}const XZ={slideTo:GZ,slideToLoop:WZ,slideNext:HZ,slidePrev:KZ,slideReset:QZ,slideToClosest:YZ,slideToClickedSlide:JZ};function ZZ(t){const e=this,{params:n,slidesEl:i}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;ds(i,`.${n.slideClass}, swiper-slide`).forEach((o,a)=>{o.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function eee({slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:i,activeSlideIndex:r,byController:o,byMousewheel:a}={}){const u=this;if(!u.params.loop)return;u.emit("beforeLoopFix");const{slides:c,allowSlidePrev:h,allowSlideNext:m,slidesEl:g,params:_}=u;if(u.allowSlidePrev=!0,u.allowSlideNext=!0,u.virtual&&_.virtual.enabled){e&&(!_.centeredSlides&&u.snapIndex===0?u.slideTo(u.virtual.slides.length,0,!1,!0):_.centeredSlides&&u.snapIndex<_.slidesPerView?u.slideTo(u.virtual.slides.length+u.snapIndex,0,!1,!0):u.snapIndex===u.snapGrid.length-1&&u.slideTo(u.virtual.slidesBefore,0,!1,!0)),u.allowSlidePrev=h,u.allowSlideNext=m,u.emit("loopFix");return}const S=_.slidesPerView==="auto"?u.slidesPerViewDynamic():Math.ceil(parseFloat(_.slidesPerView,10));let P=_.loopedSlides||S;P%_.slidesPerGroup!==0&&(P+=_.slidesPerGroup-P%_.slidesPerGroup),u.loopedSlides=P;const I=[],k=[];let E=u.activeIndex;typeof r>"u"?r=u.getSlideIndex(u.slides.filter(j=>j.classList.contains(_.slideActiveClass))[0]):E=r;const b=n==="next"||!n,A=n==="prev"||!n;let M=0,B=0;if(r<P){M=Math.max(P-r,_.slidesPerGroup);for(let j=0;j<P-r;j+=1){const D=j-Math.floor(j/c.length)*c.length;I.push(c.length-D-1)}}else if(r>u.slides.length-P*2){B=Math.max(r-(u.slides.length-P*2),_.slidesPerGroup);for(let j=0;j<B;j+=1){const D=j-Math.floor(j/c.length)*c.length;k.push(D)}}if(A&&I.forEach(j=>{u.slides[j].swiperLoopMoveDOM=!0,g.prepend(u.slides[j]),u.slides[j].swiperLoopMoveDOM=!1}),b&&k.forEach(j=>{u.slides[j].swiperLoopMoveDOM=!0,g.append(u.slides[j]),u.slides[j].swiperLoopMoveDOM=!1}),u.recalcSlides(),_.slidesPerView==="auto"&&u.updateSlides(),_.watchSlidesProgress&&u.updateSlidesOffset(),e){if(I.length>0&&A)if(typeof t>"u"){const j=u.slidesGrid[E],C=u.slidesGrid[E+M]-j;a?u.setTranslate(u.translate-C):(u.slideTo(E+M,0,!1,!0),i&&(u.touches[u.isHorizontal()?"startX":"startY"]+=C))}else i&&u.slideToLoop(t,0,!1,!0);else if(k.length>0&&b)if(typeof t>"u"){const j=u.slidesGrid[E],C=u.slidesGrid[E-B]-j;a?u.setTranslate(u.translate-C):(u.slideTo(E-B,0,!1,!0),i&&(u.touches[u.isHorizontal()?"startX":"startY"]+=C))}else u.slideToLoop(t,0,!1,!0)}if(u.allowSlidePrev=h,u.allowSlideNext=m,u.controller&&u.controller.control&&!o){const j={slideRealIndex:t,slideTo:!1,direction:n,setTranslate:i,activeSlideIndex:r,byController:!0};Array.isArray(u.controller.control)?u.controller.control.forEach(D=>{!D.destroyed&&D.params.loop&&D.loopFix(j)}):u.controller.control instanceof u.constructor&&u.controller.control.params.loop&&u.controller.control.loopFix(j)}u.emit("loopFix")}function tee(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];t.slides.forEach(r=>{const o=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[o]=r}),t.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{n.append(r)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}const nee={loopCreate:ZZ,loopFix:eee,loopDestroy:tee};function iee(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function ree(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}const see={setGrabCursor:iee,unsetGrabCursor:ree};function oee(t,e=this){function n(i){if(!i||i===ou()||i===Gi())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(t);return!r&&!i.getRootNode?null:r||n(i.getRootNode().host)}return n(e)}function aee(t){const e=this,n=ou(),i=Gi(),r=e.touchEventsData;r.evCache.push(t);const{params:o,touches:a,enabled:u}=e;if(!u||!o.simulateTouch&&t.pointerType==="mouse"||e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let c=t;c.originalEvent&&(c=c.originalEvent);let h=c.target;if(o.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(h)||"which"in c&&c.which===3||"button"in c&&c.button>0||r.isTouched&&r.isMoved)return;const m=!!o.noSwipingClass&&o.noSwipingClass!=="",g=t.composedPath?t.composedPath():t.path;m&&c.target&&c.target.shadowRoot&&g&&(h=g[0]);const _=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,S=!!(c.target&&c.target.shadowRoot);if(o.noSwiping&&(S?oee(_,h):h.closest(_))){e.allowClick=!0;return}if(o.swipeHandler&&!h.closest(o.swipeHandler))return;a.currentX=c.pageX,a.currentY=c.pageY;const P=a.currentX,I=a.currentY,k=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,E=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(k&&(P<=E||P>=i.innerWidth-E))if(k==="prevent")t.preventDefault();else return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=P,a.startY=I,r.touchStartTime=y_(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(r.allowThresholdMove=!1);let b=!0;h.matches(r.focusableElements)&&(b=!1,h.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==h&&n.activeElement.blur();const A=b&&e.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||A)&&!h.isContentEditable&&c.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",c)}function lee(t){const e=ou(),n=this,i=n.touchEventsData,{params:r,touches:o,rtlTranslate:a,enabled:u}=n;if(!u||!r.simulateTouch&&t.pointerType==="mouse")return;let c=t;if(c.originalEvent&&(c=c.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",c);return}const h=i.evCache.findIndex(j=>j.pointerId===c.pointerId);h>=0&&(i.evCache[h]=c);const m=i.evCache.length>1?i.evCache[0]:c,g=m.pageX,_=m.pageY;if(c.preventedByNestedSwiper){o.startX=g,o.startY=_;return}if(!n.allowTouchMove){c.target.matches(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(o,{startX:g,startY:_,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:g,currentY:_}),i.touchStartTime=y_());return}if(r.touchReleaseOnEdges&&!r.loop){if(n.isVertical()){if(_<o.startY&&n.translate<=n.maxTranslate()||_>o.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(g<o.startX&&n.translate<=n.maxTranslate()||g>o.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&c.target===e.activeElement&&c.target.matches(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}if(i.allowTouchCallbacks&&n.emit("touchMove",c),c.targetTouches&&c.targetTouches.length>1)return;o.currentX=g,o.currentY=_;const S=o.currentX-o.startX,P=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(S**2+P**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let j;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?i.isScrolling=!1:S*S+P*P>=25&&(j=Math.atan2(Math.abs(P),Math.abs(S))*180/Math.PI,i.isScrolling=n.isHorizontal()?j>r.touchAngle:90-j>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",c),typeof i.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(i.startMoving=!0),i.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&i.evCache.length>1){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation();let I=n.isHorizontal()?S:P,k=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;r.oneWayMovement&&(I=Math.abs(I)*(a?1:-1),k=Math.abs(k)*(a?1:-1)),o.diff=I,I*=r.touchRatio,a&&(I=-I,k=-k);const E=n.touchesDirection;n.swipeDirection=I>0?"prev":"next",n.touchesDirection=k>0?"prev":"next";const b=n.params.loop&&!r.cssMode;if(!i.isMoved){if(b&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const j=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(j)}i.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}let A;i.isMoved&&E!==n.touchesDirection&&b&&Math.abs(I)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),A=!0),n.emit("sliderMove",c),i.isMoved=!0,i.currentTranslate=I+i.startTranslate;let M=!0,B=r.resistanceRatio;if(r.touchReleaseOnEdges&&(B=0),I>0?(b&&!A&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(M=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+I)**B))):I<0&&(b&&!A&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(M=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-I)**B))),M&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(I)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,i.currentTranslate=i.startTranslate,o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function uee(t){const e=this,n=e.touchEventsData,i=n.evCache.findIndex(A=>A.pointerId===t.pointerId);if(i>=0&&n.evCache.splice(i,1),["pointercancel","pointerout","pointerleave"].includes(t.type)&&!(t.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:r,touches:o,rtlTranslate:a,slidesGrid:u,enabled:c}=e;if(!c||!r.simulateTouch&&t.pointerType==="mouse")return;let h=t;if(h.originalEvent&&(h=h.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",h),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&r.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}r.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const m=y_(),g=m-n.touchStartTime;if(e.allowClick){const A=h.path||h.composedPath&&h.composedPath();e.updateClickedSlide(A&&A[0]||h.target),e.emit("tap click",h),g<300&&m-n.lastClickTime<300&&e.emit("doubleTap doubleClick",h)}if(n.lastClickTime=y_(),lT(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||o.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let _;if(r.followFinger?_=a?e.translate:-e.translate:_=-n.currentTranslate,r.cssMode)return;if(r.freeMode&&r.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:_});return}let S=0,P=e.slidesSizesGrid[0];for(let A=0;A<u.length;A+=A<r.slidesPerGroupSkip?1:r.slidesPerGroup){const M=A<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;typeof u[A+M]<"u"?_>=u[A]&&_<u[A+M]&&(S=A,P=u[A+M]-u[A]):_>=u[A]&&(S=A,P=u[u.length-1]-u[u.length-2])}let I=null,k=null;r.rewind&&(e.isBeginning?k=r.virtual&&r.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(I=0));const E=(_-u[S])/P,b=S<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(g>r.longSwipesMs){if(!r.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(E>=r.longSwipesRatio?e.slideTo(r.rewind&&e.isEnd?I:S+b):e.slideTo(S)),e.swipeDirection==="prev"&&(E>1-r.longSwipesRatio?e.slideTo(S+b):k!==null&&E<0&&Math.abs(E)>r.longSwipesRatio?e.slideTo(k):e.slideTo(S))}else{if(!r.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(h.target===e.navigation.nextEl||h.target===e.navigation.prevEl)?h.target===e.navigation.nextEl?e.slideTo(S+b):e.slideTo(S):(e.swipeDirection==="next"&&e.slideTo(I!==null?I:S+b),e.swipeDirection==="prev"&&e.slideTo(k!==null?k:S))}}function KN(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:o}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const u=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!u?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=r,t.allowSlideNext=i,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}function cee(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function dee(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:i}=t;if(!i)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let r;const o=t.maxTranslate()-t.minTranslate();o===0?r=0:r=(t.translate-t.minTranslate())/o,r!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function hee(t){const e=this;cy(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let QN=!1;function fee(){}const tU=(t,e)=>{const n=ou(),{params:i,el:r,wrapperEl:o,device:a}=t,u=!!i.nested,c=e==="on"?"addEventListener":"removeEventListener",h=e;r[c]("pointerdown",t.onTouchStart,{passive:!1}),n[c]("pointermove",t.onTouchMove,{passive:!1,capture:u}),n[c]("pointerup",t.onTouchEnd,{passive:!0}),n[c]("pointercancel",t.onTouchEnd,{passive:!0}),n[c]("pointerout",t.onTouchEnd,{passive:!0}),n[c]("pointerleave",t.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[c]("click",t.onClick,!0),i.cssMode&&o[c]("scroll",t.onScroll),i.updateOnWindowResize?t[h](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",KN,!0):t[h]("observerUpdate",KN,!0),r[c]("load",t.onLoad,{capture:!0})};function pee(){const t=this,e=ou(),{params:n}=t;t.onTouchStart=aee.bind(t),t.onTouchMove=lee.bind(t),t.onTouchEnd=uee.bind(t),n.cssMode&&(t.onScroll=dee.bind(t)),t.onClick=cee.bind(t),t.onLoad=hee.bind(t),QN||(e.addEventListener("touchstart",fee),QN=!0),tU(t,"on")}function mee(){tU(this,"off")}const gee={attachEvents:pee,detachEvents:mee},YN=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function vee(){const t=this,{realIndex:e,initialized:n,params:i,el:r}=t,o=i.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const a=t.getBreakpoint(o,t.params.breakpointsBase,t.el);if(!a||t.currentBreakpoint===a)return;const c=(a in o?o[a]:void 0)||t.originalParams,h=YN(t,i),m=YN(t,c),g=i.enabled;h&&!m?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!h&&m&&(r.classList.add(`${i.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(I=>{if(typeof c[I]>"u")return;const k=i[I]&&i[I].enabled,E=c[I]&&c[I].enabled;k&&!E&&t[I].disable(),!k&&E&&t[I].enable()});const _=c.direction&&c.direction!==i.direction,S=i.loop&&(c.slidesPerView!==i.slidesPerView||_);_&&n&&t.changeDirection(),Li(t.params,c);const P=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),g&&!P?t.disable():!g&&P&&t.enable(),t.currentBreakpoint=a,t.emit("_beforeBreakpoint",c),S&&n&&(t.loopDestroy(),t.loopCreate(e),t.updateSlides()),t.emit("breakpoint",c)}function yee(t,e="window",n){if(!t||e==="container"&&!n)return;let i=!1;const r=Gi(),o=e==="window"?r.innerHeight:n.clientHeight,a=Object.keys(t).map(u=>{if(typeof u=="string"&&u.indexOf("@")===0){const c=parseFloat(u.substr(1));return{value:o*c,point:u}}return{value:u,point:u}});a.sort((u,c)=>parseInt(u.value,10)-parseInt(c.value,10));for(let u=0;u<a.length;u+=1){const{point:c,value:h}=a[u];e==="window"?r.matchMedia(`(min-width: ${h}px)`).matches&&(i=c):h<=n.clientWidth&&(i=c)}return i||"max"}const _ee={setBreakpoint:vee,getBreakpoint:yee};function wee(t,e){const n=[];return t.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&n.push(e+r)}):typeof i=="string"&&n.push(e+i)}),n}function Eee(){const t=this,{classNames:e,params:n,rtl:i,el:r,device:o}=t,a=wee(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...a),r.classList.add(...e),t.emitContainerClasses()}function Iee(){const t=this,{el:e,classNames:n}=t;e.classList.remove(...n),t.emitContainerClasses()}const Tee={addClasses:Eee,removeClasses:Iee};function See(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:i}=n;if(i){const r=t.slides.length-1,o=t.slidesGrid[r]+t.slidesSizesGrid[r]+i*2;t.isLocked=t.size>o}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}const bee={checkOverflow:See},JN={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Cee(t,e){return function(i={}){const r=Object.keys(i)[0],o=i[r];if(typeof o!="object"||o===null){Li(e,i);return}if(["navigation","pagination","scrollbar"].indexOf(r)>=0&&t[r]===!0&&(t[r]={auto:!0}),!(r in t&&"enabled"in o)){Li(e,i);return}t[r]===!0&&(t[r]={enabled:!0}),typeof t[r]=="object"&&!("enabled"in t[r])&&(t[r].enabled=!0),t[r]||(t[r]={enabled:!1}),Li(e,i)}}const aI={eventsEmitter:TZ,update:OZ,translate:BZ,transition:qZ,slide:XZ,loop:nee,grabCursor:see,events:gee,breakpoints:_ee,checkOverflow:bee,classes:Tee},lI={};let am=class Vs{constructor(...e){let n,i;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?i=e[0]:[n,i]=e,i||(i={}),i=Li({},i),n&&!i.el&&(i.el=n);const r=ou();if(i.el&&typeof i.el=="string"&&r.querySelectorAll(i.el).length>1){const c=[];return r.querySelectorAll(i.el).forEach(h=>{const m=Li({},i,{el:h});c.push(new Vs(m))}),c}const o=this;o.__swiper__=!0,o.support=Z3(),o.device=yZ({userAgent:i.userAgent}),o.browser=wZ(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],i.modules&&Array.isArray(i.modules)&&o.modules.push(...i.modules);const a={};o.modules.forEach(c=>{c({params:i,swiper:o,extendParams:Cee(i,a),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const u=Li({},JN,a);return o.params=Li({},u,lI,i),o.originalParams=Li({},o.params),o.passedParams=Li({},i),o.params&&o.params.on&&Object.keys(o.params.on).forEach(c=>{o.on(c,o.params.on[c])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:n,params:i}=this,r=ds(n,`.${i.slideClass}, swiper-slide`),o=__(r[0]);return __(e)-o}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:n,params:i}=e;e.slides=ds(n,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),a=(i.maxTranslate()-r)*e+r;i.translateTo(a,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);n.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e="current",n=!1){const i=this,{params:r,slides:o,slidesGrid:a,slidesSizesGrid:u,size:c,activeIndex:h}=i;let m=1;if(r.centeredSlides){let g=o[h]?o[h].swiperSlideSize:0,_;for(let S=h+1;S<o.length;S+=1)o[S]&&!_&&(g+=o[S].swiperSlideSize,m+=1,g>c&&(_=!0));for(let S=h-1;S>=0;S-=1)o[S]&&!_&&(g+=o[S].swiperSlideSize,m+=1,g>c&&(_=!0))}else if(e==="current")for(let g=h+1;g<o.length;g+=1)(n?a[g]+u[g]-a[h]<c:a[g]-a[h]<c)&&(m+=1);else for(let g=h-1;g>=0;g-=1)a[h]-a[g]<c&&(m+=1);return m}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&cy(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,u=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(u),e.updateActiveIndex(),e.updateSlidesClasses()}let o;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;o=e.slideTo(a.length-1,0,!1,!0)}else o=e.slideTo(e.activeIndex,0,!1,!0);o||r()}i.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n=!0){const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(o=>{e==="vertical"?o.style.width="":o.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let i=e||n.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=n,i.shadowEl&&(n.isElement=!0);const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):ds(i,r())[0];return!a&&n.params.createElements&&(a=J3("div",n.params.wrapperClass),i.append(a),ds(i,`.${n.params.slideClass}`).forEach(u=>{a.append(u)})),Object.assign(n,{el:i,wrapperEl:a,slidesEl:n.isElement?i:a,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Qo(i,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Qo(i,"direction")==="rtl"),wrongRTL:Qo(a,"display")==="-webkit-box"}),!0}init(e){const n=this;return n.initialized||n.mount(e)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents(),[...n.el.querySelectorAll('[loading="lazy"]')].forEach(r=>{r.complete?cy(n,r):r.addEventListener("load",o=>{cy(n,o.target)})}),cT(n),n.initialized=!0,cT(n),n.emit("init"),n.emit("afterInit")),n}destroy(e=!0,n=!0){const i=this,{params:r,el:o,wrapperEl:a,slides:u}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),n&&(i.removeClasses(),o.removeAttribute("style"),a.removeAttribute("style"),u&&u.length&&u.forEach(c=>{c.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(c=>{i.off(c)}),e!==!1&&(i.el.swiper=null,cZ(i)),i.destroyed=!0),null}static extendDefaults(e){Li(lI,e)}static get extendedDefaults(){return lI}static get defaults(){return JN}static installModule(e){Vs.prototype.__modules__||(Vs.prototype.__modules__=[]);const n=Vs.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Vs.installModule(n)),Vs):(Vs.installModule(e),Vs)}};Object.keys(aI).forEach(t=>{Object.keys(aI[t]).forEach(e=>{am.prototype[e]=aI[t][e]})});am.use([EZ,IZ]);function Aee(t,e,n,i){return t.params.createElements&&Object.keys(i).forEach(r=>{if(!n[r]&&n.auto===!0){let o=ds(t.el,`.${i[r]}`)[0];o||(o=J3("div",i[r]),o.className=i[r],t.el.append(o)),n[r]=o,e[r]=o}}),n}function kf(t=""){return`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Ree({swiper:t,extendParams:e,on:n,emit:i}){const r="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:E=>E,formatFractionTotal:E=>E,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),t.pagination={el:null,bullets:[]};let o,a=0;const u=E=>(Array.isArray(E)||(E=[E].filter(b=>!!b)),E);function c(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function h(E,b){const{bulletActiveClass:A}=t.params.pagination;E&&(E=E[`${b==="prev"?"previous":"next"}ElementSibling`],E&&(E.classList.add(`${A}-${b}`),E=E[`${b==="prev"?"previous":"next"}ElementSibling`],E&&E.classList.add(`${A}-${b}-${b}`)))}function m(E){const b=E.target.closest(kf(t.params.pagination.bulletClass));if(!b)return;E.preventDefault();const A=__(b)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===A)return;const M=t.getSlideIndexByData(A),B=t.getSlideIndexByData(t.realIndex);M>t.slides.length-t.loopedSlides&&t.loopFix({direction:M>B?"next":"prev",activeSlideIndex:M,slideTo:!1}),t.slideToLoop(A)}else t.slideTo(A)}function g(){const E=t.rtl,b=t.params.pagination;if(c())return;let A=t.pagination.el;A=u(A);let M,B;const j=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,D=t.params.loop?Math.ceil(j/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(B=t.previousRealIndex||0,M=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(M=t.snapIndex,B=t.previousSnapIndex):(B=t.previousIndex||0,M=t.activeIndex||0),b.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const C=t.pagination.bullets;let L,F,O;if(b.dynamicBullets&&(o=uT(C[0],t.isHorizontal()?"width":"height"),A.forEach(V=>{V.style[t.isHorizontal()?"width":"height"]=`${o*(b.dynamicMainBullets+4)}px`}),b.dynamicMainBullets>1&&B!==void 0&&(a+=M-(B||0),a>b.dynamicMainBullets-1?a=b.dynamicMainBullets-1:a<0&&(a=0)),L=Math.max(M-a,0),F=L+(Math.min(C.length,b.dynamicMainBullets)-1),O=(F+L)/2),C.forEach(V=>{const N=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(we=>`${b.bulletActiveClass}${we}`)].map(we=>typeof we=="string"&&we.includes(" ")?we.split(" "):we).flat();V.classList.remove(...N)}),A.length>1)C.forEach(V=>{const N=__(V);N===M?V.classList.add(...b.bulletActiveClass.split(" ")):t.isElement&&V.setAttribute("part","bullet"),b.dynamicBullets&&(N>=L&&N<=F&&V.classList.add(...`${b.bulletActiveClass}-main`.split(" ")),N===L&&h(V,"prev"),N===F&&h(V,"next"))});else{const V=C[M];if(V&&V.classList.add(...b.bulletActiveClass.split(" ")),t.isElement&&C.forEach((N,we)=>{N.setAttribute("part",we===M?"bullet-active":"bullet")}),b.dynamicBullets){const N=C[L],we=C[F];for(let Te=L;Te<=F;Te+=1)C[Te]&&C[Te].classList.add(...`${b.bulletActiveClass}-main`.split(" "));h(N,"prev"),h(we,"next")}}if(b.dynamicBullets){const V=Math.min(C.length,b.dynamicMainBullets+4),N=(o*V-o)/2-O*o,we=E?"right":"left";C.forEach(Te=>{Te.style[t.isHorizontal()?we:"top"]=`${N}px`})}}A.forEach((C,L)=>{if(b.type==="fraction"&&(C.querySelectorAll(kf(b.currentClass)).forEach(F=>{F.textContent=b.formatFractionCurrent(M+1)}),C.querySelectorAll(kf(b.totalClass)).forEach(F=>{F.textContent=b.formatFractionTotal(D)})),b.type==="progressbar"){let F;b.progressbarOpposite?F=t.isHorizontal()?"vertical":"horizontal":F=t.isHorizontal()?"horizontal":"vertical";const O=(M+1)/D;let V=1,N=1;F==="horizontal"?V=O:N=O,C.querySelectorAll(kf(b.progressbarFillClass)).forEach(we=>{we.style.transform=`translate3d(0,0,0) scaleX(${V}) scaleY(${N})`,we.style.transitionDuration=`${t.params.speed}ms`})}b.type==="custom"&&b.renderCustom?(C.innerHTML=b.renderCustom(t,M+1,D),L===0&&i("paginationRender",C)):(L===0&&i("paginationRender",C),i("paginationUpdate",C)),t.params.watchOverflow&&t.enabled&&C.classList[t.isLocked?"add":"remove"](b.lockClass)})}function _(){const E=t.params.pagination;if(c())return;const b=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length;let A=t.pagination.el;A=u(A);let M="";if(E.type==="bullets"){let B=t.params.loop?Math.ceil(b/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&B>b&&(B=b);for(let j=0;j<B;j+=1)E.renderBullet?M+=E.renderBullet.call(t,j,E.bulletClass):M+=`<${E.bulletElement} ${t.isElement?'part="bullet"':""} class="${E.bulletClass}"></${E.bulletElement}>`}E.type==="fraction"&&(E.renderFraction?M=E.renderFraction.call(t,E.currentClass,E.totalClass):M=`<span class="${E.currentClass}"></span> / <span class="${E.totalClass}"></span>`),E.type==="progressbar"&&(E.renderProgressbar?M=E.renderProgressbar.call(t,E.progressbarFillClass):M=`<span class="${E.progressbarFillClass}"></span>`),t.pagination.bullets=[],A.forEach(B=>{E.type!=="custom"&&(B.innerHTML=M||""),E.type==="bullets"&&t.pagination.bullets.push(...B.querySelectorAll(kf(E.bulletClass)))}),E.type!=="custom"&&i("paginationRender",A[0])}function S(){t.params.pagination=Aee(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const E=t.params.pagination;if(!E.el)return;let b;typeof E.el=="string"&&t.isElement&&(b=t.el.shadowRoot.querySelector(E.el)),!b&&typeof E.el=="string"&&(b=[...document.querySelectorAll(E.el)]),b||(b=E.el),!(!b||b.length===0)&&(t.params.uniqueNavElements&&typeof E.el=="string"&&Array.isArray(b)&&b.length>1&&(b=[...t.el.querySelectorAll(E.el)],b.length>1&&(b=b.filter(A=>X3(A,".swiper")[0]===t.el)[0])),Array.isArray(b)&&b.length===1&&(b=b[0]),Object.assign(t.pagination,{el:b}),b=u(b),b.forEach(A=>{E.type==="bullets"&&E.clickable&&A.classList.add(E.clickableClass),A.classList.add(E.modifierClass+E.type),A.classList.add(t.isHorizontal()?E.horizontalClass:E.verticalClass),E.type==="bullets"&&E.dynamicBullets&&(A.classList.add(`${E.modifierClass}${E.type}-dynamic`),a=0,E.dynamicMainBullets<1&&(E.dynamicMainBullets=1)),E.type==="progressbar"&&E.progressbarOpposite&&A.classList.add(E.progressbarOppositeClass),E.clickable&&A.addEventListener("click",m),t.enabled||A.classList.add(E.lockClass)}))}function P(){const E=t.params.pagination;if(c())return;let b=t.pagination.el;b&&(b=u(b),b.forEach(A=>{A.classList.remove(E.hiddenClass),A.classList.remove(E.modifierClass+E.type),A.classList.remove(t.isHorizontal()?E.horizontalClass:E.verticalClass),E.clickable&&A.removeEventListener("click",m)})),t.pagination.bullets&&t.pagination.bullets.forEach(A=>A.classList.remove(...E.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const E=t.params.pagination;let{el:b}=t.pagination;b=u(b),b.forEach(A=>{A.classList.remove(E.horizontalClass,E.verticalClass),A.classList.add(t.isHorizontal()?E.horizontalClass:E.verticalClass)})}),n("init",()=>{t.params.pagination.enabled===!1?k():(S(),_(),g())}),n("activeIndexChange",()=>{typeof t.snapIndex>"u"&&g()}),n("snapIndexChange",()=>{g()}),n("snapGridLengthChange",()=>{_(),g()}),n("destroy",()=>{P()}),n("enable disable",()=>{let{el:E}=t.pagination;E&&(E=u(E),E.forEach(b=>b.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),n("lock unlock",()=>{g()}),n("click",(E,b)=>{const A=b.target;let{el:M}=t.pagination;if(Array.isArray(M)||(M=[M].filter(B=>!!B)),t.params.pagination.el&&t.params.pagination.hideOnClick&&M&&M.length>0&&!A.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&A===t.navigation.nextEl||t.navigation.prevEl&&A===t.navigation.prevEl))return;const B=M[0].classList.contains(t.params.pagination.hiddenClass);i(B===!0?"paginationShow":"paginationHide"),M.forEach(j=>j.classList.toggle(t.params.pagination.hiddenClass))}});const I=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:E}=t.pagination;E&&(E=u(E),E.forEach(b=>b.classList.remove(t.params.pagination.paginationDisabledClass))),S(),_(),g()},k=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:E}=t.pagination;E&&(E=u(E),E.forEach(b=>b.classList.add(t.params.pagination.paginationDisabledClass))),P()};Object.assign(t.pagination,{enable:I,disable:k,render:_,update:g,init:S,destroy:P})}function Kl(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Yo(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof t[i]>"u"?t[i]=e[i]:Kl(e[i])&&Kl(t[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?t[i]=e[i]:Yo(t[i],e[i]):t[i]=e[i]})}function nU(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function iU(t={}){return t.pagination&&typeof t.pagination.el>"u"}function rU(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function sU(t=""){const e=t.split(" ").map(i=>i.trim()).filter(i=>!!i),n=[];return e.forEach(i=>{n.indexOf(i)<0&&n.push(i)}),n.join(" ")}function Pee(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}const oU=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function kee(t={},e=!0){const n={on:{}},i={},r={};Yo(n,am.defaults),Yo(n,am.extendedDefaults),n._emitClasses=!0,n.init=!1;const o={},a=oU.map(c=>c.replace(/_/,"")),u=Object.assign({},t);return Object.keys(u).forEach(c=>{typeof t[c]>"u"||(a.indexOf(c)>=0?Kl(t[c])?(n[c]={},r[c]={},Yo(n[c],t[c]),Yo(r[c],t[c])):(n[c]=t[c],r[c]=t[c]):c.search(/on[A-Z]/)===0&&typeof t[c]=="function"?e?i[`${c[2].toLowerCase()}${c.substr(3)}`]=t[c]:n.on[`${c[2].toLowerCase()}${c.substr(3)}`]=t[c]:o[c]=t[c])}),["navigation","pagination","scrollbar"].forEach(c=>{n[c]===!0&&(n[c]={}),n[c]===!1&&delete n[c]}),{params:n,passedParams:r,rest:o,events:i}}function xee({el:t,nextEl:e,prevEl:n,paginationEl:i,scrollbarEl:r,swiper:o},a){nU(a)&&e&&n&&(o.params.navigation.nextEl=e,o.originalParams.navigation.nextEl=e,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),iU(a)&&i&&(o.params.pagination.el=i,o.originalParams.pagination.el=i),rU(a)&&r&&(o.params.scrollbar.el=r,o.originalParams.scrollbar.el=r),o.init(t)}function Nee(t,e,n,i,r){const o=[];if(!e)return o;const a=c=>{o.indexOf(c)<0&&o.push(c)};if(n&&i){const c=i.map(r),h=n.map(r);c.join("")!==h.join("")&&a("children"),i.length!==n.length&&a("children")}return oU.filter(c=>c[0]==="_").map(c=>c.replace(/_/,"")).forEach(c=>{if(c in t&&c in e)if(Kl(t[c])&&Kl(e[c])){const h=Object.keys(t[c]),m=Object.keys(e[c]);h.length!==m.length?a(c):(h.forEach(g=>{t[c][g]!==e[c][g]&&a(c)}),m.forEach(g=>{t[c][g]!==e[c][g]&&a(c)}))}else t[c]!==e[c]&&a(c)}),o}function aU(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function lU(t){const e=[];return nn.Children.toArray(t).forEach(n=>{aU(n)?e.push(n):n.props&&n.props.children&&lU(n.props.children).forEach(i=>e.push(i))}),e}function Dee(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return nn.Children.toArray(t).forEach(i=>{if(aU(i))e.push(i);else if(i.props&&i.props.slot&&n[i.props.slot])n[i.props.slot].push(i);else if(i.props&&i.props.children){const r=lU(i.props.children);r.length>0?r.forEach(o=>e.push(o)):n["container-end"].push(i)}else n["container-end"].push(i)}),{slides:e,slots:n}}function Oee({swiper:t,slides:e,passedParams:n,changedParams:i,nextEl:r,prevEl:o,scrollbarEl:a,paginationEl:u}){const c=i.filter(C=>C!=="children"&&C!=="direction"&&C!=="wrapperClass"),{params:h,pagination:m,navigation:g,scrollbar:_,virtual:S,thumbs:P}=t;let I,k,E,b,A,M,B,j;i.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&h.thumbs&&!h.thumbs.swiper&&(I=!0),i.includes("controller")&&n.controller&&n.controller.control&&h.controller&&!h.controller.control&&(k=!0),i.includes("pagination")&&n.pagination&&(n.pagination.el||u)&&(h.pagination||h.pagination===!1)&&m&&!m.el&&(E=!0),i.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(h.scrollbar||h.scrollbar===!1)&&_&&!_.el&&(b=!0),i.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||r)&&(h.navigation||h.navigation===!1)&&g&&!g.prevEl&&!g.nextEl&&(A=!0);const D=C=>{t[C]&&(t[C].destroy(),C==="navigation"?(t.isElement&&(t[C].prevEl.remove(),t[C].nextEl.remove()),h[C].prevEl=void 0,h[C].nextEl=void 0,t[C].prevEl=void 0,t[C].nextEl=void 0):(t.isElement&&t[C].el.remove(),h[C].el=void 0,t[C].el=void 0))};i.includes("loop")&&t.isElement&&(h.loop&&!n.loop?M=!0:!h.loop&&n.loop?B=!0:j=!0),c.forEach(C=>{if(Kl(h[C])&&Kl(n[C]))Yo(h[C],n[C]),(C==="navigation"||C==="pagination"||C==="scrollbar")&&"enabled"in n[C]&&!n[C].enabled&&D(C);else{const L=n[C];(L===!0||L===!1)&&(C==="navigation"||C==="pagination"||C==="scrollbar")?L===!1&&D(C):h[C]=n[C]}}),c.includes("controller")&&!k&&t.controller&&t.controller.control&&h.controller&&h.controller.control&&(t.controller.control=h.controller.control),i.includes("children")&&e&&S&&h.virtual.enabled&&(S.slides=e,S.update(!0)),i.includes("children")&&e&&h.loop&&(j=!0),I&&P.init()&&P.update(!0),k&&(t.controller.control=h.controller.control),E&&(t.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-pagination"),t.el.shadowEl.appendChild(u)),u&&(h.pagination.el=u),m.init(),m.render(),m.update()),b&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),t.el.shadowEl.appendChild(a)),a&&(h.scrollbar.el=a),_.init(),_.updateSize(),_.setTranslate()),A&&(t.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),t.el.shadowEl.appendChild(r)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),t.el.shadowEl.appendChild(o))),r&&(h.navigation.nextEl=r),o&&(h.navigation.prevEl=o),g.init(),g.update()),i.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),i.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),i.includes("direction")&&t.changeDirection(n.direction,!1),(M||j)&&t.loopDestroy(),(B||j)&&t.loopCreate(),t.update()}function Lee(t,e,n){if(!n)return null;const i=m=>{let g=m;return m<0?g=e.length+m:g>=e.length&&(g=g-e.length),g},r=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:o,to:a}=n,u=t.params.loop?-e.length:0,c=t.params.loop?e.length*2:e.length,h=[];for(let m=u;m<c;m+=1)m>=o&&m<=a&&h.push(e[i(m)]);return h.map((m,g)=>nn.cloneElement(m,{swiper:t,style:r,key:`slide-${g}`}))}const Mee=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function hp(t,e){return typeof window>"u"?Se.useEffect(t,e):Se.useLayoutEffect(t,e)}const XN=Se.createContext(null),Vee=Se.createContext(null);function dT(){return dT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dT.apply(this,arguments)}const uU=Se.forwardRef(function(t,e){let{className:n,tag:i="div",wrapperTag:r="div",children:o,onSwiper:a,...u}=t===void 0?{}:t,c=!1;const[h,m]=Se.useState("swiper"),[g,_]=Se.useState(null),[S,P]=Se.useState(!1),I=Se.useRef(!1),k=Se.useRef(null),E=Se.useRef(null),b=Se.useRef(null),A=Se.useRef(null),M=Se.useRef(null),B=Se.useRef(null),j=Se.useRef(null),D=Se.useRef(null),{params:C,passedParams:L,rest:F,events:O}=kee(u),{slides:V,slots:N}=Dee(o),we=()=>{P(!S)};Object.assign(C.on,{_containerClasses(le,de){m(de)}});const Te=()=>{Object.assign(C.on,O),c=!0;const le={...C};if(delete le.wrapperClass,E.current=new am(le),E.current.virtual&&E.current.params.virtual.enabled){E.current.virtual.slides=V;const de={cache:!1,slides:V,renderExternal:_,renderExternalUpdate:!1};Yo(E.current.params.virtual,de),Yo(E.current.originalParams.virtual,de)}};k.current||Te(),E.current&&E.current.on("_beforeBreakpoint",we);const _e=()=>{c||!O||!E.current||Object.keys(O).forEach(le=>{E.current.on(le,O[le])})},rt=()=>{!O||!E.current||Object.keys(O).forEach(le=>{E.current.off(le,O[le])})};Se.useEffect(()=>()=>{E.current&&E.current.off("_beforeBreakpoint",we)}),Se.useEffect(()=>{!I.current&&E.current&&(E.current.emitSlidesClasses(),I.current=!0)}),hp(()=>{if(e&&(e.current=k.current),!!k.current)return E.current.destroyed&&Te(),xee({el:k.current,nextEl:M.current,prevEl:B.current,paginationEl:j.current,scrollbarEl:D.current,swiper:E.current},C),a&&a(E.current),()=>{E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}},[]),hp(()=>{_e();const le=Nee(L,b.current,V,A.current,de=>de.key);return b.current=L,A.current=V,le.length&&E.current&&!E.current.destroyed&&Oee({swiper:E.current,slides:V,passedParams:L,changedParams:le,nextEl:M.current,prevEl:B.current,scrollbarEl:D.current,paginationEl:j.current}),()=>{rt()}}),hp(()=>{Mee(E.current)},[g]);function re(){return C.virtual?Lee(E.current,V,g):V.map((le,de)=>nn.cloneElement(le,{swiper:E.current,swiperSlideIndex:de}))}return nn.createElement(i,dT({ref:k,className:sU(`${h}${n?` ${n}`:""}`)},F),nn.createElement(Vee.Provider,{value:E.current},N["container-start"],nn.createElement(r,{className:Pee(C.wrapperClass)},N["wrapper-start"],re(),N["wrapper-end"]),nU(C)&&nn.createElement(nn.Fragment,null,nn.createElement("div",{ref:B,className:"swiper-button-prev"}),nn.createElement("div",{ref:M,className:"swiper-button-next"})),rU(C)&&nn.createElement("div",{ref:D,className:"swiper-scrollbar"}),iU(C)&&nn.createElement("div",{ref:j,className:"swiper-pagination"}),N["container-end"]))});uU.displayName="Swiper";function hT(){return hT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hT.apply(this,arguments)}const cU=Se.forwardRef(function(t,e){let{tag:n="div",children:i,className:r="",swiper:o,zoom:a,lazy:u,virtualIndex:c,swiperSlideIndex:h,...m}=t===void 0?{}:t;const g=Se.useRef(null),[_,S]=Se.useState("swiper-slide"),[P,I]=Se.useState(!1);function k(M,B,j){B===g.current&&S(j)}hp(()=>{if(typeof h<"u"&&(g.current.swiperSlideIndex=h),e&&(e.current=g.current),!(!g.current||!o)){if(o.destroyed){_!=="swiper-slide"&&S("swiper-slide");return}return o.on("_slideClass",k),()=>{o&&o.off("_slideClass",k)}}}),hp(()=>{o&&g.current&&!o.destroyed&&S(o.getSlideClasses(g.current))},[o]);const E={isActive:_.indexOf("swiper-slide-active")>=0,isVisible:_.indexOf("swiper-slide-visible")>=0,isPrev:_.indexOf("swiper-slide-prev")>=0,isNext:_.indexOf("swiper-slide-next")>=0},b=()=>typeof i=="function"?i(E):i,A=()=>{I(!0)};return nn.createElement(n,hT({ref:g,className:sU(`${_}${r?` ${r}`:""}`),"data-swiper-slide-index":c,onLoad:A},m),a&&nn.createElement(XN.Provider,{value:E},nn.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},b(),u&&!P&&nn.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&nn.createElement(XN.Provider,{value:E},b(),u&&!P&&nn.createElement("div",{className:"swiper-lazy-preloader"})))});cU.displayName="SwiperSlide";const Fee=()=>{const[t,e]=Se.useState(null),[n,i]=Se.useState(0),[r,o]=Se.useState(!0),a=Se.useRef(null);return Se.useEffect(()=>{const u=ZM(oZ),c=Nw.currentUser;if(c){const h=c.uid,m=v1(u,`users/${h}/pokemon`);(()=>{e$(m,async _=>{const S=_.val();if(console.log(S,"display item"),S){const P=Object.values(S),I=await Promise.all(P.map(k=>Vq(k)));i(P.length),e(I)}else e([]);o(!1)})})()}return()=>{c&&t$(v1(u,`users/${c.uid}/pokemon`))}},[]),r?he.jsx("div",{className:"spinner"}):!r&&t&&t.length===0?he.jsx("div",{children:he.jsx("p",{children:"No Pokémons yet"})}):he.jsx(he.Fragment,{children:he.jsx(uU,{modules:[Ree],ref:a,spaceBetween:50,slidesPerView:1,initialSlide:n||0,onSlideChange:()=>console.log("slide change"),onSwiper:u=>console.log(u),loop:!0,pagination:{type:"fraction"},children:t&&t.map((u,c)=>he.jsx("li",{children:he.jsx(cU,{className:"col-md-4 mb-4 blur",children:he.jsx(lZ,{hp:u.stats[0].base_stat,imgSrc:u.sprites.front_default,pokeName:u.name,statAttack:u.stats[1].base_stat,statDefense:u.stats[2].base_stat,statSpeed:u.stats[5].base_stat,types:u.types})},c)},c))})})},Uee=({handleFetchPokemon:t})=>{const[e,n]=Se.useState(""),i=Se.useRef([]),r=["🍒","🍒","🍒","🍒","🍒"];Se.useEffect(()=>{o()},[]);const o=(h=!0,m=1,g=1)=>{var P;const _=document.querySelectorAll(".door");i.current=Array.from(_);const S=[];n("");for(const I of i.current){if(h)I.dataset.spinned="0";else if(I.dataset.spinned==="1")return;const k=I.querySelector(".boxes");if(!k)continue;const E=k.cloneNode(!1),b=["❓"];if(!h){const M=[];for(let B=0;B<(m>0?m:1);B++)M.push(...r);b.push(...u(M)),E.addEventListener("transitionstart",function(){I.dataset.spinned="1",this.querySelectorAll(".box").forEach(B=>{B.style.filter="blur(1px)"})},{once:!0}),E.addEventListener("transitionend",function(){this.querySelectorAll(".box").forEach((B,j)=>{B.style.filter="blur(0)",j>0&&this.removeChild(B)})},{once:!0})}for(let M=b.length-1;M>=0;M--){const B=document.createElement("div");B.classList.add("box"),B.style.width=I.clientWidth+"px",B.style.height=I.clientHeight+"px",B.textContent=b[M],E.appendChild(B)}E.style.transitionDuration=`${g>0?g:1}s`,E.style.transform=`translateY(-${I.clientHeight*(b.length-1)}px)`,I.replaceChild(E,k);const A=((P=I.querySelector("div.box"))==null?void 0:P.innerHTML)??"";S.push(A),!h&&S.length===3&&(console.log(S,"arr"),S.every((M,B,j)=>M===j[0]&&M!=="❓")?(c(1600,()=>n("You Won!")),c(2400,t)):c(1400,()=>n("Try Again!")))}};async function a(){o(!1,1,1);for(const h of i.current){const m=h.querySelector(".boxes");if(!m)continue;const g=parseInt(getComputedStyle(m).transitionDuration);m.style.transform="translateY(0)",await new Promise(_=>setTimeout(_,g*100))}}const u=([...h])=>{let m=h.length;for(;m;){const g=Math.floor(Math.random()*m--);[h[m],h[g]]=[h[g],h[m]]}return h},c=(h,m)=>setTimeout(()=>{m()},h);return he.jsxs("div",{id:"slot-machine",children:[he.jsxs("div",{className:"doors",children:[he.jsx("div",{className:"door",ref:h=>h&&(i.current[0]=h),children:he.jsx("div",{className:"boxes"})}),he.jsx("div",{className:"door",ref:h=>h&&(i.current[1]=h),children:he.jsx("div",{className:"boxes"})}),he.jsx("div",{className:"door",ref:h=>h&&(i.current[2]=h),children:he.jsx("div",{className:"boxes"})})]}),e&&he.jsx("h2",{className:"msg",children:e}),he.jsxs("div",{className:"buttons",children:[he.jsx("button",{id:"spinner",onClick:a,children:"Play"}),he.jsx("button",{id:"reseter",onClick:()=>o(),children:"Reset"})]})]})},Bee=()=>{const[t,e]=Se.useState(!0),[n,i]=Se.useState(!1),r=()=>{e(!t)},o=async()=>{i(!0);try{const a=Nw.currentUser;if(a){const u=await TV(),c=a.uid,h=ZM(),m=v1(h,`users/${c}/pokemon`);await J7(m,u.id)}}catch(a){console.error("Error fetching Pokémon:",a)}finally{i(!1),e(!0)}};return he.jsxs("div",{children:[he.jsx(aT,{onClick:r,text:t?"Play to get a new card":"Go to my Collection",className:"my-cards"}),t?he.jsx("div",{className:"card-container",children:he.jsx(Fee,{})}):he.jsx("div",{children:n?he.jsx("div",{className:"spinner"}):he.jsx(Uee,{handleFetchPokemon:o})})]})},jee=()=>he.jsxs("div",{className:"container",children:[he.jsx("h1",{children:"Pokeslot"}),he.jsx(Bee,{})]});var dU={exports:{}};(function(t){(function(){var e=window.CustomEvent;(!e||typeof e=="object")&&(e=function(k,E){E=E||{};var b=document.createEvent("CustomEvent");return b.initCustomEvent(k,!!E.bubbles,!!E.cancelable,E.detail||null),b},e.prototype=window.Event.prototype);function n(I){for(;I&&I!==document.body;){var k=window.getComputedStyle(I),E=function(b,A){return!(k[b]===void 0||k[b]===A)};if(k.opacity<1||E("zIndex","auto")||E("transform","none")||E("mixBlendMode","normal")||E("filter","none")||E("perspective","none")||k.isolation==="isolate"||k.position==="fixed"||k.webkitOverflowScrolling==="touch")return!0;I=I.parentElement}return!1}function i(I){for(;I;){if(I.localName==="dialog")return I;I=I.parentElement}return null}function r(I){I&&I.blur&&I!==document.body&&I.blur()}function o(I,k){for(var E=0;E<I.length;++E)if(I[E]===k)return!0;return!1}function a(I){return!I||!I.hasAttribute("method")?!1:I.getAttribute("method").toLowerCase()==="dialog"}function u(I){if(this.dialog_=I,this.replacedStyleTop_=!1,this.openAsModal_=!1,I.hasAttribute("role")||I.setAttribute("role","dialog"),I.show=this.show.bind(this),I.showModal=this.showModal.bind(this),I.close=this.close.bind(this),"returnValue"in I||(I.returnValue=""),"MutationObserver"in window){var k=new MutationObserver(this.maybeHideModal.bind(this));k.observe(I,{attributes:!0,attributeFilter:["open"]})}else{var E=!1,b=(function(){E?this.downgradeModal():this.maybeHideModal(),E=!1}).bind(this),A,M=function(B){if(B.target===I){var j="DOMNodeRemoved";E|=B.type.substr(0,j.length)===j,window.clearTimeout(A),A=window.setTimeout(b,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(B){I.addEventListener(B,M)})}Object.defineProperty(I,"open",{set:this.setOpen.bind(this),get:I.hasAttribute.bind(I,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}u.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),c.dm.removeDialog(this))},setOpen:function(I){I?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(I){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var k=document.createElement("div");this.dialog_.insertBefore(k,this.dialog_.firstChild),k.tabIndex=-1,k.focus(),this.dialog_.removeChild(k)}var E=document.createEvent("MouseEvents");E.initMouseEvent(I.type,I.bubbles,I.cancelable,window,I.detail,I.screenX,I.screenY,I.clientX,I.clientY,I.ctrlKey,I.altKey,I.shiftKey,I.metaKey,I.button,I.relatedTarget),this.dialog_.dispatchEvent(E),I.stopPropagation()},focus_:function(){var I=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!I&&this.dialog_.tabIndex>=0&&(I=this.dialog_),!I){var k=["button","input","keygen","select","textarea"],E=k.map(function(b){return b+":not([disabled])"});E.push('[tabindex]:not([disabled]):not([tabindex=""])'),I=this.dialog_.querySelector(E.join(", "))}r(document.activeElement),I&&I.focus()},updateZIndex:function(I,k){if(I<k)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=I,this.backdrop_.style.zIndex=k},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!c.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");n(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,c.needsCentering(this.dialog_)?(c.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(I){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),I!==void 0&&(this.dialog_.returnValue=I);var k=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(k)}};var c={};if(c.reposition=function(I){var k=document.body.scrollTop||document.documentElement.scrollTop,E=k+(window.innerHeight-I.offsetHeight)/2;I.style.top=Math.max(k,E)+"px"},c.isInlinePositionSetByStylesheet=function(I){for(var k=0;k<document.styleSheets.length;++k){var E=document.styleSheets[k],b=null;try{b=E.cssRules}catch{}if(b)for(var A=0;A<b.length;++A){var M=b[A],B=null;try{B=document.querySelectorAll(M.selectorText)}catch{}if(!(!B||!o(B,I))){var j=M.style.getPropertyValue("top"),D=M.style.getPropertyValue("bottom");if(j&&j!=="auto"||D&&D!=="auto")return!0}}}return!1},c.needsCentering=function(I){var k=window.getComputedStyle(I);return k.position!=="absolute"||I.style.top!=="auto"&&I.style.top!==""||I.style.bottom!=="auto"&&I.style.bottom!==""?!1:!c.isInlinePositionSetByStylesheet(I)},c.forceRegisterDialog=function(I){if((window.HTMLDialogElement||I.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",I),I.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new u(I)},c.registerDialog=function(I){I.showModal||c.forceRegisterDialog(I)},c.DialogManager=function(){this.pendingDialogStack=[];var I=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",(function(k){this.forwardTab_=void 0,k.stopPropagation(),I([])}).bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(k){var E=[];k.forEach(function(b){for(var A=0,M;M=b.removedNodes[A];++A){if(M instanceof Element)M.localName==="dialog"&&E.push(M);else continue;E=E.concat(M.querySelectorAll("dialog"))}}),E.length&&I(E)}))},c.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},c.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},c.DialogManager.prototype.updateStacking=function(){for(var I=this.zIndexHigh_,k=0,E;E=this.pendingDialogStack[k];++k)E.updateZIndex(--I,--I),k===0&&(this.overlay.style.zIndex=--I);var b=this.pendingDialogStack[0];if(b){var A=b.dialog.parentNode||document.body;A.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},c.DialogManager.prototype.containedByTopDialog_=function(I){for(;I=i(I);){for(var k=0,E;E=this.pendingDialogStack[k];++k)if(E.dialog===I)return k===0;I=I.parentElement}return!1},c.DialogManager.prototype.handleFocus_=function(I){if(!this.containedByTopDialog_(I.target)&&(I.preventDefault(),I.stopPropagation(),r(I.target),this.forwardTab_!==void 0)){var k=this.pendingDialogStack[0],E=k.dialog,b=E.compareDocumentPosition(I.target);return b&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?k.focus_():document.documentElement.focus()),!1}},c.DialogManager.prototype.handleKey_=function(I){if(this.forwardTab_=void 0,I.keyCode===27){I.preventDefault(),I.stopPropagation();var k=new e("cancel",{bubbles:!1,cancelable:!0}),E=this.pendingDialogStack[0];E&&E.dialog.dispatchEvent(k)&&E.dialog.close()}else I.keyCode===9&&(this.forwardTab_=!I.shiftKey)},c.DialogManager.prototype.checkDOM_=function(I){var k=this.pendingDialogStack.slice();k.forEach(function(E){I.indexOf(E.dialog)!==-1?E.downgradeModal():E.maybeHideModal()})},c.DialogManager.prototype.pushDialog=function(I){var k=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=k?!1:(this.pendingDialogStack.unshift(I)===1&&this.blockDocument(),this.updateStacking(),!0)},c.DialogManager.prototype.removeDialog=function(I){var k=this.pendingDialogStack.indexOf(I);k!==-1&&(this.pendingDialogStack.splice(k,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())},c.dm=new c.DialogManager,c.formSubmitter=null,c.useValue=null,window.HTMLDialogElement===void 0){var h=document.createElement("form");if(h.setAttribute("method","dialog"),h.method!=="dialog"){var m=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(m){var g=m.get;m.get=function(){return a(this)?"dialog":g.call(this)};var _=m.set;m.set=function(I){return typeof I=="string"&&I.toLowerCase()==="dialog"?this.setAttribute("method",I):_.call(this,I)},Object.defineProperty(HTMLFormElement.prototype,"method",m)}}document.addEventListener("click",function(I){if(c.formSubmitter=null,c.useValue=null,!I.defaultPrevented){var k=I.target;if(!(!k||!a(k.form))){var E=k.type==="submit"&&["button","input"].indexOf(k.localName)>-1;if(!E){if(!(k.localName==="input"&&k.type==="image"))return;c.useValue=I.offsetX+","+I.offsetY}var b=i(k);b&&(c.formSubmitter=k)}}},!1);var S=HTMLFormElement.prototype.submit,P=function(){if(!a(this))return S.call(this);var I=i(this);I&&I.close()};HTMLFormElement.prototype.submit=P,document.addEventListener("submit",function(I){var k=I.target;if(a(k)){I.preventDefault();var E=i(k);if(E){var b=c.formSubmitter;b&&b.form===k?E.close(c.useValue||b.value):E.close(),c.formSubmitter=null}}},!0)}c.forceRegisterDialog=c.forceRegisterDialog,c.registerDialog=c.registerDialog,typeof t.exports=="object"?t.exports=c:window.dialogPolyfill=c})()})(dU);var zee=dU.exports;const $ee=ZN(zee);/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};xt=function(){var t=[],e=[],n="mdlComponentConfigInternal_";function i(I,k){for(var E=0;E<t.length;E++)if(t[E].className===I)return typeof k<"u"&&(t[E]=k),t[E];return!1}function r(I){var k=I.getAttribute("data-upgraded");return k===null?[""]:k.split(",")}function o(I,k){var E=r(I);return E.indexOf(k)!==-1}function a(I,k,E){if("CustomEvent"in window&&typeof window.CustomEvent=="function")return new CustomEvent(I,{bubbles:k,cancelable:E});var b=document.createEvent("Events");return b.initEvent(I,k,E),b}function u(I,k){if(typeof I>"u"&&typeof k>"u")for(var E=0;E<t.length;E++)u(t[E].className,t[E].cssClass);else{var b=I;if(typeof k>"u"){var A=i(b);A&&(k=A.cssClass)}for(var M=document.querySelectorAll("."+k),B=0;B<M.length;B++)c(M[B],b)}}function c(I,k){if(!(typeof I=="object"&&I instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var E=a("mdl-componentupgrading",!0,!0);if(I.dispatchEvent(E),!E.defaultPrevented){var b=r(I),A=[];if(k)o(I,k)||A.push(i(k));else{var M=I.classList;t.forEach(function(V){M.contains(V.cssClass)&&A.indexOf(V)===-1&&!o(I,V.className)&&A.push(V)})}for(var B=0,j=A.length,D;B<j;B++){if(D=A[B],D){b.push(D.className),I.setAttribute("data-upgraded",b.join(","));var C=new D.classConstructor(I);C[n]=D,e.push(C);for(var L=0,F=D.callbacks.length;L<F;L++)D.callbacks[L](I);D.widget&&(I[D.className]=C)}else throw new Error("Unable to find a registered component for the given class.");var O=a("mdl-componentupgraded",!0,!1);I.dispatchEvent(O)}}}function h(I){Array.isArray(I)||(I instanceof Element?I=[I]:I=Array.prototype.slice.call(I));for(var k=0,E=I.length,b;k<E;k++)b=I[k],b instanceof HTMLElement&&(c(b),b.children.length>0&&h(b.children))}function m(I){var k=typeof I.widget>"u"&&typeof I.widget>"u",E=!0;k||(E=I.widget||I.widget);var b={classConstructor:I.constructor||I.constructor,className:I.classAsString||I.classAsString,cssClass:I.cssClass||I.cssClass,widget:E,callbacks:[]};if(t.forEach(function(M){if(M.cssClass===b.cssClass)throw new Error("The provided cssClass has already been registered: "+M.cssClass);if(M.className===b.className)throw new Error("The provided className has already been registered")}),I.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have "+n+" defined as a property.");var A=i(I.classAsString,b);A||t.push(b)}function g(I,k){var E=i(I);E&&E.callbacks.push(k)}function _(){for(var I=0;I<t.length;I++)u(t[I].className)}function S(I){if(I){var k=e.indexOf(I);e.splice(k,1);var E=I.element_.getAttribute("data-upgraded").split(","),b=E.indexOf(I[n].classAsString);E.splice(b,1),I.element_.setAttribute("data-upgraded",E.join(","));var A=a("mdl-componentdowngraded",!0,!1);I.element_.dispatchEvent(A)}}function P(I){var k=function(b){e.filter(function(A){return A.element_===b}).forEach(S)};if(I instanceof Array||I instanceof NodeList)for(var E=0;E<I.length;E++)k(I[E]);else if(I instanceof Node)k(I);else throw new Error("Invalid argument provided to downgrade MDL nodes.")}return{upgradeDom:u,upgradeElement:c,upgradeElements:h,upgradeAllRegistered:_,registerUpgradedCallback:g,register:m,downgradeElements:P}}();xt.ComponentConfigPublic;xt.ComponentConfig;xt.Component;xt.upgradeDom=xt.upgradeDom;xt.upgradeElement=xt.upgradeElement;xt.upgradeElements=xt.upgradeElements;xt.upgradeAllRegistered=xt.upgradeAllRegistered;xt.registerUpgradedCallback=xt.registerUpgradedCallback;xt.register=xt.register;xt.downgradeElements=xt.downgradeElements;window.componentHandler=xt;window.componentHandler=xt;window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),xt.upgradeAllRegistered()):(xt.upgradeElement=function(){},xt.register=function(){})});/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialButton=t,t.prototype.Constant_={},t.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},t.prototype.blurHandler_=function(e){e&&this.element_.blur()},t.prototype.disable=function(){this.element_.disabled=!0},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.element_.disabled=!1},t.prototype.enable=t.prototype.enable,t.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:t,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialProgress=t,t.prototype.Constant_={},t.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},t.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},t.prototype.setProgress=t.prototype.setProgress,t.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},t.prototype.setBuffer=t.prototype.setBuffer,t.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.init()};window.MaterialSpinner=t,t.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},t.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},t.prototype.createLayer=function(e){var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),n.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),o.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[i,r,o],u=0;u<a.length;u++){var c=document.createElement("div");c.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[u].appendChild(c)}n.appendChild(i),n.appendChild(r),n.appendChild(o),this.element_.appendChild(n)},t.prototype.createLayer=t.prototype.createLayer,t.prototype.stop=function(){this.element_.classList.remove("is-active")},t.prototype.stop=t.prototype.stop,t.prototype.start=function(){this.element_.classList.add("is-active")},t.prototype.start=t.prototype.start,t.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var t=function(n){this.element_=n,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=t,t.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},t.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},t.prototype.onKeyDown_=function(e){var n=e.target.value.split(`
`).length;e.keyCode===13&&n>=this.maxRows&&e.preventDefault()},t.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},t.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.onReset_=function(e){this.updateClasses_()},t.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},t.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},t.prototype.checkDisabled=t.prototype.checkDisabled,t.prototype.checkFocus=function(){this.element_.querySelector(":focus")?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.checkFocus=t.prototype.checkFocus,t.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},t.prototype.checkValidity=t.prototype.checkValidity,t.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},t.prototype.checkDirty=t.prototype.checkDirty,t.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},t.prototype.enable=t.prototype.enable,t.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},t.prototype.change=t.prototype.change,t.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:t,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})})();(function(){(function(){var t,e=typeof Object.create=="function"?Object.create:function(s){function l(){}return l.prototype=s,new l},n;if(typeof Object.setPrototypeOf=="function")n=Object.setPrototypeOf;else{var i;e:{var r={xb:!0},o={};try{o.__proto__=r,i=o.xb;break e}catch{}i=!1}n=i?function(s,l){if(s.__proto__=l,s.__proto__!==l)throw new TypeError(s+" is not extensible");return s}:null}var a=n;function u(s,l){if(s.prototype=e(l.prototype),s.prototype.constructor=s,a)a(s,l);else for(var d in l)if(d!="prototype")if(Object.defineProperties){var p=Object.getOwnPropertyDescriptor(l,d);p&&Object.defineProperty(s,d,p)}else s[d]=l[d];s.K=l.prototype}var c=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,l,d){s!=Array.prototype&&s!=Object.prototype&&(s[l]=d.value)},h=typeof window<"u"&&window===this?this:typeof global<"u"&&global!=null?global:this;function m(s,l){if(l){var d=h;s=s.split(".");for(var p=0;p<s.length-1;p++){var v=s[p];v in d||(d[v]={}),d=d[v]}s=s[s.length-1],p=d[s],l=l(p),l!=p&&l!=null&&c(d,s,{configurable:!0,writable:!0,value:l})}}m("Object.is",function(s){return s||function(l,d){return l===d?l!==0||1/l===1/d:l!==l&&d!==d}}),m("Array.prototype.includes",function(s){return s||function(l,d){var p=this;p instanceof String&&(p=String(p));var v=p.length;for(d=d||0,0>d&&(d=Math.max(d+v,0));d<v;d++){var y=p[d];if(y===l||Object.is(y,l))return!0}return!1}});var g=this;function _(s){return s!==void 0}function S(s){return typeof s=="string"}var P=/^[\w+/_-]+[=]{0,2}$/,I=null;function k(){}function E(s){s.W=void 0,s.Xa=function(){return s.W?s.W:s.W=new s}}function b(s){var l=typeof s;if(l=="object")if(s){if(s instanceof Array)return"array";if(s instanceof Object)return l;var d=Object.prototype.toString.call(s);if(d=="[object Window]")return"object";if(d=="[object Array]"||typeof s.length=="number"&&typeof s.splice<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("splice"))return"array";if(d=="[object Function]"||typeof s.call<"u"&&typeof s.propertyIsEnumerable<"u"&&!s.propertyIsEnumerable("call"))return"function"}else return"null";else if(l=="function"&&typeof s.call>"u")return"object";return l}function A(s){return b(s)=="array"}function M(s){var l=b(s);return l=="array"||l=="object"&&typeof s.length=="number"}function B(s){return b(s)=="function"}function j(s){var l=typeof s;return l=="object"&&s!=null||l=="function"}var D="closure_uid_"+(1e9*Math.random()>>>0),C=0;function L(s,l,d){return s.call.apply(s.bind,arguments)}function F(s,l,d){if(!s)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var v=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(v,p),s.apply(l,v)}}return function(){return s.apply(l,arguments)}}function O(s,l,d){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?O=L:O=F,O.apply(null,arguments)}function V(s,l){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),s.apply(this,p)}}function N(s,l){for(var d in l)s[d]=l[d]}var we=Date.now||function(){return+new Date};function Te(s,l){s=s.split(".");var d=g;s[0]in d||typeof d.execScript>"u"||d.execScript("var "+s[0]);for(var p;s.length&&(p=s.shift());)!s.length&&_(l)?d[p]=l:d[p]&&d[p]!==Object.prototype[p]?d=d[p]:d=d[p]={}}function _e(s,l){function d(){}d.prototype=l.prototype,s.K=l.prototype,s.prototype=new d,s.prototype.constructor=s,s.vc=function(p,v,y){for(var R=Array(arguments.length-2),U=2;U<arguments.length;U++)R[U-2]=arguments[U];return l.prototype[v].apply(p,R)}}function rt(s){if(Error.captureStackTrace)Error.captureStackTrace(this,rt);else{var l=Error().stack;l&&(this.stack=l)}s&&(this.message=String(s))}_e(rt,Error),rt.prototype.name="CustomError";var re;function le(s,l){s=s.split("%s");for(var d="",p=s.length-1,v=0;v<p;v++)d+=s[v]+(v<l.length?l[v]:"%s");rt.call(this,d+s[p])}_e(le,rt),le.prototype.name="AssertionError";function de(s,l){throw new le("Failure"+(s?": "+s:""),Array.prototype.slice.call(arguments,1))}var Xe=Array.prototype.indexOf?function(s,l){return Array.prototype.indexOf.call(s,l,void 0)}:function(s,l){if(S(s))return S(l)&&l.length==1?s.indexOf(l,0):-1;for(var d=0;d<s.length;d++)if(d in s&&s[d]===l)return d;return-1},je=Array.prototype.forEach?function(s,l,d){Array.prototype.forEach.call(s,l,d)}:function(s,l,d){for(var p=s.length,v=S(s)?s.split(""):s,y=0;y<p;y++)y in v&&l.call(d,v[y],y,s)};function ct(s,l){for(var d=S(s)?s.split(""):s,p=s.length-1;0<=p;--p)p in d&&l.call(void 0,d[p],p,s)}var ar=Array.prototype.filter?function(s,l){return Array.prototype.filter.call(s,l,void 0)}:function(s,l){for(var d=s.length,p=[],v=0,y=S(s)?s.split(""):s,R=0;R<d;R++)if(R in y){var U=y[R];l.call(void 0,U,R,s)&&(p[v++]=U)}return p},lr=Array.prototype.map?function(s,l){return Array.prototype.map.call(s,l,void 0)}:function(s,l){for(var d=s.length,p=Array(d),v=S(s)?s.split(""):s,y=0;y<d;y++)y in v&&(p[y]=l.call(void 0,v[y],y,s));return p},ur=Array.prototype.some?function(s,l){return Array.prototype.some.call(s,l,void 0)}:function(s,l){for(var d=s.length,p=S(s)?s.split(""):s,v=0;v<d;v++)if(v in p&&l.call(void 0,p[v],v,s))return!0;return!1};function Dt(s,l){return 0<=Xe(s,l)}function Bm(s,l){l=Xe(s,l);var d;return(d=0<=l)&&au(s,l),d}function au(s,l){return Array.prototype.splice.call(s,l,1).length==1}function lu(s,l){e:{for(var d=s.length,p=S(s)?s.split(""):s,v=0;v<d;v++)if(v in p&&l.call(void 0,p[v],v,s)){l=v;break e}l=-1}0<=l&&au(s,l)}function uu(s,l){var d=0;ct(s,function(p,v){l.call(void 0,p,v,s)&&au(s,v)&&d++})}function cu(s){return Array.prototype.concat.apply([],arguments)}function du(s){var l=s.length;if(0<l){for(var d=Array(l),p=0;p<l;p++)d[p]=s[p];return d}return[]}function Hd(s,l,d){return 2>=arguments.length?Array.prototype.slice.call(s,l):Array.prototype.slice.call(s,l,d)}var Pn=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]},jm=/&/g,Dw=/</g,Ow=/>/g,zm=/"/g,Kd=/'/g,$m=/\x00/g,Lw=/[\x00&<>"']/;function xa(s,l){return s<l?-1:s>l?1:0}function Br(s){return Lw.test(s)&&(s.indexOf("&")!=-1&&(s=s.replace(jm,"&amp;")),s.indexOf("<")!=-1&&(s=s.replace(Dw,"&lt;")),s.indexOf(">")!=-1&&(s=s.replace(Ow,"&gt;")),s.indexOf('"')!=-1&&(s=s.replace(zm,"&quot;")),s.indexOf("'")!=-1&&(s=s.replace(Kd,"&#39;")),s.indexOf("\0")!=-1&&(s=s.replace($m,"&#0;"))),s}function Qd(s,l,d){for(var p in s)l.call(d,s[p],p,s)}function Yt(s){var l={},d;for(d in s)l[d]=s[d];return l}var pn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _s(s,l){for(var d,p,v=1;v<arguments.length;v++){p=arguments[v];for(d in p)s[d]=p[d];for(var y=0;y<pn.length;y++)d=pn[y],Object.prototype.hasOwnProperty.call(p,d)&&(s[d]=p[d])}}var ws="StopIteration"in g?g.StopIteration:{message:"StopIteration",stack:""};function jr(){}jr.prototype.next=function(){throw ws},jr.prototype.ha=function(){return this};function qm(s){if(s instanceof jr)return s;if(typeof s.ha=="function")return s.ha(!1);if(M(s)){var l=0,d=new jr;return d.next=function(){for(;;){if(l>=s.length)throw ws;if(l in s)return s[l++];l++}},d}throw Error("Not implemented")}function Na(s,l){if(M(s))try{je(s,l,void 0)}catch(d){if(d!==ws)throw d}else{s=qm(s);try{for(;;)l.call(void 0,s.next(),void 0,s)}catch(d){if(d!==ws)throw d}}}function Gm(s){if(M(s))return du(s);s=qm(s);var l=[];return Na(s,function(d){l.push(d)}),l}function Da(s,l){this.g={},this.a=[],this.j=this.h=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var p=0;p<d;p+=2)this.set(arguments[p],arguments[p+1])}else if(s)if(s instanceof Da)for(d=s.ja(),p=0;p<d.length;p++)this.set(d[p],s.get(d[p]));else for(p in s)this.set(p,s[p])}t=Da.prototype,t.la=function(){fo(this);for(var s=[],l=0;l<this.a.length;l++)s.push(this.g[this.a[l]]);return s},t.ja=function(){return fo(this),this.a.concat()},t.clear=function(){this.g={},this.j=this.h=this.a.length=0};function fo(s){if(s.h!=s.a.length){for(var l=0,d=0;l<s.a.length;){var p=s.a[l];Es(s.g,p)&&(s.a[d++]=p),l++}s.a.length=d}if(s.h!=s.a.length){var v={};for(d=l=0;l<s.a.length;)p=s.a[l],Es(v,p)||(s.a[d++]=p,v[p]=1),l++;s.a.length=d}}t.get=function(s,l){return Es(this.g,s)?this.g[s]:l},t.set=function(s,l){Es(this.g,s)||(this.h++,this.a.push(s),this.j++),this.g[s]=l},t.forEach=function(s,l){for(var d=this.ja(),p=0;p<d.length;p++){var v=d[p],y=this.get(v);s.call(l,y,v,this)}},t.ha=function(s){fo(this);var l=0,d=this.j,p=this,v=new jr;return v.next=function(){if(d!=p.j)throw Error("The map has changed since the iterator was created");if(l>=p.a.length)throw ws;var y=p.a[l++];return s?y:p.g[y]},v};function Es(s,l){return Object.prototype.hasOwnProperty.call(s,l)}var Mw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Yd(s,l){if(s){s=s.split("&");for(var d=0;d<s.length;d++){var p=s[d].indexOf("="),v=null;if(0<=p){var y=s[d].substring(0,p);v=s[d].substring(p+1)}else y=s[d];l(y,v?decodeURIComponent(v.replace(/\+/g," ")):"")}}}function Jd(s,l,d,p){for(var v=d.length;0<=(l=s.indexOf(d,l))&&l<p;){var y=s.charCodeAt(l-1);if((y==38||y==63)&&(y=s.charCodeAt(l+v),!y||y==61||y==38||y==35))return l;l+=v+1}return-1}var Xd=/#|$/;function zr(s,l){var d=s.search(Xd),p=Jd(s,0,l,d);if(0>p)return null;var v=s.indexOf("&",p);return(0>v||v>d)&&(v=d),p+=l.length+1,decodeURIComponent(s.substr(p,v-p).replace(/\+/g," "))}var Zd=/[?&]($|#)/;function Wi(s,l){this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1;var d;s instanceof Wi?(this.i=_(l)?l:s.i,cr(this,s.j),this.A=s.A,this.h=s.h,hu(this,s.C),this.g=s.g,po(this,th(s.a)),this.s=s.s):s&&(d=String(s).match(Mw))?(this.i=!!l,cr(this,d[1]||"",!0),this.A=dr(d[2]||""),this.h=dr(d[3]||"",!0),hu(this,d[4]),this.g=dr(d[5]||"",!0),po(this,d[6]||"",!0),this.s=dr(d[7]||"")):(this.i=!!l,this.a=new Hi(null,this.i))}Wi.prototype.toString=function(){var s=[],l=this.j;l&&s.push(mo(l,eh,!0),":");var d=this.h;return(d||l=="file")&&(s.push("//"),(l=this.A)&&s.push(mo(l,eh,!0),"@"),s.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.C,d!=null&&s.push(":",String(d))),(d=this.g)&&(this.h&&d.charAt(0)!="/"&&s.push("/"),s.push(mo(d,d.charAt(0)=="/"?La:Oa,!0))),(d=this.a.toString())&&s.push("?",d),(d=this.s)&&s.push("#",mo(d,Fw)),s.join("")};function cr(s,l,d){s.j=d?dr(l,!0):l,s.j&&(s.j=s.j.replace(/:$/,""))}function hu(s,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);s.C=l}else s.C=null}function po(s,l,d){l instanceof Hi?(s.a=l,pu(s.a,s.i)):(d||(l=mo(l,Vw)),s.a=new Hi(l,s.i))}function fu(s){return s instanceof Wi?new Wi(s):new Wi(s,void 0)}function dr(s,l){return s?l?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function mo(s,l,d){return S(s)?(s=encodeURI(s).replace(l,kn),d&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function kn(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var eh=/[#\/\?@]/g,Oa=/[#\?:]/g,La=/[#\?]/g,Vw=/[#\?@]/g,Fw=/#/g;function Hi(s,l){this.g=this.a=null,this.h=s||null,this.j=!!l}function $r(s){s.a||(s.a=new Da,s.g=0,s.h&&Yd(s.h,function(l,d){s.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}t=Hi.prototype,t.add=function(s,l){$r(this),this.h=null,s=qr(this,s);var d=this.a.get(s);return d||this.a.set(s,d=[]),d.push(l),this.g+=1,this};function Is(s,l){$r(s),l=qr(s,l),Es(s.a.g,l)&&(s.h=null,s.g-=s.a.get(l).length,s=s.a,Es(s.g,l)&&(delete s.g[l],s.h--,s.j++,s.a.length>2*s.h&&fo(s)))}t.clear=function(){this.a=this.h=null,this.g=0};function Ma(s,l){return $r(s),l=qr(s,l),Es(s.a.g,l)}t.forEach=function(s,l){$r(this),this.a.forEach(function(d,p){je(d,function(v){s.call(l,v,p,this)},this)},this)},t.ja=function(){$r(this);for(var s=this.a.la(),l=this.a.ja(),d=[],p=0;p<l.length;p++)for(var v=s[p],y=0;y<v.length;y++)d.push(l[p]);return d},t.la=function(s){$r(this);var l=[];if(S(s))Ma(this,s)&&(l=cu(l,this.a.get(qr(this,s))));else{s=this.a.la();for(var d=0;d<s.length;d++)l=cu(l,s[d])}return l},t.set=function(s,l){return $r(this),this.h=null,s=qr(this,s),Ma(this,s)&&(this.g-=this.a.get(s).length),this.a.set(s,[l]),this.g+=1,this},t.get=function(s,l){return s?(s=this.la(s),0<s.length?String(s[0]):l):l},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var s=[],l=this.a.ja(),d=0;d<l.length;d++){var p=l[d],v=encodeURIComponent(String(p));p=this.la(p);for(var y=0;y<p.length;y++){var R=v;p[y]!==""&&(R+="="+encodeURIComponent(String(p[y]))),s.push(R)}}return this.h=s.join("&")};function th(s){var l=new Hi;return l.h=s.h,s.a&&(l.a=new Da(s.a),l.g=s.g),l}function qr(s,l){return l=String(l),s.j&&(l=l.toLowerCase()),l}function pu(s,l){l&&!s.j&&($r(s),s.h=null,s.a.forEach(function(d,p){var v=p.toLowerCase();p!=v&&(Is(this,p),Is(this,v),0<d.length&&(this.h=null,this.a.set(qr(this,v),du(d)),this.g+=d.length))},s)),s.j=l}function jn(s){this.a=fu(s)}function Wm(s,l){l?s.a.a.set(bt.Sa,l):Is(s.a.a,bt.Sa)}function Hm(s,l){l!==null?s.a.a.set(bt.Qa,l?"1":"0"):Is(s.a.a,bt.Qa)}function mu(s){return s.a.a.get(bt.Pa)||null}function gu(s,l){l?s.a.a.set(bt.PROVIDER_ID,l):Is(s.a.a,bt.PROVIDER_ID)}jn.prototype.toString=function(){return this.a.toString()};var bt={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"},Ts;e:{var Km=g.navigator;if(Km){var Va=Km.userAgent;if(Va){Ts=Va;break e}}Ts=""}function Pe(s){return Ts.indexOf(s)!=-1}function vu(){return(Pe("Chrome")||Pe("CriOS"))&&!Pe("Edge")}function Ss(s){return Ss[" "](s),s}Ss[" "]=k;function bs(s,l){var d=Uw;return Object.prototype.hasOwnProperty.call(d,s)?d[s]:d[s]=l(s)}var yu=Pe("Opera"),vt=Pe("Trident")||Pe("MSIE"),hr=Pe("Edge"),Qm=hr||vt,ui=Pe("Gecko")&&!(Ts.toLowerCase().indexOf("webkit")!=-1&&!Pe("Edge"))&&!(Pe("Trident")||Pe("MSIE"))&&!Pe("Edge"),an=Ts.toLowerCase().indexOf("webkit")!=-1&&!Pe("Edge"),nh=an&&Pe("Mobile"),fr=Pe("Macintosh");function ih(){var s=g.document;return s?s.documentMode:void 0}var _u;e:{var rh="",wu=function(){var s=Ts;if(ui)return/rv:([^\);]+)(\)|;)/.exec(s);if(hr)return/Edge\/([\d\.]+)/.exec(s);if(vt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s);if(an)return/WebKit\/(\S+)/.exec(s);if(yu)return/(?:Version)[ \/]?(\S+)/.exec(s)}();if(wu&&(rh=wu?wu[1]:""),vt){var Eu=ih();if(Eu!=null&&Eu>parseFloat(rh)){_u=String(Eu);break e}}_u=rh}var Uw={};function Qn(s){return bs(s,function(){for(var l=0,d=Pn(String(_u)).split("."),p=Pn(String(s)).split("."),v=Math.max(d.length,p.length),y=0;l==0&&y<v;y++){var R=d[y]||"",U=p[y]||"";do{if(R=/(\d*)(\D*)(.*)/.exec(R)||["","","",""],U=/(\d*)(\D*)(.*)/.exec(U)||["","","",""],R[0].length==0&&U[0].length==0)break;l=xa(R[1].length==0?0:parseInt(R[1],10),U[1].length==0?0:parseInt(U[1],10))||xa(R[2].length==0,U[2].length==0)||xa(R[2],U[2]),R=R[3],U=U[3]}while(l==0)}return 0<=l})}var Yn,Fa=g.document;Yn=Fa&&vt?ih()||(Fa.compatMode=="CSS1Compat"?parseInt(_u,10):5):void 0;function pr(s,l){this.a=s===nt&&l||"",this.g=sh}pr.prototype.ma=!0,pr.prototype.ka=function(){return this.a},pr.prototype.toString=function(){return"Const{"+this.a+"}"};var sh={},nt={};function Ki(){this.a="",this.h=Ym}Ki.prototype.ma=!0,Ki.prototype.ka=function(){return this.a.toString()},Ki.prototype.g=function(){return 1},Ki.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function go(s){return s instanceof Ki&&s.constructor===Ki&&s.h===Ym?s.a:(de("expected object of type TrustedResourceUrl, got '"+s+"' of type "+b(s)),"type_error:TrustedResourceUrl")}function Ua(){var s=DU;s instanceof pr&&s.constructor===pr&&s.g===sh?s=s.a:(de("expected object of type Const, got '"+s+"'"),s="type_error:Const");var l=new Ki;return l.a=s,l}var Ym={};function zn(){this.a="",this.h=vo}zn.prototype.ma=!0,zn.prototype.ka=function(){return this.a.toString()},zn.prototype.g=function(){return 1},zn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Gr(s){return s instanceof zn&&s.constructor===zn&&s.h===vo?s.a:(de("expected object of type SafeUrl, got '"+s+"' of type "+b(s)),"type_error:SafeUrl")}var Jm=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Iu(s){return s instanceof zn?s:(s=typeof s=="object"&&s.ma?s.ka():String(s),Jm.test(s)||(s="about:invalid#zClosurez"),Qi(s))}function Xm(s){return s instanceof zn?s:(s=typeof s=="object"&&s.ma?s.ka():String(s),Jm.test(s)||(s="about:invalid#zClosurez"),Qi(s))}var vo={};function Qi(s){var l=new zn;return l.a=s,l}Qi("about:blank");function Cs(){this.a="",this.g=oh}Cs.prototype.ma=!0;var oh={};Cs.prototype.ka=function(){return this.a},Cs.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function mr(){this.a="",this.j=Zm,this.h=null}mr.prototype.g=function(){return this.h},mr.prototype.ma=!0,mr.prototype.ka=function(){return this.a.toString()},mr.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function gr(s){return s instanceof mr&&s.constructor===mr&&s.j===Zm?s.a:(de("expected object of type SafeHtml, got '"+s+"' of type "+b(s)),"type_error:SafeHtml")}var Zm={};function Ba(s,l){var d=new mr;return d.a=s,d.h=l,d}Ba("<!DOCTYPE html>",0);var Bw=Ba("",0);Ba("<br>",0);var Wr=function(s){var l=!1,d;return function(){return l||(d=s(),l=!0),d}}(function(){if(typeof document>"u")return!1;var s=document.createElement("div"),l=document.createElement("div");return l.appendChild(document.createElement("div")),s.appendChild(l),s.firstChild?(l=s.firstChild.firstChild,s.innerHTML=gr(Bw),!l.parentElement):!1});function jw(s,l){if(s.src=go(l),I===null)e:{if(l=g.document,(l=l.querySelector&&l.querySelector("script[nonce]"))&&(l=l.nonce||l.getAttribute("nonce"))&&P.test(l)){I=l;break e}I=""}l=I,l&&s.setAttribute("nonce",l)}function yo(s,l){l=l instanceof zn?l:Xm(l),s.assign(Gr(l))}function ci(s,l){this.a=_(s)?s:0,this.g=_(l)?l:0}ci.prototype.toString=function(){return"("+this.a+", "+this.g+")"},ci.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},ci.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},ci.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this};function _o(s,l){this.width=s,this.height=l}t=_o.prototype,t.toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};function ja(s){return s?new Cu(wo(s)):re||(re=new Cu)}function As(s,l){var d=l||document;return d.querySelectorAll&&d.querySelector?d.querySelectorAll("."+s):ah(document,s,l)}function Rs(s,l){var d=l||document;if(d.getElementsByClassName)s=d.getElementsByClassName(s)[0];else{d=document;var p=l||d;s=p.querySelectorAll&&p.querySelector&&s?p.querySelector(s?"."+s:""):ah(d,s,l)[0]||null}return s||null}function ah(s,l,d){var p;if(s=d||s,s.querySelectorAll&&s.querySelector&&l)return s.querySelectorAll(l?"."+l:"");if(l&&s.getElementsByClassName){var v=s.getElementsByClassName(l);return v}if(v=s.getElementsByTagName("*"),l){var y={};for(d=p=0;s=v[d];d++){var R=s.className;typeof R.split=="function"&&Dt(R.split(/\s+/),l)&&(y[p++]=s)}return y.length=p,y}return v}function lh(s,l){Qd(l,function(d,p){d&&typeof d=="object"&&d.ma&&(d=d.ka()),p=="style"?s.style.cssText=d:p=="class"?s.className=d:p=="for"?s.htmlFor=d:dt.hasOwnProperty(p)?s.setAttribute(dt[p],d):p.lastIndexOf("aria-",0)==0||p.lastIndexOf("data-",0)==0?s.setAttribute(p,d):s[p]=d})}var dt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Tu(s){return s.scrollingElement?s.scrollingElement:(an||s.compatMode!="CSS1Compat")&&s.body||s.documentElement}function Ps(s){s&&s.parentNode&&s.parentNode.removeChild(s)}function wo(s){return s.nodeType==9?s:s.ownerDocument||s.document}function Su(s,l){if("textContent"in s)s.textContent=l;else if(s.nodeType==3)s.data=String(l);else if(s.firstChild&&s.firstChild.nodeType==3){for(;s.lastChild!=s.firstChild;)s.removeChild(s.lastChild);s.firstChild.data=String(l)}else{for(var d;d=s.firstChild;)s.removeChild(d);s.appendChild(wo(s).createTextNode(String(l)))}}function uh(s,l){return l?bu(s,function(d){return!l||S(d.className)&&Dt(d.className.split(/\s+/),l)}):null}function bu(s,l){for(var d=0;s;){if(l(s))return s;s=s.parentNode,d++}return null}function Cu(s){this.a=s||g.document||document}Cu.prototype.N=function(){return S(void 0)?this.a.getElementById(void 0):void 0};var di={Fc:!0},ch={Hc:!0},zw={Ec:!0},Eo={Gc:!0};function vr(){throw Error("Do not instantiate directly")}vr.prototype.va=null,vr.prototype.toString=function(){return this.content};function ks(s,l,d,p){if(s=s(l||Ru,void 0,d),p=(p||ja()).a.createElement("DIV"),s=Au(s),s.match(eg),s=Ba(s,null),Wr())for(;p.lastChild;)p.removeChild(p.lastChild);return p.innerHTML=gr(s),p.childNodes.length==1&&(s=p.firstChild,s.nodeType==1&&(p=s)),p}function Au(s){if(!j(s))return Br(String(s));if(s instanceof vr){if(s.fa===di)return s.content;if(s.fa===Eo)return Br(s.content)}return de("Soy template output is unsafe for use as HTML: "+s),"zSoyz"}var eg=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,Ru={};function $w(s){if(s!=null)switch(s.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}function za(){vr.call(this)}_e(za,vr),za.prototype.fa=di;function ye(s){return s!=null&&s.fa===di?s:s instanceof mr?oe(gr(s).toString(),s.g()):oe(Br(String(String(s))),$w(s))}function $a(){vr.call(this)}_e($a,vr),$a.prototype.fa=ch,$a.prototype.va=1;function qa(s,l){this.content=String(s),this.va=l??null}_e(qa,vr),qa.prototype.fa=Eo;function Le(s){return new qa(s,void 0)}var oe=function(s){function l(d){this.content=d}return l.prototype=s.prototype,function(d,p){return d=new l(String(d)),p!==void 0&&(d.va=p),d}}(za),tg=function(s){function l(d){this.content=d}return l.prototype=s.prototype,function(d){return new l(String(d))}}($a);function Pu(s){function l(){}var d={label:ht("New password")};l.prototype=s,s=new l;for(var p in d)s[p]=d[p];return s}function ht(s){return(s=String(s))?new qa(s,void 0):""}var dh=function(s){function l(d){this.content=d}return l.prototype=s.prototype,function(d,p){return d=String(d),d?(d=new l(d),p!==void 0&&(d.va=p),d):""}}(za);function Ct(s){return s!=null&&s.fa===di?String(String(s.content).replace(w,"").replace(T,"&lt;")).replace(rg,ig):Br(String(s))}function Hr(s){return s!=null&&s.fa===ch?s=String(s).replace(xu,xn):s instanceof zn?s=String(Gr(s).toString()).replace(xu,xn):(s=String(s),f.test(s)?s=s.replace(xu,xn):(de("Bad value `%s` for |filterNormalizeUri",[s]),s="#zSoyz")),s}function hh(s){return s!=null&&s.fa===zw?s=s.content:s==null?s="":s instanceof Cs?s instanceof Cs&&s.constructor===Cs&&s.g===oh?s=s.a:(de("expected object of type SafeStyle, got '"+s+"' of type "+b(s)),s="type_error:SafeStyle"):(s=String(s),Io.test(s)||(de("Bad value `%s` for |filterCssValue",[s]),s="zSoyz")),s}var ng={"\0":"&#0;","	":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function ig(s){return ng[s]}var ku={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","\x07":"%07","\b":"%08","	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","\x1B":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function xn(s){return ku[s]}var rg=/[\x00\x22\x27\x3c\x3e]/g,xu=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,Io=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,f=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,w=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,T=/</g;function x(){return Le("Enter a valid phone number")}function z(){return Le("Unable to send password reset code to specified email")}function W(){return Le("Something went wrong. Please try again.")}function ne(){return Le("This email already exists without any means of sign-in. Please reset the password to recover.")}function Qe(s){s=s||{};var l="";switch(s.code){case"invalid-argument":l+="Client specified an invalid argument.";break;case"invalid-configuration":l+="Client specified an invalid project configuration.";break;case"failed-precondition":l+="Request can not be executed in the current system state.";break;case"out-of-range":l+="Client specified an invalid range.";break;case"unauthenticated":l+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":l+="Client does not have sufficient permission.";break;case"not-found":l+="Specified resource is not found.";break;case"aborted":l+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":l+="The resource that a client tried to create already exists.";break;case"resource-exhausted":l+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":l+="Request cancelled by the client.";break;case"data-loss":l+="Unrecoverable data loss or data corruption.";break;case"unknown":l+="Unknown server error.";break;case"internal":l+="Internal server error.";break;case"not-implemented":l+="API method not implemented by the server.";break;case"unavailable":l+="Service unavailable.";break;case"deadline-exceeded":l+="Request deadline exceeded.";break;case"auth/user-disabled":l+="The user account has been disabled by an administrator.";break;case"auth/timeout":l+="The operation has timed out.";break;case"auth/too-many-requests":l+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":l+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":l+="A network error has occurred. Try again later.";break;case"restart-process":l+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":l+="No sign-in provider is available for the given email, please try with a different email."}return Le(l)}function Jt(){return Le("Please login again to perform this operation")}function xe(s,l,d){var p=Error.call(this);if(this.message=p.message,"stack"in p&&(this.stack=p.stack),this.code=mn+s,!(s=l)){switch(s="",this.code){case"firebaseui/merge-conflict":s+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:s+=W()}s=Le(s).toString()}this.message=s||"",this.credential=d||null}u(xe,Error),xe.prototype.toJSON=function(){return{code:this.code,message:this.message}};var mn="firebaseui/";function yt(){this.T=this.T,this.C=this.C}var To=0;yt.prototype.T=!1,yt.prototype.m=function(){!this.T&&(this.T=!0,this.o(),To!=0)&&(this[D]||(this[D]=++C))};function Nn(s,l){s.T?_(void 0)?l.call(void 0):l():(s.C||(s.C=[]),s.C.push(_(void 0)?O(l,void 0):l))}yt.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Kr(s){s&&typeof s.m=="function"&&s.m()}var fh=Object.freeze||function(s){return s},SC=!vt||9<=Number(Yn),hU=vt&&!Qn("9"),fU=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var s=!1,l=Object.defineProperty({},"passive",{get:function(){s=!0}});try{g.addEventListener("test",k,l),g.removeEventListener("test",k,l)}catch{}return s}();function xs(s,l){this.type=s,this.g=this.target=l,this.h=!1,this.qb=!0}xs.prototype.stopPropagation=function(){this.h=!0},xs.prototype.preventDefault=function(){this.qb=!1};function Jn(s,l){if(xs.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,s){var d=this.type=s.type,p=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=l,l=s.relatedTarget){if(ui){e:{try{Ss(l.nodeName);var v=!0;break e}catch{}v=!1}v||(l=null)}}else d=="mouseover"?l=s.fromElement:d=="mouseout"&&(l=s.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.keyCode=s.keyCode||0,this.key=s.key||"",this.j=s.charCode||(d=="keypress"?s.keyCode:0),this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=S(s.pointerType)?s.pointerType:pU[s.pointerType]||"",this.a=s,s.defaultPrevented&&this.preventDefault()}}_e(Jn,xs);var pU=fh({2:"touch",3:"pen",4:"mouse"});Jn.prototype.stopPropagation=function(){Jn.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Jn.prototype.preventDefault=function(){Jn.K.preventDefault.call(this);var s=this.a;if(s.preventDefault)s.preventDefault();else if(s.returnValue=!1,hU)try{(s.ctrlKey||112<=s.keyCode&&123>=s.keyCode)&&(s.keyCode=-1)}catch{}};var ph="closure_listenable_"+(1e6*Math.random()|0),mU=0;function gU(s,l,d,p,v){this.listener=s,this.proxy=null,this.src=l,this.type=d,this.capture=!!p,this.La=v,this.key=++mU,this.sa=this.Ia=!1}function sg(s){s.sa=!0,s.listener=null,s.proxy=null,s.src=null,s.La=null}function og(s){this.src=s,this.a={},this.g=0}og.prototype.add=function(s,l,d,p,v){var y=s.toString();s=this.a[y],s||(s=this.a[y]=[],this.g++);var R=Gw(s,l,p,v);return-1<R?(l=s[R],d||(l.Ia=!1)):(l=new gU(l,this.src,y,!!p,v),l.Ia=d,s.push(l)),l};function qw(s,l){var d=l.type;d in s.a&&Bm(s.a[d],l)&&(sg(l),s.a[d].length==0&&(delete s.a[d],s.g--))}function Gw(s,l,d,p){for(var v=0;v<s.length;++v){var y=s[v];if(!y.sa&&y.listener==l&&y.capture==!!d&&y.La==p)return v}return-1}var Ww="closure_lm_"+(1e6*Math.random()|0),Hw={};function yr(s,l,d,p,v){if(p&&p.once)return mh(s,l,d,p,v);if(A(l)){for(var y=0;y<l.length;y++)yr(s,l[y],d,p,v);return null}return d=Qw(d),s&&s[ph]?s.J.add(String(l),d,!1,j(p)?!!p.capture:!!p,v):bC(s,l,d,!1,p,v)}function bC(s,l,d,p,v,y){if(!l)throw Error("Invalid event type");var R=j(v)?!!v.capture:!!v,U=ag(s);if(U||(s[Ww]=U=new og(s)),d=U.add(l,d,p,R,y),d.proxy)return d;if(p=vU(),d.proxy=p,p.src=s,p.listener=d,s.addEventListener)fU||(v=R),v===void 0&&(v=!1),s.addEventListener(l.toString(),p,v);else if(s.attachEvent)s.attachEvent(CC(l.toString()),p);else if(s.addListener&&s.removeListener)s.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function vU(){var s=yU,l=SC?function(d){return s.call(l.src,l.listener,d)}:function(d){if(d=s.call(l.src,l.listener,d),!d)return d};return l}function mh(s,l,d,p,v){if(A(l)){for(var y=0;y<l.length;y++)mh(s,l[y],d,p,v);return null}return d=Qw(d),s&&s[ph]?s.J.add(String(l),d,!0,j(p)?!!p.capture:!!p,v):bC(s,l,d,!0,p,v)}function Ga(s,l,d,p,v){if(A(l))for(var y=0;y<l.length;y++)Ga(s,l[y],d,p,v);else p=j(p)?!!p.capture:!!p,d=Qw(d),s&&s[ph]?(s=s.J,l=String(l).toString(),l in s.a&&(y=s.a[l],d=Gw(y,d,p,v),-1<d&&(sg(y[d]),au(y,d),y.length==0&&(delete s.a[l],s.g--)))):s&&(s=ag(s))&&(l=s.a[l.toString()],s=-1,l&&(s=Gw(l,d,p,v)),(d=-1<s?l[s]:null)&&So(d))}function So(s){if(typeof s!="number"&&s&&!s.sa){var l=s.src;if(l&&l[ph])qw(l.J,s);else{var d=s.type,p=s.proxy;l.removeEventListener?l.removeEventListener(d,p,s.capture):l.detachEvent?l.detachEvent(CC(d),p):l.addListener&&l.removeListener&&l.removeListener(p),(d=ag(l))?(qw(d,s),d.g==0&&(d.src=null,l[Ww]=null)):sg(s)}}}function CC(s){return s in Hw?Hw[s]:Hw[s]="on"+s}function AC(s,l,d,p){var v=!0;if((s=ag(s))&&(l=s.a[l.toString()]))for(l=l.concat(),s=0;s<l.length;s++){var y=l[s];y&&y.capture==d&&!y.sa&&(y=RC(y,p),v=v&&y!==!1)}return v}function RC(s,l){var d=s.listener,p=s.La||s.src;return s.Ia&&So(s),d.call(p,l)}function yU(s,l){if(s.sa)return!0;if(!SC){if(!l)e:{l=["window","event"];for(var d=g,p=0;p<l.length;p++)if(d=d[l[p]],d==null){l=null;break e}l=d}if(p=l,l=new Jn(p,this),d=!0,!(0>p.keyCode||p.returnValue!=null)){e:{var v=!1;if(p.keyCode==0)try{p.keyCode=-1;break e}catch{v=!0}(v||p.returnValue==null)&&(p.returnValue=!0)}for(p=[],v=l.g;v;v=v.parentNode)p.push(v);for(s=s.type,v=p.length-1;!l.h&&0<=v;v--){l.g=p[v];var y=AC(p[v],s,!0,l);d=d&&y}for(v=0;!l.h&&v<p.length;v++)l.g=p[v],y=AC(p[v],s,!1,l),d=d&&y}return d}return RC(s,new Jn(l,this))}function ag(s){return s=s[Ww],s instanceof og?s:null}var Kw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qw(s){return B(s)?s:(s[Kw]||(s[Kw]=function(l){return s.handleEvent(l)}),s[Kw])}function Xt(){yt.call(this),this.J=new og(this),this.wb=this,this.Ha=null}_e(Xt,yt),Xt.prototype[ph]=!0,Xt.prototype.Za=function(s){this.Ha=s},Xt.prototype.removeEventListener=function(s,l,d,p){Ga(this,s,l,d,p)};function bo(s,l){var d,p=s.Ha;if(p)for(d=[];p;p=p.Ha)d.push(p);if(s=s.wb,p=l.type||l,S(l))l=new xs(l,s);else if(l instanceof xs)l.target=l.target||s;else{var v=l;l=new xs(p,s),_s(l,v)}if(v=!0,d)for(var y=d.length-1;!l.h&&0<=y;y--){var R=l.g=d[y];v=lg(R,p,!0,l)&&v}if(l.h||(R=l.g=s,v=lg(R,p,!0,l)&&v,l.h||(v=lg(R,p,!1,l)&&v)),d)for(y=0;!l.h&&y<d.length;y++)R=l.g=d[y],v=lg(R,p,!1,l)&&v;return v}Xt.prototype.o=function(){if(Xt.K.o.call(this),this.J){var s=this.J,l;for(l in s.a){for(var d=s.a[l],p=0;p<d.length;p++)sg(d[p]);delete s.a[l],s.g--}}this.Ha=null};function lg(s,l,d,p){if(l=s.J.a[String(l)],!l)return!0;l=l.concat();for(var v=!0,y=0;y<l.length;++y){var R=l[y];if(R&&!R.sa&&R.capture==d){var U=R.listener,q=R.La||R.src;R.Ia&&qw(s.J,R),v=U.call(q,p)!==!1&&v}}return v&&p.qb!=0}var Ri={},PC=0;function kC(s,l){if(!s)throw Error("Event target element must be provided!");if(s=Yw(s),Ri[s]&&Ri[s].length)for(var d=0;d<Ri[s].length;d++)bo(Ri[s][d],l)}function _U(s){var l=Yw(s.N());Ri[l]&&Ri[l].length&&(lu(Ri[l],function(d){return d==s}),Ri[l].length||delete Ri[l])}function Yw(s){return typeof s.a>"u"&&(s.a=PC,PC++),s.a}function ug(s){if(!s)throw Error("Event target element must be provided!");Xt.call(this),this.a=s}u(ug,Xt),ug.prototype.N=function(){return this.a},ug.prototype.register=function(){var s=Yw(this.N());Ri[s]?Dt(Ri[s],this)||Ri[s].push(this):Ri[s]=[this]};function xC(s){if(!s)return!1;try{return!!s.$goog_Thenable}catch{return!1}}function Jw(s,l){this.h=s,this.j=l,this.g=0,this.a=null}Jw.prototype.get=function(){if(0<this.g){this.g--;var s=this.a;this.a=s.next,s.next=null}else s=this.h();return s};function NC(s,l){s.j(l),100>s.g&&(s.g++,l.next=s.a,s.a=l)}function DC(){this.g=this.a=null}var OC=new Jw(function(){return new Xw},function(s){s.reset()});DC.prototype.add=function(s,l){var d=OC.get();d.set(s,l),this.g?this.g.next=d:this.a=d,this.g=d};function wU(){var s=MC,l=null;return s.a&&(l=s.a,s.a=s.a.next,s.a||(s.g=null),l.next=null),l}function Xw(){this.next=this.g=this.a=null}Xw.prototype.set=function(s,l){this.a=s,this.g=l,this.next=null},Xw.prototype.reset=function(){this.next=this.g=this.a=null};function LC(s){g.setTimeout(function(){throw s},0)}var Zw;function EU(){var s=g.MessageChannel;if(typeof s>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Pe("Presto")&&(s=function(){var v=document.createElement("IFRAME");v.style.display="none",v.src="",document.documentElement.appendChild(v);var y=v.contentWindow;v=y.document,v.open(),v.write(""),v.close();var R="callImmediate"+Math.random(),U=y.location.protocol=="file:"?"*":y.location.protocol+"//"+y.location.host;v=O(function(q){(U=="*"||q.origin==U)&&q.data==R&&this.port1.onmessage()},this),y.addEventListener("message",v,!1),this.port1={},this.port2={postMessage:function(){y.postMessage(R,U)}}}),typeof s<"u"&&!Pe("Trident")&&!Pe("MSIE")){var l=new s,d={},p=d;return l.port1.onmessage=function(){if(_(d.next)){d=d.next;var v=d.gb;d.gb=null,v()}},function(v){p.next={gb:v},p=p.next,l.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(v){var y=document.createElement("SCRIPT");y.onreadystatechange=function(){y.onreadystatechange=null,y.parentNode.removeChild(y),y=null,v(),v=null},document.documentElement.appendChild(y)}:function(v){g.setTimeout(v,0)}}function e0(s,l){cg||IU(),t0||(cg(),t0=!0),MC.add(s,l)}var cg;function IU(){if(g.Promise&&g.Promise.resolve){var s=g.Promise.resolve(void 0);cg=function(){s.then(VC)}}else cg=function(){var l=VC;!B(g.setImmediate)||g.Window&&g.Window.prototype&&!Pe("Edge")&&g.Window.prototype.setImmediate==g.setImmediate?(Zw||(Zw=EU()),Zw(l)):g.setImmediate(l)}}var t0=!1,MC=new DC;function VC(){for(var s;s=wU();){try{s.a.call(s.g)}catch(l){LC(l)}NC(OC,s)}t0=!1}function Zt(s){if(this.a=Wa,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,s!=k)try{var l=this;s.call(void 0,function(d){Ha(l,gh,d)},function(d){if(!(d instanceof Du))try{throw d instanceof Error?d:Error("Promise rejected.")}catch{}Ha(l,Ns,d)})}catch(d){Ha(this,Ns,d)}}var Wa=0,gh=2,Ns=3;function FC(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}FC.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var UC=new Jw(function(){return new FC},function(s){s.reset()});function n0(s,l,d){var p=UC.get();return p.s=s,p.g=l,p.j=d,p}function Ot(s){if(s instanceof Zt)return s;var l=new Zt(k);return Ha(l,gh,s),l}function Nu(s){return new Zt(function(l,d){d(s)})}Zt.prototype.then=function(s,l,d){return jC(this,B(s)?s:null,B(l)?l:null,d)},Zt.prototype.$goog_Thenable=!0,t=Zt.prototype,t.fc=function(s,l){return s=n0(s,s,l),s.h=!0,i0(this,s),this},t.Ca=function(s,l){return jC(this,null,s,l)},t.cancel=function(s){this.a==Wa&&e0(function(){var l=new Du(s);BC(this,l)},this)};function BC(s,l){if(s.a==Wa)if(s.h){var d=s.h;if(d.g){for(var p=0,v=null,y=null,R=d.g;R&&(R.h||(p++,R.a==s&&(v=R),!(v&&1<p)));R=R.next)v||(y=R);v&&(d.a==Wa&&p==1?BC(d,l):(y?(p=y,p.next==d.j&&(d.j=p),p.next=p.next.next):$C(d),qC(d,v,Ns,l)))}s.h=null}else Ha(s,Ns,l)}function i0(s,l){s.g||s.a!=gh&&s.a!=Ns||zC(s),s.j?s.j.next=l:s.g=l,s.j=l}function jC(s,l,d,p){var v=n0(null,null,null);return v.a=new Zt(function(y,R){v.s=l?function(U){try{var q=l.call(p,U);y(q)}catch(X){R(X)}}:y,v.g=d?function(U){try{var q=d.call(p,U);!_(q)&&U instanceof Du?R(U):y(q)}catch(X){R(X)}}:R}),v.a.h=s,i0(s,v),v.a}t.hc=function(s){this.a=Wa,Ha(this,gh,s)},t.ic=function(s){this.a=Wa,Ha(this,Ns,s)};function Ha(s,l,d){if(s.a==Wa){s===d&&(l=Ns,d=new TypeError("Promise cannot resolve to itself")),s.a=1;e:{var p=d,v=s.hc,y=s.ic;if(p instanceof Zt){i0(p,n0(v||k,y||null,s));var R=!0}else if(xC(p))p.then(v,y,s),R=!0;else{if(j(p))try{var U=p.then;if(B(U)){TU(p,U,v,y,s),R=!0;break e}}catch(q){y.call(s,q),R=!0;break e}R=!1}}R||(s.A=d,s.a=l,s.h=null,zC(s),l!=Ns||d instanceof Du||SU(s,d))}}function TU(s,l,d,p,v){function y(q){U||(U=!0,p.call(v,q))}function R(q){U||(U=!0,d.call(v,q))}var U=!1;try{l.call(s,R,y)}catch(q){y(q)}}function zC(s){s.i||(s.i=!0,e0(s.Hb,s))}function $C(s){var l=null;return s.g&&(l=s.g,s.g=l.next,l.next=null),s.g||(s.j=null),l}t.Hb=function(){for(var s;s=$C(this);)qC(this,s,this.a,this.A);this.i=!1};function qC(s,l,d,p){if(d==Ns&&l.g&&!l.h)for(;s&&s.s;s=s.h)s.s=!1;if(l.a)l.a.h=null,GC(l,d,p);else try{l.h?l.s.call(l.j):GC(l,d,p)}catch(v){WC.call(null,v)}NC(UC,l)}function GC(s,l,d){l==gh?s.s.call(s.j,d):s.g&&s.g.call(s.j,d)}function SU(s,l){s.s=!0,e0(function(){s.s&&WC.call(null,l)})}var WC=LC;function Du(s){rt.call(this,s)}_e(Du,rt),Du.prototype.name="cancel";function HC(s,l,d){l||(l={}),d=d||window;var p=s instanceof zn?s:Iu(typeof s.href<"u"?s.href:String(s));s=l.target||s.target;var v=[];for(y in l)switch(y){case"width":case"height":case"top":case"left":v.push(y+"="+l[y]);break;case"target":case"noopener":case"noreferrer":break;default:v.push(y+"="+(l[y]?1:0))}var y=v.join(",");return(Pe("iPhone")&&!Pe("iPod")&&!Pe("iPad")||Pe("iPad")||Pe("iPod"))&&d.navigator&&d.navigator.standalone&&s&&s!="_self"?(y=d.document.createElement("A"),p=p instanceof zn?p:Xm(p),y.href=Gr(p),y.setAttribute("target",s),l.noreferrer&&y.setAttribute("rel","noreferrer"),l=document.createEvent("MouseEvent"),l.initMouseEvent("click",!0,!0,d,1),y.dispatchEvent(l),d={}):l.noreferrer?(d=d.open("",s,y),l=Gr(p).toString(),d&&(Qm&&l.indexOf(";")!=-1&&(l="'"+l.replace(/'/g,"%27")+"'"),d.opener=null,l=Ba('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Br(l)+'">',null),d.document.write(gr(l)),d.document.close())):(d=d.open(Gr(p).toString(),s,y))&&l.noopener&&(d.opener=null),d}function KC(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function Ou(s){HC(s,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function dg(s,l){if(s=j(s)&&s.nodeType==1?s:document.querySelector(String(s)),s==null)throw Error(l||"Cannot find element.");return s}function Ds(){return window.location.href}function bU(){var s=null;return new Zt(function(l){g.document.readyState=="complete"?l():(s=function(){l()},mh(window,"load",s))}).Ca(function(l){throw Ga(window,"load",s),l})}function CU(){for(var s=32,l=[];0<s;)l.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),s--;return l.join("")}function AU(s,l,d){return d=d===void 0?{}:d,Object.keys(s).filter(function(p){return l.includes(p)}).reduce(function(p,v){return p[v]=s[v],p},d)}function Co(s){var l=kU;this.s=[],this.T=l,this.O=s||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}Co.prototype.cancel=function(s){if(this.a)this.h instanceof Co&&this.h.cancel();else{if(this.g){var l=this.g;delete this.g,s?l.cancel(s):(l.C--,0>=l.C&&l.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(s=new yh,hg(this),vh(this,!1,s))}},Co.prototype.L=function(s,l){this.A=!1,vh(this,s,l)};function vh(s,l,d){s.a=!0,s.h=d,s.j=!l,JC(s)}function hg(s){if(s.a){if(!s.J)throw new fg;s.J=!1}}Co.prototype.callback=function(s){hg(this),vh(this,!0,s)};function QC(s,l,d){s.s.push([l,d,void 0]),s.a&&JC(s)}Co.prototype.then=function(s,l,d){var p,v,y=new Zt(function(R,U){p=R,v=U});return QC(this,p,function(R){R instanceof yh?y.cancel():v(R)}),y.then(s,l,d)},Co.prototype.$goog_Thenable=!0;function YC(s){return ur(s.s,function(l){return B(l[1])})}function JC(s){if(s.i&&s.a&&YC(s)){var l=s.i,d=pg[l];d&&(g.clearTimeout(d.a),delete pg[l]),s.i=0}s.g&&(s.g.C--,delete s.g),l=s.h;for(var p=d=!1;s.s.length&&!s.A;){var v=s.s.shift(),y=v[0],R=v[1];if(v=v[2],y=s.j?R:y)try{var U=y.call(v||s.O,l);_(U)&&(s.j=s.j&&(U==l||U instanceof Error),s.h=l=U),(xC(l)||typeof g.Promise=="function"&&l instanceof g.Promise)&&(p=!0,s.A=!0)}catch(q){l=q,s.j=!0,YC(s)||(d=!0)}}s.h=l,p&&(U=O(s.L,s,!0),p=O(s.L,s,!1),l instanceof Co?(QC(l,U,p),l.l=!0):l.then(U,p)),d&&(l=new XC(l),pg[l.a]=l,s.i=l.a)}function fg(){rt.call(this)}_e(fg,rt),fg.prototype.message="Deferred has already fired",fg.prototype.name="AlreadyCalledError";function yh(){rt.call(this)}_e(yh,rt),yh.prototype.message="Deferred was canceled",yh.prototype.name="CanceledError";function XC(s){this.a=g.setTimeout(O(this.h,this),0),this.g=s}XC.prototype.h=function(){throw delete pg[this.a],this.g};var pg={};function RU(s){var l={},d=l.document||document,p=go(s).toString(),v=document.createElement("SCRIPT"),y={rb:v,sb:void 0},R=new Co(y),U=null,q=l.timeout!=null?l.timeout:5e3;return 0<q&&(U=window.setTimeout(function(){mg(v,!0);var X=new r0(NU,"Timeout reached for loading script "+p);hg(R),vh(R,!1,X)},q),y.sb=U),v.onload=v.onreadystatechange=function(){v.readyState&&v.readyState!="loaded"&&v.readyState!="complete"||(mg(v,l.xc||!1,U),R.callback(null))},v.onerror=function(){mg(v,!0,U);var X=new r0(xU,"Error while loading script "+p);hg(R),vh(R,!1,X)},y=l.attributes||{},_s(y,{type:"text/javascript",charset:"UTF-8"}),lh(v,y),jw(v,s),PU(d).appendChild(v),R}function PU(s){var l=(s||document).getElementsByTagName("HEAD");return l&&l.length!=0?l[0]:s.documentElement}function kU(){if(this&&this.rb){var s=this.rb;s&&s.tagName=="SCRIPT"&&mg(s,!0,this.sb)}}function mg(s,l,d){d!=null&&g.clearTimeout(d),s.onload=k,s.onerror=k,s.onreadystatechange=k,l&&window.setTimeout(function(){Ps(s)},0)}var xU=0,NU=1;function r0(s,l){var d="Jsloader error (code #"+s+")";l&&(d+=": "+l),rt.call(this,d),this.code=s}_e(r0,rt);function _h(){return g.google&&g.google.accounts&&g.google.accounts.id||null}function s0(s){this.a=s||_h(),this.h=!1,this.g=null}s0.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())};function ZC(s,l,d){if(s.a&&l)return function(){return s.h=!0,new Zt(function(v){s.g=v,s.a.initialize({client_id:l,callback:v,auto_select:!d}),s.a.prompt()})}();if(l){var p=o0.Xa().load().then(function(){return s.a=_h(),ZC(s,l,d)}).Ca(function(){return null});return Ot(p)}return Ot(null)}E(s0);var DU=new pr(nt,"https://accounts.google.com/gsi/client");function o0(){this.a=null}o0.prototype.load=function(){var s=this;if(this.a)return this.a;var l=Ua();return _h()?Ot():this.a=bU().then(function(){if(!_h())return new Zt(function(d,p){var v=setTimeout(function(){s.a=null,p(Error("Network error!"))},1e4);g.onGoogleLibraryLoad=function(){clearTimeout(v),d()},Ot(RU(l)).then(function(){_h()&&d()}).Ca(function(y){clearTimeout(v),s.a=null,p(y)})})})},E(o0);function a0(s,l){this.a=s,this.g=l||function(d){throw d}}a0.prototype.confirm=function(s){return Ot(this.a.confirm(s)).Ca(this.g)};function l0(s,l,d){this.reset(s,l,d,void 0,void 0)}l0.prototype.a=null,l0.prototype.reset=function(s,l,d,p,v){this.h=p||we(),this.j=s,this.s=l,this.g=d,delete this.a};function u0(s){this.s=s,this.a=this.h=this.j=this.g=null}function gg(s,l){this.name=s,this.value=l}gg.prototype.toString=function(){return this.name};var eA=new gg("SEVERE",1e3),tA=new gg("WARNING",900),nA=new gg("CONFIG",700);function iA(s){return s.j?s.j:s.g?iA(s.g):(de("Root logger has no level set."),null)}u0.prototype.log=function(s,l,d){if(s.value>=iA(this).value)for(B(l)&&(l=l()),s=new l0(s,String(l),this.s),d&&(s.a=d),d=this;d;){var p=d,v=s;if(p.a)for(var y=0;l=p.a[y];y++)l(v);d=d.g}};var c0={},wh=null;function rA(){wh||(wh=new u0(""),c0[""]=wh,wh.j=nA)}function sA(s){rA();var l;if(!(l=c0[s])){l=new u0(s);var d=s.lastIndexOf("."),p=s.substr(d+1);d=sA(s.substr(0,d)),d.h||(d.h={}),d.h[p]=l,l.g=d,c0[s]=l}return l}function vg(){this.a=we()}var d0=null;vg.prototype.set=function(s){this.a=s},vg.prototype.reset=function(){this.set(we())},vg.prototype.get=function(){return this.a};function Eh(s){this.j=s||"",d0||(d0=new vg),this.s=d0}Eh.prototype.a=!0,Eh.prototype.g=!0,Eh.prototype.h=!1;function Ka(s){return 10>s?"0"+s:String(s)}function OU(s,l){s=(s.h-l)/1e3,l=s.toFixed(3);var d=0;if(1>s)d=2;else for(;100>s;)d++,s*=10;for(;0<d--;)l=" "+l;return l}function oA(s){Eh.call(this,s)}_e(oA,Eh);function LU(s,l){var d=[];if(d.push(s.j," "),s.g){var p=new Date(l.h);d.push("[",Ka(p.getFullYear()-2e3)+Ka(p.getMonth()+1)+Ka(p.getDate())+" "+Ka(p.getHours())+":"+Ka(p.getMinutes())+":"+Ka(p.getSeconds())+"."+Ka(Math.floor(p.getMilliseconds()/10)),"] ")}return d.push("[",OU(l,s.s.get()),"s] "),d.push("[",l.g,"] "),d.push(l.s),s.h&&(l=l.a)&&d.push(`
`,l instanceof Error?l.message:l.toString()),s.a&&d.push(`
`),d.join("")}function aA(){this.s=O(this.h,this),this.a=new oA,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}aA.prototype.h=function(s){function l(y){if(y){if(y.value>=eA.value)return"error";if(y.value>=tA.value)return"warn";if(y.value>=nA.value)return"log"}return"debug"}if(!this.j[s.g]){var d=LU(this.a,s),p=MU;if(p){var v=l(s.j);VU(p,v,d,s.a)}}};var MU=g.console;function VU(s,l,d,p){s[l]?s[l](d,p||""):s.log(d,p||"")}function Pi(s,l){var d=h0;d&&d.log(eA,s,l)}var h0;h0=sA("firebaseui");var f0=new aA;if(f0.g!=1){var yg;rA(),yg=wh;var FU=f0.s;yg.a||(yg.a=[]),yg.a.push(FU),f0.g=!0}function Ao(s){var l=h0;l&&l.log(tA,s,void 0)}function lA(){this.a=(typeof document>"u"?null:document)||{cookie:""}}t=lA.prototype,t.set=function(s,l,d,p,v,y){if(/[;=\s]/.test(s))throw Error('Invalid cookie name "'+s+'"');if(/[;\r\n]/.test(l))throw Error('Invalid cookie value "'+l+'"');_(d)||(d=-1),v=v?";domain="+v:"",p=p?";path="+p:"",y=y?";secure":"",d=0>d?"":d==0?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(we()+1e3*d).toUTCString(),this.a.cookie=s+"="+l+v+p+d+y},t.get=function(s,l){for(var d=s+"=",p=(this.a.cookie||"").split(";"),v=0,y;v<p.length;v++){if(y=Pn(p[v]),y.lastIndexOf(d,0)==0)return y.substr(d.length);if(y==s)return""}return l},t.ja=function(){return p0(this).keys},t.la=function(){return p0(this).values},t.clear=function(){for(var s=p0(this).keys,l=s.length-1;0<=l;l--){var d=s[l];this.get(d),this.set(d,"",0,void 0,void 0)}};function p0(s){s=(s.a.cookie||"").split(";");for(var l=[],d=[],p,v,y=0;y<s.length;y++)v=Pn(s[y]),p=v.indexOf("="),p==-1?(l.push(""),d.push(v)):(l.push(v.substring(0,p)),d.push(v.substring(p+1)));return{keys:l,values:d}}var _g=new lA;function uA(){}function Lu(s,l,d,p){this.h=typeof s<"u"&&s!==null?s:-1,this.g=l||null,this.a=d||null,this.j=!!p}u(Lu,uA),Lu.prototype.set=function(s,l){_g.set(s,l,this.h,this.g,this.a,this.j)},Lu.prototype.get=function(s){return _g.get(s)||null},Lu.prototype.ra=function(s){var l=this.g,d=this.a;_g.get(s),_g.set(s,"",0,l,d)};function m0(s,l){this.g=s,this.a=l||null}function cA(s){return{email:s.g,credential:s.a&&s.a.toJSON()}}function dA(s){if(s&&s.email){var l=s.credential&&pe.auth.AuthCredential.fromJSON(s.credential);return new m0(s.email,l)}return null}function hA(s){this.a=s||null}function fA(s){for(var l=[],d=0,p=0;p<s.length;p++){var v=s.charCodeAt(p);255<v&&(l[d++]=v&255,v>>=8),l[d++]=v}return l}function UU(s){return lr(s,function(l){return l=l.toString(16),1<l.length?l:"0"+l}).join("")}function wg(s){for(this.i=s,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(Mu*(this.j+1)),s=0;s<this.g;s++)this.a[s]=[this.i[4*s],this.i[4*s+1],this.i[4*s+2],this.i[4*s+3]];var l=Array(4);for(s=this.g;s<Mu*(this.j+1);s++){if(l[0]=this.a[s-1][0],l[1]=this.a[s-1][1],l[2]=this.a[s-1][2],l[3]=this.a[s-1][3],s%this.g==0){var d=l,p=d[0];d[0]=d[1],d[1]=d[2],d[2]=d[3],d[3]=p,yA(l),l[0]^=Ig[s/this.g][0],l[1]^=Ig[s/this.g][1],l[2]^=Ig[s/this.g][2],l[3]^=Ig[s/this.g][3]}else 6<this.g&&s%this.g==4&&yA(l);this.a[s]=Array(4),this.a[s][0]=this.a[s-this.g][0]^l[0],this.a[s][1]=this.a[s-this.g][1]^l[1],this.a[s][2]=this.a[s-this.g][2]^l[2],this.a[s][3]=this.a[s-this.g][3]^l[3]}}wg.prototype.A=16;var Mu=wg.prototype.A/4;function pA(s,l){for(var d,p=0;p<Mu;p++)for(var v=0;4>v;v++)d=4*v+p,d=l[d],s.h[p][v]=d}function mA(s){for(var l=[],d=0;d<Mu;d++)for(var p=0;4>p;p++)l[4*p+d]=s.h[d][p];return l}function Vu(s,l){for(var d=0;4>d;d++)for(var p=0;4>p;p++)s.h[d][p]^=s.a[4*l+p][d]}function Eg(s,l){for(var d=0;4>d;d++)for(var p=0;4>p;p++)s.h[d][p]=l[s.h[d][p]]}function gA(s){for(var l=1;4>l;l++)for(var d=0;4>d;d++)s.s[l][d]=s.h[l][d];for(l=1;4>l;l++)for(d=0;4>d;d++)s.h[l][d]=s.s[l][(d+l)%Mu]}function vA(s){for(var l=1;4>l;l++)for(var d=0;4>d;d++)s.s[l][(d+l)%Mu]=s.h[l][d];for(l=1;4>l;l++)for(d=0;4>d;d++)s.h[l][d]=s.s[l][d]}function yA(s){s[0]=Fu[s[0]],s[1]=Fu[s[1]],s[2]=Fu[s[2]],s[3]=Fu[s[3]]}var Fu=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],_A=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Ig=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Tg=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Sg=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],bg=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Cg=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Ag=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Rg=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function wA(s,l){s=new wg(IA(s)),l=fA(l);for(var d=l.splice(0,16),p="",v;d.length;){v=16-d.length;for(var y=0;y<v;y++)d.push(0);for(v=s,pA(v,d),Vu(v,0),d=1;d<v.j;++d){Eg(v,Fu),gA(v),y=v.h;for(var R=v.s[0],U=0;4>U;U++)R[0]=y[0][U],R[1]=y[1][U],R[2]=y[2][U],R[3]=y[3][U],y[0][U]=Tg[R[0]]^Sg[R[1]]^R[2]^R[3],y[1][U]=R[0]^Tg[R[1]]^Sg[R[2]]^R[3],y[2][U]=R[0]^R[1]^Tg[R[2]]^Sg[R[3]],y[3][U]=Sg[R[0]]^R[1]^R[2]^Tg[R[3]];Vu(v,d)}Eg(v,Fu),gA(v),Vu(v,v.j),p+=UU(mA(v)),d=l.splice(0,16)}return p}function EA(s,l){s=new wg(IA(s));for(var d=[],p=0;p<l.length;p+=2)d.push(parseInt(l.substring(p,p+2),16));var v=d.splice(0,16);for(l="";v.length;){for(p=s,pA(p,v),Vu(p,p.j),v=1;v<p.j;++v){vA(p),Eg(p,_A),Vu(p,p.j-v);for(var y=p.h,R=p.s[0],U=0;4>U;U++)R[0]=y[0][U],R[1]=y[1][U],R[2]=y[2][U],R[3]=y[3][U],y[0][U]=Rg[R[0]]^Cg[R[1]]^Ag[R[2]]^bg[R[3]],y[1][U]=bg[R[0]]^Rg[R[1]]^Cg[R[2]]^Ag[R[3]],y[2][U]=Ag[R[0]]^bg[R[1]]^Rg[R[2]]^Cg[R[3]],y[3][U]=Cg[R[0]]^Ag[R[1]]^bg[R[2]]^Rg[R[3]]}if(vA(p),Eg(p,_A),Vu(p,0),p=mA(p),8192>=p.length)p=String.fromCharCode.apply(null,p);else{for(v="",y=0;y<p.length;y+=8192)v+=String.fromCharCode.apply(null,Hd(p,y,y+8192));p=v}l+=p,v=d.splice(0,16)}return l.replace(/(\x00)+$/,"")}function IA(s){s=fA(s.substring(0,32));for(var l=32-s.length,d=0;d<l;d++)s.push(0);return s}function TA(s){var l=[];return g0(new BU,s,l),l.join("")}function BU(){}function g0(s,l,d){if(l==null)d.push("null");else{if(typeof l=="object"){if(A(l)){var p=l;l=p.length,d.push("[");for(var v="",y=0;y<l;y++)d.push(v),g0(s,p[y],d),v=",";d.push("]");return}if(l instanceof String||l instanceof Number||l instanceof Boolean)l=l.valueOf();else{d.push("{"),v="";for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&(y=l[p],typeof y!="function"&&(d.push(v),bA(p,d),d.push(":"),g0(s,y,d),v=","));d.push("}");return}}switch(typeof l){case"string":bA(l,d);break;case"number":d.push(isFinite(l)&&!isNaN(l)?String(l):"null");break;case"boolean":d.push(String(l));break;case"function":d.push("null");break;default:throw Error("Unknown type: "+typeof l)}}}var SA={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},jU=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function bA(s,l){l.push('"',s.replace(jU,function(d){var p=SA[d];return p||(p="\\u"+(d.charCodeAt(0)|65536).toString(16).substr(1),SA[d]=p),p}),'"')}function Ih(s){this.a=s}Ih.prototype.set=function(s,l){_(l)?this.a.set(s,TA(l)):this.a.ra(s)},Ih.prototype.get=function(s){try{var l=this.a.get(s)}catch{return}if(l!==null)try{return JSON.parse(l)}catch{throw"Storage: Invalid value was encountered"}};function Pg(){}_e(Pg,uA),Pg.prototype.clear=function(){var s=Gm(this.ha(!0)),l=this;je(s,function(d){l.ra(d)})};function kg(s){this.a=s}_e(kg,Pg);function xg(s){if(!s.a)return!1;try{return s.a.setItem("__sak","1"),s.a.removeItem("__sak"),!0}catch{return!1}}t=kg.prototype,t.set=function(s,l){try{this.a.setItem(s,l)}catch{throw this.a.length==0?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},t.get=function(s){if(s=this.a.getItem(s),!S(s)&&s!==null)throw"Storage mechanism: Invalid value was encountered";return s},t.ra=function(s){this.a.removeItem(s)},t.ha=function(s){var l=0,d=this.a,p=new jr;return p.next=function(){if(l>=d.length)throw ws;var v=d.key(l++);if(s)return v;if(v=d.getItem(v),!S(v))throw"Storage mechanism: Invalid value was encountered";return v},p},t.clear=function(){this.a.clear()},t.key=function(s){return this.a.key(s)};function v0(){var s=null;try{s=window.localStorage||null}catch{}this.a=s}_e(v0,kg);function y0(){var s=null;try{s=window.sessionStorage||null}catch{}this.a=s}_e(y0,kg);function Uu(s,l){this.g=s,this.a=l+"::"}_e(Uu,Pg),Uu.prototype.set=function(s,l){this.g.set(this.a+s,l)},Uu.prototype.get=function(s){return this.g.get(this.a+s)},Uu.prototype.ra=function(s){this.g.ra(this.a+s)},Uu.prototype.ha=function(s){var l=this.g.ha(!0),d=this,p=new jr;return p.next=function(){for(var v=l.next();v.substr(0,d.a.length)!=d.a;)v=l.next();return s?v.substr(d.a.length):d.g.get(v)},p},xg(new v0);var CA,AA=new y0;CA=xg(AA)?new Uu(AA,"firebaseui"):null;var _0=new Ih(CA),w0={name:"pendingEmailCredential",storage:_0},Qa={name:"redirectStatus",storage:_0},Th={name:"redirectUrl",storage:_0},Bu={name:"emailForSignIn",storage:new Ih(new Lu(3600,"/"))},Sh={name:"pendingEncryptedCredential",storage:new Ih(new Lu(3600,"/"))};function ju(s,l){return s.storage.get(l?s.name+":"+l:s.name)}function hi(s,l){s.storage.a.ra(l?s.name+":"+l:s.name)}function zu(s,l,d){s.storage.set(d?s.name+":"+d:s.name,l)}function RA(s){return ju(Th,s)||null}function Qr(s){return s=ju(w0,s)||null,dA(s)}function Yr(s){hi(w0,s)}function PA(s,l){zu(w0,cA(s),l)}function E0(s){return(s=ju(Qa,s)||null)&&typeof s.tenantId<"u"?new hA(s.tenantId):null}function zU(s,l){zu(Qa,{tenantId:s.a},l)}function $U(s,l){l=ju(Bu,l);var d=null;if(l)try{var p=EA(s,l),v=JSON.parse(p);d=v&&v.email||null}catch{}return d}function qU(s,l){l=ju(Sh,l);var d=null;if(l)try{var p=EA(s,l);d=JSON.parse(p)}catch{}return dA(d||null)}function GU(s,l,d){zu(Sh,wA(s,JSON.stringify(cA(l))),d)}function I0(){this.W={}}function qt(s,l,d){if(l.toLowerCase()in s.W)throw Error("Configuration "+l+" has already been defined.");s.W[l.toLowerCase()]=d}function T0(s,l,d){if(!(l.toLowerCase()in s.W))throw Error("Configuration "+l+" is not defined.");s.W[l.toLowerCase()]=d}I0.prototype.get=function(s){if(!(s.toLowerCase()in this.W))throw Error("Configuration "+s+" is not defined.");return this.W[s.toLowerCase()]};function S0(s,l){if(s=s.get(l),!s)throw Error("Configuration "+l+" is required.");return s}function b0(){this.g=void 0,this.a={}}t=b0.prototype,t.set=function(s,l){kA(this,s,l,!1)},t.add=function(s,l){kA(this,s,l,!0)};function kA(s,l,d,p){for(var v=0;v<l.length;v++){var y=l.charAt(v);s.a[y]||(s.a[y]=new b0),s=s.a[y]}if(p&&s.g!==void 0)throw Error('The collection already contains the key "'+l+'"');s.g=d}t.get=function(s){e:{for(var l=this,d=0;d<s.length;d++)if(l=l.a[s.charAt(d)],!l){s=void 0;break e}s=l}return s?s.g:void 0},t.la=function(){var s=[];return xA(this,s),s};function xA(s,l){s.g!==void 0&&l.push(s.g);for(var d in s.a)xA(s.a[d],l)}t.ja=function(){var s=[];return NA(this,"",s),s};function NA(s,l,d){s.g!==void 0&&d.push(l);for(var p in s.a)NA(s.a[p],l+p,d)}t.clear=function(){this.a={},this.g=void 0};function DA(s){for(this.a=s,this.g=new b0,s=0;s<this.a.length;s++){var l=this.g.get("+"+this.a[s].b);l?l.push(this.a[s]):this.g.add("+"+this.a[s].b,[this.a[s]])}}function Ng(s,l){s=s.g;var d={},p=0;for(s.g!==void 0&&(d[p]=s.g);p<l.length;p++){var v=l.charAt(p);if(!(v in s.a))break;s=s.a[v],s.g!==void 0&&(d[p]=s.g)}for(var y in d)if(d.hasOwnProperty(y))return d[y];return[]}function Ya(s){for(var l=0;l<Xn.length;l++)if(Xn[l].c===s)return Xn[l];return null}function OA(s){s=s.toUpperCase();for(var l=[],d=0;d<Xn.length;d++)Xn[d].f===s&&l.push(Xn[d]);return l}function LA(s){if(0<s.length&&s.charAt(0)=="+"){s=s.substring(1);for(var l=[],d=0;d<Xn.length;d++)Xn[d].b==s&&l.push(Xn[d]);s=l}else s=OA(s);return s}function MA(s){s.sort(function(l,d){return l.name.localeCompare(d.name,"en")})}var Xn=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];MA(Xn);var bh=new DA(Xn);function VA(s,l){this.a=s,this.Aa=l}function FA(s){s=Pn(s);var l=Ng(bh,s);return 0<l.length?new VA(l[0].b=="1"?"1-US-0":l[0].c,Pn(s.substr(l[0].b.length+1))):null}function C0(s){var l=Ya(s.a);if(!l)throw Error("Country ID "+s.a+" not found.");return"+"+l.b+s.Aa}function UA(s,l){for(var d=0;d<s.length;d++)if(!Dt(BA,s[d])&&($u!==null&&s[d]in $u||Dt(l,s[d])))return s[d];return null}var BA=["emailLink","password","phone"],$u={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function WU(){this.a=new I0,qt(this.a,"autoUpgradeAnonymousUsers"),qt(this.a,"callbacks"),qt(this.a,"credentialHelper",Lg),qt(this.a,"immediateFederatedRedirect",!1),qt(this.a,"popupMode",!1),qt(this.a,"privacyPolicyUrl"),qt(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),qt(this.a,"queryParameterForWidgetMode","mode"),qt(this.a,"signInFlow"),qt(this.a,"signInOptions"),qt(this.a,"signInSuccessUrl"),qt(this.a,"siteName"),qt(this.a,"tosUrl"),qt(this.a,"widgetUrl"),qt(this.a,"adminRestrictedOperation")}function Dg(s){var l=!!s.a.get("autoUpgradeAnonymousUsers");return l&&!YA(s)&&Pi('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),l}function Og(s){s=s.a.get("signInOptions")||[];for(var l=[],d=0;d<s.length;d++){var p=s[d];p=j(p)?p:{provider:p},p.provider&&l.push(p)}return l}function ki(s,l){s=Og(s);for(var d=0;d<s.length;d++)if(s[d].provider===l)return s[d];return null}function qu(s){return Og(s).map(function(l){return l.provider})}function Ch(s,l){s=jA(s);for(var d=0;d<s.length;d++)if(s[d].providerId===l)return s[d];return null}function jA(s){return Og(s).map(function(l){if($u[l.provider]||Dt(n6,l.provider)){l={providerId:l.provider,S:l.providerName||null,V:l.fullLabel||null,ta:l.buttonColor||null,za:l.iconUrl?Gr(Iu(l.iconUrl)).toString():null};for(var d in l)l[d]===null&&delete l[d];return l}return{providerId:l.provider,S:l.providerName||null,V:l.fullLabel||null,ta:l.buttonColor||null,za:l.iconUrl?Gr(Iu(l.iconUrl)).toString():null,Ob:l.loginHintKey||null}})}function zA(s){var l=ki(s,pe.auth.GoogleAuthProvider.PROVIDER_ID),d;if(d=l&&l.clientId){e:{if((window.location&&window.location.protocol)==="http:"||(window.location&&window.location.protocol)==="https:"){for(p in s=s.a.get("credentialHelper"),x0)if(x0[p]===s){var p=x0[p];break e}}p=Lg}d=p===k0}return d&&l.clientId||null}function $A(s){return s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID),!!(s&&s.disableSignUp&&s.disableSignUp.status)}function Ja(s){return s=s.a.get("adminRestrictedOperation")||null,!(!s||!s.status)}function HU(s){var l=null;if(Og(s).forEach(function(p){p.provider==pe.auth.PhoneAuthProvider.PROVIDER_ID&&j(p.recaptchaParameters)&&!Array.isArray(p.recaptchaParameters)&&(l=Yt(p.recaptchaParameters))}),l){var d=[];i6.forEach(function(p){typeof l[p]<"u"&&(d.push(p),delete l[p])}),d.length&&Ao('The following provided "recaptchaParameters" keys are not allowed: '+d.join(", "))}return l}function KU(s){return(s=s.a.get("adminRestrictedOperation"))&&s.adminEmail?s.adminEmail:null}function QU(s){if(s=s.a.get("adminRestrictedOperation")||null){var l=s.helpLink||null;if(l&&typeof l=="string")return function(){Ou(l)}}return null}function YU(s){return(s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp&&s.disableSignUp.adminEmail||null}function JU(s){if((s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID))&&s.disableSignUp){var l=s.disableSignUp.helpLink||null;if(l&&typeof l=="string")return function(){Ou(l)}}return null}function qA(s,l){return s=(s=ki(s,l))&&s.scopes,Array.isArray(s)?s:[]}function GA(s,l){return s=(s=ki(s,l))&&s.customParameters,j(s)?(s=Yt(s),l===pe.auth.GoogleAuthProvider.PROVIDER_ID&&delete s.login_hint,l===pe.auth.GithubAuthProvider.PROVIDER_ID&&delete s.login,s):null}function XU(s){s=ki(s,pe.auth.PhoneAuthProvider.PROVIDER_ID);var l=null;return s&&typeof s.loginHint=="string"&&(l=FA(s.loginHint)),s&&s.defaultNationalNumber||l&&l.Aa||null}function ZU(s){var l=(s=ki(s,pe.auth.PhoneAuthProvider.PROVIDER_ID))&&s.defaultCountry||null;l=l&&OA(l);var d=null;return s&&typeof s.loginHint=="string"&&(d=FA(s.loginHint)),l&&l[0]||d&&Ya(d.a)||null}function A0(s){if(s=ki(s,pe.auth.PhoneAuthProvider.PROVIDER_ID),!s)return null;var l=s.whitelistedCountries,d=s.blacklistedCountries;if(typeof l<"u"&&(!Array.isArray(l)||l.length==0))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof d<"u"&&!Array.isArray(d))throw Error("BlacklistedCountries must be an array.");if(l&&d)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!l&&!d)return Xn;if(s=[],l){d={};for(var p=0;p<l.length;p++)for(var v=LA(l[p]),y=0;y<v.length;y++)d[v[y].c]=v[y];for(var R in d)d.hasOwnProperty(R)&&s.push(d[R])}else{for(R={},l=0;l<d.length;l++)for(v=LA(d[l]),p=0;p<v.length;p++)R[v[p].c]=v[p];for(v=0;v<Xn.length;v++)R!==null&&Xn[v].c in R||s.push(Xn[v])}return s}function WA(s){return S0(s.a,"queryParameterForWidgetMode")}function Gt(s){var l=s.a.get("tosUrl")||null;if(s=s.a.get("privacyPolicyUrl")||null,l&&!s&&Ao("Privacy Policy URL is missing, the link will not be displayed."),l&&s){if(typeof l=="function")return l;if(typeof l=="string")return function(){Ou(l)}}return null}function Wt(s){var l=s.a.get("tosUrl")||null,d=s.a.get("privacyPolicyUrl")||null;if(d&&!l&&Ao("Term of Service URL is missing, the link will not be displayed."),l&&d){if(typeof d=="function")return d;if(typeof d=="string")return function(){Ou(d)}}return null}function HA(s){return(s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID))&&typeof s.requireDisplayName<"u"?!!s.requireDisplayName:!0}function Gu(s){return s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID),!(!s||s.signInMethod!==pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function e6(s){return s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID),!(!s||!s.forceSameDevice)}function t6(s){if(Gu(s)){var l={url:Ds(),handleCodeInApp:!0};(s=ki(s,pe.auth.EmailAuthProvider.PROVIDER_ID))&&typeof s.emailLinkSignIn=="function"&&_s(l,s.emailLinkSignIn()),s=l.url;var d=Ds();d instanceof Wi||(d=fu(d)),s instanceof Wi||(s=fu(s));var p=d;d=new Wi(p);var v=!!s.j;v?cr(d,s.j):v=!!s.A,v?d.A=s.A:v=!!s.h,v?d.h=s.h:v=s.C!=null;var y=s.g;if(v)hu(d,s.C);else if(v=!!s.g){if(y.charAt(0)!="/"&&(p.h&&!p.g?y="/"+y:(p=d.g.lastIndexOf("/"),p!=-1&&(y=d.g.substr(0,p+1)+y))),y==".."||y==".")y="";else if(y.indexOf("./")!=-1||y.indexOf("/.")!=-1){p=y.lastIndexOf("/",0)==0,y=y.split("/");for(var R=[],U=0;U<y.length;){var q=y[U++];q=="."?p&&U==y.length&&R.push(""):q==".."?((1<R.length||R.length==1&&R[0]!="")&&R.pop(),p&&U==y.length&&R.push("")):(R.push(q),p=!0)}y=R.join("/")}}return v?d.g=y:v=s.a.toString()!=="",v?po(d,th(s.a)):v=!!s.s,v&&(d.s=s.s),l.url=d.toString(),l}return null}function R0(s){var l=!!s.a.get("immediateFederatedRedirect"),d=qu(s);return s=KA(s),l&&d.length==1&&!Dt(BA,d[0])&&s==Mg}function KA(s){s=s.a.get("signInFlow");for(var l in N0)if(N0[l]==s)return N0[l];return Mg}function P0(s){return Ah(s).signInSuccess||null}function QA(s){return Ah(s).signInSuccessWithAuthResult||null}function YA(s){return Ah(s).signInFailure||null}function Ah(s){return s.a.get("callbacks")||{}}var k0="googleyolo",Lg="none",x0={nc:k0,NONE:Lg},Mg="redirect",N0={qc:"popup",rc:Mg},D0={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},n6=["anonymous"],i6=["sitekey","tabindex","callback","expired-callback"],Rh,Wu,O0,JA,He={};function ce(s,l,d,p){He[s].apply(null,Array.prototype.slice.call(arguments,1))}function XA(s){return s.classList?s.classList:(s=s.className,S(s)&&s.match(/\S+/g)||[])}function Ph(s,l){return s.classList?s.classList.contains(l):Dt(XA(s),l)}function Jr(s,l){s.classList?s.classList.add(l):Ph(s,l)||(s.className+=0<s.className.length?" "+l:l)}function Xr(s,l){s.classList?s.classList.remove(l):Ph(s,l)&&(s.className=ar(XA(s),function(d){return d!=l}).join(" "))}function gn(s){var l=s.type;switch(S(l)&&l.toLowerCase()){case"checkbox":case"radio":return s.checked?s.value:null;case"select-one":return l=s.selectedIndex,0<=l?s.options[l].value:null;case"select-multiple":l=[];for(var d,p=0;d=s.options[p];p++)d.selected&&l.push(d.value);return l.length?l:null;default:return s.value!=null?s.value:null}}function ZA(s,l){var d=s.type;switch(S(d)&&d.toLowerCase()){case"checkbox":case"radio":s.checked=l;break;case"select-one":if(s.selectedIndex=-1,S(l)){for(var p=0;d=s.options[p];p++)if(d.value==l){d.selected=!0;break}}break;case"select-multiple":for(S(l)&&(l=[l]),p=0;d=s.options[p];p++)if(d.selected=!1,l)for(var v,y=0;v=l[y];y++)d.value==v&&(d.selected=!0);break;default:s.value=l??""}}function r6(s){if(s.altKey&&!s.ctrlKey||s.metaKey||112<=s.keyCode&&123>=s.keyCode)return!1;if(kh(s.keyCode))return!0;switch(s.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!ui;default:return 166>s.keyCode||183<s.keyCode}}function eR(s,l,d,p,v,y){if(an&&!Qn("525"))return!0;if(fr&&v)return kh(s);if(v&&!p)return!1;if(!ui){typeof l=="number"&&(l=L0(l));var R=l==17||l==18||fr&&l==91;if((!d||fr)&&R||fr&&l==16&&(p||y))return!1}if((an||hr)&&p&&d)switch(s){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(vt&&p&&l==s)return!1;switch(s){case 13:return ui?y||v?!1:!(d&&p):!0;case 27:return!(an||hr||ui)}return ui&&(p||v||y)?!1:kh(s)}function kh(s){if(48<=s&&57>=s||96<=s&&106>=s||65<=s&&90>=s||(an||hr)&&s==0)return!0;switch(s){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return ui;default:return!1}}function L0(s){if(ui)s=s6(s);else if(fr&&an)switch(s){case 93:s=91}return s}function s6(s){switch(s){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return s}}function Hu(s){Xt.call(this),this.a=s,yr(s,"keydown",this.g,!1,this),yr(s,"click",this.h,!1,this)}_e(Hu,Xt),Hu.prototype.g=function(s){(s.keyCode==13||an&&s.keyCode==3)&&tR(this,s)},Hu.prototype.h=function(s){tR(this,s)};function tR(s,l){var d=new iR(l);if(bo(s,d)){d=new nR(l);try{bo(s,d)}finally{l.stopPropagation()}}}Hu.prototype.o=function(){Hu.K.o.call(this),Ga(this.a,"keydown",this.g,!1,this),Ga(this.a,"click",this.h,!1,this),delete this.a};function nR(s){Jn.call(this,s.a),this.type="action"}_e(nR,Jn);function iR(s){Jn.call(this,s.a),this.type="beforeaction"}_e(iR,Jn);function Ku(s){Xt.call(this),this.a=s,s=vt?"focusout":"blur",this.g=yr(this.a,vt?"focusin":"focus",this,!vt),this.h=yr(this.a,s,this,!vt)}_e(Ku,Xt),Ku.prototype.handleEvent=function(s){var l=new Jn(s.a);l.type=s.type=="focusin"||s.type=="focus"?"focusin":"focusout",bo(this,l)},Ku.prototype.o=function(){Ku.K.o.call(this),So(this.g),So(this.h),delete this.a};function Vg(s,l){Xt.call(this),this.g=s||1,this.a=l||g,this.h=O(this.gc,this),this.j=we()}_e(Vg,Xt),t=Vg.prototype,t.Ka=!1,t.aa=null,t.gc=function(){if(this.Ka){var s=we()-this.j;0<s&&s<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-s):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),bo(this,"tick"),this.Ka&&(Fg(this),this.start()))}},t.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=we())};function Fg(s){s.Ka=!1,s.aa&&(s.a.clearTimeout(s.aa),s.aa=null)}t.o=function(){Vg.K.o.call(this),Fg(this),delete this.a};function o6(s,l){if(B(s))l&&(s=O(s,l));else if(s&&typeof s.handleEvent=="function")s=O(s.handleEvent,s);else throw Error("Invalid listener argument");return g.setTimeout(s,0)}function Qu(s){yt.call(this),this.g=s,this.a={}}_e(Qu,yt);var rR=[];function Yu(s,l,d,p){A(d)||(d&&(rR[0]=d.toString()),d=rR);for(var v=0;v<d.length;v++){var y=yr(l,d[v],p||s.handleEvent,!1,s.g||s);if(!y)break;s.a[y.key]=y}}function sR(s){Qd(s.a,function(l,d){this.a.hasOwnProperty(d)&&So(l)},s),s.a={}}Qu.prototype.o=function(){Qu.K.o.call(this),sR(this)},Qu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function xh(s){Xt.call(this),this.a=null,this.g=s,s=vt||hr||an&&!Qn("531")&&s.tagName=="TEXTAREA",this.h=new Qu(this),Yu(this.h,this.g,s?["keydown","paste","cut","drop","input"]:"input",this)}_e(xh,Xt),xh.prototype.handleEvent=function(s){if(s.type=="input")vt&&Qn(10)&&s.keyCode==0&&s.j==0||(M0(this),bo(this,oR(s)));else if(s.type!="keydown"||r6(s)){var l=s.type=="keydown"?this.g.value:null;vt&&s.keyCode==229&&(l=null);var d=oR(s);M0(this),this.a=o6(function(){this.a=null,this.g.value!=l&&bo(this,d)},this)}};function M0(s){s.a!=null&&(g.clearTimeout(s.a),s.a=null)}function oR(s){return s=new Jn(s.a),s.type="input",s}xh.prototype.o=function(){xh.K.o.call(this),this.h.m(),M0(this),delete this.g};function Nh(s,l){Xt.call(this),s&&(this.Oa&&dR(this),this.qa=s,this.Na=yr(this.qa,"keypress",this,l),this.Ya=yr(this.qa,"keydown",this.Jb,l,this),this.Oa=yr(this.qa,"keyup",this.Kb,l,this))}_e(Nh,Xt),t=Nh.prototype,t.qa=null,t.Na=null,t.Ya=null,t.Oa=null,t.R=-1,t.X=-1,t.Ua=!1;var aR={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},lR={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},uR=!an||Qn("525"),cR=fr&&ui;t=Nh.prototype,t.Jb=function(s){(an||hr)&&(this.R==17&&!s.ctrlKey||this.R==18&&!s.altKey||fr&&this.R==91&&!s.metaKey)&&(this.X=this.R=-1),this.R==-1&&(s.ctrlKey&&s.keyCode!=17?this.R=17:s.altKey&&s.keyCode!=18?this.R=18:s.metaKey&&s.keyCode!=91&&(this.R=91)),uR&&!eR(s.keyCode,this.R,s.shiftKey,s.ctrlKey,s.altKey,s.metaKey)?this.handleEvent(s):(this.X=L0(s.keyCode),cR&&(this.Ua=s.altKey))},t.Kb=function(s){this.X=this.R=-1,this.Ua=s.altKey},t.handleEvent=function(s){var l=s.a,d=l.altKey;if(vt&&s.type=="keypress")var p=this.X,v=p!=13&&p!=27?l.keyCode:0;else(an||hr)&&s.type=="keypress"?(p=this.X,v=0<=l.charCode&&63232>l.charCode&&kh(p)?l.charCode:0):yu&&!an?(p=this.X,v=kh(p)?l.keyCode:0):(s.type=="keypress"?(cR&&(d=this.Ua),l.keyCode==l.charCode?32>l.keyCode?(p=l.keyCode,v=0):(p=this.X,v=l.charCode):(p=l.keyCode||this.X,v=l.charCode||0)):(p=l.keyCode||this.X,v=l.charCode||0),fr&&v==63&&p==224&&(p=191));var y=p=L0(p);p?63232<=p&&p in aR?y=aR[p]:p==25&&s.shiftKey&&(y=9):l.keyIdentifier&&l.keyIdentifier in lR&&(y=lR[l.keyIdentifier]),ui&&uR&&s.type=="keypress"&&!eR(y,this.R,s.shiftKey,s.ctrlKey,d,s.metaKey)||(s=y==this.R,this.R=y,l=new hR(y,v,s,l),l.altKey=d,bo(this,l))},t.N=function(){return this.qa};function dR(s){s.Na&&(So(s.Na),So(s.Ya),So(s.Oa),s.Na=null,s.Ya=null,s.Oa=null),s.qa=null,s.R=-1,s.X=-1}t.o=function(){Nh.K.o.call(this),dR(this)};function hR(s,l,d,p){Jn.call(this,p),this.type="key",this.keyCode=s,this.j=l,this.repeat=d}_e(hR,Jn);function Ju(s,l,d,p){this.top=s,this.right=l,this.bottom=d,this.left=p}Ju.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Ju.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Ju.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Ju.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};function Ug(s,l){var d=wo(s);return d.defaultView&&d.defaultView.getComputedStyle&&(s=d.defaultView.getComputedStyle(s,null))&&(s[l]||s.getPropertyValue(l))||""}function fR(s){try{var l=s.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return vt&&s.ownerDocument.body&&(s=s.ownerDocument,l.left-=s.documentElement.clientLeft+s.body.clientLeft,l.top-=s.documentElement.clientTop+s.body.clientTop),l}function a6(s,l){l=l||Tu(document);var d=l||Tu(document),p=pR(s),v=pR(d);if(!vt||9<=Number(Yn)){R=Ug(d,"borderLeftWidth");var y=Ug(d,"borderRightWidth");U=Ug(d,"borderTopWidth"),q=Ug(d,"borderBottomWidth"),y=new Ju(parseFloat(U),parseFloat(y),parseFloat(q),parseFloat(R))}else{var R=Bg(d,"borderLeft");y=Bg(d,"borderRight");var U=Bg(d,"borderTop"),q=Bg(d,"borderBottom");y=new Ju(U,y,q,R)}d==Tu(document)?(R=p.a-d.scrollLeft,p=p.g-d.scrollTop,!vt||10<=Number(Yn)||(R+=y.left,p+=y.top)):(R=p.a-v.a-y.left,p=p.g-v.g-y.top),v=s.offsetWidth,y=s.offsetHeight,U=an&&!v&&!y,_(v)&&!U||!s.getBoundingClientRect?s=new _o(v,y):(s=fR(s),s=new _o(s.right-s.left,s.bottom-s.top)),v=d.clientHeight-s.height,y=d.scrollLeft,U=d.scrollTop,y+=Math.min(R,Math.max(R-(d.clientWidth-s.width),0)),U+=Math.min(p,Math.max(p-v,0)),d=new ci(y,U),l.scrollLeft=d.a,l.scrollTop=d.g}function pR(s){var l=wo(s),d=new ci(0,0),p=l?wo(l):document;return p=!vt||9<=Number(Yn)||ja(p).a.compatMode=="CSS1Compat"?p.documentElement:p.body,s==p||(s=fR(s),p=ja(l).a,l=Tu(p),p=p.parentWindow||p.defaultView,l=vt&&Qn("10")&&p.pageYOffset!=l.scrollTop?new ci(l.scrollLeft,l.scrollTop):new ci(p.pageXOffset||l.scrollLeft,p.pageYOffset||l.scrollTop),d.a=s.left+l.a,d.g=s.top+l.g),d}var mR={thin:2,medium:4,thick:6};function Bg(s,l){if((s.currentStyle?s.currentStyle[l+"Style"]:null)=="none")return 0;var d=s.currentStyle?s.currentStyle[l+"Width"]:null;if(d in mR)s=mR[d];else if(/^\d+px?$/.test(d))s=parseInt(d,10);else{l=s.style.left;var p=s.runtimeStyle.left;s.runtimeStyle.left=s.currentStyle.left,s.style.left=d,d=s.style.pixelLeft,s.style.left=l,s.runtimeStyle.left=p,s=+d}return s}function V0(){}E(V0),V0.prototype.a=0;function Xa(s){Xt.call(this),this.s=s||ja(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}_e(Xa,Xt),t=Xa.prototype,t.Lb=V0.Xa(),t.N=function(){return this.g};function ze(s,l){return s.g?Rs(l,s.g||s.s.a):null}function Dh(s){return s.L||(s.L=new Qu(s)),s.L}t.Za=function(s){if(this.Y&&this.Y!=s)throw Error("Method not supported");Xa.K.Za.call(this,s)},t.kb=function(){this.g=this.s.a.createElement("DIV")},t.render=function(s){if(this.na)throw Error("Component already rendered");this.g||this.kb(),s?s.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},t.v=function(){this.na=!0,F0(this,function(s){!s.na&&s.N()&&s.v()})},t.ya=function(){F0(this,function(s){s.na&&s.ya()}),this.L&&sR(this.L),this.na=!1},t.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),F0(this,function(s){s.m()}),this.g&&Ps(this.g),this.Y=this.g=this.oa=this.Ea=null,Xa.K.o.call(this)};function F0(s,l){s.Ea&&je(s.Ea,l,void 0)}t.removeChild=function(s,l){if(s){var d=S(s)?s:s.cb||(s.cb=":"+(s.Lb.a++).toString(36));if(this.oa&&d?(s=this.oa,s=(s!==null&&d in s?s[d]:void 0)||null):s=null,d&&s){var p=this.oa;if(d in p&&delete p[d],Bm(this.Ea,s),l&&(s.ya(),s.g&&Ps(s.g)),l=s,l==null)throw Error("Unable to set parent component");l.Y=null,Xa.K.Za.call(l,null)}}if(!s)throw Error("Child is not in parent component");return s};function Lt(s,l){var d=uh(s,"firebaseui-textfield");l?(Xr(s,"firebaseui-input-invalid"),Jr(s,"firebaseui-input"),d&&Xr(d,"firebaseui-textfield-invalid")):(Xr(s,"firebaseui-input"),Jr(s,"firebaseui-input-invalid"),d&&Jr(d,"firebaseui-textfield-invalid"))}function Xu(s,l,d){l=new xh(l),Nn(s,V(Kr,l)),Yu(Dh(s),l,"input",d)}function Oh(s,l,d){l=new Nh(l),Nn(s,V(Kr,l)),Yu(Dh(s),l,"key",function(p){p.keyCode==13&&(p.stopPropagation(),p.preventDefault(),d(p))})}function l6(s,l,d){l=new Ku(l),Nn(s,V(Kr,l)),Yu(Dh(s),l,"focusin",d)}function u6(s,l,d){l=new Ku(l),Nn(s,V(Kr,l)),Yu(Dh(s),l,"focusout",d)}function At(s,l,d){l=new Hu(l),Nn(s,V(Kr,l)),Yu(Dh(s),l,"action",function(p){p.stopPropagation(),p.preventDefault(),d(p)})}function xi(s){Jr(s,"firebaseui-hidden")}function vn(s,l){l&&Su(s,l),Xr(s,"firebaseui-hidden")}function Zu(s){return!Ph(s,"firebaseui-hidden")&&s.style.display!="none"}function ec(s){s=s||{};var l=s.email,d=s.disabled,p='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return p=s.wc?p+"Enter new email address":p+"Email",p+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+Ct(l??"")+'"'+(d?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',oe(p)}function fi(s){s=s||{},s=s.label;var l='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return l=s?l+ye(s):l+"Next",oe(l+"</button>")}function U0(){var s=""+fi({label:ht("Sign In")});return oe(s)}function gR(){var s=""+fi({label:ht("Save")});return oe(s)}function _r(){var s=""+fi({label:ht("Continue")});return oe(s)}function vR(s){s=s||{},s=s.label;var l='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return l=s?l+ye(s):l+"Choose password",oe(l+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function yR(){var s={},l='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return l=s.current?l+"Current password":l+"Password",oe(l+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function _R(){return oe('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function Ni(s){s=s||{},s=s.label;var l='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return l=s?l+ye(s):l+"Cancel",oe(l+"</button>")}function Dn(s){var l="";return s.F&&s.D&&(l+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),oe(l)}function tc(s){var l="";return s.F&&s.D&&(l+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),oe(l)}function wR(s){return s='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+ye(s.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',oe(s)}wR.a="firebaseui.auth.soy2.element.infoBar";function ER(s){var l=s.content;return s=s.Ab,oe('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(s?" "+Ct(s):"")+'">'+ye(l)+"</dialog>")}function IR(s){var l=s.message;return oe(ER({content:dh('<div class="firebaseui-dialog-icon-wrapper"><div class="'+Ct(s.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+ye(l)+"</div>")}))}IR.a="firebaseui.auth.soy2.element.progressDialog";function TR(s){var l='<div class="firebaseui-list-box-actions">';s=s.items;for(var d=s.length,p=0;p<d;p++){var v=s[p];l+='<button type="button" data-listboxid="'+Ct(v.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(v.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+Ct(v.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+ye(v.label)+"</div></button>"}return l=""+ER({Ab:ht("firebaseui-list-box-dialog"),content:dh(l+"</div>")}),oe(l)}TR.a="firebaseui.auth.soy2.element.listBoxDialog";function jg(s){return s=s||{},oe(s.tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}jg.a="firebaseui.auth.soy2.element.busyIndicator";function Ro(s,l){return s=s||{},s=s.ga,Le(s.S?s.S:l.hb[s.providerId]?""+l.hb[s.providerId]:s.providerId&&s.providerId.indexOf("saml.")==0||s.providerId&&s.providerId.indexOf("oidc.")==0?s.providerId.substring(5):""+s.providerId)}function B0(s){SR(s,"upgradeElement")}function j0(s){SR(s,"downgradeElements")}var c6=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function SR(s,l){s&&window.componentHandler&&window.componentHandler[l]&&c6.forEach(function(d){Ph(s,d)&&window.componentHandler[l](s),je(As(d,s),function(p){window.componentHandler[l](p)})})}function bR(s,l,d){if(zg.call(this),document.body.appendChild(s),s.showModal||window.dialogPolyfill.registerDialog(s),s.showModal(),B0(s),l&&At(this,s,function(y){var R=s.getBoundingClientRect();(y.clientX<R.left||R.left+R.width<y.clientX||y.clientY<R.top||R.top+R.height<y.clientY)&&zg.call(this)}),!d){var p=this.N().parentElement||this.N().parentNode;if(p){var v=this;this.da=function(){if(s.open){var y=s.getBoundingClientRect().height,R=p.getBoundingClientRect().height,U=p.getBoundingClientRect().top-document.body.getBoundingClientRect().top,q=p.getBoundingClientRect().left-document.body.getBoundingClientRect().left,X=s.getBoundingClientRect().width,fe=p.getBoundingClientRect().width;s.style.top=(U+(R-y)/2).toString()+"px",y=q+(fe-X)/2,s.style.left=y.toString()+"px",s.style.right=(document.body.getBoundingClientRect().width-y-X).toString()+"px"}else window.removeEventListener("resize",v.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function zg(){var s=z0.call(this);s&&(j0(s),s.open&&s.close(),Ps(s),this.da&&window.removeEventListener("resize",this.da))}function z0(){return Rs("firebaseui-id-dialog")}function CR(){Ps(AR.call(this))}function AR(){return ze(this,"firebaseui-id-info-bar")}function RR(){return ze(this,"firebaseui-id-dismiss-info-bar")}var d6={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function $0(s,l,d){xs.call(this,s,l);for(var p in d)this[p]=d[p]}_e($0,xs);function K(s,l,d,p,v){Xa.call(this,d),this.fb=s,this.eb=l,this.Fa=!1,this.Ga=p||null,this.A=this.ca=null,this.Z=Yt(d6),_s(this.Z,v||{})}_e(K,Xa),t=K.prototype,t.kb=function(){var s=ks(this.fb,this.eb,this.Z,this.s);B0(s),this.g=s},t.v=function(){if(K.K.v.call(this),kC(_t(this),new $0("pageEnter",_t(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var s=this.Z.F;At(this,this.bb(),function(){s()})}if(this.ab()&&this.Z.D){var l=this.Z.D;At(this,this.ab(),function(){l()})}},t.ya=function(){kC(_t(this),new $0("pageExit",_t(this),{pageId:this.Ga})),K.K.ya.call(this)},t.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,j0(this.N()),K.K.o.call(this)};function h6(s){s.Fa=!0;var l=Ph(s.N(),"firebaseui-use-spinner");s.ca=window.setTimeout(function(){s.N()&&s.A===null&&(s.A=ks(jg,{tb:l},null,s.s),s.N().appendChild(s.A),B0(s.A))},500)}t.I=function(s,l,d,p){function v(){if(y.T)return null;y.Fa=!1,window.clearTimeout(y.ca),y.ca=null,y.A&&(j0(y.A),Ps(y.A),y.A=null)}var y=this;return y.Fa?null:(h6(y),s.apply(null,l).then(d,p).then(v,v))};function _t(s){return s.N().parentElement||s.N().parentNode}function Lh(s,l,d){Oh(s,l,function(){d.focus()})}function nc(s,l,d){Oh(s,l,function(){d()})}N(K.prototype,{a:function(s){CR.call(this);var l=ks(wR,{message:s},null,this.s);this.N().appendChild(l),At(this,RR.call(this),function(){Ps(l)})},yc:CR,Ac:AR,zc:RR,$:function(s,l){s=ks(IR,{Ma:s,message:l},null,this.s),bR.call(this,s)},h:zg,Cb:z0,Cc:function(){return ze(this,"firebaseui-tos")},bb:function(){return ze(this,"firebaseui-tos-link")},ab:function(){return ze(this,"firebaseui-pp-link")},Dc:function(){return ze(this,"firebaseui-tos-list")}});function PR(s,l,d){s=s||{},l=s.Va;var p=s.ia;return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ec(s)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(l?Ni(null):"")+fi(null)+'</div></div><div class="firebaseui-card-footer">'+(p?tc(d):Dn(d))+"</div></form></div>",oe(s)}PR.a="firebaseui.auth.soy2.page.signIn";function kR(s,l,d){return s=s||{},l=s.ia,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+ec(s)+yR()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+_R()+'</div><div class="firebaseui-form-actions">'+U0()+'</div></div><div class="firebaseui-card-footer">'+(l?tc(d):Dn(d))+"</div></form></div>",oe(s)}kR.a="firebaseui.auth.soy2.page.passwordSignIn";function xR(s,l,d){s=s||{};var p=s.Tb;l=s.Ta;var v=s.ia,y='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+ec(s);return p?(s=s||{},s=s.name,s='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+Ct(s??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',s=oe(s)):s="",d=y+s+vR(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(l?Ni(null):"")+gR()+'</div></div><div class="firebaseui-card-footer">'+(v?tc(d):Dn(d))+"</div></form></div>",oe(d)}xR.a="firebaseui.auth.soy2.page.passwordSignUp";function NR(s,l,d){return s=s||{},l=s.Ta,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+ec(s)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(l?Ni(null):"")+fi({label:ht("Send")})+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(s)}NR.a="firebaseui.auth.soy2.page.passwordRecovery";function DR(s,l,d){l=s.G;var p="";return s="Follow the instructions sent to <strong>"+(ye(s.email)+"</strong> to recover your password"),p+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+'</p></div><div class="firebaseui-card-actions">',l&&(p+='<div class="firebaseui-form-actions">'+fi({label:ht("Done")})+"</div>"),p+='</div><div class="firebaseui-card-footer">'+Dn(d)+"</div></div>",oe(p)}DR.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent";function OR(s,l,d){return oe('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+jg(null)+"</div></div>")}OR.a="firebaseui.auth.soy2.page.callback";function LR(s,l,d){return oe('<div class="firebaseui-container firebaseui-id-page-spinner">'+jg({tb:!0})+"</div>")}LR.a="firebaseui.auth.soy2.page.spinner";function MR(){return oe('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}MR.a="firebaseui.auth.soy2.page.blank";function VR(s,l,d){l="",s="A sign-in email with additional instructions was sent to <strong>"+(ye(s.email)+"</strong>. Check your email to complete sign-in.");var p=oe('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');return l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+s+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+p+'</div><div class="firebaseui-form-actions">'+Ni({label:ht("Back")})+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(l)}VR.a="firebaseui.auth.soy2.page.emailLinkSignInSent";function FR(s,l,d){return s=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn't work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">`+oe('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+Ni({label:ht("Back")})+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(s)}FR.a="firebaseui.auth.soy2.page.emailNotReceived";function UR(s,l,d){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+ec(s)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni(null)+fi(null)+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(s)}UR.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation";function BR(){var s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni({label:ht("Dismiss")})+"</div></div></div>";return oe(s)}BR.a="firebaseui.auth.soy2.page.differentDeviceError";function jR(){var s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni({label:ht("Dismiss")})+"</div></div></div>";return oe(s)}jR.a="firebaseui.auth.soy2.page.anonymousUserMismatch";function zR(s,l,d){return l="",s="You’ve already used <strong>"+(ye(s.email)+"</strong> to sign in. Enter your password for that account."),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+s+"</p>"+yR()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+_R()+'</div><div class="firebaseui-form-actions">'+U0()+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(l)}zR.a="firebaseui.auth.soy2.page.passwordLinking";function $R(s,l,d){var p=s.email;return l="",s=""+Ro(s,d),s=ht(s),p="You’ve already used <strong>"+(ye(p)+("</strong>. You can connect your <strong>"+(ye(s)+("</strong> account with <strong>"+(ye(p)+"</strong> by signing in with email link below."))))),s="For this flow to successfully connect your "+(ye(s)+" account with this email, you have to open the link on the same device or browser."),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+p+'<p class="firebaseui-text firebaseui-text-justify">'+s+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+U0()+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(l)}$R.a="firebaseui.auth.soy2.page.emailLinkSignInLinking";function qR(s,l,d){l="";var p=""+Ro(s,d);return p=ht(p),s="You originally intended to connect <strong>"+(ye(p)+"</strong> to your email account but have opened the link on a different device where you are not signed in."),p="If you still want to connect your <strong>"+(ye(p)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device."),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+s+'</p><p class="firebaseui-text firebaseui-text-justify">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+_r()+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(l)}qR.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice";function GR(s,l,d){var p=s.email;return l="",s=""+Ro(s,d),s=ht(s),p="You’ve already used <strong>"+(ye(p)+("</strong>. Sign in with "+(ye(s)+" to continue."))),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fi({label:ht("Sign in with "+s)})+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(l)}GR.a="firebaseui.auth.soy2.page.federatedLinking";function WR(s,l,d){s=s||{};var p=s.kc;l=s.yb,s=s.Eb;var v='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return p?(p="<strong>"+(ye(p)+"</strong> is not authorized to view the requested page."),v+=p):v+="User is not authorized to view the requested page.",v+="</p>",l&&(l="Please contact <strong>"+(ye(l)+"</strong> for authorization."),v+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+l+"</p>"),v+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',s&&(v+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),v+='</div><div class="firebaseui-form-actions">'+Ni({label:ht("Back")})+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(v)}WR.a="firebaseui.auth.soy2.page.unauthorizedUser";function HR(s,l,d){return l="",s="To continue sign in with <strong>"+(ye(s.email)+"</strong> on this device, you have to recover the password."),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni(null)+fi({label:ht("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(l)}HR.a="firebaseui.auth.soy2.page.unsupportedProvider";function KR(s){var l="",d='<p class="firebaseui-text">for <strong>'+(ye(s.email)+"</strong></p>");return l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+d+vR(Pu(s))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+gR()+"</div></div></form></div>",oe(l)}KR.a="firebaseui.auth.soy2.page.passwordReset";function QR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",oe(s)}QR.a="firebaseui.auth.soy2.page.passwordResetSuccess";function YR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",oe(s)}YR.a="firebaseui.auth.soy2.page.passwordResetFailure";function JR(s){var l=s.G,d="";return s="Your sign-in email address has been changed back to <strong>"+(ye(s.email)+"</strong>."),d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(l?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></form></div>",oe(d)}JR.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess";function XR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",oe(s)}XR.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure";function ZR(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",oe(s)}ZR.a="firebaseui.auth.soy2.page.emailVerificationSuccess";function eP(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",oe(s)}eP.a="firebaseui.auth.soy2.page.emailVerificationFailure";function tP(s){var l=s.G,d="";return s="You can now sign in with your new email <strong>"+(ye(s.email)+"</strong>."),d+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+'</p></div><div class="firebaseui-card-actions">'+(l?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",oe(d)}tP.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess";function nP(s){return s=s||{},s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",oe(s)}nP.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure";function iP(s){var l=s.factorId,d=s.phoneNumber;s=s.G;var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(l){case"phone":l="The <strong>"+(ye(l)+(" "+(ye(d)+"</strong> was removed as a second authentication step."))),p+=l;break;default:p+="The device or app was removed as a second authentication step."}return p+=`</p><p class="firebaseui-text">If you don't recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">`+(s?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></form></div>",oe(p)}iP.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess";function rP(s){return s=s||{},s=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn't remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn't work, contact support for assistance.</p></div><div class="firebaseui-card-actions">`+(s.G?'<div class="firebaseui-form-actions">'+_r()+"</div>":"")+"</div></div>",oe(s)}rP.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure";function sP(s){var l=s.zb;return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+ye(s.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',l&&(s+=fi({label:ht("Retry")})),oe(s+"</div></div></div>")}sP.a="firebaseui.auth.soy2.page.recoverableError";function oP(s){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+ye(s.errorMessage)+"</p></div></div>",oe(s)}oP.a="firebaseui.auth.soy2.page.unrecoverableError";function aP(s,l,d){var p=s.Qb;return l="",s="Continue with "+(ye(s.jc)+"?"),p="You originally wanted to sign in with "+ye(p),l+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+s+'</h2><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni(null)+fi({label:ht("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form></div>",oe(l)}aP.a="firebaseui.auth.soy2.page.emailMismatch";function lP(s,l,d){var p='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';s=s.Sb,l=s.length;for(var v=0;v<l;v++){var y={ga:s[v]},R=d;y=y||{};var U=y.ga,q=y;q=q||{};var X="";switch(q.ga.providerId){case"google.com":X+="firebaseui-idp-google";break;case"github.com":X+="firebaseui-idp-github";break;case"facebook.com":X+="firebaseui-idp-facebook";break;case"twitter.com":X+="firebaseui-idp-twitter";break;case"phone":X+="firebaseui-idp-phone";break;case"anonymous":X+="firebaseui-idp-anonymous";break;case"password":X+="firebaseui-idp-password";break;default:X+="firebaseui-idp-generic"}q='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+Ct(Le(X))+' firebaseui-id-idp-button" data-provider-id="'+Ct(U.providerId)+'" style="background-color:',X=(X=y)||{},X=X.ga,q=q+Ct(hh(Le(X.ta?X.ta:R.wa[X.providerId]?""+R.wa[X.providerId]:X.providerId.indexOf("saml.")==0?""+R.wa.saml:X.providerId.indexOf("oidc.")==0?""+R.wa.oidc:""+R.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var fe=y;X=R,fe=fe||{},fe=fe.ga,X=tg(fe.za?Hr(fe.za):X.xa[fe.providerId]?Hr(X.xa[fe.providerId]):fe.providerId.indexOf("saml.")==0?Hr(X.xa.saml):fe.providerId.indexOf("oidc.")==0?Hr(X.xa.oidc):Hr(X.xa.password)),q=q+Ct(Hr(X))+'"></span>',U.providerId=="password"?(q+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',U.V?q+=ye(U.V):U.S?(y="Sign in with "+ye(Ro(y,R)),q+=y):q+="Sign in with email",q+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',q=U.S?q+ye(U.S):q+"Email",q+="</span>"):U.providerId=="phone"?(q+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',U.V?q+=ye(U.V):U.S?(y="Sign in with "+ye(Ro(y,R)),q+=y):q+="Sign in with phone",q+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',q=U.S?q+ye(U.S):q+"Phone",q+="</span>"):U.providerId=="anonymous"?(q+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',U.V?q+=ye(U.V):U.S?(y="Sign in with "+ye(Ro(y,R)),q+=y):q+="Continue as guest",q+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',q=U.S?q+ye(U.S):q+"Guest",q+="</span>"):(q+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',U.V?q+=ye(U.V):(X="Sign in with "+ye(Ro(y,R)),q+=X),q+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(U.S?ye(U.S):ye(Ro(y,R)))+"</span>"),U=oe(q+"</button>"),p+='<li class="firebaseui-list-item">'+U+"</li>"}return p+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+tc(d)+"</div></div>",oe(p)}lP.a="firebaseui.auth.soy2.page.providerSignIn";function uP(s,l,d){s=s||{};var p=s.Gb,v=s.Va;l=s.ia,s=s||{},s=s.Aa,s='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+Ct(s??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+oe(s);var y;return p?y=oe('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):y="",y=s+y+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(v?Ni(null):"")+fi({label:ht("Verify")})+'</div></div><div class="firebaseui-card-footer">',l?(l='<p class="firebaseui-tos firebaseui-phone-tos">',l=d.F&&d.D?l+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':l+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",d=oe(l+"</p>")):d=oe('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+Dn(d),oe(y+d+"</div></form></div>")}uP.a="firebaseui.auth.soy2.page.phoneSignInStart";function cP(s,l,d){s=s||{},l=s.phoneNumber;var p="";return s='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(ye(l)+"</a>"),ye(l),l=p,p=oe('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'),d='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+s+"</p>"+p+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ni(null)+fi({label:ht("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Dn(d)+"</div></form>",s=oe('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),oe(l+(d+s+"</div>"))}cP.a="firebaseui.auth.soy2.page.phoneSignInFinish";function dP(){return oe('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}dP.a="firebaseui.auth.soy2.page.signOut";function hP(s,l,d){var p='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';s=s.ec,l=s.length;for(var v=0;v<l;v++){var y=s[v],R="",U=ye(y.displayName),q=y.tenantId?y.tenantId:"top-level-project";q=ht(q),R+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+Ct(q)+' firebaseui-id-tenant-selection-button"'+(y.tenantId?'data-tenant-id="'+Ct(y.tenantId)+'"':"")+'style="background-color:'+Ct(hh(y.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+Ct(Hr(y.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',y.V?R+=ye(y.V):(y="Sign in to "+ye(y.displayName),R+=y),R=oe(R+('</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+U+"</span></button>")),p+='<li class="firebaseui-list-item">'+R+"</li>"}return p+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+tc(d)+"</div></div>",oe(p)}hP.a="firebaseui.auth.soy2.page.selectTenant";function fP(s,l,d){return s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ec(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fi(null)+'</div></div><div class="firebaseui-card-footer">'+tc(d)+"</div></form></div>",oe(s)}fP.a="firebaseui.auth.soy2.page.providerMatchByEmail";function ln(){return ze(this,"firebaseui-id-submit")}function en(){return ze(this,"firebaseui-id-secondary-link")}function yn(s,l){At(this,ln.call(this),function(p){s(p)});var d=en.call(this);d&&l&&At(this,d,function(p){l(p)})}function $g(){return ze(this,"firebaseui-id-password")}function qg(){return ze(this,"firebaseui-id-password-error")}function pP(){var s=$g.call(this),l=qg.call(this);Xu(this,s,function(){Zu(l)&&(Lt(s,!0),xi(l))})}function mP(){var s=$g.call(this),l=qg.call(this);return gn(s)?(Lt(s,!0),xi(l),l=!0):(Lt(s,!1),vn(l,Le("Enter your password").toString()),l=!1),l?gn(s):null}function ic(s,l,d,p,v,y){K.call(this,zR,{email:s},y,"passwordLinking",{F:p,D:v}),this.w=l,this.H=d}u(ic,K),ic.prototype.v=function(){this.P(),this.M(this.w,this.H),nc(this,this.i(),this.w),this.i().focus(),K.prototype.v.call(this)},ic.prototype.o=function(){this.w=null,K.prototype.o.call(this)},ic.prototype.j=function(){return gn(ze(this,"firebaseui-id-email"))},N(ic.prototype,{i:$g,B:qg,P:pP,u:mP,ea:ln,ba:en,M:yn});var f6=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Os(){return ze(this,"firebaseui-id-email")}function Po(){return ze(this,"firebaseui-id-email-error")}function rc(s){var l=Os.call(this),d=Po.call(this);Xu(this,l,function(){Zu(d)&&(Lt(l,!0),xi(d))}),s&&Oh(this,l,function(){s()})}function sc(){return Pn(gn(Os.call(this))||"")}function oc(){var s=Os.call(this),l=Po.call(this),d=gn(s)||"";return d?f6.test(d)?(Lt(s,!0),xi(l),l=!0):(Lt(s,!1),vn(l,Le("That email address isn't correct").toString()),l=!1):(Lt(s,!1),vn(l,Le("Enter your email address to continue").toString()),l=!1),l?Pn(gn(s)):null}function Mh(s,l,d,p,v,y,R){K.call(this,kR,{email:d,ia:!!y},R,"passwordSignIn",{F:p,D:v}),this.w=s,this.H=l}u(Mh,K),Mh.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),Lh(this,this.l(),this.i()),nc(this,this.i(),this.w),gn(this.l())?this.i().focus():this.l().focus(),K.prototype.v.call(this)},Mh.prototype.o=function(){this.H=this.w=null,K.prototype.o.call(this)},N(Mh.prototype,{l:Os,U:Po,P:rc,M:sc,j:oc,i:$g,B:qg,ea:pP,u:mP,ua:ln,pa:en,ba:yn});function Ye(s,l,d,p,v,y){K.call(this,s,l,p,v||"notice",y),this.i=d||null}_e(Ye,K),Ye.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Ye.K.v.call(this)},Ye.prototype.o=function(){this.i=null,Ye.K.o.call(this)},N(Ye.prototype,{l:ln,w:en,u:yn});function Gg(s,l,d,p,v){Ye.call(this,DR,{email:s,G:!!l},l,v,"passwordRecoveryEmailSent",{F:d,D:p})}_e(Gg,Ye);function gP(s,l){Ye.call(this,ZR,{G:!!s},s,l,"emailVerificationSuccess")}_e(gP,Ye);function vP(s,l){Ye.call(this,eP,{G:!!s},s,l,"emailVerificationFailure")}_e(vP,Ye);function yP(s,l,d){Ye.call(this,tP,{email:s,G:!!l},l,d,"verifyAndChangeEmailSuccess")}_e(yP,Ye);function _P(s,l){Ye.call(this,nP,{G:!!s},s,l,"verifyAndChangeEmailFailure")}_e(_P,Ye);function wP(s,l){Ye.call(this,rP,{G:!!s},s,l,"revertSecondFactorAdditionFailure")}_e(wP,Ye);function EP(s){Ye.call(this,dP,void 0,void 0,s,"signOut")}_e(EP,Ye);function IP(s,l){Ye.call(this,QR,{G:!!s},s,l,"passwordResetSuccess")}_e(IP,Ye);function TP(s,l){Ye.call(this,YR,{G:!!s},s,l,"passwordResetFailure")}_e(TP,Ye);function SP(s,l){Ye.call(this,XR,{G:!!s},s,l,"emailChangeRevokeFailure")}_e(SP,Ye);function bP(s,l,d){Ye.call(this,sP,{errorMessage:s,zb:!!l},l,d,"recoverableError")}_e(bP,Ye);function CP(s,l){Ye.call(this,oP,{errorMessage:s},void 0,l,"unrecoverableError")}_e(CP,Ye);function Vh(s){if(s.code==="auth/invalid-credential"&&s.message&&s.message.indexOf("error=consent_required")!==-1)return{code:"auth/user-cancelled"};if(s.message&&s.message.indexOf("HTTP Cloud Function returned an error:")!==-1){var l=JSON.parse(s.message.substring(s.message.indexOf("{"),s.message.lastIndexOf("}")+1));return{code:s.code,message:l&&l.error&&l.error.message||s.message}}return s}function Ls(s,l,d,p){function v(R){if(!R.name||R.name!="cancel"){e:{var U=R.message;try{var q=((JSON.parse(U).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(q&&q.length){var X=!0;break e}}catch{}X=!1}if(X)R=_t(l),l.m(),st(s,R,void 0,Le("Your sign-in session has expired. Please try again.").toString());else{if(X=R&&R.message||"",R.code){if(R.code=="auth/email-already-in-use"||R.code=="auth/credential-already-in-use")return;X=Ze(R)}l.a(X)}}}if(KP(s),p)return AP(s,d),Ot();if(!d.credential)throw Error("No credential found!");if(!Me(s).currentUser&&!d.user)throw Error("User not logged in.");try{var y=G6(s,d)}catch(R){return Pi(R.code||R.message,R),l.a(R.code||R.message),Ot()}return d=y.then(function(R){AP(s,R)},v).then(void 0,v),Ce(s,y),Ot(d)}function AP(s,l){if(!l.user)throw Error("No user found");var d=QA(Q(s));if(P0(Q(s))&&d&&Ao("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),d){d=QA(Q(s));var p=RA(Ee(s))||void 0;hi(Th,Ee(s));var v=!1;KC()?((!d||d(l,p))&&(v=!0,yo(window.opener.location,Wg(s,p))),d||window.close()):(!d||d(l,p))&&(v=!0,yo(window.location,Wg(s,p))),v||s.reset()}else{d=l.user,l=l.credential,p=P0(Q(s)),v=RA(Ee(s))||void 0,hi(Th,Ee(s));var y=!1;KC()?((!p||p(d,l,v))&&(y=!0,yo(window.opener.location,Wg(s,v))),p||window.close()):(!p||p(d,l,v))&&(y=!0,yo(window.location,Wg(s,v))),y||s.reset()}}function Wg(s,l){if(s=l||Q(s).a.get("signInSuccessUrl"),!s)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return s}function Ze(s){var l={code:s.code};l=l||{};var d="";switch(l.code){case"auth/email-already-in-use":d+="The email address is already used by another account";break;case"auth/requires-recent-login":d+=Jt();break;case"auth/too-many-requests":d+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":d+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":d+="That email address doesn't match an existing account";break;case"auth/user-token-expired":d+=Jt();break;case"auth/weak-password":d+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":d+="The email and password you entered don't match";break;case"auth/network-request-failed":d+="A network error has occurred";break;case"auth/invalid-phone-number":d+=x();break;case"auth/invalid-verification-code":d+=Le("Wrong code. Try again.");break;case"auth/code-expired":d+="This code is no longer valid";break;case"auth/expired-action-code":d+="This code has expired.";break;case"auth/invalid-action-code":d+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(l=Le(d).toString())return l;try{return JSON.parse(s.message),Pi("Internal error: "+s.message,void 0),W().toString()}catch{return s.message}}function p6(s,l,d){var p=$u[l]&&pe.auth[$u[l]]?new pe.auth[$u[l]]:l.indexOf("saml.")==0?new pe.auth.SAMLAuthProvider(l):new pe.auth.OAuthProvider(l);if(!p)throw Error("Invalid Firebase Auth provider!");var v=qA(Q(s),l);if(p.addScope)for(var y=0;y<v.length;y++)p.addScope(v[y]);return v=GA(Q(s),l)||{},d&&(l==pe.auth.GoogleAuthProvider.PROVIDER_ID?s="login_hint":l==pe.auth.GithubAuthProvider.PROVIDER_ID?s="login":s=(s=Ch(Q(s),l))&&s.Ob,s&&(v[s]=d)),p.setCustomParameters&&p.setCustomParameters(v),p}function Fh(s,l,d,p){function v(){zU(new hA(s.h.tenantId||null),Ee(s)),Ce(s,l.I(O(s.dc,s),[q],function(){if((window.location&&window.location.protocol)==="file:")return Ce(s,$P(s).then(function(X){l.m(),hi(Qa,Ee(s)),ce("callback",s,U,Ot(X))},y))},R))}function y(X){if(hi(Qa,Ee(s)),!X.name||X.name!="cancel")switch(X=Vh(X),X.code){case"auth/popup-blocked":v();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":l.a(Ze(X));break;case"auth/admin-restricted-operation":l.m(),Ja(Q(s))?ce("handleUnauthorizedUser",s,U,null,d):ce("callback",s,U,Nu(X));break;default:l.m(),ce("callback",s,U,Nu(X))}}function R(X){hi(Qa,Ee(s)),X.name&&X.name=="cancel"||(Pi("signInWithRedirect: "+X.code,void 0),X=Ze(X),l.Ga=="blank"&&R0(Q(s))?(l.m(),ce("providerSignIn",s,U,X)):l.a(X))}var U=_t(l),q=p6(s,d,p);KA(Q(s))==Mg?v():Ce(s,q6(s,q).then(function(X){l.m(),ce("callback",s,U,Ot(X))},y))}function m6(s,l){Ce(s,l.I(O(s.$b,s),[],function(d){return l.m(),Ls(s,l,d,!0)},function(d){d.name&&d.name=="cancel"||(Pi("ContinueAsGuest: "+d.code,void 0),d=Ze(d),l.a(d))}))}function g6(s,l,d){function p(y){var R=!1;return y=l.I(O(s.ac,s),[y],function(U){var q=_t(l);l.m(),ce("callback",s,q,Ot(U)),R=!0},function(U){if((!U.name||U.name!="cancel")&&(!U||U.code!="auth/credential-already-in-use"))if(U&&U.code=="auth/email-already-in-use"&&U.email&&U.credential){var q=_t(l);l.m(),ce("callback",s,q,Nu(U))}else U&&U.code=="auth/admin-restricted-operation"&&Ja(Q(s))?(U=_t(l),l.m(),ce("handleUnauthorizedUser",s,U,null,pe.auth.GoogleAuthProvider.PROVIDER_ID)):(U=Ze(U),l.a(U))}),Ce(s,y),y.then(function(){return R},function(){return!1})}if(d&&d.credential&&d.clientId===zA(Q(s))){if(qA(Q(s),pe.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var v=JSON.parse(atob(d.credential.split(".")[1])).email}catch{}return Fh(s,l,pe.auth.GoogleAuthProvider.PROVIDER_ID,v),Ot(!0)}return p(pe.auth.GoogleAuthProvider.credential(d.credential))}return d&&l.a(Le("The selected credential for the authentication provider is not supported!").toString()),Ot(!1)}function v6(s,l){var d=l.j(),p=l.u();if(d)if(p){var v=pe.auth.EmailAuthProvider.credential(d,p);Ce(s,l.I(O(s.bc,s),[d,p],function(y){return Ls(s,l,{user:y.user,credential:v,operationType:y.operationType,additionalUserInfo:y.additionalUserInfo})},function(y){if(!y.name||y.name!="cancel")switch(y.code){case"auth/email-already-in-use":break;case"auth/email-exists":Lt(l.l(),!1),vn(l.U(),Ze(y));break;case"auth/too-many-requests":case"auth/wrong-password":Lt(l.i(),!1),vn(l.B(),Ze(y));break;default:Pi("verifyPassword: "+y.message,void 0),l.a(Ze(y))}}))}else l.i().focus();else l.l().focus()}function Hg(s){return s=qu(Q(s)),s.length==1&&s[0]==pe.auth.EmailAuthProvider.PROVIDER_ID}function RP(s){return s=qu(Q(s)),s.length==1&&s[0]==pe.auth.PhoneAuthProvider.PROVIDER_ID}function st(s,l,d,p){Hg(s)?p?ce("signIn",s,l,d,p):G0(s,l,d):s&&RP(s)&&!p?ce("phoneSignInStart",s,l):s&&R0(Q(s))&&!p?ce("federatedRedirect",s,l,d):ce("providerSignIn",s,l,p,d)}function PP(s,l,d,p){var v=_t(l);Ce(s,l.I(O(Me(s).fetchSignInMethodsForEmail,Me(s)),[d],function(y){l.m(),kP(s,v,y,d,p)},function(y){y=Ze(y),l.a(y)}))}function kP(s,l,d,p,v,y){d.length||Gu(Q(s))&&!Gu(Q(s))?Dt(d,pe.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ce("passwordSignIn",s,l,p,y):d.length==1&&d[0]===pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Gu(Q(s))?ce("sendEmailLinkForSignIn",s,l,p,function(){ce("signIn",s,l)}):ce("unsupportedProvider",s,l,p):(d=UA(d,qu(Q(s))))?(PA(new m0(p),Ee(s)),ce("federatedSignIn",s,l,p,d,v)):ce("unsupportedProvider",s,l,p):$A(Q(s))?ce("handleUnauthorizedUser",s,l,p,pe.auth.EmailAuthProvider.PROVIDER_ID):Gu(Q(s))?ce("sendEmailLinkForSignIn",s,l,p,function(){ce("signIn",s,l)}):ce("passwordSignUp",s,l,p,void 0,void 0,y)}function q0(s,l,d,p,v,y){var R=_t(l);Ce(s,l.I(O(s.Ib,s),[d,y],function(){l.m(),ce("emailLinkSignInSent",s,R,d,p,y)},v))}function G0(s,l,d){d?ce("prefilledEmailSignIn",s,l,d):ce("signIn",s,l)}function Uh(){return zr(Ds(),"oobCode")}function W0(){var s=zr(Ds(),"continueUrl");return s?function(){yo(window.location,s)}:null}function Bh(s,l){K.call(this,jR,void 0,l,"anonymousUserMismatch"),this.i=s}u(Bh,K),Bh.prototype.v=function(){var s=this;At(this,this.l(),function(){s.i()}),this.l().focus(),K.prototype.v.call(this)},Bh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},N(Bh.prototype,{l:en}),He.anonymousUserMismatch=function(s,l){var d=new Bh(function(){d.m(),st(s,l)});d.render(l),ke(s,d)};function Kg(s){K.call(this,OR,void 0,s,"callback")}u(Kg,K),Kg.prototype.I=function(s,l,d,p){return s.apply(null,l).then(d,p)};function xP(s,l,d){if(d.user){var p={user:d.user,credential:d.credential,operationType:d.operationType,additionalUserInfo:d.additionalUserInfo},v=Qr(Ee(s)),y=v&&v.g;if(y&&!_6(d.user,y))y6(s,l,p);else{var R=v&&v.a;R?Ce(s,d.user.linkWithCredential(R).then(function(U){p={user:U.user,credential:R,operationType:U.operationType,additionalUserInfo:U.additionalUserInfo},NP(s,l,p)},function(U){Qg(s,l,U)})):NP(s,l,p)}}else d=_t(l),l.m(),Yr(Ee(s)),st(s,d)}function NP(s,l,d){Yr(Ee(s)),Ls(s,l,d)}function Qg(s,l,d){var p=_t(l);Yr(Ee(s)),d=Ze(d),l.m(),st(s,p,void 0,d)}function DP(s,l,d,p){var v=_t(l);Ce(s,Me(s).fetchSignInMethodsForEmail(d).then(function(y){l.m(),y.length?Dt(y,pe.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ce("passwordLinking",s,v,d):y.length==1&&y[0]===pe.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?ce("emailLinkSignInLinking",s,v,d):(y=UA(y,qu(Q(s))))?ce("federatedLinking",s,v,d,y,p):(Yr(Ee(s)),ce("unsupportedProvider",s,v,d)):(Yr(Ee(s)),ce("passwordRecovery",s,v,d,!1,ne().toString()))},function(y){Qg(s,l,y)}))}function y6(s,l,d){var p=_t(l);Ce(s,ko(s).then(function(){l.m(),ce("emailMismatch",s,p,d)},function(v){v.name&&v.name=="cancel"||(v=Ze(v.code),l.a(v))}))}function _6(s,l){if(l==s.email)return!0;if(s.providerData){for(var d=0;d<s.providerData.length;d++)if(l==s.providerData[d].email)return!0}return!1}He.callback=function(s,l,d){var p=new Kg;p.render(l),ke(s,p),d=d||$P(s),Ce(s,d.then(function(v){xP(s,p,v)},function(v){if((v=Vh(v))&&(v.code=="auth/account-exists-with-different-credential"||v.code=="auth/email-already-in-use")&&v.email&&v.credential)PA(new m0(v.email,v.credential),Ee(s)),DP(s,p,v.email);else if(v&&v.code=="auth/user-cancelled"){var y=Qr(Ee(s)),R=Ze(v);y&&y.a?DP(s,p,y.g,R):y?PP(s,p,y.g,R):Qg(s,p,v)}else v&&v.code=="auth/credential-already-in-use"||(v&&v.code=="auth/operation-not-supported-in-this-environment"&&Hg(s)?xP(s,p,{user:null,credential:null}):v&&v.code=="auth/admin-restricted-operation"&&Ja(Q(s))?(p.m(),Yr(Ee(s)),ce("handleUnauthorizedUser",s,l,null,null)):Qg(s,p,v))}))};function jh(s,l){K.call(this,BR,void 0,l,"differentDeviceError"),this.i=s}u(jh,K),jh.prototype.v=function(){var s=this;At(this,this.l(),function(){s.i()}),this.l().focus(),K.prototype.v.call(this)},jh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},N(jh.prototype,{l:en}),He.differentDeviceError=function(s,l){var d=new jh(function(){d.m(),st(s,l)});d.render(l),ke(s,d)};function zh(s,l,d,p){K.call(this,JR,{email:s,G:!!d},p,"emailChangeRevoke"),this.l=l,this.i=d||null}u(zh,K),zh.prototype.v=function(){var s=this;At(this,ze(this,"firebaseui-id-reset-password-link"),function(){s.l()}),this.i&&(this.w(this.i),this.u().focus()),K.prototype.v.call(this)},zh.prototype.o=function(){this.l=this.i=null,K.prototype.o.call(this)},N(zh.prototype,{u:ln,B:en,w:yn});function $h(){return ze(this,"firebaseui-id-new-password")}function Yg(){return ze(this,"firebaseui-id-password-toggle")}function w6(){this.Ra=!this.Ra;var s=Yg.call(this),l=$h.call(this);this.Ra?(l.type="text",Jr(s,"firebaseui-input-toggle-off"),Xr(s,"firebaseui-input-toggle-on")):(l.type="password",Jr(s,"firebaseui-input-toggle-on"),Xr(s,"firebaseui-input-toggle-off")),l.focus()}function Jg(){return ze(this,"firebaseui-id-new-password-error")}function OP(){this.Ra=!1;var s=$h.call(this);s.type="password";var l=Jg.call(this);Xu(this,s,function(){Zu(l)&&(Lt(s,!0),xi(l))});var d=Yg.call(this);Jr(d,"firebaseui-input-toggle-on"),Xr(d,"firebaseui-input-toggle-off"),l6(this,s,function(){Jr(d,"firebaseui-input-toggle-focus"),Xr(d,"firebaseui-input-toggle-blur")}),u6(this,s,function(){Jr(d,"firebaseui-input-toggle-blur"),Xr(d,"firebaseui-input-toggle-focus")}),At(this,d,O(w6,this))}function LP(){var s=$h.call(this),l=Jg.call(this);return gn(s)?(Lt(s,!0),xi(l),l=!0):(Lt(s,!1),vn(l,Le("Enter your password").toString()),l=!1),l?gn(s):null}function qh(s,l,d){K.call(this,KR,{email:s},d,"passwordReset"),this.l=l}u(qh,K),qh.prototype.v=function(){this.H(),this.B(this.l),nc(this,this.i(),this.l),this.i().focus(),K.prototype.v.call(this)},qh.prototype.o=function(){this.l=null,K.prototype.o.call(this)},N(qh.prototype,{i:$h,w:Jg,M:Yg,H:OP,u:LP,U:ln,P:en,B:yn});function Gh(s,l,d,p,v){K.call(this,iP,{factorId:s,phoneNumber:d||null,G:!!p},v,"revertSecondFactorAdditionSuccess"),this.l=l,this.i=p||null}u(Gh,K),Gh.prototype.v=function(){var s=this;At(this,ze(this,"firebaseui-id-reset-password-link"),function(){s.l()}),this.i&&(this.w(this.i),this.u().focus()),K.prototype.v.call(this)},Gh.prototype.o=function(){this.l=this.i=null,K.prototype.o.call(this)},N(Gh.prototype,{u:ln,B:en,w:yn});function E6(s,l,d,p,v){var y=d.u();y&&Ce(s,d.I(O(Me(s).confirmPasswordReset,Me(s)),[p,y],function(){d.m();var R=new IP(v);R.render(l),ke(s,R)},function(R){MP(s,l,d,R)}))}function MP(s,l,d,p){(p&&p.code)=="auth/weak-password"?(s=Ze(p),Lt(d.i(),!1),vn(d.w(),s),d.i().focus()):(d&&d.m(),d=new TP,d.render(l),ke(s,d))}function I6(s,l,d){var p=new zh(d,function(){Ce(s,p.I(O(Me(s).sendPasswordResetEmail,Me(s)),[d],function(){p.m(),p=new Gg(d,void 0,Gt(Q(s)),Wt(Q(s))),p.render(l),ke(s,p)},function(){p.a(z().toString())}))});p.render(l),ke(s,p)}function T6(s,l,d,p){var v=new Gh(p.factorId,function(){v.I(O(Me(s).sendPasswordResetEmail,Me(s)),[d],function(){v.m(),v=new Gg(d,void 0,Gt(Q(s)),Wt(Q(s))),v.render(l),ke(s,v)},function(){v.a(z().toString())})},p.phoneNumber);v.render(l),ke(s,v)}He.passwordReset=function(s,l,d,p){Ce(s,Me(s).verifyPasswordResetCode(d).then(function(v){var y=new qh(v,function(){E6(s,l,y,d,p)});y.render(l),ke(s,y)},function(){MP(s,l)}))},He.emailChangeRevocation=function(s,l,d){var p=null;Ce(s,Me(s).checkActionCode(d).then(function(v){return p=v.data.email,Me(s).applyActionCode(d)}).then(function(){I6(s,l,p)},function(){var v=new SP;v.render(l),ke(s,v)}))},He.emailVerification=function(s,l,d,p){Ce(s,Me(s).applyActionCode(d).then(function(){var v=new gP(p);v.render(l),ke(s,v)},function(){var v=new vP;v.render(l),ke(s,v)}))},He.revertSecondFactorAddition=function(s,l,d){var p=null,v=null;Ce(s,Me(s).checkActionCode(d).then(function(y){return p=y.data.email,v=y.data.multiFactorInfo,Me(s).applyActionCode(d)}).then(function(){T6(s,l,p,v)},function(){var y=new wP;y.render(l),ke(s,y)}))},He.verifyAndChangeEmail=function(s,l,d,p){var v=null;Ce(s,Me(s).checkActionCode(d).then(function(y){return v=y.data.email,Me(s).applyActionCode(d)}).then(function(){var y=new yP(v,p);y.render(l),ke(s,y)},function(){var y=new _P;y.render(l),ke(s,y)}))};function Xg(s,l){try{var d=typeof s.selectionStart=="number"}catch{d=!1}d?(s.selectionStart=l,s.selectionEnd=l):vt&&!Qn("9")&&(s.type=="textarea"&&(l=s.value.substring(0,l).replace(/(\r\n|\r|\n)/g,`
`).length),s=s.createTextRange(),s.collapse(!0),s.move("character",l),s.select())}function Wh(s,l,d,p,v,y){K.call(this,UR,{email:d},y,"emailLinkSignInConfirmation",{F:p,D:v}),this.l=s,this.u=l}u(Wh,K),Wh.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Xg(this.i(),(this.i().value||"").length),K.prototype.v.call(this)},Wh.prototype.o=function(){this.u=this.l=null,K.prototype.o.call(this)},N(Wh.prototype,{i:Os,M:Po,w:rc,H:sc,j:oc,U:ln,P:en,B:yn}),He.emailLinkConfirmation=function(s,l,d,p,v,y){var R=new Wh(function(){var U=R.j();U?(R.m(),p(s,l,U,d)):R.i().focus()},function(){R.m(),st(s,l,v||void 0)},v||void 0,Gt(Q(s)),Wt(Q(s)));R.render(l),ke(s,R),y&&R.a(y)};function Hh(s,l,d,p,v){K.call(this,qR,{ga:s},v,"emailLinkSignInLinkingDifferentDevice",{F:d,D:p}),this.i=l}u(Hh,K),Hh.prototype.v=function(){this.u(this.i),this.l().focus(),K.prototype.v.call(this)},Hh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},N(Hh.prototype,{l:ln,u:yn}),He.emailLinkNewDeviceLinking=function(s,l,d,p){var v=new jn(d);if(d=v.a.a.get(bt.PROVIDER_ID)||null,gu(v,null),d){var y=new Hh(Ch(Q(s),d),function(){y.m(),p(s,l,v.toString())},Gt(Q(s)),Wt(Q(s)));y.render(l),ke(s,y)}else st(s,l)};function Zg(s){K.call(this,MR,void 0,s,"blank")}u(Zg,K);function H0(s,l,d,p,v){var y=new Zg,R=new jn(d),U=R.a.a.get(bt.$a)||"",q=R.a.a.get(bt.Sa)||"",X=R.a.a.get(bt.Qa)==="1",fe=mu(R),Je=R.a.a.get(bt.PROVIDER_ID)||null;R=R.a.a.get(bt.vb)||null,QP(s,R);var Ir=!ju(Bu,Ee(s)),ek=p||$U(q,Ee(s)),af=(p=qU(q,Ee(s)))&&p.a;Je&&af&&af.providerId!==Je&&(af=null),y.render(l),ke(s,y),Ce(s,y.I(function(){var Yi=Ot(null);Yi=fe&&Ir||Ir&&X?Nu(Error("anonymous-user-not-found")):j6(s,d).then(function(rE){if(Je&&!af)throw Error("pending-credential-not-found");return rE});var lf=null;return Yi.then(function(rE){return lf=rE,v?null:Me(s).checkActionCode(U)}).then(function(){return lf})},[],function(Yi){ek?b6(s,y,ek,d,af,Yi):X?(y.m(),ce("differentDeviceError",s,l)):(y.m(),ce("emailLinkConfirmation",s,l,d,VP))},function(Yi){var lf=void 0;if(!Yi||!Yi.name||Yi.name!="cancel")switch(y.m(),Yi&&Yi.message){case"anonymous-user-not-found":ce("differentDeviceError",s,l);break;case"anonymous-user-mismatch":ce("anonymousUserMismatch",s,l);break;case"pending-credential-not-found":ce("emailLinkNewDeviceLinking",s,l,d,S6);break;default:Yi&&(lf=Ze(Yi)),st(s,l,void 0,lf)}}))}function VP(s,l,d,p){H0(s,l,p,d,!0)}function S6(s,l,d){H0(s,l,d)}function b6(s,l,d,p,v,y){var R=_t(l);l.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Le("Signing in...").toString());var U=null;v=(y?z6(s,y,d,p,v):$6(s,d,p,v)).then(function(q){hi(Sh,Ee(s)),hi(Bu,Ee(s)),l.h(),l.$("firebaseui-icon-done",Le("Signed in!").toString()),U=setTimeout(function(){l.h(),Ls(s,l,q,!0)},1e3),Ce(s,function(){l&&(l.h(),l.m()),clearTimeout(U)})},function(q){if(l.h(),l.m(),!q.name||q.name!="cancel"){q=Vh(q);var X=Ze(q);q.code=="auth/email-already-in-use"||q.code=="auth/credential-already-in-use"?(hi(Sh,Ee(s)),hi(Bu,Ee(s))):q.code=="auth/invalid-email"?(X=Le("The email provided does not match the current sign-in session.").toString(),ce("emailLinkConfirmation",s,R,p,VP,null,X)):st(s,R,d,X)}}),Ce(s,v)}He.emailLinkSignInCallback=H0;function Kh(s,l,d,p,v,y){K.call(this,$R,{email:s,ga:l},y,"emailLinkSignInLinking",{F:p,D:v}),this.i=d}u(Kh,K),Kh.prototype.v=function(){this.u(this.i),this.l().focus(),K.prototype.v.call(this)},Kh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},N(Kh.prototype,{l:ln,u:yn});function C6(s,l,d,p){var v=_t(l);q0(s,l,d,function(){st(s,v,d)},function(y){if(!y.name||y.name!="cancel"){var R=Ze(y);y&&y.code=="auth/network-request-failed"?l.a(R):(l.m(),st(s,v,d,R))}},p)}He.emailLinkSignInLinking=function(s,l,d){var p=Qr(Ee(s));if(Yr(Ee(s)),p){var v=p.a.providerId,y=new Kh(d,Ch(Q(s),v),function(){C6(s,y,d,p)},Gt(Q(s)),Wt(Q(s)));y.render(l),ke(s,y)}else st(s,l)};function Qh(s,l,d,p,v,y){K.call(this,VR,{email:s},y,"emailLinkSignInSent",{F:p,D:v}),this.u=l,this.i=d}u(Qh,K),Qh.prototype.v=function(){var s=this;At(this,this.l(),function(){s.i()}),At(this,ze(this,"firebaseui-id-trouble-getting-email-link"),function(){s.u()}),this.l().focus(),K.prototype.v.call(this)},Qh.prototype.o=function(){this.i=this.u=null,K.prototype.o.call(this)},N(Qh.prototype,{l:en}),He.emailLinkSignInSent=function(s,l,d,p,v){var y=new Qh(d,function(){y.m(),ce("emailNotReceived",s,l,d,p,v)},function(){y.m(),p()},Gt(Q(s)),Wt(Q(s)));y.render(l),ke(s,y)};function Yh(s,l,d,p,v,y,R){K.call(this,aP,{jc:s,Qb:l},R,"emailMismatch",{F:v,D:y}),this.l=d,this.i=p}u(Yh,K),Yh.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),K.prototype.v.call(this)},Yh.prototype.o=function(){this.i=null,K.prototype.o.call(this)},N(Yh.prototype,{u:ln,B:en,w:yn}),He.emailMismatch=function(s,l,d){var p=Qr(Ee(s));if(p){var v=new Yh(d.user.email,p.g,function(){var y=v;Yr(Ee(s)),Ls(s,y,d)},function(){var y=d.credential.providerId,R=_t(v);v.m(),p.a?ce("federatedLinking",s,R,p.g,y):ce("federatedSignIn",s,R,p.g,y)},Gt(Q(s)),Wt(Q(s)));v.render(l),ke(s,v)}else st(s,l)};function ac(s,l,d,p,v){K.call(this,FR,void 0,v,"emailNotReceived",{F:d,D:p}),this.l=s,this.i=l}u(ac,K),ac.prototype.v=function(){var s=this;At(this,this.u(),function(){s.i()}),At(this,this.Da(),function(){s.l()}),this.u().focus(),K.prototype.v.call(this)},ac.prototype.Da=function(){return ze(this,"firebaseui-id-resend-email-link")},ac.prototype.o=function(){this.i=this.l=null,K.prototype.o.call(this)},N(ac.prototype,{u:en}),He.emailNotReceived=function(s,l,d,p,v){var y=new ac(function(){q0(s,y,d,p,function(R){R=Ze(R),y.a(R)},v)},function(){y.m(),st(s,l,d)},Gt(Q(s)),Wt(Q(s)));y.render(l),ke(s,y)};function lc(s,l,d,p,v,y){K.call(this,GR,{email:s,ga:l},y,"federatedLinking",{F:p,D:v}),this.i=d}u(lc,K),lc.prototype.v=function(){this.u(this.i),this.l().focus(),K.prototype.v.call(this)},lc.prototype.o=function(){this.i=null,K.prototype.o.call(this)},N(lc.prototype,{l:ln,u:yn}),He.federatedLinking=function(s,l,d,p,v){var y=Qr(Ee(s));if(y&&y.a){var R=new lc(d,Ch(Q(s),p),function(){Fh(s,R,p,d)},Gt(Q(s)),Wt(Q(s)));R.render(l),ke(s,R),v&&R.a(v)}else st(s,l)},He.federatedRedirect=function(s,l,d){var p=new Zg;p.render(l),ke(s,p),l=qu(Q(s))[0],Fh(s,p,l,d)},He.federatedSignIn=function(s,l,d,p,v){var y=new lc(d,Ch(Q(s),p),function(){Fh(s,y,p,d)},Gt(Q(s)),Wt(Q(s)));y.render(l),ke(s,y),v&&y.a(v)};function A6(s,l,d,p){var v=l.u();v?Ce(s,l.I(O(s.Xb,s),[d,v],function(y){return y=y.user.linkWithCredential(p).then(function(R){return Ls(s,l,{user:R.user,credential:p,operationType:R.operationType,additionalUserInfo:R.additionalUserInfo})}),Ce(s,y),y},function(y){if(!y.name||y.name!="cancel")switch(y.code){case"auth/wrong-password":Lt(l.i(),!1),vn(l.B(),Ze(y));break;case"auth/too-many-requests":l.a(Ze(y));break;default:Pi("signInWithEmailAndPassword: "+y.message,void 0),l.a(Ze(y))}})):l.i().focus()}He.passwordLinking=function(s,l,d){var p=Qr(Ee(s));Yr(Ee(s));var v=p&&p.a;if(v){var y=new ic(d,function(){A6(s,y,d,v)},function(){y.m(),ce("passwordRecovery",s,l,d)},Gt(Q(s)),Wt(Q(s)));y.render(l),ke(s,y)}else st(s,l)};function Jh(s,l,d,p,v,y){K.call(this,NR,{email:d,Ta:!!l},y,"passwordRecovery",{F:p,D:v}),this.l=s,this.u=l}u(Jh,K),Jh.prototype.v=function(){this.B(),this.H(this.l,this.u),gn(this.i())||this.i().focus(),nc(this,this.i(),this.l),K.prototype.v.call(this)},Jh.prototype.o=function(){this.u=this.l=null,K.prototype.o.call(this)},N(Jh.prototype,{i:Os,w:Po,B:rc,M:sc,j:oc,U:ln,P:en,H:yn});function R6(s,l){var d=l.j();if(d){var p=_t(l);Ce(s,l.I(O(Me(s).sendPasswordResetEmail,Me(s)),[d],function(){l.m();var v=new Gg(d,function(){v.m(),st(s,p)},Gt(Q(s)),Wt(Q(s)));v.render(p),ke(s,v)},function(v){Lt(l.i(),!1),vn(l.w(),Ze(v))}))}else l.i().focus()}He.passwordRecovery=function(s,l,d,p,v){var y=new Jh(function(){R6(s,y)},p?void 0:function(){y.m(),st(s,l)},d,Gt(Q(s)),Wt(Q(s)));y.render(l),ke(s,y),v&&y.a(v)},He.passwordSignIn=function(s,l,d,p){var v=new Mh(function(){v6(s,v)},function(){var y=v.M();v.m(),ce("passwordRecovery",s,l,y)},d,Gt(Q(s)),Wt(Q(s)),p);v.render(l),ke(s,v)};function K0(){return ze(this,"firebaseui-id-name")}function Q0(){return ze(this,"firebaseui-id-name-error")}function Xh(s,l,d,p,v,y,R,U,q){K.call(this,xR,{email:p,Tb:s,name:v,Ta:!!d,ia:!!U},q,"passwordSignUp",{F:y,D:R}),this.w=l,this.H=d,this.B=s}u(Xh,K),Xh.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(Lh(this,this.i(),this.u()),Lh(this,this.u(),this.l())):Lh(this,this.i(),this.l()),this.w&&nc(this,this.l(),this.w),gn(this.i())?this.B&&!gn(this.u())?this.u().focus():this.l().focus():this.i().focus(),K.prototype.v.call(this)},Xh.prototype.o=function(){this.H=this.w=null,K.prototype.o.call(this)},N(Xh.prototype,{i:Os,U:Po,ea:rc,jb:sc,j:oc,u:K0,Bc:Q0,Ja:function(){var s=K0.call(this),l=Q0.call(this);Xu(this,s,function(){Zu(l)&&(Lt(s,!0),xi(l))})},M:function(){var s=K0.call(this),l=Q0.call(this),d=gn(s);return d=!/^[\s\xa0]*$/.test(d==null?"":String(d)),Lt(s,d),d?(xi(l),l=!0):(vn(l,Le("Enter your account name").toString()),l=!1),l?Pn(gn(s)):null},l:$h,ba:Jg,lb:Yg,ua:OP,P:LP,Nb:ln,Mb:en,pa:yn});function P6(s,l){var d=HA(Q(s)),p=l.j(),v=null;d&&(v=l.M());var y=l.P();if(p){if(d)if(v)v=Br(v);else{l.u().focus();return}if(y){var R=pe.auth.EmailAuthProvider.credential(p,y);Ce(s,l.I(O(s.Yb,s),[p,y],function(U){var q={user:U.user,credential:R,operationType:U.operationType,additionalUserInfo:U.additionalUserInfo};return d?(U=U.user.updateProfile({displayName:v}).then(function(){return Ls(s,l,q)}),Ce(s,U),U):Ls(s,l,q)},function(U){if(!U.name||U.name!="cancel"){var q=Vh(U);switch(U=Ze(q),q.code){case"auth/email-already-in-use":return k6(s,l,p,q);case"auth/too-many-requests":U=Le("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Lt(l.l(),!1),vn(l.ba(),U);break;case"auth/admin-restricted-operation":Ja(Q(s))?(U=_t(l),l.m(),ce("handleUnauthorizedUser",s,U,p,pe.auth.EmailAuthProvider.PROVIDER_ID)):l.a(U);break;default:q="setAccountInfo: "+TA(q),Pi(q,void 0),l.a(U)}}}))}else l.l().focus()}else l.i().focus()}function k6(s,l,d,p){function v(){var R=Ze(p);Lt(l.i(),!1),vn(l.U(),R),l.i().focus()}var y=Me(s).fetchSignInMethodsForEmail(d).then(function(R){R.length?v():(R=_t(l),l.m(),ce("passwordRecovery",s,R,d,!1,ne().toString()))},function(){v()});return Ce(s,y),y}He.passwordSignUp=function(s,l,d,p,v,y){function R(){U.m(),st(s,l)}var U=new Xh(HA(Q(s)),function(){P6(s,U)},v?void 0:R,d,p,Gt(Q(s)),Wt(Q(s)),y);U.render(l),ke(s,U)};function Y0(){return ze(this,"firebaseui-id-phone-confirmation-code")}function FP(){return ze(this,"firebaseui-id-phone-confirmation-code-error")}function UP(){return ze(this,"firebaseui-id-resend-countdown")}function uc(s,l,d,p,v,y,R,U,q){K.call(this,cP,{phoneNumber:v},q,"phoneSignInFinish",{F:R,D:U}),this.jb=y,this.i=new Vg(1e3),this.B=y,this.P=s,this.l=l,this.H=d,this.M=p}u(uc,K),uc.prototype.v=function(){var s=this;this.U(this.jb),yr(this.i,"tick",this.w,!1,this),this.i.start(),At(this,ze(this,"firebaseui-id-change-phone-number-link"),function(){s.P()}),At(this,this.Da(),function(){s.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),K.prototype.v.call(this)},uc.prototype.o=function(){this.M=this.H=this.l=this.P=null,Fg(this.i),Ga(this.i,"tick",this.w),this.i=null,K.prototype.o.call(this)},uc.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Fg(this.i),Ga(this.i,"tick",this.w),this.ua(),this.lb())},N(uc.prototype,{u:Y0,pa:FP,Ja:function(s){var l=Y0.call(this),d=FP.call(this);Xu(this,l,function(){Zu(d)&&(Lt(l,!0),xi(d))}),s&&Oh(this,l,function(){s()})},ba:function(){var s=Pn(gn(Y0.call(this))||"");return/^\d{6}$/.test(s)?s:null},Fb:UP,U:function(s){Su(UP.call(this),Le("Resend code in "+((9<s?"0:":"0:0")+s)).toString())},ua:function(){xi(this.Fb())},Da:function(){return ze(this,"firebaseui-id-resend-link")},lb:function(){vn(this.Da())},Nb:ln,Mb:en,ea:yn});function x6(s,l,d,p){function v(R){l.u().focus(),Lt(l.u(),!1),vn(l.pa(),R)}var y=l.ba();y?(l.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Le("Verifying...").toString()),Ce(s,l.I(O(p.confirm,p),[y],function(R){l.h(),l.$("firebaseui-icon-done",Le("Verified!").toString());var U=setTimeout(function(){l.h(),l.m();var q={user:wr(s).currentUser,credential:null,operationType:R.operationType,additionalUserInfo:R.additionalUserInfo};Ls(s,l,q,!0)},1e3);Ce(s,function(){l&&l.h(),clearTimeout(U)})},function(R){if(R.name&&R.name=="cancel")l.h();else{var U=Vh(R);switch(R=Ze(U),U.code){case"auth/credential-already-in-use":l.h();break;case"auth/code-expired":U=_t(l),l.h(),l.m(),ce("phoneSignInStart",s,U,d,R);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":l.h(),v(R);break;default:l.h(),l.a(R)}}}))):v(Le("Wrong code. Try again.").toString())}He.phoneSignInFinish=function(s,l,d,p,v,y){var R=new uc(function(){R.m(),ce("phoneSignInStart",s,l,d)},function(){x6(s,R,d,v)},function(){R.m(),st(s,l)},function(){R.m(),ce("phoneSignInStart",s,l,d)},C0(d),p,Gt(Q(s)),Wt(Q(s)));R.render(l),ke(s,R),y&&R.a(y)};var N6=!vt&&!(Pe("Safari")&&!(vu()||Pe("Coast")||Pe("Opera")||Pe("Edge")||Pe("Firefox")||Pe("FxiOS")||Pe("Silk")||Pe("Android")));function ev(s,l){return/-[a-z]/.test(l)?null:N6&&s.dataset?!Pe("Android")||vu()||Pe("Firefox")||Pe("FxiOS")||Pe("Opera")||Pe("Silk")||l in s.dataset?(s=s.dataset[l],s===void 0?null:s):null:s.getAttribute("data-"+String(l).replace(/([A-Z])/g,"-$1").toLowerCase())}function D6(s,l,d){var p=this;s=ks(TR,{items:s},null,this.s),bR.call(this,s,!0,!0),d&&(d=O6(s,d))&&(d.focus(),a6(d,s)),At(this,s,function(v){(v=(v=uh(v.target,"firebaseui-id-list-box-dialog-button"))&&ev(v,"listboxid"))&&(zg.call(p),l(v))})}function O6(s,l){s=(s||document).getElementsByTagName("BUTTON");for(var d=0;d<s.length;d++)if(ev(s[d],"listboxid")===l)return s[d];return null}function Za(){return ze(this,"firebaseui-id-phone-number")}function BP(){return ze(this,"firebaseui-id-country-selector")}function J0(){return ze(this,"firebaseui-id-phone-number-error")}function L6(s,l){var d=s.a,p=X0("1-US-0",d),v=null;if(l&&X0(l,d)?v=l:p?v="1-US-0":v=0<d.length?d[0].c:null,!v)throw Error("No available default country");tv.call(this,v,s)}function X0(s,l){return s=Ya(s),!(!s||!Dt(l,s))}function M6(s){return s.map(function(l){return{id:l.c,Ma:"firebaseui-flag "+Z0(l),label:l.name+" "+("‎+"+l.b)}})}function Z0(s){return"firebaseui-flag-"+s.f}function V6(s){var l=this;D6.call(this,M6(s.a),function(d){tv.call(l,d,s,!0),l.O().focus()},this.Ba)}function tv(s,l,d){var p=Ya(s);p&&(d&&(d=Pn(gn(Za.call(this))||""),l=Ng(l,d),l.length&&l[0].b!=p.b&&(d="+"+p.b+d.substr(l[0].b.length+1),ZA(Za.call(this),d))),l=Ya(this.Ba),this.Ba=s,s=ze(this,"firebaseui-id-country-selector-flag"),l&&Xr(s,Z0(l)),Jr(s,Z0(p)),Su(ze(this,"firebaseui-id-country-selector-code"),"‎+"+p.b))}function Zh(s,l,d,p,v,y,R,U,q,X){K.call(this,uP,{Gb:l,Aa:q||null,Va:!!d,ia:!!y},X,"phoneSignInStart",{F:p,D:v}),this.H=U||null,this.M=l,this.l=s,this.w=d||null,this.pa=R||null}u(Zh,K),Zh.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||Lh(this,this.O(),this.i()),nc(this,this.i(),this.l),this.O().focus(),Xg(this.O(),(this.O().value||"").length),K.prototype.v.call(this)},Zh.prototype.o=function(){this.w=this.l=null,K.prototype.o.call(this)},N(Zh.prototype,{Cb:z0,O:Za,B:J0,ea:function(s,l,d){var p=this,v=Za.call(this),y=BP.call(this),R=J0.call(this),U=s||bh,q=U.a;if(q.length==0)throw Error("No available countries provided.");L6.call(p,U,l),At(this,y,function(){V6.call(p,U)}),Xu(this,v,function(){Zu(R)&&(Lt(v,!0),xi(R));var X=Pn(gn(v)||""),fe=Ya(this.Ba),Je=Ng(U,X);X=X0("1-US-0",q),Je.length&&Je[0].b!=fe.b&&(fe=Je[0],tv.call(p,fe.b=="1"&&X?"1-US-0":fe.c,U))}),d&&Oh(this,v,function(){d()})},U:function(s){var l=Pn(gn(Za.call(this))||"");s=s||bh;var d=s.a,p=Ng(bh,l);if(p.length&&!Dt(d,p[0]))throw ZA(Za.call(this)),Za.call(this).focus(),vn(J0.call(this),Le("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return d=Ya(this.Ba),p.length&&p[0].b!=d.b&&tv.call(this,p[0].c,s),p.length&&(l=l.substr(p[0].b.length+1)),l?new VA(this.Ba,l):null},Ja:BP,ba:function(){return ze(this,"firebaseui-recaptcha-container")},u:function(){return ze(this,"firebaseui-id-recaptcha-error")},i:ln,ua:en,P:yn});function jP(s,l,d,p){try{var v=l.U(O0)}catch{return}v?Rh?(l.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",Le("Verifying...").toString()),Ce(s,l.I(O(s.cc,s),[C0(v),d],function(y){var R=_t(l);l.$("firebaseui-icon-done",Le("Code sent!").toString());var U=setTimeout(function(){l.h(),l.m(),ce("phoneSignInFinish",s,R,v,15,y)},1e3);Ce(s,function(){l&&l.h(),clearTimeout(U)})},function(y){if(l.h(),!y.name||y.name!="cancel"){grecaptcha.reset(JA),Rh=null;var R=y&&y.message||"";if(y.code)switch(y.code){case"auth/too-many-requests":R=Le("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":l.O().focus(),vn(l.B(),x().toString());return;case"auth/admin-restricted-operation":if(Ja(Q(s))){y=_t(l),l.m(),ce("handleUnauthorizedUser",s,y,C0(v),pe.auth.PhoneAuthProvider.PROVIDER_ID);return}R=Ze(y);break;default:R=Ze(y)}l.a(R)}}))):Wu?vn(l.u(),Le("Solve the reCAPTCHA").toString()):!Wu&&p&&l.i().click():(l.O().focus(),vn(l.B(),x().toString()))}He.phoneSignInStart=function(s,l,d,p){var v=HU(Q(s))||{};Rh=null,Wu=!(v&&v.size==="invisible");var y=RP(s),R=ZU(Q(s)),U=y?XU(Q(s)):null;R=d&&d.a||R&&R.c||null,d=d&&d.Aa||U,(U=A0(Q(s)))&&MA(U),O0=U?new DA(A0(Q(s))):bh;var q=new Zh(function(fe){jP(s,q,X,!(!fe||!fe.keyCode))},Wu,y?null:function(){X.clear(),q.m(),st(s,l)},Gt(Q(s)),Wt(Q(s)),y,O0,R,d);q.render(l),ke(s,q),p&&q.a(p),v.callback=function(fe){q.u()&&xi(q.u()),Rh=fe,Wu||jP(s,q,X)},v["expired-callback"]=function(){Rh=null};var X=new pe.auth.RecaptchaVerifier(Wu?q.ba():q.i(),v,wr(s).app);Ce(s,q.I(O(X.render,X),[],function(fe){JA=fe},function(fe){fe.name&&fe.name=="cancel"||(fe=Ze(fe),q.m(),st(s,l,void 0,fe))}))},He.prefilledEmailSignIn=function(s,l,d){var p=new Zg;p.render(l),ke(s,p),Ce(s,p.I(O(Me(s).fetchSignInMethodsForEmail,Me(s)),[d],function(v){p.m();var y=!(!Hg(s)||!qP(s));kP(s,l,v,d,void 0,y)},function(v){v=Ze(v),p.m(),ce("signIn",s,l,d,v)}))};function ef(s,l,d,p,v){K.call(this,lP,{Sb:l},v,"providerSignIn",{F:d,D:p}),this.i=s}u(ef,K),ef.prototype.v=function(){this.l(this.i),K.prototype.v.call(this)},ef.prototype.o=function(){this.i=null,K.prototype.o.call(this)},N(ef.prototype,{l:function(s){function l(R){s(R)}for(var d=this.g?As("firebaseui-id-idp-button",this.g||this.s.a):[],p=0;p<d.length;p++){var v=d[p],y=ev(v,"providerId");At(this,v,V(l,y))}}}),He.providerSignIn=function(s,l,d,p){var v=new ef(function(y){y==pe.auth.EmailAuthProvider.PROVIDER_ID?(v.m(),G0(s,l,p)):y==pe.auth.PhoneAuthProvider.PROVIDER_ID?(v.m(),ce("phoneSignInStart",s,l)):y=="anonymous"?m6(s,v):Fh(s,v,y,p),$e(s),s.l.cancel()},jA(Q(s)),Gt(Q(s)),Wt(Q(s)));v.render(l),ke(s,v),d&&v.a(d),B6(s)},He.sendEmailLinkForSignIn=function(s,l,d,p){var v=new Kg;v.render(l),ke(s,v),q0(s,v,d,p,function(y){v.m(),y&&y.code=="auth/admin-restricted-operation"&&Ja(Q(s))?ce("handleUnauthorizedUser",s,l,d,pe.auth.EmailAuthProvider.PROVIDER_ID):(y=Ze(y),ce("signIn",s,l,d,y))})};function tf(s,l,d,p,v,y,R){K.call(this,PR,{email:d,Va:!!l,ia:!!y},R,"signIn",{F:p,D:v}),this.i=s,this.u=l}u(tf,K),tf.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Xg(this.l(),(this.l().value||"").length),K.prototype.v.call(this)},tf.prototype.o=function(){this.u=this.i=null,K.prototype.o.call(this)},N(tf.prototype,{l:Os,M:Po,w:rc,H:sc,j:oc,U:ln,P:en,B:yn}),He.signIn=function(s,l,d,p){var v=Hg(s),y=new tf(function(){var R=y,U=R.j()||"";U&&PP(s,R,U)},v?null:function(){y.m(),st(s,l,d)},d,Gt(Q(s)),Wt(Q(s)),v);y.render(l),ke(s,y),p&&y.a(p)};function nf(s,l,d,p,v,y,R){K.call(this,WR,{kc:s,yb:d,Eb:!!p},R,"unauthorizedUser",{F:v,D:y}),this.l=l,this.i=p}u(nf,K),nf.prototype.v=function(){var s=this,l=ze(this,"firebaseui-id-unauthorized-user-help-link");this.i&&l&&At(this,l,function(){s.i()}),At(this,this.u(),function(){s.l()}),this.u().focus(),K.prototype.v.call(this)},nf.prototype.o=function(){this.i=this.l=null,K.prototype.o.call(this)},N(nf.prototype,{u:en}),He.handleUnauthorizedUser=function(s,l,d,p){function v(){st(s,l)}p===pe.auth.EmailAuthProvider.PROVIDER_ID?v=function(){G0(s,l)}:p===pe.auth.PhoneAuthProvider.PROVIDER_ID&&(v=function(){ce("phoneSignInStart",s,l)});var y=null,R=null;p===pe.auth.EmailAuthProvider.PROVIDER_ID&&$A(Q(s))?(y=YU(Q(s)),R=JU(Q(s))):Ja(Q(s))&&(y=KU(Q(s)),R=QU(Q(s)));var U=new nf(d,function(){U.m(),v()},y,R,Gt(Q(s)),Wt(Q(s)));U.render(l),ke(s,U)};function rf(s,l,d,p,v,y){K.call(this,HR,{email:s},y,"unsupportedProvider",{F:p,D:v}),this.l=l,this.i=d}u(rf,K),rf.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),K.prototype.v.call(this)},rf.prototype.o=function(){this.i=this.l=null,K.prototype.o.call(this)},N(rf.prototype,{u:ln,B:en,w:yn}),He.unsupportedProvider=function(s,l,d){var p=new rf(d,function(){p.m(),ce("passwordRecovery",s,l,d)},function(){p.m(),st(s,l,d)},Gt(Q(s)),Wt(Q(s)));p.render(l),ke(s,p)};function Zr(s,l){this.$=!1;var d=eE(l);if(sf[d])throw Error('An AuthUI instance already exists for the key "'+d+'"');sf[d]=this,this.a=s,this.u=null,this.Y=!1,zP(this.a),this.h=pe.initializeApp({apiKey:s.app.options.apiKey,authDomain:s.app.options.authDomain},s.app.name+"-firebaseui-temp").auth(),(s=s.emulatorConfig)&&(d=s.port,this.h.useEmulator(s.protocol+"://"+s.host+(d===null?"":":"+d),s.options)),zP(this.h),this.h.setPersistence&&this.h.setPersistence(pe.auth.Auth.Persistence.SESSION),this.oa=l,this.ca=new WU,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=s0.Xa(),this.j=this.C=null,this.da=this.A=!1}function zP(s){s&&s.INTERNAL&&s.INTERNAL.logFramework&&s.INTERNAL.logFramework("FirebaseUI-web")}var sf={};function eE(s){return s||"[DEFAULT]"}function $P(s){return $e(s),s.i||(s.i=Ms(s,function(l){return l&&!Qr(Ee(s))?Ot(wr(s).getRedirectResult().then(function(d){return d},function(d){if(d&&d.code=="auth/email-already-in-use"&&d.email&&d.credential)throw d;return xo(s,d)})):Ot(Me(s).getRedirectResult().then(function(d){return Dg(Q(s))&&!d.user&&s.j&&!s.j.isAnonymous?wr(s).getRedirectResult():d}))})),s.i}function ke(s,l){$e(s),s.g=l}var cc=null;function Me(s){return $e(s),s.h}function wr(s){return $e(s),s.a}function Ee(s){return $e(s),s.oa}function qP(s){return $e(s),s.O?s.O.emailHint:void 0}t=Zr.prototype,t.nb=function(){return $e(this),!!E0(Ee(this))||GP(Ds())};function GP(s){return s=new jn(s),(s.a.a.get(bt.ub)||null)==="signIn"&&!!s.a.a.get(bt.$a)}t.start=function(s,l){WP(this,s,l)};function WP(s,l,d,p){$e(s),typeof s.a.languageCode<"u"&&(s.u=s.a.languageCode);var v="en".replace(/_/g,"-");s.a.languageCode=v,s.h.languageCode=v,s.Y=!0,typeof s.a.tenantId<"u"&&(s.h.tenantId=s.a.tenantId),s.ib(d),s.O=p||null;var y=g.document;s.C?s.C.then(function(){y.readyState=="complete"?nv(s,l):mh(window,"load",function(){nv(s,l)})}):y.readyState=="complete"?nv(s,l):mh(window,"load",function(){nv(s,l)})}function nv(s,l){var d=dg(l,"Could not find the FirebaseUI widget element on the page.");if(d.setAttribute("lang","en".replace(/_/g,"-")),cc){var p=cc;$e(p),Qr(Ee(p))&&Ao("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),cc.reset()}if(cc=s,s.T=d,U6(s,d),xg(new v0)&&xg(new y0)){l=dg(l,"Could not find the FirebaseUI widget element on the page."),d=Ds(),p=S0(Q(s).a,"queryParameterForSignInSuccessUrl"),d=(d=zr(d,p))?Gr(Iu(d)).toString():null;e:{p=Ds();var v=WA(Q(s));p=zr(p,v)||"";for(y in D0)if(D0[y].toLowerCase()==p.toLowerCase()){var y=D0[y];break e}y="callback"}switch(y){case"callback":d&&(y=Ee(s),zu(Th,d,y)),s.nb()?ce("callback",s,l):st(s,l,qP(s));break;case"resetPassword":ce("passwordReset",s,l,Uh(),W0());break;case"recoverEmail":ce("emailChangeRevocation",s,l,Uh());break;case"revertSecondFactorAddition":ce("revertSecondFactorAddition",s,l,Uh());break;case"verifyEmail":ce("emailVerification",s,l,Uh(),W0());break;case"verifyAndChangeEmail":ce("verifyAndChangeEmail",s,l,Uh(),W0());break;case"signIn":ce("emailLinkSignInCallback",s,l,Ds()),YP();break;case"select":d&&(y=Ee(s),zu(Th,d,y)),st(s,l);break;default:throw Error("Unhandled widget operation.")}l=Q(s),(l=Ah(l).uiShown||null)&&l()}else l=dg(l,"Could not find the FirebaseUI widget element on the page."),y=new CP(Le("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),y.render(l),ke(s,y);l=s.g&&s.g.Ga=="blank"&&R0(Q(s)),E0(Ee(s))&&!l&&(l=E0(Ee(s)),QP(s,l.a),hi(Qa,Ee(s)))}function Ms(s,l){if(s.A)return l(HP(s));if(Ce(s,function(){s.A=!1}),Dg(Q(s))){var d=new Zt(function(p){Ce(s,s.a.onAuthStateChanged(function(v){s.j=v,s.A||(s.A=!0,p(l(HP(s))))}))});return Ce(s,d),d}return s.A=!0,l(null)}function HP(s){return $e(s),Dg(Q(s))&&s.j&&s.j.isAnonymous?s.j:null}function Ce(s,l){if($e(s),l){s.s.push(l);var d=function(){uu(s.s,function(p){return p==l})};typeof l!="function"&&l.then(d,d)}}t.Db=function(){$e(this),this.Z=!0};function F6(s){$e(s);var l;return(l=s.Z)||(s=Q(s),s=GA(s,pe.auth.GoogleAuthProvider.PROVIDER_ID),l=!(!s||s.prompt!=="select_account")),l}function KP(s){typeof s.a.languageCode<"u"&&s.Y&&(s.Y=!1,s.a.languageCode=s.u)}function QP(s,l){s.a.tenantId=l,s.h.tenantId=l}t.reset=function(){$e(this);var s=this;this.T&&this.T.removeAttribute("lang"),this.J&&_U(this.J),KP(this),this.O=null,YP(),hi(Qa,Ee(this)),$e(this),this.l.cancel(),this.i=Ot({user:null,credential:null}),cc==this&&(cc=null),this.T=null;for(var l=0;l<this.s.length;l++)typeof this.s[l]=="function"?this.s[l]():this.s[l].cancel&&this.s[l].cancel();this.s=[],Yr(Ee(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=ko(this).then(function(){s.C=null},function(){s.C=null}))};function U6(s,l){s.L=null,s.J=new ug(l),s.J.register(),yr(s.J,"pageEnter",function(d){if(d=d&&d.pageId,s.L!=d){var p=Q(s);(p=Ah(p).uiChanged||null)&&p(s.L,d),s.L=d}})}t.ib=function(s){$e(this);var l=this.ca,d;for(d in s)try{T0(l.a,d,s[d])}catch{Pi('Invalid config: "'+d+'"',void 0)}nh&&T0(l.a,"popupMode",!1),A0(l),!this.da&&P0(Q(this))&&(Ao("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)};function Q(s){return $e(s),s.ca}t.Wb=function(){$e(this);var s=Q(this),l=S0(s.a,"widgetUrl");s=WA(s);for(var d=l.search(Xd),p=0,v,y=[];0<=(v=Jd(l,p,s,d));)y.push(l.substring(p,v)),p=Math.min(l.indexOf("&",v)+1||d,d);y.push(l.substr(p)),l=y.join("").replace(Zd,"$1"),d="="+encodeURIComponent("select"),(s+=d)?(d=l.indexOf("#"),0>d&&(d=l.length),p=l.indexOf("?"),0>p||p>d?(p=d,v=""):v=l.substring(p+1,d),l=[l.substr(0,p),v,l.substr(d)],d=l[1],l[1]=s?d?d+"&"+s:s:d,d=l[0]+(l[1]?"?"+l[1]:"")+l[2]):d=l,Q(this).a.get("popupMode")?(s=(window.screen.availHeight-600)/2,l=(window.screen.availWidth-500)/2,d=d||"about:blank",s={width:500,height:600,top:0<s?s:0,left:0<l?l:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},s.target=s.target||d.target||"google_popup",s.width=s.width||690,s.height=s.height||500,(s=HC(d,s))&&s.focus()):yo(window.location,d)};function $e(s){if(s.$)throw Error("AuthUI instance is deleted!")}t.Wa=function(){var s=this;return $e(this),this.h.app.delete().then(function(){var l=eE(Ee(s));delete sf[l],s.reset(),s.$=!0})};function B6(s){$e(s);try{ZC(s.l,zA(Q(s)),F6(s)).then(function(l){return s.g?g6(s,s.g,l):!1})}catch{}}t.Ib=function(s,l){$e(this);var d=this,p=CU();if(!Gu(Q(this)))return Nu(Error("Email link sign-in should be enabled to trigger email sending."));var v=t6(Q(this)),y=new jn(v.url);return Wm(y,p),l&&l.a&&(GU(p,l,Ee(this)),gu(y,l.a.providerId)),Hm(y,e6(Q(this))),Ms(this,function(R){return R&&((R=R.uid)?y.a.a.set(bt.Pa,R):Is(y.a.a,bt.Pa)),v.url=y.toString(),Me(d).sendSignInLinkToEmail(s,v)}).then(function(){var R=Ee(d),U={};U.email=s,zu(Bu,wA(p,JSON.stringify(U)),R)},function(R){throw hi(Sh,Ee(d)),hi(Bu,Ee(d)),R})};function j6(s,l){var d=mu(new jn(l));return d?(l=new Zt(function(p,v){var y=wr(s).onAuthStateChanged(function(R){y(),R&&R.isAnonymous&&R.uid===d?p(R):R&&R.isAnonymous&&R.uid!==d?v(Error("anonymous-user-mismatch")):v(Error("anonymous-user-not-found"))});Ce(s,y)}),Ce(s,l),l):Ot(null)}function z6(s,l,d,p,v){$e(s);var y=v||null,R=pe.auth.EmailAuthProvider.credentialWithLink(d,p);return d=y?Me(s).signInWithEmailLink(d,p).then(function(U){return U.user.linkWithCredential(y)}).then(function(){return ko(s)}).then(function(){return xo(s,{code:"auth/email-already-in-use"},y)}):Me(s).fetchSignInMethodsForEmail(d).then(function(U){return U.length?xo(s,{code:"auth/email-already-in-use"},R):l.linkWithCredential(R)}),Ce(s,d),d}function $6(s,l,d,p){$e(s);var v=p||null,y;return l=Me(s).signInWithEmailLink(l,d).then(function(R){if(y={user:R.user,credential:null,operationType:R.operationType,additionalUserInfo:R.additionalUserInfo},v)return R.user.linkWithCredential(v).then(function(U){y={user:U.user,credential:v,operationType:y.operationType,additionalUserInfo:U.additionalUserInfo}})}).then(function(){ko(s)}).then(function(){return wr(s).updateCurrentUser(y.user)}).then(function(){return y.user=wr(s).currentUser,y}),Ce(s,l),l}function YP(){var s=Ds();if(GP(s)){s=new jn(s);for(var l in bt)bt.hasOwnProperty(l)&&Is(s.a.a,bt[l]);l={state:"signIn",mode:"emailLink",operation:"clear"};var d=g.document.title;g.history&&g.history.replaceState&&g.history.replaceState(l,d,s.toString())}}t.bc=function(s,l){$e(this);var d=this;return Me(this).signInWithEmailAndPassword(s,l).then(function(p){return Ms(d,function(v){return v?ko(d).then(function(){return xo(d,{code:"auth/email-already-in-use"},pe.auth.EmailAuthProvider.credential(s,l))}):p})})},t.Yb=function(s,l){$e(this);var d=this;return Ms(this,function(p){if(p){var v=pe.auth.EmailAuthProvider.credential(s,l);return p.linkWithCredential(v)}return Me(d).createUserWithEmailAndPassword(s,l)})},t.ac=function(s){$e(this);var l=this;return Ms(this,function(d){return d?d.linkWithCredential(s).then(function(p){return p},function(p){if(p&&p.code=="auth/email-already-in-use"&&p.email&&p.credential)throw p;return xo(l,p,s)}):Me(l).signInWithCredential(s)})};function q6(s,l){return $e(s),Ms(s,function(d){return d&&!Qr(Ee(s))?d.linkWithPopup(l).then(function(p){return p},function(p){if(p&&p.code=="auth/email-already-in-use"&&p.email&&p.credential)throw p;return xo(s,p)}):Me(s).signInWithPopup(l)})}t.dc=function(s){$e(this);var l=this,d=this.i;return this.i=null,Ms(this,function(p){return p&&!Qr(Ee(l))?p.linkWithRedirect(s):Me(l).signInWithRedirect(s)}).then(function(){},function(p){throw l.i=d,p})},t.cc=function(s,l){$e(this);var d=this;return Ms(this,function(p){return p?p.linkWithPhoneNumber(s,l).then(function(v){return new a0(v,function(y){if(y.code=="auth/credential-already-in-use")return xo(d,y);throw y})}):wr(d).signInWithPhoneNumber(s,l).then(function(v){return new a0(v)})})},t.$b=function(){return $e(this),wr(this).signInAnonymously()};function G6(s,l){return $e(s),Ms(s,function(d){if(s.j&&!s.j.isAnonymous&&Dg(Q(s))&&!Me(s).currentUser)return ko(s).then(function(){return l.credential.providerId=="password"&&(l.credential=null),l});if(d)return ko(s).then(function(){return d.linkWithCredential(l.credential)}).then(function(p){return l.user=p.user,l.credential=p.credential,l.operationType=p.operationType,l.additionalUserInfo=p.additionalUserInfo,l},function(p){if(p&&p.code=="auth/email-already-in-use"&&p.email&&p.credential)throw p;return xo(s,p,l.credential)});if(!l.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return ko(s).then(function(){return wr(s).updateCurrentUser(l.user)}).then(function(){return l.user=wr(s).currentUser,l.operationType="signIn",l.credential&&l.credential.providerId&&l.credential.providerId=="password"&&(l.credential=null),l})})}t.Xb=function(s,l){return $e(this),Me(this).signInWithEmailAndPassword(s,l)};function ko(s){return $e(s),Me(s).signOut()}function xo(s,l,d){if($e(s),l&&l.code&&(l.code=="auth/email-already-in-use"||l.code=="auth/credential-already-in-use")){var p=YA(Q(s));return Ot().then(function(){return p(new xe("anonymous-upgrade-merge-conflict",null,d||l.credential))}).then(function(){throw s.g&&(s.g.m(),s.g=null),l})}return Nu(l)}function of(s,l,d,p){K.call(this,fP,void 0,p,"providerMatchByEmail",{F:l,D:d}),this.i=s}u(of,K),of.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Xg(this.l(),(this.l().value||"").length),K.prototype.v.call(this)},of.prototype.o=function(){this.i=null,K.prototype.o.call(this)},N(of.prototype,{l:Os,H:Po,u:rc,B:sc,j:oc,M:ln,w:yn});function iv(s,l,d,p,v){K.call(this,hP,{ec:l},v,"selectTenant",{F:d,D:p}),this.i=s}u(iv,K),iv.prototype.v=function(){W6(this,this.i),K.prototype.v.call(this)},iv.prototype.o=function(){this.i=null,K.prototype.o.call(this)};function W6(s,l){function d(U){l(U)}for(var p=s.g?As("firebaseui-id-tenant-selection-button",s.g||s.s.a):[],v=0;v<p.length;v++){var y=p[v],R=ev(y,"tenantId");At(s,y,V(d,R))}}function tE(s){K.call(this,LR,void 0,s,"spinner")}u(tE,K);function H6(s){this.a=new I0,qt(this.a,"authDomain"),qt(this.a,"displayMode",sv),qt(this.a,"tenants"),qt(this.a,"callbacks"),qt(this.a,"tosUrl"),qt(this.a,"privacyPolicyUrl");for(var l in s)if(s.hasOwnProperty(l))try{T0(this.a,l,s[l])}catch{Pi('Invalid config: "'+l+'"',void 0)}}function K6(s){s=s.a.get("displayMode");for(var l in iE)if(iE[l]===s)return iE[l];return sv}function rv(s){return s.a.get("callbacks")||{}}function JP(s){var l=s.a.get("tosUrl")||null;if(s=s.a.get("privacyPolicyUrl")||null,l&&!s&&Ao("Privacy Policy URL is missing, the link will not be displayed."),l&&s){if(typeof l=="function")return l;if(typeof l=="string")return function(){Ou(l)}}return null}function XP(s){var l=s.a.get("tosUrl")||null,d=s.a.get("privacyPolicyUrl")||null;if(d&&!l&&Ao("Terms of Service URL is missing, the link will not be displayed."),l&&d){if(typeof d=="function")return d;if(typeof d=="string")return function(){Ou(d)}}return null}function nE(s,l){if(s=s.a.get("tenants"),!s||!s.hasOwnProperty(l)&&!s.hasOwnProperty(ov))throw Error("Invalid tenant configuration!")}function ZP(s,l,d){if(s=s.a.get("tenants"),!s)throw Error("Invalid tenant configuration!");var p=[];if(s=s[l]||s[ov],!s)return Pi("Invalid tenant configuration: "+(l+" is not configured!"),void 0),p;if(l=s.signInOptions,!l)throw Error("Invalid tenant configuration: signInOptions are invalid!");return l.forEach(function(v){if(typeof v=="string")p.push(v);else if(typeof v.provider=="string"){var y=v.hd;y&&d?(y instanceof RegExp?y:new RegExp("@"+y.replace(".","\\.")+"$")).test(d)&&p.push(v.provider):p.push(v.provider)}else v="Invalid tenant configuration: signInOption "+(JSON.stringify(v)+" is invalid!"),Pi(v,void 0)}),p}function Q6(s,l,d){return s=Y6(s,l),(l=s.signInOptions)&&d&&(l=l.filter(function(p){return typeof p=="string"?d.includes(p):d.includes(p.provider)}),s.signInOptions=l),s}function Y6(s,l){var d=J6,p=p===void 0?{}:p;return nE(s,l),s=s.a.get("tenants"),AU(s[l]||s[ov],d,p)}var J6=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],sv="optionFirst",iE={pc:sv,oc:"identifierFirst"},ov="*";function Er(s,l){var d=this;this.s=dg(s),this.a={},Object.keys(l).forEach(function(p){d.a[p]=new H6(l[p])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(p){this.ob=p||null},enumerable:!1})}t=Er.prototype,t.Ub=function(s,l){var d=this;No(this);var p=s.apiKey;return new Zt(function(v,y){if(d.a.hasOwnProperty(p)){var R=rv(d.a[p]).selectTenantUiHidden||null;if(K6(d.a[p])===sv){var U=[];l.forEach(function(fe){fe=fe||"_";var Je=d.a[p].a.get("tenants");if(!Je)throw Error("Invalid tenant configuration!");(Je=Je[fe]||Je[ov])?fe={tenantId:fe!=="_"?fe:null,V:Je.fullLabel||null,displayName:Je.displayName,za:Je.iconUrl,ta:Je.buttonColor}:(Pi("Invalid tenant configuration: "+(fe+" is not configured!"),void 0),fe=null),fe&&U.push(fe)});var q=function(fe){fe={tenantId:fe,providerIds:ZP(d.a[p],fe||"_")},v(fe)};if(U.length===1){q(U[0].tenantId);return}d.g=new iv(function(fe){No(d),R&&R(),q(fe)},U,JP(d.a[p]),XP(d.a[p]))}else d.g=new of(function(){var fe=d.g.j();if(fe){for(var Je=0;Je<l.length;Je++){var Ir=ZP(d.a[p],l[Je]||"_",fe);if(Ir.length!==0){fe={tenantId:l[Je],providerIds:Ir,email:fe},No(d),R&&R(),v(fe);return}}d.g.a(Qe({code:"no-matching-tenant-for-email"}).toString())}},JP(d.a[p]),XP(d.a[p]));d.g.render(d.s),(y=rv(d.a[p]).selectTenantUiShown||null)&&y()}else{var X=Error("Invalid project configuration: API key is invalid!");X.code="invalid-configuration",d.pb(X),y(X)}})},t.Pb=function(s,l){if(!this.a.hasOwnProperty(s))throw Error("Invalid project configuration: API key is invalid!");var d=l||void 0;nE(this.a[s],l||"_");try{this.i=pe.app(d).auth()}catch{var p=this.a[s].a.get("authDomain");if(!p)throw Error("Invalid project configuration: authDomain is required!");s=pe.initializeApp({apiKey:s,authDomain:p},d),s.auth().tenantId=l,this.i=s.auth()}return this.i},t.Zb=function(s,l){var d=this;return new Zt(function(p,v){function y(Je,Ir){d.j=new Zr(s),WP(d.j,d.s,Je,Ir)}var R=s.app.options.apiKey;d.a.hasOwnProperty(R)||v(Error("Invalid project configuration: API key is invalid!"));var U=Q6(d.a[R],s.tenantId||"_",l&&l.providerIds);No(d),v={signInSuccessWithAuthResult:function(Je){return p(Je),!1}};var q=rv(d.a[R]).signInUiShown||null,X=!1;v.uiChanged=function(Je,Ir){Je===null&&Ir==="callback"?((Je=Rs("firebaseui-id-page-callback",d.s))&&xi(Je),d.h=new tE,d.h.render(d.s)):X||Je===null&&Ir==="spinner"||Ir==="blank"||(d.h&&(d.h.m(),d.h=null),X=!0,q&&q(s.tenantId))},U.callbacks=v,U.credentialHelper="none";var fe;l&&l.email&&(fe={emailHint:l.email}),d.j?d.j.Wa().then(function(){y(U,fe)}):y(U,fe)})},t.reset=function(){var s=this;return Ot().then(function(){s.j&&s.j.Wa()}).then(function(){s.j=null,No(s)})},t.Vb=function(){var s=this;this.h||this.A||(this.A=window.setTimeout(function(){No(s),s.h=new tE,s.g=s.h,s.h.render(s.s),s.A=null},500))},t.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},t.Bb=function(){return No(this),this.g=new EP,this.g.render(this.s),Ot()};function No(s){s.j&&s.j.reset(),s.mb(),s.g&&s.g.m()}t.pb=function(s){var l=this,d=Qe({code:s.code}).toString()||s.message;No(this);var p;s.retry&&typeof s.retry=="function"&&(p=function(){l.reset(),s.retry()}),this.g=new bP(d,p),this.g.render(this.s)},t.Rb=function(s){var l=this;return Ot().then(function(){var d=l.i&&l.i.app.options.apiKey;if(!l.a.hasOwnProperty(d))throw Error("Invalid project configuration: API key is invalid!");if(nE(l.a[d],s.tenantId||"_"),!l.i.currentUser||l.i.currentUser.uid!==s.uid)throw Error("The user being processed does not match the signed in user!");return(d=rv(l.a[d]).beforeSignInSuccess||null)?d(s):s}).then(function(d){if(d.uid!==s.uid)throw Error("User with mismatching UID returned.");return d})},Te("firebaseui.auth.FirebaseUiHandler",Er),Te("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Er.prototype.Ub),Te("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Er.prototype.Pb),Te("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Er.prototype.Zb),Te("firebaseui.auth.FirebaseUiHandler.prototype.reset",Er.prototype.reset),Te("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Er.prototype.Vb),Te("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Er.prototype.mb),Te("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Er.prototype.Bb),Te("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Er.prototype.pb),Te("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Er.prototype.Rb),Te("firebaseui.auth.AuthUI",Zr),Te("firebaseui.auth.AuthUI.getInstance",function(s){return s=eE(s),sf[s]?sf[s]:null}),Te("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Zr.prototype.Db),Te("firebaseui.auth.AuthUI.prototype.start",Zr.prototype.start),Te("firebaseui.auth.AuthUI.prototype.setConfig",Zr.prototype.ib),Te("firebaseui.auth.AuthUI.prototype.signIn",Zr.prototype.Wb),Te("firebaseui.auth.AuthUI.prototype.reset",Zr.prototype.reset),Te("firebaseui.auth.AuthUI.prototype.delete",Zr.prototype.Wa),Te("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Zr.prototype.nb),Te("firebaseui.auth.AuthUIError",xe),Te("firebaseui.auth.AuthUIError.prototype.toJSON",xe.prototype.toJSON),Te("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",k0),Te("firebaseui.auth.CredentialHelper.NONE",Lg),Te("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Zt.prototype.catch=Zt.prototype.Ca,Zt.prototype.finally=Zt.prototype.fc}).apply(typeof global<"u"?global:typeof self<"u"?self:window)}).apply(typeof global<"u"?global:typeof self<"u"?self:window);typeof window<"u"&&(window.dialogPolyfill=$ee);var qee=firebaseui.auth;const Gee={callbacks:{uiShown:()=>{const t=document.getElementById("loader");t&&(t.style.display="none")}},signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[pe.auth.EmailAuthProvider.PROVIDER_ID],tosUrl:"<your-tos-url>",privacyPolicyUrl:"<your-privacy-policy-url>"},Wee=new qee.AuthUI(Nw),Hee=t=>{Wee.start(t,Gee),console.log("FirebaseUI started.")},Kee=()=>(Se.useEffect(()=>{Hee("#firebaseui-auth-container")}),he.jsxs("div",{className:"container",children:[he.jsx("h1",{children:"Card Generator"}),he.jsx("div",{id:"firebaseui-auth-container"})]})),Qee=()=>{const[t,e]=Se.useState("dark"),n=()=>{pe.auth().signOut()},i=()=>{const r=t==="light"?"dark":"light";e(r),document.documentElement.setAttribute("data-theme",r)};return he.jsxs("nav",{className:"navbar",children:[he.jsx(aT,{onClick:n,text:"Signout",className:"signout"}),he.jsx(aT,{onClick:i,text:`${t==="light"?"Dark":"Light"}`,className:"signout"})]})},Yee=()=>{const[t,e]=Se.useState(null),[n,i]=Se.useState(!0);return Se.useEffect(()=>{const r=Nw.onAuthStateChanged(o=>{console.log("User authenticated:",o),e(o),i(!1)});return()=>r()},[]),n?he.jsx("div",{className:"spinner"}):he.jsxs("div",{className:"App",children:[t?he.jsx(Qee,{}):null,t?he.jsx(jee,{}):he.jsx(Kee,{})]})};uI.createRoot(document.getElementById("root")).render(he.jsx(nn.StrictMode,{children:he.jsx(Yee,{})}));
